(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(l){if(l.ep)return;l.ep=!0;const u=n(l);fetch(l.href,u)}})();var Qs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},z0={exports:{}},Ha={},G0={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qo=Symbol.for("react.element"),Ax=Symbol.for("react.portal"),Sx=Symbol.for("react.fragment"),vx=Symbol.for("react.strict_mode"),Ix=Symbol.for("react.profiler"),Tx=Symbol.for("react.provider"),Nx=Symbol.for("react.context"),Rx=Symbol.for("react.forward_ref"),bx=Symbol.for("react.suspense"),Ox=Symbol.for("react.memo"),Dx=Symbol.for("react.lazy"),N1=Symbol.iterator;function Mx(t){return t===null||typeof t!="object"?null:(t=N1&&t[N1]||t["@@iterator"],typeof t=="function"?t:null)}var j0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X0=Object.assign,Y0={};function Os(t,e,n){this.props=t,this.context=e,this.refs=Y0,this.updater=n||j0}Os.prototype.isReactComponent={};Os.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Os.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function K0(){}K0.prototype=Os.prototype;function Lf(t,e,n){this.props=t,this.context=e,this.refs=Y0,this.updater=n||j0}var Ff=Lf.prototype=new K0;Ff.constructor=Lf;X0(Ff,Os.prototype);Ff.isPureReactComponent=!0;var R1=Array.isArray,Z0=Object.prototype.hasOwnProperty,Uf={current:null},Q0={key:!0,ref:!0,__self:!0,__source:!0};function q0(t,e,n){var s,l={},u=null,d=null;if(e!=null)for(s in e.ref!==void 0&&(d=e.ref),e.key!==void 0&&(u=""+e.key),e)Z0.call(e,s)&&!Q0.hasOwnProperty(s)&&(l[s]=e[s]);var p=arguments.length-2;if(p===1)l.children=n;else if(1<p){for(var x=Array(p),w=0;w<p;w++)x[w]=arguments[w+2];l.children=x}if(t&&t.defaultProps)for(s in p=t.defaultProps,p)l[s]===void 0&&(l[s]=p[s]);return{$$typeof:Qo,type:t,key:u,ref:d,props:l,_owner:Uf.current}}function kx(t,e){return{$$typeof:Qo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Vf(t){return typeof t=="object"&&t!==null&&t.$$typeof===Qo}function Px(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var b1=/\/+/g;function Mc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Px(""+t.key):e.toString(36)}function zl(t,e,n,s,l){var u=typeof t;(u==="undefined"||u==="boolean")&&(t=null);var d=!1;if(t===null)d=!0;else switch(u){case"string":case"number":d=!0;break;case"object":switch(t.$$typeof){case Qo:case Ax:d=!0}}if(d)return d=t,l=l(d),t=s===""?"."+Mc(d,0):s,R1(l)?(n="",t!=null&&(n=t.replace(b1,"$&/")+"/"),zl(l,e,n,"",function(w){return w})):l!=null&&(Vf(l)&&(l=kx(l,n+(!l.key||d&&d.key===l.key?"":(""+l.key).replace(b1,"$&/")+"/")+t)),e.push(l)),1;if(d=0,s=s===""?".":s+":",R1(t))for(var p=0;p<t.length;p++){u=t[p];var x=s+Mc(u,p);d+=zl(u,e,n,x,l)}else if(x=Mx(t),typeof x=="function")for(t=x.call(t),p=0;!(u=t.next()).done;)u=u.value,x=s+Mc(u,p++),d+=zl(u,e,n,x,l);else if(u==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return d}function Cl(t,e,n){if(t==null)return t;var s=[],l=0;return zl(t,s,"","",function(u){return e.call(n,u,l++)}),s}function Bx(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var en={current:null},Gl={transition:null},Lx={ReactCurrentDispatcher:en,ReactCurrentBatchConfig:Gl,ReactCurrentOwner:Uf};function J0(){throw Error("act(...) is not supported in production builds of React.")}Ce.Children={map:Cl,forEach:function(t,e,n){Cl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Cl(t,function(){e++}),e},toArray:function(t){return Cl(t,function(e){return e})||[]},only:function(t){if(!Vf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ce.Component=Os;Ce.Fragment=Sx;Ce.Profiler=Ix;Ce.PureComponent=Lf;Ce.StrictMode=vx;Ce.Suspense=bx;Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Lx;Ce.act=J0;Ce.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=X0({},t.props),l=t.key,u=t.ref,d=t._owner;if(e!=null){if(e.ref!==void 0&&(u=e.ref,d=Uf.current),e.key!==void 0&&(l=""+e.key),t.type&&t.type.defaultProps)var p=t.type.defaultProps;for(x in e)Z0.call(e,x)&&!Q0.hasOwnProperty(x)&&(s[x]=e[x]===void 0&&p!==void 0?p[x]:e[x])}var x=arguments.length-2;if(x===1)s.children=n;else if(1<x){p=Array(x);for(var w=0;w<x;w++)p[w]=arguments[w+2];s.children=p}return{$$typeof:Qo,type:t.type,key:l,ref:u,props:s,_owner:d}};Ce.createContext=function(t){return t={$$typeof:Nx,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Tx,_context:t},t.Consumer=t};Ce.createElement=q0;Ce.createFactory=function(t){var e=q0.bind(null,t);return e.type=t,e};Ce.createRef=function(){return{current:null}};Ce.forwardRef=function(t){return{$$typeof:Rx,render:t}};Ce.isValidElement=Vf;Ce.lazy=function(t){return{$$typeof:Dx,_payload:{_status:-1,_result:t},_init:Bx}};Ce.memo=function(t,e){return{$$typeof:Ox,type:t,compare:e===void 0?null:e}};Ce.startTransition=function(t){var e=Gl.transition;Gl.transition={};try{t()}finally{Gl.transition=e}};Ce.unstable_act=J0;Ce.useCallback=function(t,e){return en.current.useCallback(t,e)};Ce.useContext=function(t){return en.current.useContext(t)};Ce.useDebugValue=function(){};Ce.useDeferredValue=function(t){return en.current.useDeferredValue(t)};Ce.useEffect=function(t,e){return en.current.useEffect(t,e)};Ce.useId=function(){return en.current.useId()};Ce.useImperativeHandle=function(t,e,n){return en.current.useImperativeHandle(t,e,n)};Ce.useInsertionEffect=function(t,e){return en.current.useInsertionEffect(t,e)};Ce.useLayoutEffect=function(t,e){return en.current.useLayoutEffect(t,e)};Ce.useMemo=function(t,e){return en.current.useMemo(t,e)};Ce.useReducer=function(t,e,n){return en.current.useReducer(t,e,n)};Ce.useRef=function(t){return en.current.useRef(t)};Ce.useState=function(t){return en.current.useState(t)};Ce.useSyncExternalStore=function(t,e,n){return en.current.useSyncExternalStore(t,e,n)};Ce.useTransition=function(){return en.current.useTransition()};Ce.version="18.3.1";G0.exports=Ce;var Ve=G0.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fx=Ve,Ux=Symbol.for("react.element"),Vx=Symbol.for("react.fragment"),Hx=Object.prototype.hasOwnProperty,Wx=Fx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zx={key:!0,ref:!0,__self:!0,__source:!0};function $0(t,e,n){var s,l={},u=null,d=null;n!==void 0&&(u=""+n),e.key!==void 0&&(u=""+e.key),e.ref!==void 0&&(d=e.ref);for(s in e)Hx.call(e,s)&&!zx.hasOwnProperty(s)&&(l[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)l[s]===void 0&&(l[s]=e[s]);return{$$typeof:Ux,type:t,key:u,ref:d,props:l,_owner:Wx.current}}Ha.Fragment=Vx;Ha.jsx=$0;Ha.jsxs=$0;z0.exports=Ha;var J=z0.exports,eg={exports:{}},Cn={},tg={exports:{}},ng={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ne,de){var re=ne.length;ne.push(de);e:for(;0<re;){var Re=re-1>>>1,Ee=ne[Re];if(0<l(Ee,de))ne[Re]=de,ne[re]=Ee,re=Re;else break e}}function n(ne){return ne.length===0?null:ne[0]}function s(ne){if(ne.length===0)return null;var de=ne[0],re=ne.pop();if(re!==de){ne[0]=re;e:for(var Re=0,Ee=ne.length,vn=Ee>>>1;Re<vn;){var st=2*(Re+1)-1,oi=ne[st],ae=st+1,Tr=ne[ae];if(0>l(oi,re))ae<Ee&&0>l(Tr,oi)?(ne[Re]=Tr,ne[ae]=re,Re=ae):(ne[Re]=oi,ne[st]=re,Re=st);else if(ae<Ee&&0>l(Tr,re))ne[Re]=Tr,ne[ae]=re,Re=ae;else break e}}return de}function l(ne,de){var re=ne.sortIndex-de.sortIndex;return re!==0?re:ne.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;t.unstable_now=function(){return u.now()}}else{var d=Date,p=d.now();t.unstable_now=function(){return d.now()-p}}var x=[],w=[],A=1,C=null,I=3,D=!1,k=!1,B=!1,ee=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(ne){for(var de=n(w);de!==null;){if(de.callback===null)s(w);else if(de.startTime<=ne)s(w),de.sortIndex=de.expirationTime,e(x,de);else break;de=n(w)}}function P(ne){if(B=!1,R(ne),!k)if(n(x)!==null)k=!0,je(X);else{var de=n(w);de!==null&&xe(P,de.startTime-ne)}}function X(ne,de){k=!1,B&&(B=!1,b(K),K=-1),D=!0;var re=I;try{for(R(de),C=n(x);C!==null&&(!(C.expirationTime>de)||ne&&!Se());){var Re=C.callback;if(typeof Re=="function"){C.callback=null,I=C.priorityLevel;var Ee=Re(C.expirationTime<=de);de=t.unstable_now(),typeof Ee=="function"?C.callback=Ee:C===n(x)&&s(x),R(de)}else s(x);C=n(x)}if(C!==null)var vn=!0;else{var st=n(w);st!==null&&xe(P,st.startTime-de),vn=!1}return vn}finally{C=null,I=re,D=!1}}var G=!1,F=null,K=-1,z=5,fe=-1;function Se(){return!(t.unstable_now()-fe<z)}function ce(){if(F!==null){var ne=t.unstable_now();fe=ne;var de=!0;try{de=F(!0,ne)}finally{de?me():(G=!1,F=null)}}else G=!1}var me;if(typeof N=="function")me=function(){N(ce)};else if(typeof MessageChannel<"u"){var it=new MessageChannel,W=it.port2;it.port1.onmessage=ce,me=function(){W.postMessage(null)}}else me=function(){ee(ce,0)};function je(ne){F=ne,G||(G=!0,me())}function xe(ne,de){K=ee(function(){ne(t.unstable_now())},de)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ne){ne.callback=null},t.unstable_continueExecution=function(){k||D||(k=!0,je(X))},t.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<ne?Math.floor(1e3/ne):5},t.unstable_getCurrentPriorityLevel=function(){return I},t.unstable_getFirstCallbackNode=function(){return n(x)},t.unstable_next=function(ne){switch(I){case 1:case 2:case 3:var de=3;break;default:de=I}var re=I;I=de;try{return ne()}finally{I=re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ne,de){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var re=I;I=ne;try{return de()}finally{I=re}},t.unstable_scheduleCallback=function(ne,de,re){var Re=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?Re+re:Re):re=Re,ne){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=re+Ee,ne={id:A++,callback:de,priorityLevel:ne,startTime:re,expirationTime:Ee,sortIndex:-1},re>Re?(ne.sortIndex=re,e(w,ne),n(x)===null&&ne===n(w)&&(B?(b(K),K=-1):B=!0,xe(P,re-Re))):(ne.sortIndex=Ee,e(x,ne),k||D||(k=!0,je(X))),ne},t.unstable_shouldYield=Se,t.unstable_wrapCallback=function(ne){var de=I;return function(){var re=I;I=de;try{return ne.apply(this,arguments)}finally{I=re}}}})(ng);tg.exports=ng;var Gx=tg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jx=Ve,En=Gx;function Z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var rg=new Set,No={};function Oi(t,e){xs(t,e),xs(t+"Capture",e)}function xs(t,e){for(No[t]=e,t=0;t<e.length;t++)rg.add(e[t])}var _r=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Au=Object.prototype.hasOwnProperty,Xx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,O1={},D1={};function Yx(t){return Au.call(D1,t)?!0:Au.call(O1,t)?!1:Xx.test(t)?D1[t]=!0:(O1[t]=!0,!1)}function Kx(t,e,n,s){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Zx(t,e,n,s){if(e===null||typeof e>"u"||Kx(t,e,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function tn(t,e,n,s,l,u,d){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=l,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=u,this.removeEmptyString=d}var Vt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Vt[t]=new tn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Vt[e]=new tn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Vt[t]=new tn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Vt[t]=new tn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Vt[t]=new tn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Vt[t]=new tn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Vt[t]=new tn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Vt[t]=new tn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Vt[t]=new tn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Hf=/[\-:]([a-z])/g;function Wf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Hf,Wf);Vt[e]=new tn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Hf,Wf);Vt[e]=new tn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Hf,Wf);Vt[e]=new tn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Vt[t]=new tn(t,1,!1,t.toLowerCase(),null,!1,!1)});Vt.xlinkHref=new tn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Vt[t]=new tn(t,1,!1,t.toLowerCase(),null,!0,!0)});function zf(t,e,n,s){var l=Vt.hasOwnProperty(e)?Vt[e]:null;(l!==null?l.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Zx(e,n,l,s)&&(n=null),s||l===null?Yx(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):l.mustUseProperty?t[l.propertyName]=n===null?l.type===3?!1:"":n:(e=l.attributeName,s=l.attributeNamespace,n===null?t.removeAttribute(e):(l=l.type,n=l===3||l===4&&n===!0?"":""+n,s?t.setAttributeNS(s,e,n):t.setAttribute(e,n))))}var vr=jx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Al=Symbol.for("react.element"),Yi=Symbol.for("react.portal"),Ki=Symbol.for("react.fragment"),Gf=Symbol.for("react.strict_mode"),Su=Symbol.for("react.profiler"),ig=Symbol.for("react.provider"),sg=Symbol.for("react.context"),jf=Symbol.for("react.forward_ref"),vu=Symbol.for("react.suspense"),Iu=Symbol.for("react.suspense_list"),Xf=Symbol.for("react.memo"),Br=Symbol.for("react.lazy"),og=Symbol.for("react.offscreen"),M1=Symbol.iterator;function qs(t){return t===null||typeof t!="object"?null:(t=M1&&t[M1]||t["@@iterator"],typeof t=="function"?t:null)}var ut=Object.assign,kc;function co(t){if(kc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);kc=e&&e[1]||""}return`
`+kc+t}var Pc=!1;function Bc(t,e){if(!t||Pc)return"";Pc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(w){var s=w}Reflect.construct(t,[],e)}else{try{e.call()}catch(w){s=w}t.call(e.prototype)}else{try{throw Error()}catch(w){s=w}t()}}catch(w){if(w&&s&&typeof w.stack=="string"){for(var l=w.stack.split(`
`),u=s.stack.split(`
`),d=l.length-1,p=u.length-1;1<=d&&0<=p&&l[d]!==u[p];)p--;for(;1<=d&&0<=p;d--,p--)if(l[d]!==u[p]){if(d!==1||p!==1)do if(d--,p--,0>p||l[d]!==u[p]){var x=`
`+l[d].replace(" at new "," at ");return t.displayName&&x.includes("<anonymous>")&&(x=x.replace("<anonymous>",t.displayName)),x}while(1<=d&&0<=p);break}}}finally{Pc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?co(t):""}function Qx(t){switch(t.tag){case 5:return co(t.type);case 16:return co("Lazy");case 13:return co("Suspense");case 19:return co("SuspenseList");case 0:case 2:case 15:return t=Bc(t.type,!1),t;case 11:return t=Bc(t.type.render,!1),t;case 1:return t=Bc(t.type,!0),t;default:return""}}function Tu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ki:return"Fragment";case Yi:return"Portal";case Su:return"Profiler";case Gf:return"StrictMode";case vu:return"Suspense";case Iu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case sg:return(t.displayName||"Context")+".Consumer";case ig:return(t._context.displayName||"Context")+".Provider";case jf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Xf:return e=t.displayName||null,e!==null?e:Tu(t.type)||"Memo";case Br:e=t._payload,t=t._init;try{return Tu(t(e))}catch{}}return null}function qx(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Tu(e);case 8:return e===Gf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function $r(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function lg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Jx(t){var e=lg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var l=n.get,u=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return l.call(this)},set:function(d){s=""+d,u.call(this,d)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(d){s=""+d},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Sl(t){t._valueTracker||(t._valueTracker=Jx(t))}function ag(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=lg(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function ta(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Nu(t,e){var n=e.checked;return ut({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function k1(t,e){var n=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;n=$r(e.value!=null?e.value:n),t._wrapperState={initialChecked:s,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function cg(t,e){e=e.checked,e!=null&&zf(t,"checked",e,!1)}function Ru(t,e){cg(t,e);var n=$r(e.value),s=e.type;if(n!=null)s==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?bu(t,e.type,n):e.hasOwnProperty("defaultValue")&&bu(t,e.type,$r(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function P1(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function bu(t,e,n){(e!=="number"||ta(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var uo=Array.isArray;function as(t,e,n,s){if(t=t.options,e){e={};for(var l=0;l<n.length;l++)e["$"+n[l]]=!0;for(n=0;n<t.length;n++)l=e.hasOwnProperty("$"+t[n].value),t[n].selected!==l&&(t[n].selected=l),l&&s&&(t[n].defaultSelected=!0)}else{for(n=""+$r(n),e=null,l=0;l<t.length;l++){if(t[l].value===n){t[l].selected=!0,s&&(t[l].defaultSelected=!0);return}e!==null||t[l].disabled||(e=t[l])}e!==null&&(e.selected=!0)}}function Ou(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Z(91));return ut({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function B1(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Z(92));if(uo(n)){if(1<n.length)throw Error(Z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:$r(n)}}function ug(t,e){var n=$r(e.value),s=$r(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),s!=null&&(t.defaultValue=""+s)}function L1(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function fg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Du(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?fg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var vl,hg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,s,l){MSApp.execUnsafeLocalFunction(function(){return t(e,n,s,l)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(vl=vl||document.createElement("div"),vl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=vl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ro(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var go={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$x=["Webkit","ms","Moz","O"];Object.keys(go).forEach(function(t){$x.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),go[e]=go[t]})});function dg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||go.hasOwnProperty(t)&&go[t]?(""+e).trim():e+"px"}function gg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var s=n.indexOf("--")===0,l=dg(n,e[n],s);n==="float"&&(n="cssFloat"),s?t.setProperty(n,l):t[n]=l}}var ew=ut({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Mu(t,e){if(e){if(ew[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Z(62))}}function ku(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pu=null;function Yf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Bu=null,cs=null,us=null;function F1(t){if(t=$o(t)){if(typeof Bu!="function")throw Error(Z(280));var e=t.stateNode;e&&(e=Xa(e),Bu(t.stateNode,t.type,e))}}function pg(t){cs?us?us.push(t):us=[t]:cs=t}function mg(){if(cs){var t=cs,e=us;if(us=cs=null,F1(t),e)for(t=0;t<e.length;t++)F1(e[t])}}function xg(t,e){return t(e)}function wg(){}var Lc=!1;function yg(t,e,n){if(Lc)return t(e,n);Lc=!0;try{return xg(t,e,n)}finally{Lc=!1,(cs!==null||us!==null)&&(wg(),mg())}}function bo(t,e){var n=t.stateNode;if(n===null)return null;var s=Xa(n);if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Z(231,e,typeof n));return n}var Lu=!1;if(_r)try{var Js={};Object.defineProperty(Js,"passive",{get:function(){Lu=!0}}),window.addEventListener("test",Js,Js),window.removeEventListener("test",Js,Js)}catch{Lu=!1}function tw(t,e,n,s,l,u,d,p,x){var w=Array.prototype.slice.call(arguments,3);try{e.apply(n,w)}catch(A){this.onError(A)}}var po=!1,na=null,ra=!1,Fu=null,nw={onError:function(t){po=!0,na=t}};function rw(t,e,n,s,l,u,d,p,x){po=!1,na=null,tw.apply(nw,arguments)}function iw(t,e,n,s,l,u,d,p,x){if(rw.apply(this,arguments),po){if(po){var w=na;po=!1,na=null}else throw Error(Z(198));ra||(ra=!0,Fu=w)}}function Di(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function _g(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function U1(t){if(Di(t)!==t)throw Error(Z(188))}function sw(t){var e=t.alternate;if(!e){if(e=Di(t),e===null)throw Error(Z(188));return e!==t?null:t}for(var n=t,s=e;;){var l=n.return;if(l===null)break;var u=l.alternate;if(u===null){if(s=l.return,s!==null){n=s;continue}break}if(l.child===u.child){for(u=l.child;u;){if(u===n)return U1(l),t;if(u===s)return U1(l),e;u=u.sibling}throw Error(Z(188))}if(n.return!==s.return)n=l,s=u;else{for(var d=!1,p=l.child;p;){if(p===n){d=!0,n=l,s=u;break}if(p===s){d=!0,s=l,n=u;break}p=p.sibling}if(!d){for(p=u.child;p;){if(p===n){d=!0,n=u,s=l;break}if(p===s){d=!0,s=u,n=l;break}p=p.sibling}if(!d)throw Error(Z(189))}}if(n.alternate!==s)throw Error(Z(190))}if(n.tag!==3)throw Error(Z(188));return n.stateNode.current===n?t:e}function Eg(t){return t=sw(t),t!==null?Cg(t):null}function Cg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Cg(t);if(e!==null)return e;t=t.sibling}return null}var Ag=En.unstable_scheduleCallback,V1=En.unstable_cancelCallback,ow=En.unstable_shouldYield,lw=En.unstable_requestPaint,xt=En.unstable_now,aw=En.unstable_getCurrentPriorityLevel,Kf=En.unstable_ImmediatePriority,Sg=En.unstable_UserBlockingPriority,ia=En.unstable_NormalPriority,cw=En.unstable_LowPriority,vg=En.unstable_IdlePriority,Wa=null,ar=null;function uw(t){if(ar&&typeof ar.onCommitFiberRoot=="function")try{ar.onCommitFiberRoot(Wa,t,void 0,(t.current.flags&128)===128)}catch{}}var Yn=Math.clz32?Math.clz32:dw,fw=Math.log,hw=Math.LN2;function dw(t){return t>>>=0,t===0?32:31-(fw(t)/hw|0)|0}var Il=64,Tl=4194304;function fo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function sa(t,e){var n=t.pendingLanes;if(n===0)return 0;var s=0,l=t.suspendedLanes,u=t.pingedLanes,d=n&268435455;if(d!==0){var p=d&~l;p!==0?s=fo(p):(u&=d,u!==0&&(s=fo(u)))}else d=n&~l,d!==0?s=fo(d):u!==0&&(s=fo(u));if(s===0)return 0;if(e!==0&&e!==s&&!(e&l)&&(l=s&-s,u=e&-e,l>=u||l===16&&(u&4194240)!==0))return e;if(s&4&&(s|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)n=31-Yn(e),l=1<<n,s|=t[n],e&=~l;return s}function gw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pw(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,l=t.expirationTimes,u=t.pendingLanes;0<u;){var d=31-Yn(u),p=1<<d,x=l[d];x===-1?(!(p&n)||p&s)&&(l[d]=gw(p,e)):x<=e&&(t.expiredLanes|=p),u&=~p}}function Uu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ig(){var t=Il;return Il<<=1,!(Il&4194240)&&(Il=64),t}function Fc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function qo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Yn(e),t[e]=n}function mw(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<n;){var l=31-Yn(n),u=1<<l;e[l]=0,s[l]=-1,t[l]=-1,n&=~u}}function Zf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-Yn(n),l=1<<s;l&e|t[s]&e&&(t[s]|=e),n&=~l}}var Fe=0;function Tg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ng,Qf,Rg,bg,Og,Vu=!1,Nl=[],zr=null,Gr=null,jr=null,Oo=new Map,Do=new Map,Fr=[],xw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function H1(t,e){switch(t){case"focusin":case"focusout":zr=null;break;case"dragenter":case"dragleave":Gr=null;break;case"mouseover":case"mouseout":jr=null;break;case"pointerover":case"pointerout":Oo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Do.delete(e.pointerId)}}function $s(t,e,n,s,l,u){return t===null||t.nativeEvent!==u?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:u,targetContainers:[l]},e!==null&&(e=$o(e),e!==null&&Qf(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,l!==null&&e.indexOf(l)===-1&&e.push(l),t)}function ww(t,e,n,s,l){switch(e){case"focusin":return zr=$s(zr,t,e,n,s,l),!0;case"dragenter":return Gr=$s(Gr,t,e,n,s,l),!0;case"mouseover":return jr=$s(jr,t,e,n,s,l),!0;case"pointerover":var u=l.pointerId;return Oo.set(u,$s(Oo.get(u)||null,t,e,n,s,l)),!0;case"gotpointercapture":return u=l.pointerId,Do.set(u,$s(Do.get(u)||null,t,e,n,s,l)),!0}return!1}function Dg(t){var e=mi(t.target);if(e!==null){var n=Di(e);if(n!==null){if(e=n.tag,e===13){if(e=_g(n),e!==null){t.blockedOn=e,Og(t.priority,function(){Rg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function jl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Hu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);Pu=s,n.target.dispatchEvent(s),Pu=null}else return e=$o(n),e!==null&&Qf(e),t.blockedOn=n,!1;e.shift()}return!0}function W1(t,e,n){jl(t)&&n.delete(e)}function yw(){Vu=!1,zr!==null&&jl(zr)&&(zr=null),Gr!==null&&jl(Gr)&&(Gr=null),jr!==null&&jl(jr)&&(jr=null),Oo.forEach(W1),Do.forEach(W1)}function eo(t,e){t.blockedOn===e&&(t.blockedOn=null,Vu||(Vu=!0,En.unstable_scheduleCallback(En.unstable_NormalPriority,yw)))}function Mo(t){function e(l){return eo(l,t)}if(0<Nl.length){eo(Nl[0],t);for(var n=1;n<Nl.length;n++){var s=Nl[n];s.blockedOn===t&&(s.blockedOn=null)}}for(zr!==null&&eo(zr,t),Gr!==null&&eo(Gr,t),jr!==null&&eo(jr,t),Oo.forEach(e),Do.forEach(e),n=0;n<Fr.length;n++)s=Fr[n],s.blockedOn===t&&(s.blockedOn=null);for(;0<Fr.length&&(n=Fr[0],n.blockedOn===null);)Dg(n),n.blockedOn===null&&Fr.shift()}var fs=vr.ReactCurrentBatchConfig,oa=!0;function _w(t,e,n,s){var l=Fe,u=fs.transition;fs.transition=null;try{Fe=1,qf(t,e,n,s)}finally{Fe=l,fs.transition=u}}function Ew(t,e,n,s){var l=Fe,u=fs.transition;fs.transition=null;try{Fe=4,qf(t,e,n,s)}finally{Fe=l,fs.transition=u}}function qf(t,e,n,s){if(oa){var l=Hu(t,e,n,s);if(l===null)Kc(t,e,s,la,n),H1(t,s);else if(ww(l,t,e,n,s))s.stopPropagation();else if(H1(t,s),e&4&&-1<xw.indexOf(t)){for(;l!==null;){var u=$o(l);if(u!==null&&Ng(u),u=Hu(t,e,n,s),u===null&&Kc(t,e,s,la,n),u===l)break;l=u}l!==null&&s.stopPropagation()}else Kc(t,e,s,null,n)}}var la=null;function Hu(t,e,n,s){if(la=null,t=Yf(s),t=mi(t),t!==null)if(e=Di(t),e===null)t=null;else if(n=e.tag,n===13){if(t=_g(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return la=t,null}function Mg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(aw()){case Kf:return 1;case Sg:return 4;case ia:case cw:return 16;case vg:return 536870912;default:return 16}default:return 16}}var Vr=null,Jf=null,Xl=null;function kg(){if(Xl)return Xl;var t,e=Jf,n=e.length,s,l="value"in Vr?Vr.value:Vr.textContent,u=l.length;for(t=0;t<n&&e[t]===l[t];t++);var d=n-t;for(s=1;s<=d&&e[n-s]===l[u-s];s++);return Xl=l.slice(t,1<s?1-s:void 0)}function Yl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Rl(){return!0}function z1(){return!1}function An(t){function e(n,s,l,u,d){this._reactName=n,this._targetInst=l,this.type=s,this.nativeEvent=u,this.target=d,this.currentTarget=null;for(var p in t)t.hasOwnProperty(p)&&(n=t[p],this[p]=n?n(u):u[p]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?Rl:z1,this.isPropagationStopped=z1,this}return ut(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Rl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Rl)},persist:function(){},isPersistent:Rl}),e}var Ds={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$f=An(Ds),Jo=ut({},Ds,{view:0,detail:0}),Cw=An(Jo),Uc,Vc,to,za=ut({},Jo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:eh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==to&&(to&&t.type==="mousemove"?(Uc=t.screenX-to.screenX,Vc=t.screenY-to.screenY):Vc=Uc=0,to=t),Uc)},movementY:function(t){return"movementY"in t?t.movementY:Vc}}),G1=An(za),Aw=ut({},za,{dataTransfer:0}),Sw=An(Aw),vw=ut({},Jo,{relatedTarget:0}),Hc=An(vw),Iw=ut({},Ds,{animationName:0,elapsedTime:0,pseudoElement:0}),Tw=An(Iw),Nw=ut({},Ds,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Rw=An(Nw),bw=ut({},Ds,{data:0}),j1=An(bw),Ow={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Dw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Mw[t])?!!e[t]:!1}function eh(){return kw}var Pw=ut({},Jo,{key:function(t){if(t.key){var e=Ow[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Yl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Dw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:eh,charCode:function(t){return t.type==="keypress"?Yl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Yl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Bw=An(Pw),Lw=ut({},za,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),X1=An(Lw),Fw=ut({},Jo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:eh}),Uw=An(Fw),Vw=ut({},Ds,{propertyName:0,elapsedTime:0,pseudoElement:0}),Hw=An(Vw),Ww=ut({},za,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),zw=An(Ww),Gw=[9,13,27,32],th=_r&&"CompositionEvent"in window,mo=null;_r&&"documentMode"in document&&(mo=document.documentMode);var jw=_r&&"TextEvent"in window&&!mo,Pg=_r&&(!th||mo&&8<mo&&11>=mo),Y1=" ",K1=!1;function Bg(t,e){switch(t){case"keyup":return Gw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Zi=!1;function Xw(t,e){switch(t){case"compositionend":return Lg(e);case"keypress":return e.which!==32?null:(K1=!0,Y1);case"textInput":return t=e.data,t===Y1&&K1?null:t;default:return null}}function Yw(t,e){if(Zi)return t==="compositionend"||!th&&Bg(t,e)?(t=kg(),Xl=Jf=Vr=null,Zi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Pg&&e.locale!=="ko"?null:e.data;default:return null}}var Kw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Z1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Kw[t.type]:e==="textarea"}function Fg(t,e,n,s){pg(s),e=aa(e,"onChange"),0<e.length&&(n=new $f("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var xo=null,ko=null;function Zw(t){Zg(t,0)}function Ga(t){var e=Ji(t);if(ag(e))return t}function Qw(t,e){if(t==="change")return e}var Ug=!1;if(_r){var Wc;if(_r){var zc="oninput"in document;if(!zc){var Q1=document.createElement("div");Q1.setAttribute("oninput","return;"),zc=typeof Q1.oninput=="function"}Wc=zc}else Wc=!1;Ug=Wc&&(!document.documentMode||9<document.documentMode)}function q1(){xo&&(xo.detachEvent("onpropertychange",Vg),ko=xo=null)}function Vg(t){if(t.propertyName==="value"&&Ga(ko)){var e=[];Fg(e,ko,t,Yf(t)),yg(Zw,e)}}function qw(t,e,n){t==="focusin"?(q1(),xo=e,ko=n,xo.attachEvent("onpropertychange",Vg)):t==="focusout"&&q1()}function Jw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ga(ko)}function $w(t,e){if(t==="click")return Ga(e)}function ey(t,e){if(t==="input"||t==="change")return Ga(e)}function ty(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Qn=typeof Object.is=="function"?Object.is:ty;function Po(t,e){if(Qn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var l=n[s];if(!Au.call(e,l)||!Qn(t[l],e[l]))return!1}return!0}function J1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function $1(t,e){var n=J1(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=J1(n)}}function Hg(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Hg(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Wg(){for(var t=window,e=ta();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ta(t.document)}return e}function nh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function ny(t){var e=Wg(),n=t.focusedElem,s=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Hg(n.ownerDocument.documentElement,n)){if(s!==null&&nh(n)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var l=n.textContent.length,u=Math.min(s.start,l);s=s.end===void 0?u:Math.min(s.end,l),!t.extend&&u>s&&(l=s,s=u,u=l),l=$1(n,u);var d=$1(n,s);l&&d&&(t.rangeCount!==1||t.anchorNode!==l.node||t.anchorOffset!==l.offset||t.focusNode!==d.node||t.focusOffset!==d.offset)&&(e=e.createRange(),e.setStart(l.node,l.offset),t.removeAllRanges(),u>s?(t.addRange(e),t.extend(d.node,d.offset)):(e.setEnd(d.node,d.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ry=_r&&"documentMode"in document&&11>=document.documentMode,Qi=null,Wu=null,wo=null,zu=!1;function ed(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;zu||Qi==null||Qi!==ta(s)||(s=Qi,"selectionStart"in s&&nh(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),wo&&Po(wo,s)||(wo=s,s=aa(Wu,"onSelect"),0<s.length&&(e=new $f("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=Qi)))}function bl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var qi={animationend:bl("Animation","AnimationEnd"),animationiteration:bl("Animation","AnimationIteration"),animationstart:bl("Animation","AnimationStart"),transitionend:bl("Transition","TransitionEnd")},Gc={},zg={};_r&&(zg=document.createElement("div").style,"AnimationEvent"in window||(delete qi.animationend.animation,delete qi.animationiteration.animation,delete qi.animationstart.animation),"TransitionEvent"in window||delete qi.transitionend.transition);function ja(t){if(Gc[t])return Gc[t];if(!qi[t])return t;var e=qi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in zg)return Gc[t]=e[n];return t}var Gg=ja("animationend"),jg=ja("animationiteration"),Xg=ja("animationstart"),Yg=ja("transitionend"),Kg=new Map,td="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ni(t,e){Kg.set(t,e),Oi(e,[t])}for(var jc=0;jc<td.length;jc++){var Xc=td[jc],iy=Xc.toLowerCase(),sy=Xc[0].toUpperCase()+Xc.slice(1);ni(iy,"on"+sy)}ni(Gg,"onAnimationEnd");ni(jg,"onAnimationIteration");ni(Xg,"onAnimationStart");ni("dblclick","onDoubleClick");ni("focusin","onFocus");ni("focusout","onBlur");ni(Yg,"onTransitionEnd");xs("onMouseEnter",["mouseout","mouseover"]);xs("onMouseLeave",["mouseout","mouseover"]);xs("onPointerEnter",["pointerout","pointerover"]);xs("onPointerLeave",["pointerout","pointerover"]);Oi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Oi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Oi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Oi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Oi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Oi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ho="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oy=new Set("cancel close invalid load scroll toggle".split(" ").concat(ho));function nd(t,e,n){var s=t.type||"unknown-event";t.currentTarget=n,iw(s,e,void 0,t),t.currentTarget=null}function Zg(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],l=s.event;s=s.listeners;e:{var u=void 0;if(e)for(var d=s.length-1;0<=d;d--){var p=s[d],x=p.instance,w=p.currentTarget;if(p=p.listener,x!==u&&l.isPropagationStopped())break e;nd(l,p,w),u=x}else for(d=0;d<s.length;d++){if(p=s[d],x=p.instance,w=p.currentTarget,p=p.listener,x!==u&&l.isPropagationStopped())break e;nd(l,p,w),u=x}}}if(ra)throw t=Fu,ra=!1,Fu=null,t}function qe(t,e){var n=e[Ku];n===void 0&&(n=e[Ku]=new Set);var s=t+"__bubble";n.has(s)||(Qg(e,t,2,!1),n.add(s))}function Yc(t,e,n){var s=0;e&&(s|=4),Qg(n,t,s,e)}var Ol="_reactListening"+Math.random().toString(36).slice(2);function Bo(t){if(!t[Ol]){t[Ol]=!0,rg.forEach(function(n){n!=="selectionchange"&&(oy.has(n)||Yc(n,!1,t),Yc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ol]||(e[Ol]=!0,Yc("selectionchange",!1,e))}}function Qg(t,e,n,s){switch(Mg(e)){case 1:var l=_w;break;case 4:l=Ew;break;default:l=qf}n=l.bind(null,e,n,t),l=void 0,!Lu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(l=!0),s?l!==void 0?t.addEventListener(e,n,{capture:!0,passive:l}):t.addEventListener(e,n,!0):l!==void 0?t.addEventListener(e,n,{passive:l}):t.addEventListener(e,n,!1)}function Kc(t,e,n,s,l){var u=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var d=s.tag;if(d===3||d===4){var p=s.stateNode.containerInfo;if(p===l||p.nodeType===8&&p.parentNode===l)break;if(d===4)for(d=s.return;d!==null;){var x=d.tag;if((x===3||x===4)&&(x=d.stateNode.containerInfo,x===l||x.nodeType===8&&x.parentNode===l))return;d=d.return}for(;p!==null;){if(d=mi(p),d===null)return;if(x=d.tag,x===5||x===6){s=u=d;continue e}p=p.parentNode}}s=s.return}yg(function(){var w=u,A=Yf(n),C=[];e:{var I=Kg.get(t);if(I!==void 0){var D=$f,k=t;switch(t){case"keypress":if(Yl(n)===0)break e;case"keydown":case"keyup":D=Bw;break;case"focusin":k="focus",D=Hc;break;case"focusout":k="blur",D=Hc;break;case"beforeblur":case"afterblur":D=Hc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":D=G1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":D=Sw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":D=Uw;break;case Gg:case jg:case Xg:D=Tw;break;case Yg:D=Hw;break;case"scroll":D=Cw;break;case"wheel":D=zw;break;case"copy":case"cut":case"paste":D=Rw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":D=X1}var B=(e&4)!==0,ee=!B&&t==="scroll",b=B?I!==null?I+"Capture":null:I;B=[];for(var N=w,R;N!==null;){R=N;var P=R.stateNode;if(R.tag===5&&P!==null&&(R=P,b!==null&&(P=bo(N,b),P!=null&&B.push(Lo(N,P,R)))),ee)break;N=N.return}0<B.length&&(I=new D(I,k,null,n,A),C.push({event:I,listeners:B}))}}if(!(e&7)){e:{if(I=t==="mouseover"||t==="pointerover",D=t==="mouseout"||t==="pointerout",I&&n!==Pu&&(k=n.relatedTarget||n.fromElement)&&(mi(k)||k[Er]))break e;if((D||I)&&(I=A.window===A?A:(I=A.ownerDocument)?I.defaultView||I.parentWindow:window,D?(k=n.relatedTarget||n.toElement,D=w,k=k?mi(k):null,k!==null&&(ee=Di(k),k!==ee||k.tag!==5&&k.tag!==6)&&(k=null)):(D=null,k=w),D!==k)){if(B=G1,P="onMouseLeave",b="onMouseEnter",N="mouse",(t==="pointerout"||t==="pointerover")&&(B=X1,P="onPointerLeave",b="onPointerEnter",N="pointer"),ee=D==null?I:Ji(D),R=k==null?I:Ji(k),I=new B(P,N+"leave",D,n,A),I.target=ee,I.relatedTarget=R,P=null,mi(A)===w&&(B=new B(b,N+"enter",k,n,A),B.target=R,B.relatedTarget=ee,P=B),ee=P,D&&k)t:{for(B=D,b=k,N=0,R=B;R;R=ji(R))N++;for(R=0,P=b;P;P=ji(P))R++;for(;0<N-R;)B=ji(B),N--;for(;0<R-N;)b=ji(b),R--;for(;N--;){if(B===b||b!==null&&B===b.alternate)break t;B=ji(B),b=ji(b)}B=null}else B=null;D!==null&&rd(C,I,D,B,!1),k!==null&&ee!==null&&rd(C,ee,k,B,!0)}}e:{if(I=w?Ji(w):window,D=I.nodeName&&I.nodeName.toLowerCase(),D==="select"||D==="input"&&I.type==="file")var X=Qw;else if(Z1(I))if(Ug)X=ey;else{X=Jw;var G=qw}else(D=I.nodeName)&&D.toLowerCase()==="input"&&(I.type==="checkbox"||I.type==="radio")&&(X=$w);if(X&&(X=X(t,w))){Fg(C,X,n,A);break e}G&&G(t,I,w),t==="focusout"&&(G=I._wrapperState)&&G.controlled&&I.type==="number"&&bu(I,"number",I.value)}switch(G=w?Ji(w):window,t){case"focusin":(Z1(G)||G.contentEditable==="true")&&(Qi=G,Wu=w,wo=null);break;case"focusout":wo=Wu=Qi=null;break;case"mousedown":zu=!0;break;case"contextmenu":case"mouseup":case"dragend":zu=!1,ed(C,n,A);break;case"selectionchange":if(ry)break;case"keydown":case"keyup":ed(C,n,A)}var F;if(th)e:{switch(t){case"compositionstart":var K="onCompositionStart";break e;case"compositionend":K="onCompositionEnd";break e;case"compositionupdate":K="onCompositionUpdate";break e}K=void 0}else Zi?Bg(t,n)&&(K="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(K="onCompositionStart");K&&(Pg&&n.locale!=="ko"&&(Zi||K!=="onCompositionStart"?K==="onCompositionEnd"&&Zi&&(F=kg()):(Vr=A,Jf="value"in Vr?Vr.value:Vr.textContent,Zi=!0)),G=aa(w,K),0<G.length&&(K=new j1(K,t,null,n,A),C.push({event:K,listeners:G}),F?K.data=F:(F=Lg(n),F!==null&&(K.data=F)))),(F=jw?Xw(t,n):Yw(t,n))&&(w=aa(w,"onBeforeInput"),0<w.length&&(A=new j1("onBeforeInput","beforeinput",null,n,A),C.push({event:A,listeners:w}),A.data=F))}Zg(C,e)})}function Lo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function aa(t,e){for(var n=e+"Capture",s=[];t!==null;){var l=t,u=l.stateNode;l.tag===5&&u!==null&&(l=u,u=bo(t,n),u!=null&&s.unshift(Lo(t,u,l)),u=bo(t,e),u!=null&&s.push(Lo(t,u,l))),t=t.return}return s}function ji(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function rd(t,e,n,s,l){for(var u=e._reactName,d=[];n!==null&&n!==s;){var p=n,x=p.alternate,w=p.stateNode;if(x!==null&&x===s)break;p.tag===5&&w!==null&&(p=w,l?(x=bo(n,u),x!=null&&d.unshift(Lo(n,x,p))):l||(x=bo(n,u),x!=null&&d.push(Lo(n,x,p)))),n=n.return}d.length!==0&&t.push({event:e,listeners:d})}var ly=/\r\n?/g,ay=/\u0000|\uFFFD/g;function id(t){return(typeof t=="string"?t:""+t).replace(ly,`
`).replace(ay,"")}function Dl(t,e,n){if(e=id(e),id(t)!==e&&n)throw Error(Z(425))}function ca(){}var Gu=null,ju=null;function Xu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Yu=typeof setTimeout=="function"?setTimeout:void 0,cy=typeof clearTimeout=="function"?clearTimeout:void 0,sd=typeof Promise=="function"?Promise:void 0,uy=typeof queueMicrotask=="function"?queueMicrotask:typeof sd<"u"?function(t){return sd.resolve(null).then(t).catch(fy)}:Yu;function fy(t){setTimeout(function(){throw t})}function Zc(t,e){var n=e,s=0;do{var l=n.nextSibling;if(t.removeChild(n),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(s===0){t.removeChild(l),Mo(e);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=l}while(n);Mo(e)}function Xr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function od(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ms=Math.random().toString(36).slice(2),or="__reactFiber$"+Ms,Fo="__reactProps$"+Ms,Er="__reactContainer$"+Ms,Ku="__reactEvents$"+Ms,hy="__reactListeners$"+Ms,dy="__reactHandles$"+Ms;function mi(t){var e=t[or];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Er]||n[or]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=od(t);t!==null;){if(n=t[or])return n;t=od(t)}return e}t=n,n=t.parentNode}return null}function $o(t){return t=t[or]||t[Er],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ji(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Z(33))}function Xa(t){return t[Fo]||null}var Zu=[],$i=-1;function ri(t){return{current:t}}function et(t){0>$i||(t.current=Zu[$i],Zu[$i]=null,$i--)}function Ze(t,e){$i++,Zu[$i]=t.current,t.current=e}var ei={},Zt=ri(ei),hn=ri(!1),Ci=ei;function ws(t,e){var n=t.type.contextTypes;if(!n)return ei;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var l={},u;for(u in n)l[u]=e[u];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=l),l}function dn(t){return t=t.childContextTypes,t!=null}function ua(){et(hn),et(Zt)}function ld(t,e,n){if(Zt.current!==ei)throw Error(Z(168));Ze(Zt,e),Ze(hn,n)}function qg(t,e,n){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var l in s)if(!(l in e))throw Error(Z(108,qx(t)||"Unknown",l));return ut({},n,s)}function fa(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ei,Ci=Zt.current,Ze(Zt,t),Ze(hn,hn.current),!0}function ad(t,e,n){var s=t.stateNode;if(!s)throw Error(Z(169));n?(t=qg(t,e,Ci),s.__reactInternalMemoizedMergedChildContext=t,et(hn),et(Zt),Ze(Zt,t)):et(hn),Ze(hn,n)}var gr=null,Ya=!1,Qc=!1;function Jg(t){gr===null?gr=[t]:gr.push(t)}function gy(t){Ya=!0,Jg(t)}function ii(){if(!Qc&&gr!==null){Qc=!0;var t=0,e=Fe;try{var n=gr;for(Fe=1;t<n.length;t++){var s=n[t];do s=s(!0);while(s!==null)}gr=null,Ya=!1}catch(l){throw gr!==null&&(gr=gr.slice(t+1)),Ag(Kf,ii),l}finally{Fe=e,Qc=!1}}return null}var es=[],ts=0,ha=null,da=0,bn=[],On=0,Ai=null,pr=1,mr="";function di(t,e){es[ts++]=da,es[ts++]=ha,ha=t,da=e}function $g(t,e,n){bn[On++]=pr,bn[On++]=mr,bn[On++]=Ai,Ai=t;var s=pr;t=mr;var l=32-Yn(s)-1;s&=~(1<<l),n+=1;var u=32-Yn(e)+l;if(30<u){var d=l-l%5;u=(s&(1<<d)-1).toString(32),s>>=d,l-=d,pr=1<<32-Yn(e)+l|n<<l|s,mr=u+t}else pr=1<<u|n<<l|s,mr=t}function rh(t){t.return!==null&&(di(t,1),$g(t,1,0))}function ih(t){for(;t===ha;)ha=es[--ts],es[ts]=null,da=es[--ts],es[ts]=null;for(;t===Ai;)Ai=bn[--On],bn[On]=null,mr=bn[--On],bn[On]=null,pr=bn[--On],bn[On]=null}var yn=null,wn=null,rt=!1,Gn=null;function ep(t,e){var n=Dn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function cd(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,yn=t,wn=Xr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,yn=t,wn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ai!==null?{id:pr,overflow:mr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Dn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,yn=t,wn=null,!0):!1;default:return!1}}function Qu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function qu(t){if(rt){var e=wn;if(e){var n=e;if(!cd(t,e)){if(Qu(t))throw Error(Z(418));e=Xr(n.nextSibling);var s=yn;e&&cd(t,e)?ep(s,n):(t.flags=t.flags&-4097|2,rt=!1,yn=t)}}else{if(Qu(t))throw Error(Z(418));t.flags=t.flags&-4097|2,rt=!1,yn=t}}}function ud(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;yn=t}function Ml(t){if(t!==yn)return!1;if(!rt)return ud(t),rt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Xu(t.type,t.memoizedProps)),e&&(e=wn)){if(Qu(t))throw tp(),Error(Z(418));for(;e;)ep(t,e),e=Xr(e.nextSibling)}if(ud(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){wn=Xr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}wn=null}}else wn=yn?Xr(t.stateNode.nextSibling):null;return!0}function tp(){for(var t=wn;t;)t=Xr(t.nextSibling)}function ys(){wn=yn=null,rt=!1}function sh(t){Gn===null?Gn=[t]:Gn.push(t)}var py=vr.ReactCurrentBatchConfig;function no(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Z(309));var s=n.stateNode}if(!s)throw Error(Z(147,t));var l=s,u=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===u?e.ref:(e=function(d){var p=l.refs;d===null?delete p[u]:p[u]=d},e._stringRef=u,e)}if(typeof t!="string")throw Error(Z(284));if(!n._owner)throw Error(Z(290,t))}return t}function kl(t,e){throw t=Object.prototype.toString.call(e),Error(Z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function fd(t){var e=t._init;return e(t._payload)}function np(t){function e(b,N){if(t){var R=b.deletions;R===null?(b.deletions=[N],b.flags|=16):R.push(N)}}function n(b,N){if(!t)return null;for(;N!==null;)e(b,N),N=N.sibling;return null}function s(b,N){for(b=new Map;N!==null;)N.key!==null?b.set(N.key,N):b.set(N.index,N),N=N.sibling;return b}function l(b,N){return b=Qr(b,N),b.index=0,b.sibling=null,b}function u(b,N,R){return b.index=R,t?(R=b.alternate,R!==null?(R=R.index,R<N?(b.flags|=2,N):R):(b.flags|=2,N)):(b.flags|=1048576,N)}function d(b){return t&&b.alternate===null&&(b.flags|=2),b}function p(b,N,R,P){return N===null||N.tag!==6?(N=ru(R,b.mode,P),N.return=b,N):(N=l(N,R),N.return=b,N)}function x(b,N,R,P){var X=R.type;return X===Ki?A(b,N,R.props.children,P,R.key):N!==null&&(N.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===Br&&fd(X)===N.type)?(P=l(N,R.props),P.ref=no(b,N,R),P.return=b,P):(P=ea(R.type,R.key,R.props,null,b.mode,P),P.ref=no(b,N,R),P.return=b,P)}function w(b,N,R,P){return N===null||N.tag!==4||N.stateNode.containerInfo!==R.containerInfo||N.stateNode.implementation!==R.implementation?(N=iu(R,b.mode,P),N.return=b,N):(N=l(N,R.children||[]),N.return=b,N)}function A(b,N,R,P,X){return N===null||N.tag!==7?(N=Ei(R,b.mode,P,X),N.return=b,N):(N=l(N,R),N.return=b,N)}function C(b,N,R){if(typeof N=="string"&&N!==""||typeof N=="number")return N=ru(""+N,b.mode,R),N.return=b,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Al:return R=ea(N.type,N.key,N.props,null,b.mode,R),R.ref=no(b,null,N),R.return=b,R;case Yi:return N=iu(N,b.mode,R),N.return=b,N;case Br:var P=N._init;return C(b,P(N._payload),R)}if(uo(N)||qs(N))return N=Ei(N,b.mode,R,null),N.return=b,N;kl(b,N)}return null}function I(b,N,R,P){var X=N!==null?N.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return X!==null?null:p(b,N,""+R,P);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Al:return R.key===X?x(b,N,R,P):null;case Yi:return R.key===X?w(b,N,R,P):null;case Br:return X=R._init,I(b,N,X(R._payload),P)}if(uo(R)||qs(R))return X!==null?null:A(b,N,R,P,null);kl(b,R)}return null}function D(b,N,R,P,X){if(typeof P=="string"&&P!==""||typeof P=="number")return b=b.get(R)||null,p(N,b,""+P,X);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Al:return b=b.get(P.key===null?R:P.key)||null,x(N,b,P,X);case Yi:return b=b.get(P.key===null?R:P.key)||null,w(N,b,P,X);case Br:var G=P._init;return D(b,N,R,G(P._payload),X)}if(uo(P)||qs(P))return b=b.get(R)||null,A(N,b,P,X,null);kl(N,P)}return null}function k(b,N,R,P){for(var X=null,G=null,F=N,K=N=0,z=null;F!==null&&K<R.length;K++){F.index>K?(z=F,F=null):z=F.sibling;var fe=I(b,F,R[K],P);if(fe===null){F===null&&(F=z);break}t&&F&&fe.alternate===null&&e(b,F),N=u(fe,N,K),G===null?X=fe:G.sibling=fe,G=fe,F=z}if(K===R.length)return n(b,F),rt&&di(b,K),X;if(F===null){for(;K<R.length;K++)F=C(b,R[K],P),F!==null&&(N=u(F,N,K),G===null?X=F:G.sibling=F,G=F);return rt&&di(b,K),X}for(F=s(b,F);K<R.length;K++)z=D(F,b,K,R[K],P),z!==null&&(t&&z.alternate!==null&&F.delete(z.key===null?K:z.key),N=u(z,N,K),G===null?X=z:G.sibling=z,G=z);return t&&F.forEach(function(Se){return e(b,Se)}),rt&&di(b,K),X}function B(b,N,R,P){var X=qs(R);if(typeof X!="function")throw Error(Z(150));if(R=X.call(R),R==null)throw Error(Z(151));for(var G=X=null,F=N,K=N=0,z=null,fe=R.next();F!==null&&!fe.done;K++,fe=R.next()){F.index>K?(z=F,F=null):z=F.sibling;var Se=I(b,F,fe.value,P);if(Se===null){F===null&&(F=z);break}t&&F&&Se.alternate===null&&e(b,F),N=u(Se,N,K),G===null?X=Se:G.sibling=Se,G=Se,F=z}if(fe.done)return n(b,F),rt&&di(b,K),X;if(F===null){for(;!fe.done;K++,fe=R.next())fe=C(b,fe.value,P),fe!==null&&(N=u(fe,N,K),G===null?X=fe:G.sibling=fe,G=fe);return rt&&di(b,K),X}for(F=s(b,F);!fe.done;K++,fe=R.next())fe=D(F,b,K,fe.value,P),fe!==null&&(t&&fe.alternate!==null&&F.delete(fe.key===null?K:fe.key),N=u(fe,N,K),G===null?X=fe:G.sibling=fe,G=fe);return t&&F.forEach(function(ce){return e(b,ce)}),rt&&di(b,K),X}function ee(b,N,R,P){if(typeof R=="object"&&R!==null&&R.type===Ki&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case Al:e:{for(var X=R.key,G=N;G!==null;){if(G.key===X){if(X=R.type,X===Ki){if(G.tag===7){n(b,G.sibling),N=l(G,R.props.children),N.return=b,b=N;break e}}else if(G.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===Br&&fd(X)===G.type){n(b,G.sibling),N=l(G,R.props),N.ref=no(b,G,R),N.return=b,b=N;break e}n(b,G);break}else e(b,G);G=G.sibling}R.type===Ki?(N=Ei(R.props.children,b.mode,P,R.key),N.return=b,b=N):(P=ea(R.type,R.key,R.props,null,b.mode,P),P.ref=no(b,N,R),P.return=b,b=P)}return d(b);case Yi:e:{for(G=R.key;N!==null;){if(N.key===G)if(N.tag===4&&N.stateNode.containerInfo===R.containerInfo&&N.stateNode.implementation===R.implementation){n(b,N.sibling),N=l(N,R.children||[]),N.return=b,b=N;break e}else{n(b,N);break}else e(b,N);N=N.sibling}N=iu(R,b.mode,P),N.return=b,b=N}return d(b);case Br:return G=R._init,ee(b,N,G(R._payload),P)}if(uo(R))return k(b,N,R,P);if(qs(R))return B(b,N,R,P);kl(b,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,N!==null&&N.tag===6?(n(b,N.sibling),N=l(N,R),N.return=b,b=N):(n(b,N),N=ru(R,b.mode,P),N.return=b,b=N),d(b)):n(b,N)}return ee}var _s=np(!0),rp=np(!1),ga=ri(null),pa=null,ns=null,oh=null;function lh(){oh=ns=pa=null}function ah(t){var e=ga.current;et(ga),t._currentValue=e}function Ju(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function hs(t,e){pa=t,oh=ns=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(un=!0),t.firstContext=null)}function Pn(t){var e=t._currentValue;if(oh!==t)if(t={context:t,memoizedValue:e,next:null},ns===null){if(pa===null)throw Error(Z(308));ns=t,pa.dependencies={lanes:0,firstContext:t}}else ns=ns.next=t;return e}var xi=null;function ch(t){xi===null?xi=[t]:xi.push(t)}function ip(t,e,n,s){var l=e.interleaved;return l===null?(n.next=n,ch(e)):(n.next=l.next,l.next=n),e.interleaved=n,Cr(t,s)}function Cr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Lr=!1;function uh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sp(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function wr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Yr(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,De&2){var l=s.pending;return l===null?e.next=e:(e.next=l.next,l.next=e),s.pending=e,Cr(t,n)}return l=s.interleaved,l===null?(e.next=e,ch(s)):(e.next=l.next,l.next=e),s.interleaved=e,Cr(t,n)}function Kl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Zf(t,n)}}function hd(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var l=null,u=null;if(n=n.firstBaseUpdate,n!==null){do{var d={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};u===null?l=u=d:u=u.next=d,n=n.next}while(n!==null);u===null?l=u=e:u=u.next=e}else l=u=e;n={baseState:s.baseState,firstBaseUpdate:l,lastBaseUpdate:u,shared:s.shared,effects:s.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ma(t,e,n,s){var l=t.updateQueue;Lr=!1;var u=l.firstBaseUpdate,d=l.lastBaseUpdate,p=l.shared.pending;if(p!==null){l.shared.pending=null;var x=p,w=x.next;x.next=null,d===null?u=w:d.next=w,d=x;var A=t.alternate;A!==null&&(A=A.updateQueue,p=A.lastBaseUpdate,p!==d&&(p===null?A.firstBaseUpdate=w:p.next=w,A.lastBaseUpdate=x))}if(u!==null){var C=l.baseState;d=0,A=w=x=null,p=u;do{var I=p.lane,D=p.eventTime;if((s&I)===I){A!==null&&(A=A.next={eventTime:D,lane:0,tag:p.tag,payload:p.payload,callback:p.callback,next:null});e:{var k=t,B=p;switch(I=e,D=n,B.tag){case 1:if(k=B.payload,typeof k=="function"){C=k.call(D,C,I);break e}C=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=B.payload,I=typeof k=="function"?k.call(D,C,I):k,I==null)break e;C=ut({},C,I);break e;case 2:Lr=!0}}p.callback!==null&&p.lane!==0&&(t.flags|=64,I=l.effects,I===null?l.effects=[p]:I.push(p))}else D={eventTime:D,lane:I,tag:p.tag,payload:p.payload,callback:p.callback,next:null},A===null?(w=A=D,x=C):A=A.next=D,d|=I;if(p=p.next,p===null){if(p=l.shared.pending,p===null)break;I=p,p=I.next,I.next=null,l.lastBaseUpdate=I,l.shared.pending=null}}while(!0);if(A===null&&(x=C),l.baseState=x,l.firstBaseUpdate=w,l.lastBaseUpdate=A,e=l.shared.interleaved,e!==null){l=e;do d|=l.lane,l=l.next;while(l!==e)}else u===null&&(l.shared.lanes=0);vi|=d,t.lanes=d,t.memoizedState=C}}function dd(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],l=s.callback;if(l!==null){if(s.callback=null,s=n,typeof l!="function")throw Error(Z(191,l));l.call(s)}}}var el={},cr=ri(el),Uo=ri(el),Vo=ri(el);function wi(t){if(t===el)throw Error(Z(174));return t}function fh(t,e){switch(Ze(Vo,e),Ze(Uo,t),Ze(cr,el),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Du(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Du(e,t)}et(cr),Ze(cr,e)}function Es(){et(cr),et(Uo),et(Vo)}function op(t){wi(Vo.current);var e=wi(cr.current),n=Du(e,t.type);e!==n&&(Ze(Uo,t),Ze(cr,n))}function hh(t){Uo.current===t&&(et(cr),et(Uo))}var at=ri(0);function xa(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var qc=[];function dh(){for(var t=0;t<qc.length;t++)qc[t]._workInProgressVersionPrimary=null;qc.length=0}var Zl=vr.ReactCurrentDispatcher,Jc=vr.ReactCurrentBatchConfig,Si=0,ct=null,At=null,Rt=null,wa=!1,yo=!1,Ho=0,my=0;function zt(){throw Error(Z(321))}function gh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Qn(t[n],e[n]))return!1;return!0}function ph(t,e,n,s,l,u){if(Si=u,ct=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Zl.current=t===null||t.memoizedState===null?_y:Ey,t=n(s,l),yo){u=0;do{if(yo=!1,Ho=0,25<=u)throw Error(Z(301));u+=1,Rt=At=null,e.updateQueue=null,Zl.current=Cy,t=n(s,l)}while(yo)}if(Zl.current=ya,e=At!==null&&At.next!==null,Si=0,Rt=At=ct=null,wa=!1,e)throw Error(Z(300));return t}function mh(){var t=Ho!==0;return Ho=0,t}function sr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?ct.memoizedState=Rt=t:Rt=Rt.next=t,Rt}function Bn(){if(At===null){var t=ct.alternate;t=t!==null?t.memoizedState:null}else t=At.next;var e=Rt===null?ct.memoizedState:Rt.next;if(e!==null)Rt=e,At=t;else{if(t===null)throw Error(Z(310));At=t,t={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},Rt===null?ct.memoizedState=Rt=t:Rt=Rt.next=t}return Rt}function Wo(t,e){return typeof e=="function"?e(t):e}function $c(t){var e=Bn(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var s=At,l=s.baseQueue,u=n.pending;if(u!==null){if(l!==null){var d=l.next;l.next=u.next,u.next=d}s.baseQueue=l=u,n.pending=null}if(l!==null){u=l.next,s=s.baseState;var p=d=null,x=null,w=u;do{var A=w.lane;if((Si&A)===A)x!==null&&(x=x.next={lane:0,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null}),s=w.hasEagerState?w.eagerState:t(s,w.action);else{var C={lane:A,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null};x===null?(p=x=C,d=s):x=x.next=C,ct.lanes|=A,vi|=A}w=w.next}while(w!==null&&w!==u);x===null?d=s:x.next=p,Qn(s,e.memoizedState)||(un=!0),e.memoizedState=s,e.baseState=d,e.baseQueue=x,n.lastRenderedState=s}if(t=n.interleaved,t!==null){l=t;do u=l.lane,ct.lanes|=u,vi|=u,l=l.next;while(l!==t)}else l===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function eu(t){var e=Bn(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var s=n.dispatch,l=n.pending,u=e.memoizedState;if(l!==null){n.pending=null;var d=l=l.next;do u=t(u,d.action),d=d.next;while(d!==l);Qn(u,e.memoizedState)||(un=!0),e.memoizedState=u,e.baseQueue===null&&(e.baseState=u),n.lastRenderedState=u}return[u,s]}function lp(){}function ap(t,e){var n=ct,s=Bn(),l=e(),u=!Qn(s.memoizedState,l);if(u&&(s.memoizedState=l,un=!0),s=s.queue,xh(fp.bind(null,n,s,t),[t]),s.getSnapshot!==e||u||Rt!==null&&Rt.memoizedState.tag&1){if(n.flags|=2048,zo(9,up.bind(null,n,s,l,e),void 0,null),Dt===null)throw Error(Z(349));Si&30||cp(n,e,l)}return l}function cp(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ct.updateQueue,e===null?(e={lastEffect:null,stores:null},ct.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function up(t,e,n,s){e.value=n,e.getSnapshot=s,hp(e)&&dp(t)}function fp(t,e,n){return n(function(){hp(e)&&dp(t)})}function hp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Qn(t,n)}catch{return!0}}function dp(t){var e=Cr(t,1);e!==null&&Kn(e,t,1,-1)}function gd(t){var e=sr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wo,lastRenderedState:t},e.queue=t,t=t.dispatch=yy.bind(null,ct,t),[e.memoizedState,t]}function zo(t,e,n,s){return t={tag:t,create:e,destroy:n,deps:s,next:null},e=ct.updateQueue,e===null?(e={lastEffect:null,stores:null},ct.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t)),t}function gp(){return Bn().memoizedState}function Ql(t,e,n,s){var l=sr();ct.flags|=t,l.memoizedState=zo(1|e,n,void 0,s===void 0?null:s)}function Ka(t,e,n,s){var l=Bn();s=s===void 0?null:s;var u=void 0;if(At!==null){var d=At.memoizedState;if(u=d.destroy,s!==null&&gh(s,d.deps)){l.memoizedState=zo(e,n,u,s);return}}ct.flags|=t,l.memoizedState=zo(1|e,n,u,s)}function pd(t,e){return Ql(8390656,8,t,e)}function xh(t,e){return Ka(2048,8,t,e)}function pp(t,e){return Ka(4,2,t,e)}function mp(t,e){return Ka(4,4,t,e)}function xp(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function wp(t,e,n){return n=n!=null?n.concat([t]):null,Ka(4,4,xp.bind(null,e,t),n)}function wh(){}function yp(t,e){var n=Bn();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&gh(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function _p(t,e){var n=Bn();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&gh(e,s[1])?s[0]:(t=t(),n.memoizedState=[t,e],t)}function Ep(t,e,n){return Si&21?(Qn(n,e)||(n=Ig(),ct.lanes|=n,vi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,un=!0),t.memoizedState=n)}function xy(t,e){var n=Fe;Fe=n!==0&&4>n?n:4,t(!0);var s=Jc.transition;Jc.transition={};try{t(!1),e()}finally{Fe=n,Jc.transition=s}}function Cp(){return Bn().memoizedState}function wy(t,e,n){var s=Zr(t);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},Ap(t))Sp(e,n);else if(n=ip(t,e,n,s),n!==null){var l=$t();Kn(n,t,s,l),vp(n,e,s)}}function yy(t,e,n){var s=Zr(t),l={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ap(t))Sp(e,l);else{var u=t.alternate;if(t.lanes===0&&(u===null||u.lanes===0)&&(u=e.lastRenderedReducer,u!==null))try{var d=e.lastRenderedState,p=u(d,n);if(l.hasEagerState=!0,l.eagerState=p,Qn(p,d)){var x=e.interleaved;x===null?(l.next=l,ch(e)):(l.next=x.next,x.next=l),e.interleaved=l;return}}catch{}finally{}n=ip(t,e,l,s),n!==null&&(l=$t(),Kn(n,t,s,l),vp(n,e,s))}}function Ap(t){var e=t.alternate;return t===ct||e!==null&&e===ct}function Sp(t,e){yo=wa=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function vp(t,e,n){if(n&4194240){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Zf(t,n)}}var ya={readContext:Pn,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useInsertionEffect:zt,useLayoutEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useMutableSource:zt,useSyncExternalStore:zt,useId:zt,unstable_isNewReconciler:!1},_y={readContext:Pn,useCallback:function(t,e){return sr().memoizedState=[t,e===void 0?null:e],t},useContext:Pn,useEffect:pd,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ql(4194308,4,xp.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ql(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ql(4,2,t,e)},useMemo:function(t,e){var n=sr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var s=sr();return e=n!==void 0?n(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=wy.bind(null,ct,t),[s.memoizedState,t]},useRef:function(t){var e=sr();return t={current:t},e.memoizedState=t},useState:gd,useDebugValue:wh,useDeferredValue:function(t){return sr().memoizedState=t},useTransition:function(){var t=gd(!1),e=t[0];return t=xy.bind(null,t[1]),sr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var s=ct,l=sr();if(rt){if(n===void 0)throw Error(Z(407));n=n()}else{if(n=e(),Dt===null)throw Error(Z(349));Si&30||cp(s,e,n)}l.memoizedState=n;var u={value:n,getSnapshot:e};return l.queue=u,pd(fp.bind(null,s,u,t),[t]),s.flags|=2048,zo(9,up.bind(null,s,u,n,e),void 0,null),n},useId:function(){var t=sr(),e=Dt.identifierPrefix;if(rt){var n=mr,s=pr;n=(s&~(1<<32-Yn(s)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ho++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=my++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Ey={readContext:Pn,useCallback:yp,useContext:Pn,useEffect:xh,useImperativeHandle:wp,useInsertionEffect:pp,useLayoutEffect:mp,useMemo:_p,useReducer:$c,useRef:gp,useState:function(){return $c(Wo)},useDebugValue:wh,useDeferredValue:function(t){var e=Bn();return Ep(e,At.memoizedState,t)},useTransition:function(){var t=$c(Wo)[0],e=Bn().memoizedState;return[t,e]},useMutableSource:lp,useSyncExternalStore:ap,useId:Cp,unstable_isNewReconciler:!1},Cy={readContext:Pn,useCallback:yp,useContext:Pn,useEffect:xh,useImperativeHandle:wp,useInsertionEffect:pp,useLayoutEffect:mp,useMemo:_p,useReducer:eu,useRef:gp,useState:function(){return eu(Wo)},useDebugValue:wh,useDeferredValue:function(t){var e=Bn();return At===null?e.memoizedState=t:Ep(e,At.memoizedState,t)},useTransition:function(){var t=eu(Wo)[0],e=Bn().memoizedState;return[t,e]},useMutableSource:lp,useSyncExternalStore:ap,useId:Cp,unstable_isNewReconciler:!1};function Wn(t,e){if(t&&t.defaultProps){e=ut({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function $u(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:ut({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Za={isMounted:function(t){return(t=t._reactInternals)?Di(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var s=$t(),l=Zr(t),u=wr(s,l);u.payload=e,n!=null&&(u.callback=n),e=Yr(t,u,l),e!==null&&(Kn(e,t,l,s),Kl(e,t,l))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=$t(),l=Zr(t),u=wr(s,l);u.tag=1,u.payload=e,n!=null&&(u.callback=n),e=Yr(t,u,l),e!==null&&(Kn(e,t,l,s),Kl(e,t,l))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=$t(),s=Zr(t),l=wr(n,s);l.tag=2,e!=null&&(l.callback=e),e=Yr(t,l,s),e!==null&&(Kn(e,t,s,n),Kl(e,t,s))}};function md(t,e,n,s,l,u,d){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,u,d):e.prototype&&e.prototype.isPureReactComponent?!Po(n,s)||!Po(l,u):!0}function Ip(t,e,n){var s=!1,l=ei,u=e.contextType;return typeof u=="object"&&u!==null?u=Pn(u):(l=dn(e)?Ci:Zt.current,s=e.contextTypes,u=(s=s!=null)?ws(t,l):ei),e=new e(n,u),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Za,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=l,t.__reactInternalMemoizedMaskedChildContext=u),e}function xd(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&Za.enqueueReplaceState(e,e.state,null)}function ef(t,e,n,s){var l=t.stateNode;l.props=n,l.state=t.memoizedState,l.refs={},uh(t);var u=e.contextType;typeof u=="object"&&u!==null?l.context=Pn(u):(u=dn(e)?Ci:Zt.current,l.context=ws(t,u)),l.state=t.memoizedState,u=e.getDerivedStateFromProps,typeof u=="function"&&($u(t,e,u,n),l.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(e=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),e!==l.state&&Za.enqueueReplaceState(l,l.state,null),ma(t,n,l,s),l.state=t.memoizedState),typeof l.componentDidMount=="function"&&(t.flags|=4194308)}function Cs(t,e){try{var n="",s=e;do n+=Qx(s),s=s.return;while(s);var l=n}catch(u){l=`
Error generating stack: `+u.message+`
`+u.stack}return{value:t,source:e,stack:l,digest:null}}function tu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function tf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Ay=typeof WeakMap=="function"?WeakMap:Map;function Tp(t,e,n){n=wr(-1,n),n.tag=3,n.payload={element:null};var s=e.value;return n.callback=function(){Ea||(Ea=!0,hf=s),tf(t,e)},n}function Np(t,e,n){n=wr(-1,n),n.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var l=e.value;n.payload=function(){return s(l)},n.callback=function(){tf(t,e)}}var u=t.stateNode;return u!==null&&typeof u.componentDidCatch=="function"&&(n.callback=function(){tf(t,e),typeof s!="function"&&(Kr===null?Kr=new Set([this]):Kr.add(this));var d=e.stack;this.componentDidCatch(e.value,{componentStack:d!==null?d:""})}),n}function wd(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new Ay;var l=new Set;s.set(e,l)}else l=s.get(e),l===void 0&&(l=new Set,s.set(e,l));l.has(n)||(l.add(n),t=Ly.bind(null,t,e,n),e.then(t,t))}function yd(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function _d(t,e,n,s,l){return t.mode&1?(t.flags|=65536,t.lanes=l,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=wr(-1,1),e.tag=2,Yr(n,e,1))),n.lanes|=1),t)}var Sy=vr.ReactCurrentOwner,un=!1;function Jt(t,e,n,s){e.child=t===null?rp(e,null,n,s):_s(e,t.child,n,s)}function Ed(t,e,n,s,l){n=n.render;var u=e.ref;return hs(e,l),s=ph(t,e,n,s,u,l),n=mh(),t!==null&&!un?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~l,Ar(t,e,l)):(rt&&n&&rh(e),e.flags|=1,Jt(t,e,s,l),e.child)}function Cd(t,e,n,s,l){if(t===null){var u=n.type;return typeof u=="function"&&!Ih(u)&&u.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=u,Rp(t,e,u,s,l)):(t=ea(n.type,null,s,e,e.mode,l),t.ref=e.ref,t.return=e,e.child=t)}if(u=t.child,!(t.lanes&l)){var d=u.memoizedProps;if(n=n.compare,n=n!==null?n:Po,n(d,s)&&t.ref===e.ref)return Ar(t,e,l)}return e.flags|=1,t=Qr(u,s),t.ref=e.ref,t.return=e,e.child=t}function Rp(t,e,n,s,l){if(t!==null){var u=t.memoizedProps;if(Po(u,s)&&t.ref===e.ref)if(un=!1,e.pendingProps=s=u,(t.lanes&l)!==0)t.flags&131072&&(un=!0);else return e.lanes=t.lanes,Ar(t,e,l)}return nf(t,e,n,s,l)}function bp(t,e,n){var s=e.pendingProps,l=s.children,u=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ze(is,xn),xn|=n;else{if(!(n&1073741824))return t=u!==null?u.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ze(is,xn),xn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=u!==null?u.baseLanes:n,Ze(is,xn),xn|=s}else u!==null?(s=u.baseLanes|n,e.memoizedState=null):s=n,Ze(is,xn),xn|=s;return Jt(t,e,l,n),e.child}function Op(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function nf(t,e,n,s,l){var u=dn(n)?Ci:Zt.current;return u=ws(e,u),hs(e,l),n=ph(t,e,n,s,u,l),s=mh(),t!==null&&!un?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~l,Ar(t,e,l)):(rt&&s&&rh(e),e.flags|=1,Jt(t,e,n,l),e.child)}function Ad(t,e,n,s,l){if(dn(n)){var u=!0;fa(e)}else u=!1;if(hs(e,l),e.stateNode===null)ql(t,e),Ip(e,n,s),ef(e,n,s,l),s=!0;else if(t===null){var d=e.stateNode,p=e.memoizedProps;d.props=p;var x=d.context,w=n.contextType;typeof w=="object"&&w!==null?w=Pn(w):(w=dn(n)?Ci:Zt.current,w=ws(e,w));var A=n.getDerivedStateFromProps,C=typeof A=="function"||typeof d.getSnapshotBeforeUpdate=="function";C||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(p!==s||x!==w)&&xd(e,d,s,w),Lr=!1;var I=e.memoizedState;d.state=I,ma(e,s,d,l),x=e.memoizedState,p!==s||I!==x||hn.current||Lr?(typeof A=="function"&&($u(e,n,A,s),x=e.memoizedState),(p=Lr||md(e,n,p,s,I,x,w))?(C||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(e.flags|=4194308)):(typeof d.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=x),d.props=s,d.state=x,d.context=w,s=p):(typeof d.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{d=e.stateNode,sp(t,e),p=e.memoizedProps,w=e.type===e.elementType?p:Wn(e.type,p),d.props=w,C=e.pendingProps,I=d.context,x=n.contextType,typeof x=="object"&&x!==null?x=Pn(x):(x=dn(n)?Ci:Zt.current,x=ws(e,x));var D=n.getDerivedStateFromProps;(A=typeof D=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(p!==C||I!==x)&&xd(e,d,s,x),Lr=!1,I=e.memoizedState,d.state=I,ma(e,s,d,l);var k=e.memoizedState;p!==C||I!==k||hn.current||Lr?(typeof D=="function"&&($u(e,n,D,s),k=e.memoizedState),(w=Lr||md(e,n,w,s,I,k,x)||!1)?(A||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(s,k,x),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(s,k,x)),typeof d.componentDidUpdate=="function"&&(e.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof d.componentDidUpdate!="function"||p===t.memoizedProps&&I===t.memoizedState||(e.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||p===t.memoizedProps&&I===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=k),d.props=s,d.state=k,d.context=x,s=w):(typeof d.componentDidUpdate!="function"||p===t.memoizedProps&&I===t.memoizedState||(e.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||p===t.memoizedProps&&I===t.memoizedState||(e.flags|=1024),s=!1)}return rf(t,e,n,s,u,l)}function rf(t,e,n,s,l,u){Op(t,e);var d=(e.flags&128)!==0;if(!s&&!d)return l&&ad(e,n,!1),Ar(t,e,u);s=e.stateNode,Sy.current=e;var p=d&&typeof n.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&d?(e.child=_s(e,t.child,null,u),e.child=_s(e,null,p,u)):Jt(t,e,p,u),e.memoizedState=s.state,l&&ad(e,n,!0),e.child}function Dp(t){var e=t.stateNode;e.pendingContext?ld(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ld(t,e.context,!1),fh(t,e.containerInfo)}function Sd(t,e,n,s,l){return ys(),sh(l),e.flags|=256,Jt(t,e,n,s),e.child}var sf={dehydrated:null,treeContext:null,retryLane:0};function of(t){return{baseLanes:t,cachePool:null,transitions:null}}function Mp(t,e,n){var s=e.pendingProps,l=at.current,u=!1,d=(e.flags&128)!==0,p;if((p=d)||(p=t!==null&&t.memoizedState===null?!1:(l&2)!==0),p?(u=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(l|=1),Ze(at,l&1),t===null)return qu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(d=s.children,t=s.fallback,u?(s=e.mode,u=e.child,d={mode:"hidden",children:d},!(s&1)&&u!==null?(u.childLanes=0,u.pendingProps=d):u=Ja(d,s,0,null),t=Ei(t,s,n,null),u.return=e,t.return=e,u.sibling=t,e.child=u,e.child.memoizedState=of(n),e.memoizedState=sf,t):yh(e,d));if(l=t.memoizedState,l!==null&&(p=l.dehydrated,p!==null))return vy(t,e,d,s,p,l,n);if(u){u=s.fallback,d=e.mode,l=t.child,p=l.sibling;var x={mode:"hidden",children:s.children};return!(d&1)&&e.child!==l?(s=e.child,s.childLanes=0,s.pendingProps=x,e.deletions=null):(s=Qr(l,x),s.subtreeFlags=l.subtreeFlags&14680064),p!==null?u=Qr(p,u):(u=Ei(u,d,n,null),u.flags|=2),u.return=e,s.return=e,s.sibling=u,e.child=s,s=u,u=e.child,d=t.child.memoizedState,d=d===null?of(n):{baseLanes:d.baseLanes|n,cachePool:null,transitions:d.transitions},u.memoizedState=d,u.childLanes=t.childLanes&~n,e.memoizedState=sf,s}return u=t.child,t=u.sibling,s=Qr(u,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=n),s.return=e,s.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=s,e.memoizedState=null,s}function yh(t,e){return e=Ja({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Pl(t,e,n,s){return s!==null&&sh(s),_s(e,t.child,null,n),t=yh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function vy(t,e,n,s,l,u,d){if(n)return e.flags&256?(e.flags&=-257,s=tu(Error(Z(422))),Pl(t,e,d,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(u=s.fallback,l=e.mode,s=Ja({mode:"visible",children:s.children},l,0,null),u=Ei(u,l,d,null),u.flags|=2,s.return=e,u.return=e,s.sibling=u,e.child=s,e.mode&1&&_s(e,t.child,null,d),e.child.memoizedState=of(d),e.memoizedState=sf,u);if(!(e.mode&1))return Pl(t,e,d,null);if(l.data==="$!"){if(s=l.nextSibling&&l.nextSibling.dataset,s)var p=s.dgst;return s=p,u=Error(Z(419)),s=tu(u,s,void 0),Pl(t,e,d,s)}if(p=(d&t.childLanes)!==0,un||p){if(s=Dt,s!==null){switch(d&-d){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=l&(s.suspendedLanes|d)?0:l,l!==0&&l!==u.retryLane&&(u.retryLane=l,Cr(t,l),Kn(s,t,l,-1))}return vh(),s=tu(Error(Z(421))),Pl(t,e,d,s)}return l.data==="$?"?(e.flags|=128,e.child=t.child,e=Fy.bind(null,t),l._reactRetry=e,null):(t=u.treeContext,wn=Xr(l.nextSibling),yn=e,rt=!0,Gn=null,t!==null&&(bn[On++]=pr,bn[On++]=mr,bn[On++]=Ai,pr=t.id,mr=t.overflow,Ai=e),e=yh(e,s.children),e.flags|=4096,e)}function vd(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),Ju(t.return,e,n)}function nu(t,e,n,s,l){var u=t.memoizedState;u===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:l}:(u.isBackwards=e,u.rendering=null,u.renderingStartTime=0,u.last=s,u.tail=n,u.tailMode=l)}function kp(t,e,n){var s=e.pendingProps,l=s.revealOrder,u=s.tail;if(Jt(t,e,s.children,n),s=at.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&vd(t,n,e);else if(t.tag===19)vd(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(Ze(at,s),!(e.mode&1))e.memoizedState=null;else switch(l){case"forwards":for(n=e.child,l=null;n!==null;)t=n.alternate,t!==null&&xa(t)===null&&(l=n),n=n.sibling;n=l,n===null?(l=e.child,e.child=null):(l=n.sibling,n.sibling=null),nu(e,!1,l,n,u);break;case"backwards":for(n=null,l=e.child,e.child=null;l!==null;){if(t=l.alternate,t!==null&&xa(t)===null){e.child=l;break}t=l.sibling,l.sibling=n,n=l,l=t}nu(e,!0,n,null,u);break;case"together":nu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ql(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ar(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),vi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Z(153));if(e.child!==null){for(t=e.child,n=Qr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Qr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Iy(t,e,n){switch(e.tag){case 3:Dp(e),ys();break;case 5:op(e);break;case 1:dn(e.type)&&fa(e);break;case 4:fh(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,l=e.memoizedProps.value;Ze(ga,s._currentValue),s._currentValue=l;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(Ze(at,at.current&1),e.flags|=128,null):n&e.child.childLanes?Mp(t,e,n):(Ze(at,at.current&1),t=Ar(t,e,n),t!==null?t.sibling:null);Ze(at,at.current&1);break;case 19:if(s=(n&e.childLanes)!==0,t.flags&128){if(s)return kp(t,e,n);e.flags|=128}if(l=e.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),Ze(at,at.current),s)break;return null;case 22:case 23:return e.lanes=0,bp(t,e,n)}return Ar(t,e,n)}var Pp,lf,Bp,Lp;Pp=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};lf=function(){};Bp=function(t,e,n,s){var l=t.memoizedProps;if(l!==s){t=e.stateNode,wi(cr.current);var u=null;switch(n){case"input":l=Nu(t,l),s=Nu(t,s),u=[];break;case"select":l=ut({},l,{value:void 0}),s=ut({},s,{value:void 0}),u=[];break;case"textarea":l=Ou(t,l),s=Ou(t,s),u=[];break;default:typeof l.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=ca)}Mu(n,s);var d;n=null;for(w in l)if(!s.hasOwnProperty(w)&&l.hasOwnProperty(w)&&l[w]!=null)if(w==="style"){var p=l[w];for(d in p)p.hasOwnProperty(d)&&(n||(n={}),n[d]="")}else w!=="dangerouslySetInnerHTML"&&w!=="children"&&w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(No.hasOwnProperty(w)?u||(u=[]):(u=u||[]).push(w,null));for(w in s){var x=s[w];if(p=l!=null?l[w]:void 0,s.hasOwnProperty(w)&&x!==p&&(x!=null||p!=null))if(w==="style")if(p){for(d in p)!p.hasOwnProperty(d)||x&&x.hasOwnProperty(d)||(n||(n={}),n[d]="");for(d in x)x.hasOwnProperty(d)&&p[d]!==x[d]&&(n||(n={}),n[d]=x[d])}else n||(u||(u=[]),u.push(w,n)),n=x;else w==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,p=p?p.__html:void 0,x!=null&&p!==x&&(u=u||[]).push(w,x)):w==="children"?typeof x!="string"&&typeof x!="number"||(u=u||[]).push(w,""+x):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&(No.hasOwnProperty(w)?(x!=null&&w==="onScroll"&&qe("scroll",t),u||p===x||(u=[])):(u=u||[]).push(w,x))}n&&(u=u||[]).push("style",n);var w=u;(e.updateQueue=w)&&(e.flags|=4)}};Lp=function(t,e,n,s){n!==s&&(e.flags|=4)};function ro(t,e){if(!rt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function Gt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var l=t.child;l!==null;)n|=l.lanes|l.childLanes,s|=l.subtreeFlags&14680064,s|=l.flags&14680064,l.return=t,l=l.sibling;else for(l=t.child;l!==null;)n|=l.lanes|l.childLanes,s|=l.subtreeFlags,s|=l.flags,l.return=t,l=l.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function Ty(t,e,n){var s=e.pendingProps;switch(ih(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gt(e),null;case 1:return dn(e.type)&&ua(),Gt(e),null;case 3:return s=e.stateNode,Es(),et(hn),et(Zt),dh(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(Ml(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Gn!==null&&(pf(Gn),Gn=null))),lf(t,e),Gt(e),null;case 5:hh(e);var l=wi(Vo.current);if(n=e.type,t!==null&&e.stateNode!=null)Bp(t,e,n,s,l),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(Z(166));return Gt(e),null}if(t=wi(cr.current),Ml(e)){s=e.stateNode,n=e.type;var u=e.memoizedProps;switch(s[or]=e,s[Fo]=u,t=(e.mode&1)!==0,n){case"dialog":qe("cancel",s),qe("close",s);break;case"iframe":case"object":case"embed":qe("load",s);break;case"video":case"audio":for(l=0;l<ho.length;l++)qe(ho[l],s);break;case"source":qe("error",s);break;case"img":case"image":case"link":qe("error",s),qe("load",s);break;case"details":qe("toggle",s);break;case"input":k1(s,u),qe("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!u.multiple},qe("invalid",s);break;case"textarea":B1(s,u),qe("invalid",s)}Mu(n,u),l=null;for(var d in u)if(u.hasOwnProperty(d)){var p=u[d];d==="children"?typeof p=="string"?s.textContent!==p&&(u.suppressHydrationWarning!==!0&&Dl(s.textContent,p,t),l=["children",p]):typeof p=="number"&&s.textContent!==""+p&&(u.suppressHydrationWarning!==!0&&Dl(s.textContent,p,t),l=["children",""+p]):No.hasOwnProperty(d)&&p!=null&&d==="onScroll"&&qe("scroll",s)}switch(n){case"input":Sl(s),P1(s,u,!0);break;case"textarea":Sl(s),L1(s);break;case"select":case"option":break;default:typeof u.onClick=="function"&&(s.onclick=ca)}s=l,e.updateQueue=s,s!==null&&(e.flags|=4)}else{d=l.nodeType===9?l:l.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=fg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=d.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=d.createElement(n,{is:s.is}):(t=d.createElement(n),n==="select"&&(d=t,s.multiple?d.multiple=!0:s.size&&(d.size=s.size))):t=d.createElementNS(t,n),t[or]=e,t[Fo]=s,Pp(t,e,!1,!1),e.stateNode=t;e:{switch(d=ku(n,s),n){case"dialog":qe("cancel",t),qe("close",t),l=s;break;case"iframe":case"object":case"embed":qe("load",t),l=s;break;case"video":case"audio":for(l=0;l<ho.length;l++)qe(ho[l],t);l=s;break;case"source":qe("error",t),l=s;break;case"img":case"image":case"link":qe("error",t),qe("load",t),l=s;break;case"details":qe("toggle",t),l=s;break;case"input":k1(t,s),l=Nu(t,s),qe("invalid",t);break;case"option":l=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},l=ut({},s,{value:void 0}),qe("invalid",t);break;case"textarea":B1(t,s),l=Ou(t,s),qe("invalid",t);break;default:l=s}Mu(n,l),p=l;for(u in p)if(p.hasOwnProperty(u)){var x=p[u];u==="style"?gg(t,x):u==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,x!=null&&hg(t,x)):u==="children"?typeof x=="string"?(n!=="textarea"||x!=="")&&Ro(t,x):typeof x=="number"&&Ro(t,""+x):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(No.hasOwnProperty(u)?x!=null&&u==="onScroll"&&qe("scroll",t):x!=null&&zf(t,u,x,d))}switch(n){case"input":Sl(t),P1(t,s,!1);break;case"textarea":Sl(t),L1(t);break;case"option":s.value!=null&&t.setAttribute("value",""+$r(s.value));break;case"select":t.multiple=!!s.multiple,u=s.value,u!=null?as(t,!!s.multiple,u,!1):s.defaultValue!=null&&as(t,!!s.multiple,s.defaultValue,!0);break;default:typeof l.onClick=="function"&&(t.onclick=ca)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Gt(e),null;case 6:if(t&&e.stateNode!=null)Lp(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(Z(166));if(n=wi(Vo.current),wi(cr.current),Ml(e)){if(s=e.stateNode,n=e.memoizedProps,s[or]=e,(u=s.nodeValue!==n)&&(t=yn,t!==null))switch(t.tag){case 3:Dl(s.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Dl(s.nodeValue,n,(t.mode&1)!==0)}u&&(e.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[or]=e,e.stateNode=s}return Gt(e),null;case 13:if(et(at),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(rt&&wn!==null&&e.mode&1&&!(e.flags&128))tp(),ys(),e.flags|=98560,u=!1;else if(u=Ml(e),s!==null&&s.dehydrated!==null){if(t===null){if(!u)throw Error(Z(318));if(u=e.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(Z(317));u[or]=e}else ys(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Gt(e),u=!1}else Gn!==null&&(pf(Gn),Gn=null),u=!0;if(!u)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||at.current&1?St===0&&(St=3):vh())),e.updateQueue!==null&&(e.flags|=4),Gt(e),null);case 4:return Es(),lf(t,e),t===null&&Bo(e.stateNode.containerInfo),Gt(e),null;case 10:return ah(e.type._context),Gt(e),null;case 17:return dn(e.type)&&ua(),Gt(e),null;case 19:if(et(at),u=e.memoizedState,u===null)return Gt(e),null;if(s=(e.flags&128)!==0,d=u.rendering,d===null)if(s)ro(u,!1);else{if(St!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(d=xa(t),d!==null){for(e.flags|=128,ro(u,!1),s=d.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=n,n=e.child;n!==null;)u=n,t=s,u.flags&=14680066,d=u.alternate,d===null?(u.childLanes=0,u.lanes=t,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=d.childLanes,u.lanes=d.lanes,u.child=d.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=d.memoizedProps,u.memoizedState=d.memoizedState,u.updateQueue=d.updateQueue,u.type=d.type,t=d.dependencies,u.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ze(at,at.current&1|2),e.child}t=t.sibling}u.tail!==null&&xt()>As&&(e.flags|=128,s=!0,ro(u,!1),e.lanes=4194304)}else{if(!s)if(t=xa(d),t!==null){if(e.flags|=128,s=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ro(u,!0),u.tail===null&&u.tailMode==="hidden"&&!d.alternate&&!rt)return Gt(e),null}else 2*xt()-u.renderingStartTime>As&&n!==1073741824&&(e.flags|=128,s=!0,ro(u,!1),e.lanes=4194304);u.isBackwards?(d.sibling=e.child,e.child=d):(n=u.last,n!==null?n.sibling=d:e.child=d,u.last=d)}return u.tail!==null?(e=u.tail,u.rendering=e,u.tail=e.sibling,u.renderingStartTime=xt(),e.sibling=null,n=at.current,Ze(at,s?n&1|2:n&1),e):(Gt(e),null);case 22:case 23:return Sh(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?xn&1073741824&&(Gt(e),e.subtreeFlags&6&&(e.flags|=8192)):Gt(e),null;case 24:return null;case 25:return null}throw Error(Z(156,e.tag))}function Ny(t,e){switch(ih(e),e.tag){case 1:return dn(e.type)&&ua(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Es(),et(hn),et(Zt),dh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return hh(e),null;case 13:if(et(at),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Z(340));ys()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return et(at),null;case 4:return Es(),null;case 10:return ah(e.type._context),null;case 22:case 23:return Sh(),null;case 24:return null;default:return null}}var Bl=!1,jt=!1,Ry=typeof WeakSet=="function"?WeakSet:Set,oe=null;function rs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){pt(t,e,s)}else n.current=null}function af(t,e,n){try{n()}catch(s){pt(t,e,s)}}var Id=!1;function by(t,e){if(Gu=oa,t=Wg(),nh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var l=s.anchorOffset,u=s.focusNode;s=s.focusOffset;try{n.nodeType,u.nodeType}catch{n=null;break e}var d=0,p=-1,x=-1,w=0,A=0,C=t,I=null;t:for(;;){for(var D;C!==n||l!==0&&C.nodeType!==3||(p=d+l),C!==u||s!==0&&C.nodeType!==3||(x=d+s),C.nodeType===3&&(d+=C.nodeValue.length),(D=C.firstChild)!==null;)I=C,C=D;for(;;){if(C===t)break t;if(I===n&&++w===l&&(p=d),I===u&&++A===s&&(x=d),(D=C.nextSibling)!==null)break;C=I,I=C.parentNode}C=D}n=p===-1||x===-1?null:{start:p,end:x}}else n=null}n=n||{start:0,end:0}}else n=null;for(ju={focusedElem:t,selectionRange:n},oa=!1,oe=e;oe!==null;)if(e=oe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,oe=t;else for(;oe!==null;){e=oe;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var B=k.memoizedProps,ee=k.memoizedState,b=e.stateNode,N=b.getSnapshotBeforeUpdate(e.elementType===e.type?B:Wn(e.type,B),ee);b.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var R=e.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Z(163))}}catch(P){pt(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,oe=t;break}oe=e.return}return k=Id,Id=!1,k}function _o(t,e,n){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&t)===t){var u=l.destroy;l.destroy=void 0,u!==void 0&&af(e,n,u)}l=l.next}while(l!==s)}}function Qa(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var s=n.create;n.destroy=s()}n=n.next}while(n!==e)}}function cf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Fp(t){var e=t.alternate;e!==null&&(t.alternate=null,Fp(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[or],delete e[Fo],delete e[Ku],delete e[hy],delete e[dy])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Up(t){return t.tag===5||t.tag===3||t.tag===4}function Td(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Up(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function uf(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ca));else if(s!==4&&(t=t.child,t!==null))for(uf(t,e,n),t=t.sibling;t!==null;)uf(t,e,n),t=t.sibling}function ff(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(ff(t,e,n),t=t.sibling;t!==null;)ff(t,e,n),t=t.sibling}var Lt=null,zn=!1;function Pr(t,e,n){for(n=n.child;n!==null;)Vp(t,e,n),n=n.sibling}function Vp(t,e,n){if(ar&&typeof ar.onCommitFiberUnmount=="function")try{ar.onCommitFiberUnmount(Wa,n)}catch{}switch(n.tag){case 5:jt||rs(n,e);case 6:var s=Lt,l=zn;Lt=null,Pr(t,e,n),Lt=s,zn=l,Lt!==null&&(zn?(t=Lt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Lt.removeChild(n.stateNode));break;case 18:Lt!==null&&(zn?(t=Lt,n=n.stateNode,t.nodeType===8?Zc(t.parentNode,n):t.nodeType===1&&Zc(t,n),Mo(t)):Zc(Lt,n.stateNode));break;case 4:s=Lt,l=zn,Lt=n.stateNode.containerInfo,zn=!0,Pr(t,e,n),Lt=s,zn=l;break;case 0:case 11:case 14:case 15:if(!jt&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){l=s=s.next;do{var u=l,d=u.destroy;u=u.tag,d!==void 0&&(u&2||u&4)&&af(n,e,d),l=l.next}while(l!==s)}Pr(t,e,n);break;case 1:if(!jt&&(rs(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(p){pt(n,e,p)}Pr(t,e,n);break;case 21:Pr(t,e,n);break;case 22:n.mode&1?(jt=(s=jt)||n.memoizedState!==null,Pr(t,e,n),jt=s):Pr(t,e,n);break;default:Pr(t,e,n)}}function Nd(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Ry),e.forEach(function(s){var l=Uy.bind(null,t,s);n.has(s)||(n.add(s),s.then(l,l))})}}function Hn(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var l=n[s];try{var u=t,d=e,p=d;e:for(;p!==null;){switch(p.tag){case 5:Lt=p.stateNode,zn=!1;break e;case 3:Lt=p.stateNode.containerInfo,zn=!0;break e;case 4:Lt=p.stateNode.containerInfo,zn=!0;break e}p=p.return}if(Lt===null)throw Error(Z(160));Vp(u,d,l),Lt=null,zn=!1;var x=l.alternate;x!==null&&(x.return=null),l.return=null}catch(w){pt(l,e,w)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Hp(e,t),e=e.sibling}function Hp(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Hn(e,t),ir(t),s&4){try{_o(3,t,t.return),Qa(3,t)}catch(B){pt(t,t.return,B)}try{_o(5,t,t.return)}catch(B){pt(t,t.return,B)}}break;case 1:Hn(e,t),ir(t),s&512&&n!==null&&rs(n,n.return);break;case 5:if(Hn(e,t),ir(t),s&512&&n!==null&&rs(n,n.return),t.flags&32){var l=t.stateNode;try{Ro(l,"")}catch(B){pt(t,t.return,B)}}if(s&4&&(l=t.stateNode,l!=null)){var u=t.memoizedProps,d=n!==null?n.memoizedProps:u,p=t.type,x=t.updateQueue;if(t.updateQueue=null,x!==null)try{p==="input"&&u.type==="radio"&&u.name!=null&&cg(l,u),ku(p,d);var w=ku(p,u);for(d=0;d<x.length;d+=2){var A=x[d],C=x[d+1];A==="style"?gg(l,C):A==="dangerouslySetInnerHTML"?hg(l,C):A==="children"?Ro(l,C):zf(l,A,C,w)}switch(p){case"input":Ru(l,u);break;case"textarea":ug(l,u);break;case"select":var I=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!u.multiple;var D=u.value;D!=null?as(l,!!u.multiple,D,!1):I!==!!u.multiple&&(u.defaultValue!=null?as(l,!!u.multiple,u.defaultValue,!0):as(l,!!u.multiple,u.multiple?[]:"",!1))}l[Fo]=u}catch(B){pt(t,t.return,B)}}break;case 6:if(Hn(e,t),ir(t),s&4){if(t.stateNode===null)throw Error(Z(162));l=t.stateNode,u=t.memoizedProps;try{l.nodeValue=u}catch(B){pt(t,t.return,B)}}break;case 3:if(Hn(e,t),ir(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Mo(e.containerInfo)}catch(B){pt(t,t.return,B)}break;case 4:Hn(e,t),ir(t);break;case 13:Hn(e,t),ir(t),l=t.child,l.flags&8192&&(u=l.memoizedState!==null,l.stateNode.isHidden=u,!u||l.alternate!==null&&l.alternate.memoizedState!==null||(Ch=xt())),s&4&&Nd(t);break;case 22:if(A=n!==null&&n.memoizedState!==null,t.mode&1?(jt=(w=jt)||A,Hn(e,t),jt=w):Hn(e,t),ir(t),s&8192){if(w=t.memoizedState!==null,(t.stateNode.isHidden=w)&&!A&&t.mode&1)for(oe=t,A=t.child;A!==null;){for(C=oe=A;oe!==null;){switch(I=oe,D=I.child,I.tag){case 0:case 11:case 14:case 15:_o(4,I,I.return);break;case 1:rs(I,I.return);var k=I.stateNode;if(typeof k.componentWillUnmount=="function"){s=I,n=I.return;try{e=s,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(B){pt(s,n,B)}}break;case 5:rs(I,I.return);break;case 22:if(I.memoizedState!==null){bd(C);continue}}D!==null?(D.return=I,oe=D):bd(C)}A=A.sibling}e:for(A=null,C=t;;){if(C.tag===5){if(A===null){A=C;try{l=C.stateNode,w?(u=l.style,typeof u.setProperty=="function"?u.setProperty("display","none","important"):u.display="none"):(p=C.stateNode,x=C.memoizedProps.style,d=x!=null&&x.hasOwnProperty("display")?x.display:null,p.style.display=dg("display",d))}catch(B){pt(t,t.return,B)}}}else if(C.tag===6){if(A===null)try{C.stateNode.nodeValue=w?"":C.memoizedProps}catch(B){pt(t,t.return,B)}}else if((C.tag!==22&&C.tag!==23||C.memoizedState===null||C===t)&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===t)break e;for(;C.sibling===null;){if(C.return===null||C.return===t)break e;A===C&&(A=null),C=C.return}A===C&&(A=null),C.sibling.return=C.return,C=C.sibling}}break;case 19:Hn(e,t),ir(t),s&4&&Nd(t);break;case 21:break;default:Hn(e,t),ir(t)}}function ir(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Up(n)){var s=n;break e}n=n.return}throw Error(Z(160))}switch(s.tag){case 5:var l=s.stateNode;s.flags&32&&(Ro(l,""),s.flags&=-33);var u=Td(t);ff(t,u,l);break;case 3:case 4:var d=s.stateNode.containerInfo,p=Td(t);uf(t,p,d);break;default:throw Error(Z(161))}}catch(x){pt(t,t.return,x)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Oy(t,e,n){oe=t,Wp(t)}function Wp(t,e,n){for(var s=(t.mode&1)!==0;oe!==null;){var l=oe,u=l.child;if(l.tag===22&&s){var d=l.memoizedState!==null||Bl;if(!d){var p=l.alternate,x=p!==null&&p.memoizedState!==null||jt;p=Bl;var w=jt;if(Bl=d,(jt=x)&&!w)for(oe=l;oe!==null;)d=oe,x=d.child,d.tag===22&&d.memoizedState!==null?Od(l):x!==null?(x.return=d,oe=x):Od(l);for(;u!==null;)oe=u,Wp(u),u=u.sibling;oe=l,Bl=p,jt=w}Rd(t)}else l.subtreeFlags&8772&&u!==null?(u.return=l,oe=u):Rd(t)}}function Rd(t){for(;oe!==null;){var e=oe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:jt||Qa(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!jt)if(n===null)s.componentDidMount();else{var l=e.elementType===e.type?n.memoizedProps:Wn(e.type,n.memoizedProps);s.componentDidUpdate(l,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var u=e.updateQueue;u!==null&&dd(e,u,s);break;case 3:var d=e.updateQueue;if(d!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}dd(e,d,n)}break;case 5:var p=e.stateNode;if(n===null&&e.flags&4){n=p;var x=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":x.autoFocus&&n.focus();break;case"img":x.src&&(n.src=x.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var w=e.alternate;if(w!==null){var A=w.memoizedState;if(A!==null){var C=A.dehydrated;C!==null&&Mo(C)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Z(163))}jt||e.flags&512&&cf(e)}catch(I){pt(e,e.return,I)}}if(e===t){oe=null;break}if(n=e.sibling,n!==null){n.return=e.return,oe=n;break}oe=e.return}}function bd(t){for(;oe!==null;){var e=oe;if(e===t){oe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,oe=n;break}oe=e.return}}function Od(t){for(;oe!==null;){var e=oe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Qa(4,e)}catch(x){pt(e,n,x)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var l=e.return;try{s.componentDidMount()}catch(x){pt(e,l,x)}}var u=e.return;try{cf(e)}catch(x){pt(e,u,x)}break;case 5:var d=e.return;try{cf(e)}catch(x){pt(e,d,x)}}}catch(x){pt(e,e.return,x)}if(e===t){oe=null;break}var p=e.sibling;if(p!==null){p.return=e.return,oe=p;break}oe=e.return}}var Dy=Math.ceil,_a=vr.ReactCurrentDispatcher,_h=vr.ReactCurrentOwner,kn=vr.ReactCurrentBatchConfig,De=0,Dt=null,yt=null,Ut=0,xn=0,is=ri(0),St=0,Go=null,vi=0,qa=0,Eh=0,Eo=null,cn=null,Ch=0,As=1/0,dr=null,Ea=!1,hf=null,Kr=null,Ll=!1,Hr=null,Ca=0,Co=0,df=null,Jl=-1,$l=0;function $t(){return De&6?xt():Jl!==-1?Jl:Jl=xt()}function Zr(t){return t.mode&1?De&2&&Ut!==0?Ut&-Ut:py.transition!==null?($l===0&&($l=Ig()),$l):(t=Fe,t!==0||(t=window.event,t=t===void 0?16:Mg(t.type)),t):1}function Kn(t,e,n,s){if(50<Co)throw Co=0,df=null,Error(Z(185));qo(t,n,s),(!(De&2)||t!==Dt)&&(t===Dt&&(!(De&2)&&(qa|=n),St===4&&Ur(t,Ut)),gn(t,s),n===1&&De===0&&!(e.mode&1)&&(As=xt()+500,Ya&&ii()))}function gn(t,e){var n=t.callbackNode;pw(t,e);var s=sa(t,t===Dt?Ut:0);if(s===0)n!==null&&V1(n),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(n!=null&&V1(n),e===1)t.tag===0?gy(Dd.bind(null,t)):Jg(Dd.bind(null,t)),uy(function(){!(De&6)&&ii()}),n=null;else{switch(Tg(s)){case 1:n=Kf;break;case 4:n=Sg;break;case 16:n=ia;break;case 536870912:n=vg;break;default:n=ia}n=Qp(n,zp.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function zp(t,e){if(Jl=-1,$l=0,De&6)throw Error(Z(327));var n=t.callbackNode;if(ds()&&t.callbackNode!==n)return null;var s=sa(t,t===Dt?Ut:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=Aa(t,s);else{e=s;var l=De;De|=2;var u=jp();(Dt!==t||Ut!==e)&&(dr=null,As=xt()+500,_i(t,e));do try{Py();break}catch(p){Gp(t,p)}while(!0);lh(),_a.current=u,De=l,yt!==null?e=0:(Dt=null,Ut=0,e=St)}if(e!==0){if(e===2&&(l=Uu(t),l!==0&&(s=l,e=gf(t,l))),e===1)throw n=Go,_i(t,0),Ur(t,s),gn(t,xt()),n;if(e===6)Ur(t,s);else{if(l=t.current.alternate,!(s&30)&&!My(l)&&(e=Aa(t,s),e===2&&(u=Uu(t),u!==0&&(s=u,e=gf(t,u))),e===1))throw n=Go,_i(t,0),Ur(t,s),gn(t,xt()),n;switch(t.finishedWork=l,t.finishedLanes=s,e){case 0:case 1:throw Error(Z(345));case 2:gi(t,cn,dr);break;case 3:if(Ur(t,s),(s&130023424)===s&&(e=Ch+500-xt(),10<e)){if(sa(t,0)!==0)break;if(l=t.suspendedLanes,(l&s)!==s){$t(),t.pingedLanes|=t.suspendedLanes&l;break}t.timeoutHandle=Yu(gi.bind(null,t,cn,dr),e);break}gi(t,cn,dr);break;case 4:if(Ur(t,s),(s&4194240)===s)break;for(e=t.eventTimes,l=-1;0<s;){var d=31-Yn(s);u=1<<d,d=e[d],d>l&&(l=d),s&=~u}if(s=l,s=xt()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Dy(s/1960))-s,10<s){t.timeoutHandle=Yu(gi.bind(null,t,cn,dr),s);break}gi(t,cn,dr);break;case 5:gi(t,cn,dr);break;default:throw Error(Z(329))}}}return gn(t,xt()),t.callbackNode===n?zp.bind(null,t):null}function gf(t,e){var n=Eo;return t.current.memoizedState.isDehydrated&&(_i(t,e).flags|=256),t=Aa(t,e),t!==2&&(e=cn,cn=n,e!==null&&pf(e)),t}function pf(t){cn===null?cn=t:cn.push.apply(cn,t)}function My(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var l=n[s],u=l.getSnapshot;l=l.value;try{if(!Qn(u(),l))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ur(t,e){for(e&=~Eh,e&=~qa,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Yn(e),s=1<<n;t[n]=-1,e&=~s}}function Dd(t){if(De&6)throw Error(Z(327));ds();var e=sa(t,0);if(!(e&1))return gn(t,xt()),null;var n=Aa(t,e);if(t.tag!==0&&n===2){var s=Uu(t);s!==0&&(e=s,n=gf(t,s))}if(n===1)throw n=Go,_i(t,0),Ur(t,e),gn(t,xt()),n;if(n===6)throw Error(Z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,gi(t,cn,dr),gn(t,xt()),null}function Ah(t,e){var n=De;De|=1;try{return t(e)}finally{De=n,De===0&&(As=xt()+500,Ya&&ii())}}function Ii(t){Hr!==null&&Hr.tag===0&&!(De&6)&&ds();var e=De;De|=1;var n=kn.transition,s=Fe;try{if(kn.transition=null,Fe=1,t)return t()}finally{Fe=s,kn.transition=n,De=e,!(De&6)&&ii()}}function Sh(){xn=is.current,et(is)}function _i(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,cy(n)),yt!==null)for(n=yt.return;n!==null;){var s=n;switch(ih(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&ua();break;case 3:Es(),et(hn),et(Zt),dh();break;case 5:hh(s);break;case 4:Es();break;case 13:et(at);break;case 19:et(at);break;case 10:ah(s.type._context);break;case 22:case 23:Sh()}n=n.return}if(Dt=t,yt=t=Qr(t.current,null),Ut=xn=e,St=0,Go=null,Eh=qa=vi=0,cn=Eo=null,xi!==null){for(e=0;e<xi.length;e++)if(n=xi[e],s=n.interleaved,s!==null){n.interleaved=null;var l=s.next,u=n.pending;if(u!==null){var d=u.next;u.next=l,s.next=d}n.pending=s}xi=null}return t}function Gp(t,e){do{var n=yt;try{if(lh(),Zl.current=ya,wa){for(var s=ct.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}wa=!1}if(Si=0,Rt=At=ct=null,yo=!1,Ho=0,_h.current=null,n===null||n.return===null){St=1,Go=e,yt=null;break}e:{var u=t,d=n.return,p=n,x=e;if(e=Ut,p.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){var w=x,A=p,C=A.tag;if(!(A.mode&1)&&(C===0||C===11||C===15)){var I=A.alternate;I?(A.updateQueue=I.updateQueue,A.memoizedState=I.memoizedState,A.lanes=I.lanes):(A.updateQueue=null,A.memoizedState=null)}var D=yd(d);if(D!==null){D.flags&=-257,_d(D,d,p,u,e),D.mode&1&&wd(u,w,e),e=D,x=w;var k=e.updateQueue;if(k===null){var B=new Set;B.add(x),e.updateQueue=B}else k.add(x);break e}else{if(!(e&1)){wd(u,w,e),vh();break e}x=Error(Z(426))}}else if(rt&&p.mode&1){var ee=yd(d);if(ee!==null){!(ee.flags&65536)&&(ee.flags|=256),_d(ee,d,p,u,e),sh(Cs(x,p));break e}}u=x=Cs(x,p),St!==4&&(St=2),Eo===null?Eo=[u]:Eo.push(u),u=d;do{switch(u.tag){case 3:u.flags|=65536,e&=-e,u.lanes|=e;var b=Tp(u,x,e);hd(u,b);break e;case 1:p=x;var N=u.type,R=u.stateNode;if(!(u.flags&128)&&(typeof N.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(Kr===null||!Kr.has(R)))){u.flags|=65536,e&=-e,u.lanes|=e;var P=Np(u,p,e);hd(u,P);break e}}u=u.return}while(u!==null)}Yp(n)}catch(X){e=X,yt===n&&n!==null&&(yt=n=n.return);continue}break}while(!0)}function jp(){var t=_a.current;return _a.current=ya,t===null?ya:t}function vh(){(St===0||St===3||St===2)&&(St=4),Dt===null||!(vi&268435455)&&!(qa&268435455)||Ur(Dt,Ut)}function Aa(t,e){var n=De;De|=2;var s=jp();(Dt!==t||Ut!==e)&&(dr=null,_i(t,e));do try{ky();break}catch(l){Gp(t,l)}while(!0);if(lh(),De=n,_a.current=s,yt!==null)throw Error(Z(261));return Dt=null,Ut=0,St}function ky(){for(;yt!==null;)Xp(yt)}function Py(){for(;yt!==null&&!ow();)Xp(yt)}function Xp(t){var e=Zp(t.alternate,t,xn);t.memoizedProps=t.pendingProps,e===null?Yp(t):yt=e,_h.current=null}function Yp(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Ny(n,e),n!==null){n.flags&=32767,yt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{St=6,yt=null;return}}else if(n=Ty(n,e,xn),n!==null){yt=n;return}if(e=e.sibling,e!==null){yt=e;return}yt=e=t}while(e!==null);St===0&&(St=5)}function gi(t,e,n){var s=Fe,l=kn.transition;try{kn.transition=null,Fe=1,By(t,e,n,s)}finally{kn.transition=l,Fe=s}return null}function By(t,e,n,s){do ds();while(Hr!==null);if(De&6)throw Error(Z(327));n=t.finishedWork;var l=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Z(177));t.callbackNode=null,t.callbackPriority=0;var u=n.lanes|n.childLanes;if(mw(t,u),t===Dt&&(yt=Dt=null,Ut=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ll||(Ll=!0,Qp(ia,function(){return ds(),null})),u=(n.flags&15990)!==0,n.subtreeFlags&15990||u){u=kn.transition,kn.transition=null;var d=Fe;Fe=1;var p=De;De|=4,_h.current=null,by(t,n),Hp(n,t),ny(ju),oa=!!Gu,ju=Gu=null,t.current=n,Oy(n),lw(),De=p,Fe=d,kn.transition=u}else t.current=n;if(Ll&&(Ll=!1,Hr=t,Ca=l),u=t.pendingLanes,u===0&&(Kr=null),uw(n.stateNode),gn(t,xt()),e!==null)for(s=t.onRecoverableError,n=0;n<e.length;n++)l=e[n],s(l.value,{componentStack:l.stack,digest:l.digest});if(Ea)throw Ea=!1,t=hf,hf=null,t;return Ca&1&&t.tag!==0&&ds(),u=t.pendingLanes,u&1?t===df?Co++:(Co=0,df=t):Co=0,ii(),null}function ds(){if(Hr!==null){var t=Tg(Ca),e=kn.transition,n=Fe;try{if(kn.transition=null,Fe=16>t?16:t,Hr===null)var s=!1;else{if(t=Hr,Hr=null,Ca=0,De&6)throw Error(Z(331));var l=De;for(De|=4,oe=t.current;oe!==null;){var u=oe,d=u.child;if(oe.flags&16){var p=u.deletions;if(p!==null){for(var x=0;x<p.length;x++){var w=p[x];for(oe=w;oe!==null;){var A=oe;switch(A.tag){case 0:case 11:case 15:_o(8,A,u)}var C=A.child;if(C!==null)C.return=A,oe=C;else for(;oe!==null;){A=oe;var I=A.sibling,D=A.return;if(Fp(A),A===w){oe=null;break}if(I!==null){I.return=D,oe=I;break}oe=D}}}var k=u.alternate;if(k!==null){var B=k.child;if(B!==null){k.child=null;do{var ee=B.sibling;B.sibling=null,B=ee}while(B!==null)}}oe=u}}if(u.subtreeFlags&2064&&d!==null)d.return=u,oe=d;else e:for(;oe!==null;){if(u=oe,u.flags&2048)switch(u.tag){case 0:case 11:case 15:_o(9,u,u.return)}var b=u.sibling;if(b!==null){b.return=u.return,oe=b;break e}oe=u.return}}var N=t.current;for(oe=N;oe!==null;){d=oe;var R=d.child;if(d.subtreeFlags&2064&&R!==null)R.return=d,oe=R;else e:for(d=N;oe!==null;){if(p=oe,p.flags&2048)try{switch(p.tag){case 0:case 11:case 15:Qa(9,p)}}catch(X){pt(p,p.return,X)}if(p===d){oe=null;break e}var P=p.sibling;if(P!==null){P.return=p.return,oe=P;break e}oe=p.return}}if(De=l,ii(),ar&&typeof ar.onPostCommitFiberRoot=="function")try{ar.onPostCommitFiberRoot(Wa,t)}catch{}s=!0}return s}finally{Fe=n,kn.transition=e}}return!1}function Md(t,e,n){e=Cs(n,e),e=Tp(t,e,1),t=Yr(t,e,1),e=$t(),t!==null&&(qo(t,1,e),gn(t,e))}function pt(t,e,n){if(t.tag===3)Md(t,t,n);else for(;e!==null;){if(e.tag===3){Md(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Kr===null||!Kr.has(s))){t=Cs(n,t),t=Np(e,t,1),e=Yr(e,t,1),t=$t(),e!==null&&(qo(e,1,t),gn(e,t));break}}e=e.return}}function Ly(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),e=$t(),t.pingedLanes|=t.suspendedLanes&n,Dt===t&&(Ut&n)===n&&(St===4||St===3&&(Ut&130023424)===Ut&&500>xt()-Ch?_i(t,0):Eh|=n),gn(t,e)}function Kp(t,e){e===0&&(t.mode&1?(e=Tl,Tl<<=1,!(Tl&130023424)&&(Tl=4194304)):e=1);var n=$t();t=Cr(t,e),t!==null&&(qo(t,e,n),gn(t,n))}function Fy(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Kp(t,n)}function Uy(t,e){var n=0;switch(t.tag){case 13:var s=t.stateNode,l=t.memoizedState;l!==null&&(n=l.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(Z(314))}s!==null&&s.delete(e),Kp(t,n)}var Zp;Zp=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||hn.current)un=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return un=!1,Iy(t,e,n);un=!!(t.flags&131072)}else un=!1,rt&&e.flags&1048576&&$g(e,da,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;ql(t,e),t=e.pendingProps;var l=ws(e,Zt.current);hs(e,n),l=ph(null,e,s,t,l,n);var u=mh();return e.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,dn(s)?(u=!0,fa(e)):u=!1,e.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,uh(e),l.updater=Za,e.stateNode=l,l._reactInternals=e,ef(e,s,t,n),e=rf(null,e,s,!0,u,n)):(e.tag=0,rt&&u&&rh(e),Jt(null,e,l,n),e=e.child),e;case 16:s=e.elementType;e:{switch(ql(t,e),t=e.pendingProps,l=s._init,s=l(s._payload),e.type=s,l=e.tag=Hy(s),t=Wn(s,t),l){case 0:e=nf(null,e,s,t,n);break e;case 1:e=Ad(null,e,s,t,n);break e;case 11:e=Ed(null,e,s,t,n);break e;case 14:e=Cd(null,e,s,Wn(s.type,t),n);break e}throw Error(Z(306,s,""))}return e;case 0:return s=e.type,l=e.pendingProps,l=e.elementType===s?l:Wn(s,l),nf(t,e,s,l,n);case 1:return s=e.type,l=e.pendingProps,l=e.elementType===s?l:Wn(s,l),Ad(t,e,s,l,n);case 3:e:{if(Dp(e),t===null)throw Error(Z(387));s=e.pendingProps,u=e.memoizedState,l=u.element,sp(t,e),ma(e,s,null,n);var d=e.memoizedState;if(s=d.element,u.isDehydrated)if(u={element:s,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},e.updateQueue.baseState=u,e.memoizedState=u,e.flags&256){l=Cs(Error(Z(423)),e),e=Sd(t,e,s,n,l);break e}else if(s!==l){l=Cs(Error(Z(424)),e),e=Sd(t,e,s,n,l);break e}else for(wn=Xr(e.stateNode.containerInfo.firstChild),yn=e,rt=!0,Gn=null,n=rp(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ys(),s===l){e=Ar(t,e,n);break e}Jt(t,e,s,n)}e=e.child}return e;case 5:return op(e),t===null&&qu(e),s=e.type,l=e.pendingProps,u=t!==null?t.memoizedProps:null,d=l.children,Xu(s,l)?d=null:u!==null&&Xu(s,u)&&(e.flags|=32),Op(t,e),Jt(t,e,d,n),e.child;case 6:return t===null&&qu(e),null;case 13:return Mp(t,e,n);case 4:return fh(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=_s(e,null,s,n):Jt(t,e,s,n),e.child;case 11:return s=e.type,l=e.pendingProps,l=e.elementType===s?l:Wn(s,l),Ed(t,e,s,l,n);case 7:return Jt(t,e,e.pendingProps,n),e.child;case 8:return Jt(t,e,e.pendingProps.children,n),e.child;case 12:return Jt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(s=e.type._context,l=e.pendingProps,u=e.memoizedProps,d=l.value,Ze(ga,s._currentValue),s._currentValue=d,u!==null)if(Qn(u.value,d)){if(u.children===l.children&&!hn.current){e=Ar(t,e,n);break e}}else for(u=e.child,u!==null&&(u.return=e);u!==null;){var p=u.dependencies;if(p!==null){d=u.child;for(var x=p.firstContext;x!==null;){if(x.context===s){if(u.tag===1){x=wr(-1,n&-n),x.tag=2;var w=u.updateQueue;if(w!==null){w=w.shared;var A=w.pending;A===null?x.next=x:(x.next=A.next,A.next=x),w.pending=x}}u.lanes|=n,x=u.alternate,x!==null&&(x.lanes|=n),Ju(u.return,n,e),p.lanes|=n;break}x=x.next}}else if(u.tag===10)d=u.type===e.type?null:u.child;else if(u.tag===18){if(d=u.return,d===null)throw Error(Z(341));d.lanes|=n,p=d.alternate,p!==null&&(p.lanes|=n),Ju(d,n,e),d=u.sibling}else d=u.child;if(d!==null)d.return=u;else for(d=u;d!==null;){if(d===e){d=null;break}if(u=d.sibling,u!==null){u.return=d.return,d=u;break}d=d.return}u=d}Jt(t,e,l.children,n),e=e.child}return e;case 9:return l=e.type,s=e.pendingProps.children,hs(e,n),l=Pn(l),s=s(l),e.flags|=1,Jt(t,e,s,n),e.child;case 14:return s=e.type,l=Wn(s,e.pendingProps),l=Wn(s.type,l),Cd(t,e,s,l,n);case 15:return Rp(t,e,e.type,e.pendingProps,n);case 17:return s=e.type,l=e.pendingProps,l=e.elementType===s?l:Wn(s,l),ql(t,e),e.tag=1,dn(s)?(t=!0,fa(e)):t=!1,hs(e,n),Ip(e,s,l),ef(e,s,l,n),rf(null,e,s,!0,t,n);case 19:return kp(t,e,n);case 22:return bp(t,e,n)}throw Error(Z(156,e.tag))};function Qp(t,e){return Ag(t,e)}function Vy(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(t,e,n,s){return new Vy(t,e,n,s)}function Ih(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Hy(t){if(typeof t=="function")return Ih(t)?1:0;if(t!=null){if(t=t.$$typeof,t===jf)return 11;if(t===Xf)return 14}return 2}function Qr(t,e){var n=t.alternate;return n===null?(n=Dn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ea(t,e,n,s,l,u){var d=2;if(s=t,typeof t=="function")Ih(t)&&(d=1);else if(typeof t=="string")d=5;else e:switch(t){case Ki:return Ei(n.children,l,u,e);case Gf:d=8,l|=8;break;case Su:return t=Dn(12,n,e,l|2),t.elementType=Su,t.lanes=u,t;case vu:return t=Dn(13,n,e,l),t.elementType=vu,t.lanes=u,t;case Iu:return t=Dn(19,n,e,l),t.elementType=Iu,t.lanes=u,t;case og:return Ja(n,l,u,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ig:d=10;break e;case sg:d=9;break e;case jf:d=11;break e;case Xf:d=14;break e;case Br:d=16,s=null;break e}throw Error(Z(130,t==null?t:typeof t,""))}return e=Dn(d,n,e,l),e.elementType=t,e.type=s,e.lanes=u,e}function Ei(t,e,n,s){return t=Dn(7,t,s,e),t.lanes=n,t}function Ja(t,e,n,s){return t=Dn(22,t,s,e),t.elementType=og,t.lanes=n,t.stateNode={isHidden:!1},t}function ru(t,e,n){return t=Dn(6,t,null,e),t.lanes=n,t}function iu(t,e,n){return e=Dn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Wy(t,e,n,s,l){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fc(0),this.expirationTimes=Fc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fc(0),this.identifierPrefix=s,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function Th(t,e,n,s,l,u,d,p,x){return t=new Wy(t,e,n,p,x),e===1?(e=1,u===!0&&(e|=8)):e=0,u=Dn(3,null,null,e),t.current=u,u.stateNode=t,u.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},uh(u),t}function zy(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yi,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}function qp(t){if(!t)return ei;t=t._reactInternals;e:{if(Di(t)!==t||t.tag!==1)throw Error(Z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(dn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Z(171))}if(t.tag===1){var n=t.type;if(dn(n))return qg(t,n,e)}return e}function Jp(t,e,n,s,l,u,d,p,x){return t=Th(n,s,!0,t,l,u,d,p,x),t.context=qp(null),n=t.current,s=$t(),l=Zr(n),u=wr(s,l),u.callback=e??null,Yr(n,u,l),t.current.lanes=l,qo(t,l,s),gn(t,s),t}function $a(t,e,n,s){var l=e.current,u=$t(),d=Zr(l);return n=qp(n),e.context===null?e.context=n:e.pendingContext=n,e=wr(u,d),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=Yr(l,e,d),t!==null&&(Kn(t,l,d,u),Kl(t,l,d)),d}function Sa(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function kd(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Nh(t,e){kd(t,e),(t=t.alternate)&&kd(t,e)}function Gy(){return null}var $p=typeof reportError=="function"?reportError:function(t){console.error(t)};function Rh(t){this._internalRoot=t}ec.prototype.render=Rh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Z(409));$a(t,e,null,null)};ec.prototype.unmount=Rh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ii(function(){$a(null,t,null,null)}),e[Er]=null}};function ec(t){this._internalRoot=t}ec.prototype.unstable_scheduleHydration=function(t){if(t){var e=bg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Fr.length&&e!==0&&e<Fr[n].priority;n++);Fr.splice(n,0,t),n===0&&Dg(t)}};function bh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function tc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Pd(){}function jy(t,e,n,s,l){if(l){if(typeof s=="function"){var u=s;s=function(){var w=Sa(d);u.call(w)}}var d=Jp(e,s,t,0,null,!1,!1,"",Pd);return t._reactRootContainer=d,t[Er]=d.current,Bo(t.nodeType===8?t.parentNode:t),Ii(),d}for(;l=t.lastChild;)t.removeChild(l);if(typeof s=="function"){var p=s;s=function(){var w=Sa(x);p.call(w)}}var x=Th(t,0,!1,null,null,!1,!1,"",Pd);return t._reactRootContainer=x,t[Er]=x.current,Bo(t.nodeType===8?t.parentNode:t),Ii(function(){$a(e,x,n,s)}),x}function nc(t,e,n,s,l){var u=n._reactRootContainer;if(u){var d=u;if(typeof l=="function"){var p=l;l=function(){var x=Sa(d);p.call(x)}}$a(e,d,t,l)}else d=jy(n,e,t,l,s);return Sa(d)}Ng=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=fo(e.pendingLanes);n!==0&&(Zf(e,n|1),gn(e,xt()),!(De&6)&&(As=xt()+500,ii()))}break;case 13:Ii(function(){var s=Cr(t,1);if(s!==null){var l=$t();Kn(s,t,1,l)}}),Nh(t,1)}};Qf=function(t){if(t.tag===13){var e=Cr(t,134217728);if(e!==null){var n=$t();Kn(e,t,134217728,n)}Nh(t,134217728)}};Rg=function(t){if(t.tag===13){var e=Zr(t),n=Cr(t,e);if(n!==null){var s=$t();Kn(n,t,e,s)}Nh(t,e)}};bg=function(){return Fe};Og=function(t,e){var n=Fe;try{return Fe=t,e()}finally{Fe=n}};Bu=function(t,e,n){switch(e){case"input":if(Ru(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var l=Xa(s);if(!l)throw Error(Z(90));ag(s),Ru(s,l)}}}break;case"textarea":ug(t,n);break;case"select":e=n.value,e!=null&&as(t,!!n.multiple,e,!1)}};xg=Ah;wg=Ii;var Xy={usingClientEntryPoint:!1,Events:[$o,Ji,Xa,pg,mg,Ah]},io={findFiberByHostInstance:mi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Yy={bundleType:io.bundleType,version:io.version,rendererPackageName:io.rendererPackageName,rendererConfig:io.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Eg(t),t===null?null:t.stateNode},findFiberByHostInstance:io.findFiberByHostInstance||Gy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fl.isDisabled&&Fl.supportsFiber)try{Wa=Fl.inject(Yy),ar=Fl}catch{}}Cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xy;Cn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bh(e))throw Error(Z(200));return zy(t,e,null,n)};Cn.createRoot=function(t,e){if(!bh(t))throw Error(Z(299));var n=!1,s="",l=$p;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(l=e.onRecoverableError)),e=Th(t,1,!1,null,null,n,!1,s,l),t[Er]=e.current,Bo(t.nodeType===8?t.parentNode:t),new Rh(e)};Cn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Z(188)):(t=Object.keys(t).join(","),Error(Z(268,t)));return t=Eg(e),t=t===null?null:t.stateNode,t};Cn.flushSync=function(t){return Ii(t)};Cn.hydrate=function(t,e,n){if(!tc(e))throw Error(Z(200));return nc(null,t,e,!0,n)};Cn.hydrateRoot=function(t,e,n){if(!bh(t))throw Error(Z(405));var s=n!=null&&n.hydratedSources||null,l=!1,u="",d=$p;if(n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(u=n.identifierPrefix),n.onRecoverableError!==void 0&&(d=n.onRecoverableError)),e=Jp(e,null,t,1,n??null,l,!1,u,d),t[Er]=e.current,Bo(t),s)for(t=0;t<s.length;t++)n=s[t],l=n._getVersion,l=l(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,l]:e.mutableSourceEagerHydrationData.push(n,l);return new ec(e)};Cn.render=function(t,e,n){if(!tc(e))throw Error(Z(200));return nc(null,t,e,!1,n)};Cn.unmountComponentAtNode=function(t){if(!tc(t))throw Error(Z(40));return t._reactRootContainer?(Ii(function(){nc(null,null,t,!1,function(){t._reactRootContainer=null,t[Er]=null})}),!0):!1};Cn.unstable_batchedUpdates=Ah;Cn.unstable_renderSubtreeIntoContainer=function(t,e,n,s){if(!tc(n))throw Error(Z(200));if(t==null||t._reactInternals===void 0)throw Error(Z(38));return nc(t,e,n,!1,s)};Cn.version="18.3.1-next-f1338f8080-20240426";function e2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e2)}catch(t){console.error(t)}}e2(),eg.exports=Cn;var Ky=eg.exports,t2,Bd=Ky;t2=Bd.createRoot,Bd.hydrateRoot;var tl={},Zy=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},n2={},Sn={};let Oh;const Qy=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Sn.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};Sn.getSymbolTotalCodewords=function(e){return Qy[e]};Sn.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e};Sn.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');Oh=e};Sn.isKanjiModeEnabled=function(){return typeof Oh<"u"};Sn.toSJIS=function(e){return Oh(e)};var rc={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+n)}}t.isValid=function(s){return s&&typeof s.bit<"u"&&s.bit>=0&&s.bit<4},t.from=function(s,l){if(t.isValid(s))return s;try{return e(s)}catch{return l}}})(rc);function r2(){this.buffer=[],this.length=0}r2.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let n=0;n<e;n++)this.putBit((t>>>e-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var qy=r2;function nl(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}nl.prototype.set=function(t,e,n,s){const l=t*this.size+e;this.data[l]=n,s&&(this.reservedBit[l]=!0)};nl.prototype.get=function(t,e){return this.data[t*this.size+e]};nl.prototype.xor=function(t,e,n){this.data[t*this.size+e]^=n};nl.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var Jy=nl,i2={};(function(t){const e=Sn.getSymbolSize;t.getRowColCoords=function(s){if(s===1)return[];const l=Math.floor(s/7)+2,u=e(s),d=u===145?26:Math.ceil((u-13)/(2*l-2))*2,p=[u-7];for(let x=1;x<l-1;x++)p[x]=p[x-1]-d;return p.push(6),p.reverse()},t.getPositions=function(s){const l=[],u=t.getRowColCoords(s),d=u.length;for(let p=0;p<d;p++)for(let x=0;x<d;x++)p===0&&x===0||p===0&&x===d-1||p===d-1&&x===0||l.push([u[p],u[x]]);return l}})(i2);var s2={};const $y=Sn.getSymbolSize,Ld=7;s2.getPositions=function(e){const n=$y(e);return[[0,0],[n-Ld,0],[0,n-Ld]]};var o2={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(l){return l!=null&&l!==""&&!isNaN(l)&&l>=0&&l<=7},t.from=function(l){return t.isValid(l)?parseInt(l,10):void 0},t.getPenaltyN1=function(l){const u=l.size;let d=0,p=0,x=0,w=null,A=null;for(let C=0;C<u;C++){p=x=0,w=A=null;for(let I=0;I<u;I++){let D=l.get(C,I);D===w?p++:(p>=5&&(d+=e.N1+(p-5)),w=D,p=1),D=l.get(I,C),D===A?x++:(x>=5&&(d+=e.N1+(x-5)),A=D,x=1)}p>=5&&(d+=e.N1+(p-5)),x>=5&&(d+=e.N1+(x-5))}return d},t.getPenaltyN2=function(l){const u=l.size;let d=0;for(let p=0;p<u-1;p++)for(let x=0;x<u-1;x++){const w=l.get(p,x)+l.get(p,x+1)+l.get(p+1,x)+l.get(p+1,x+1);(w===4||w===0)&&d++}return d*e.N2},t.getPenaltyN3=function(l){const u=l.size;let d=0,p=0,x=0;for(let w=0;w<u;w++){p=x=0;for(let A=0;A<u;A++)p=p<<1&2047|l.get(w,A),A>=10&&(p===1488||p===93)&&d++,x=x<<1&2047|l.get(A,w),A>=10&&(x===1488||x===93)&&d++}return d*e.N3},t.getPenaltyN4=function(l){let u=0;const d=l.data.length;for(let x=0;x<d;x++)u+=l.data[x];return Math.abs(Math.ceil(u*100/d/5)-10)*e.N4};function n(s,l,u){switch(s){case t.Patterns.PATTERN000:return(l+u)%2===0;case t.Patterns.PATTERN001:return l%2===0;case t.Patterns.PATTERN010:return u%3===0;case t.Patterns.PATTERN011:return(l+u)%3===0;case t.Patterns.PATTERN100:return(Math.floor(l/2)+Math.floor(u/3))%2===0;case t.Patterns.PATTERN101:return l*u%2+l*u%3===0;case t.Patterns.PATTERN110:return(l*u%2+l*u%3)%2===0;case t.Patterns.PATTERN111:return(l*u%3+(l+u)%2)%2===0;default:throw new Error("bad maskPattern:"+s)}}t.applyMask=function(l,u){const d=u.size;for(let p=0;p<d;p++)for(let x=0;x<d;x++)u.isReserved(x,p)||u.xor(x,p,n(l,x,p))},t.getBestMask=function(l,u){const d=Object.keys(t.Patterns).length;let p=0,x=1/0;for(let w=0;w<d;w++){u(w),t.applyMask(w,l);const A=t.getPenaltyN1(l)+t.getPenaltyN2(l)+t.getPenaltyN3(l)+t.getPenaltyN4(l);t.applyMask(w,l),A<x&&(x=A,p=w)}return p}})(o2);var ic={};const Wr=rc,Ul=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Vl=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];ic.getBlocksCount=function(e,n){switch(n){case Wr.L:return Ul[(e-1)*4+0];case Wr.M:return Ul[(e-1)*4+1];case Wr.Q:return Ul[(e-1)*4+2];case Wr.H:return Ul[(e-1)*4+3];default:return}};ic.getTotalCodewordsCount=function(e,n){switch(n){case Wr.L:return Vl[(e-1)*4+0];case Wr.M:return Vl[(e-1)*4+1];case Wr.Q:return Vl[(e-1)*4+2];case Wr.H:return Vl[(e-1)*4+3];default:return}};var l2={},sc={};const Ao=new Uint8Array(512),va=new Uint8Array(256);(function(){let e=1;for(let n=0;n<255;n++)Ao[n]=e,va[e]=n,e<<=1,e&256&&(e^=285);for(let n=255;n<512;n++)Ao[n]=Ao[n-255]})();sc.log=function(e){if(e<1)throw new Error("log("+e+")");return va[e]};sc.exp=function(e){return Ao[e]};sc.mul=function(e,n){return e===0||n===0?0:Ao[va[e]+va[n]]};(function(t){const e=sc;t.mul=function(s,l){const u=new Uint8Array(s.length+l.length-1);for(let d=0;d<s.length;d++)for(let p=0;p<l.length;p++)u[d+p]^=e.mul(s[d],l[p]);return u},t.mod=function(s,l){let u=new Uint8Array(s);for(;u.length-l.length>=0;){const d=u[0];for(let x=0;x<l.length;x++)u[x]^=e.mul(l[x],d);let p=0;for(;p<u.length&&u[p]===0;)p++;u=u.slice(p)}return u},t.generateECPolynomial=function(s){let l=new Uint8Array([1]);for(let u=0;u<s;u++)l=t.mul(l,new Uint8Array([1,e.exp(u)]));return l}})(l2);const a2=l2;function Dh(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}Dh.prototype.initialize=function(e){this.degree=e,this.genPoly=a2.generateECPolynomial(this.degree)};Dh.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const n=new Uint8Array(e.length+this.degree);n.set(e);const s=a2.mod(n,this.genPoly),l=this.degree-s.length;if(l>0){const u=new Uint8Array(this.degree);return u.set(s,l),u}return s};var e_=Dh,c2={},si={},Mh={};Mh.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var ur={};const u2="[0-9]+",t_="[A-Z $%*+\\-./:]+";let jo="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";jo=jo.replace(/u/g,"\\u");const n_="(?:(?![A-Z0-9 $%*+\\-./:]|"+jo+`)(?:.|[\r
]))+`;ur.KANJI=new RegExp(jo,"g");ur.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");ur.BYTE=new RegExp(n_,"g");ur.NUMERIC=new RegExp(u2,"g");ur.ALPHANUMERIC=new RegExp(t_,"g");const r_=new RegExp("^"+jo+"$"),i_=new RegExp("^"+u2+"$"),s_=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");ur.testKanji=function(e){return r_.test(e)};ur.testNumeric=function(e){return i_.test(e)};ur.testAlphanumeric=function(e){return s_.test(e)};(function(t){const e=Mh,n=ur;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(u,d){if(!u.ccBits)throw new Error("Invalid mode: "+u);if(!e.isValid(d))throw new Error("Invalid version: "+d);return d>=1&&d<10?u.ccBits[0]:d<27?u.ccBits[1]:u.ccBits[2]},t.getBestModeForData=function(u){return n.testNumeric(u)?t.NUMERIC:n.testAlphanumeric(u)?t.ALPHANUMERIC:n.testKanji(u)?t.KANJI:t.BYTE},t.toString=function(u){if(u&&u.id)return u.id;throw new Error("Invalid mode")},t.isValid=function(u){return u&&u.bit&&u.ccBits};function s(l){if(typeof l!="string")throw new Error("Param is not a string");switch(l.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+l)}}t.from=function(u,d){if(t.isValid(u))return u;try{return s(u)}catch{return d}}})(si);(function(t){const e=Sn,n=ic,s=rc,l=si,u=Mh,d=7973,p=e.getBCHDigit(d);function x(I,D,k){for(let B=1;B<=40;B++)if(D<=t.getCapacity(B,k,I))return B}function w(I,D){return l.getCharCountIndicator(I,D)+4}function A(I,D){let k=0;return I.forEach(function(B){const ee=w(B.mode,D);k+=ee+B.getBitsLength()}),k}function C(I,D){for(let k=1;k<=40;k++)if(A(I,k)<=t.getCapacity(k,D,l.MIXED))return k}t.from=function(D,k){return u.isValid(D)?parseInt(D,10):k},t.getCapacity=function(D,k,B){if(!u.isValid(D))throw new Error("Invalid QR Code version");typeof B>"u"&&(B=l.BYTE);const ee=e.getSymbolTotalCodewords(D),b=n.getTotalCodewordsCount(D,k),N=(ee-b)*8;if(B===l.MIXED)return N;const R=N-w(B,D);switch(B){case l.NUMERIC:return Math.floor(R/10*3);case l.ALPHANUMERIC:return Math.floor(R/11*2);case l.KANJI:return Math.floor(R/13);case l.BYTE:default:return Math.floor(R/8)}},t.getBestVersionForData=function(D,k){let B;const ee=s.from(k,s.M);if(Array.isArray(D)){if(D.length>1)return C(D,ee);if(D.length===0)return 1;B=D[0]}else B=D;return x(B.mode,B.getLength(),ee)},t.getEncodedBits=function(D){if(!u.isValid(D)||D<7)throw new Error("Invalid QR Code version");let k=D<<12;for(;e.getBCHDigit(k)-p>=0;)k^=d<<e.getBCHDigit(k)-p;return D<<12|k}})(c2);var f2={};const mf=Sn,h2=1335,o_=21522,Fd=mf.getBCHDigit(h2);f2.getEncodedBits=function(e,n){const s=e.bit<<3|n;let l=s<<10;for(;mf.getBCHDigit(l)-Fd>=0;)l^=h2<<mf.getBCHDigit(l)-Fd;return(s<<10|l)^o_};var d2={};const l_=si;function Ss(t){this.mode=l_.NUMERIC,this.data=t.toString()}Ss.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};Ss.prototype.getLength=function(){return this.data.length};Ss.prototype.getBitsLength=function(){return Ss.getBitsLength(this.data.length)};Ss.prototype.write=function(e){let n,s,l;for(n=0;n+3<=this.data.length;n+=3)s=this.data.substr(n,3),l=parseInt(s,10),e.put(l,10);const u=this.data.length-n;u>0&&(s=this.data.substr(n),l=parseInt(s,10),e.put(l,u*3+1))};var a_=Ss;const c_=si,su=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function vs(t){this.mode=c_.ALPHANUMERIC,this.data=t}vs.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};vs.prototype.getLength=function(){return this.data.length};vs.prototype.getBitsLength=function(){return vs.getBitsLength(this.data.length)};vs.prototype.write=function(e){let n;for(n=0;n+2<=this.data.length;n+=2){let s=su.indexOf(this.data[n])*45;s+=su.indexOf(this.data[n+1]),e.put(s,11)}this.data.length%2&&e.put(su.indexOf(this.data[n]),6)};var u_=vs;const f_=si;function Is(t){this.mode=f_.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}Is.getBitsLength=function(e){return e*8};Is.prototype.getLength=function(){return this.data.length};Is.prototype.getBitsLength=function(){return Is.getBitsLength(this.data.length)};Is.prototype.write=function(t){for(let e=0,n=this.data.length;e<n;e++)t.put(this.data[e],8)};var h_=Is;const d_=si,g_=Sn;function Ts(t){this.mode=d_.KANJI,this.data=t}Ts.getBitsLength=function(e){return e*13};Ts.prototype.getLength=function(){return this.data.length};Ts.prototype.getBitsLength=function(){return Ts.getBitsLength(this.data.length)};Ts.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let n=g_.toSJIS(this.data[e]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),t.put(n,13)}};var p_=Ts,g2={exports:{}};(function(t){var e={single_source_shortest_paths:function(n,s,l){var u={},d={};d[s]=0;var p=e.PriorityQueue.make();p.push(s,0);for(var x,w,A,C,I,D,k,B,ee;!p.empty();){x=p.pop(),w=x.value,C=x.cost,I=n[w]||{};for(A in I)I.hasOwnProperty(A)&&(D=I[A],k=C+D,B=d[A],ee=typeof d[A]>"u",(ee||B>k)&&(d[A]=k,p.push(A,k),u[A]=w))}if(typeof l<"u"&&typeof d[l]>"u"){var b=["Could not find a path from ",s," to ",l,"."].join("");throw new Error(b)}return u},extract_shortest_path_from_predecessor_list:function(n,s){for(var l=[],u=s;u;)l.push(u),n[u],u=n[u];return l.reverse(),l},find_path:function(n,s,l){var u=e.single_source_shortest_paths(n,s,l);return e.extract_shortest_path_from_predecessor_list(u,l)},PriorityQueue:{make:function(n){var s=e.PriorityQueue,l={},u;n=n||{};for(u in s)s.hasOwnProperty(u)&&(l[u]=s[u]);return l.queue=[],l.sorter=n.sorter||s.default_sorter,l},default_sorter:function(n,s){return n.cost-s.cost},push:function(n,s){var l={value:n,cost:s};this.queue.push(l),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(g2);var m_=g2.exports;(function(t){const e=si,n=a_,s=u_,l=h_,u=p_,d=ur,p=Sn,x=m_;function w(b){return unescape(encodeURIComponent(b)).length}function A(b,N,R){const P=[];let X;for(;(X=b.exec(R))!==null;)P.push({data:X[0],index:X.index,mode:N,length:X[0].length});return P}function C(b){const N=A(d.NUMERIC,e.NUMERIC,b),R=A(d.ALPHANUMERIC,e.ALPHANUMERIC,b);let P,X;return p.isKanjiModeEnabled()?(P=A(d.BYTE,e.BYTE,b),X=A(d.KANJI,e.KANJI,b)):(P=A(d.BYTE_KANJI,e.BYTE,b),X=[]),N.concat(R,P,X).sort(function(F,K){return F.index-K.index}).map(function(F){return{data:F.data,mode:F.mode,length:F.length}})}function I(b,N){switch(N){case e.NUMERIC:return n.getBitsLength(b);case e.ALPHANUMERIC:return s.getBitsLength(b);case e.KANJI:return u.getBitsLength(b);case e.BYTE:return l.getBitsLength(b)}}function D(b){return b.reduce(function(N,R){const P=N.length-1>=0?N[N.length-1]:null;return P&&P.mode===R.mode?(N[N.length-1].data+=R.data,N):(N.push(R),N)},[])}function k(b){const N=[];for(let R=0;R<b.length;R++){const P=b[R];switch(P.mode){case e.NUMERIC:N.push([P,{data:P.data,mode:e.ALPHANUMERIC,length:P.length},{data:P.data,mode:e.BYTE,length:P.length}]);break;case e.ALPHANUMERIC:N.push([P,{data:P.data,mode:e.BYTE,length:P.length}]);break;case e.KANJI:N.push([P,{data:P.data,mode:e.BYTE,length:w(P.data)}]);break;case e.BYTE:N.push([{data:P.data,mode:e.BYTE,length:w(P.data)}])}}return N}function B(b,N){const R={},P={start:{}};let X=["start"];for(let G=0;G<b.length;G++){const F=b[G],K=[];for(let z=0;z<F.length;z++){const fe=F[z],Se=""+G+z;K.push(Se),R[Se]={node:fe,lastCount:0},P[Se]={};for(let ce=0;ce<X.length;ce++){const me=X[ce];R[me]&&R[me].node.mode===fe.mode?(P[me][Se]=I(R[me].lastCount+fe.length,fe.mode)-I(R[me].lastCount,fe.mode),R[me].lastCount+=fe.length):(R[me]&&(R[me].lastCount=fe.length),P[me][Se]=I(fe.length,fe.mode)+4+e.getCharCountIndicator(fe.mode,N))}}X=K}for(let G=0;G<X.length;G++)P[X[G]].end=0;return{map:P,table:R}}function ee(b,N){let R;const P=e.getBestModeForData(b);if(R=e.from(N,P),R!==e.BYTE&&R.bit<P.bit)throw new Error('"'+b+'" cannot be encoded with mode '+e.toString(R)+`.
 Suggested mode is: `+e.toString(P));switch(R===e.KANJI&&!p.isKanjiModeEnabled()&&(R=e.BYTE),R){case e.NUMERIC:return new n(b);case e.ALPHANUMERIC:return new s(b);case e.KANJI:return new u(b);case e.BYTE:return new l(b)}}t.fromArray=function(N){return N.reduce(function(R,P){return typeof P=="string"?R.push(ee(P,null)):P.data&&R.push(ee(P.data,P.mode)),R},[])},t.fromString=function(N,R){const P=C(N,p.isKanjiModeEnabled()),X=k(P),G=B(X,R),F=x.find_path(G.map,"start","end"),K=[];for(let z=1;z<F.length-1;z++)K.push(G.table[F[z]].node);return t.fromArray(D(K))},t.rawSplit=function(N){return t.fromArray(C(N,p.isKanjiModeEnabled()))}})(d2);const oc=Sn,ou=rc,x_=qy,w_=Jy,y_=i2,__=s2,xf=o2,wf=ic,E_=e_,Ia=c2,C_=f2,A_=si,lu=d2;function S_(t,e){const n=t.size,s=__.getPositions(e);for(let l=0;l<s.length;l++){const u=s[l][0],d=s[l][1];for(let p=-1;p<=7;p++)if(!(u+p<=-1||n<=u+p))for(let x=-1;x<=7;x++)d+x<=-1||n<=d+x||(p>=0&&p<=6&&(x===0||x===6)||x>=0&&x<=6&&(p===0||p===6)||p>=2&&p<=4&&x>=2&&x<=4?t.set(u+p,d+x,!0,!0):t.set(u+p,d+x,!1,!0))}}function v_(t){const e=t.size;for(let n=8;n<e-8;n++){const s=n%2===0;t.set(n,6,s,!0),t.set(6,n,s,!0)}}function I_(t,e){const n=y_.getPositions(e);for(let s=0;s<n.length;s++){const l=n[s][0],u=n[s][1];for(let d=-2;d<=2;d++)for(let p=-2;p<=2;p++)d===-2||d===2||p===-2||p===2||d===0&&p===0?t.set(l+d,u+p,!0,!0):t.set(l+d,u+p,!1,!0)}}function T_(t,e){const n=t.size,s=Ia.getEncodedBits(e);let l,u,d;for(let p=0;p<18;p++)l=Math.floor(p/3),u=p%3+n-8-3,d=(s>>p&1)===1,t.set(l,u,d,!0),t.set(u,l,d,!0)}function au(t,e,n){const s=t.size,l=C_.getEncodedBits(e,n);let u,d;for(u=0;u<15;u++)d=(l>>u&1)===1,u<6?t.set(u,8,d,!0):u<8?t.set(u+1,8,d,!0):t.set(s-15+u,8,d,!0),u<8?t.set(8,s-u-1,d,!0):u<9?t.set(8,15-u-1+1,d,!0):t.set(8,15-u-1,d,!0);t.set(s-8,8,1,!0)}function N_(t,e){const n=t.size;let s=-1,l=n-1,u=7,d=0;for(let p=n-1;p>0;p-=2)for(p===6&&p--;;){for(let x=0;x<2;x++)if(!t.isReserved(l,p-x)){let w=!1;d<e.length&&(w=(e[d]>>>u&1)===1),t.set(l,p-x,w),u--,u===-1&&(d++,u=7)}if(l+=s,l<0||n<=l){l-=s,s=-s;break}}}function R_(t,e,n){const s=new x_;n.forEach(function(x){s.put(x.mode.bit,4),s.put(x.getLength(),A_.getCharCountIndicator(x.mode,t)),x.write(s)});const l=oc.getSymbolTotalCodewords(t),u=wf.getTotalCodewordsCount(t,e),d=(l-u)*8;for(s.getLengthInBits()+4<=d&&s.put(0,4);s.getLengthInBits()%8!==0;)s.putBit(0);const p=(d-s.getLengthInBits())/8;for(let x=0;x<p;x++)s.put(x%2?17:236,8);return b_(s,t,e)}function b_(t,e,n){const s=oc.getSymbolTotalCodewords(e),l=wf.getTotalCodewordsCount(e,n),u=s-l,d=wf.getBlocksCount(e,n),p=s%d,x=d-p,w=Math.floor(s/d),A=Math.floor(u/d),C=A+1,I=w-A,D=new E_(I);let k=0;const B=new Array(d),ee=new Array(d);let b=0;const N=new Uint8Array(t.buffer);for(let F=0;F<d;F++){const K=F<x?A:C;B[F]=N.slice(k,k+K),ee[F]=D.encode(B[F]),k+=K,b=Math.max(b,K)}const R=new Uint8Array(s);let P=0,X,G;for(X=0;X<b;X++)for(G=0;G<d;G++)X<B[G].length&&(R[P++]=B[G][X]);for(X=0;X<I;X++)for(G=0;G<d;G++)R[P++]=ee[G][X];return R}function O_(t,e,n,s){let l;if(Array.isArray(t))l=lu.fromArray(t);else if(typeof t=="string"){let w=e;if(!w){const A=lu.rawSplit(t);w=Ia.getBestVersionForData(A,n)}l=lu.fromString(t,w||40)}else throw new Error("Invalid data");const u=Ia.getBestVersionForData(l,n);if(!u)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=u;else if(e<u)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+u+`.
`);const d=R_(e,n,l),p=oc.getSymbolSize(e),x=new w_(p);return S_(x,e),v_(x),I_(x,e),au(x,n,0),e>=7&&T_(x,e),N_(x,d),isNaN(s)&&(s=xf.getBestMask(x,au.bind(null,x,n))),xf.applyMask(s,x),au(x,n,s),{modules:x,version:e,errorCorrectionLevel:n,maskPattern:s,segments:l}}n2.create=function(e,n){if(typeof e>"u"||e==="")throw new Error("No input text");let s=ou.M,l,u;return typeof n<"u"&&(s=ou.from(n.errorCorrectionLevel,ou.M),l=Ia.from(n.version),u=xf.from(n.maskPattern),n.toSJISFunc&&oc.setToSJISFunction(n.toSJISFunc)),O_(e,l,s,u)};var p2={},kh={};(function(t){function e(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let s=n.slice().replace("#","").split("");if(s.length<3||s.length===5||s.length>8)throw new Error("Invalid hex color: "+n);(s.length===3||s.length===4)&&(s=Array.prototype.concat.apply([],s.map(function(u){return[u,u]}))),s.length===6&&s.push("F","F");const l=parseInt(s.join(""),16);return{r:l>>24&255,g:l>>16&255,b:l>>8&255,a:l&255,hex:"#"+s.slice(0,6).join("")}}t.getOptions=function(s){s||(s={}),s.color||(s.color={});const l=typeof s.margin>"u"||s.margin===null||s.margin<0?4:s.margin,u=s.width&&s.width>=21?s.width:void 0,d=s.scale||4;return{width:u,scale:u?4:d,margin:l,color:{dark:e(s.color.dark||"#000000ff"),light:e(s.color.light||"#ffffffff")},type:s.type,rendererOpts:s.rendererOpts||{}}},t.getScale=function(s,l){return l.width&&l.width>=s+l.margin*2?l.width/(s+l.margin*2):l.scale},t.getImageWidth=function(s,l){const u=t.getScale(s,l);return Math.floor((s+l.margin*2)*u)},t.qrToImageData=function(s,l,u){const d=l.modules.size,p=l.modules.data,x=t.getScale(d,u),w=Math.floor((d+u.margin*2)*x),A=u.margin*x,C=[u.color.light,u.color.dark];for(let I=0;I<w;I++)for(let D=0;D<w;D++){let k=(I*w+D)*4,B=u.color.light;if(I>=A&&D>=A&&I<w-A&&D<w-A){const ee=Math.floor((I-A)/x),b=Math.floor((D-A)/x);B=C[p[ee*d+b]?1:0]}s[k++]=B.r,s[k++]=B.g,s[k++]=B.b,s[k]=B.a}}})(kh);(function(t){const e=kh;function n(l,u,d){l.clearRect(0,0,u.width,u.height),u.style||(u.style={}),u.height=d,u.width=d,u.style.height=d+"px",u.style.width=d+"px"}function s(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(u,d,p){let x=p,w=d;typeof x>"u"&&(!d||!d.getContext)&&(x=d,d=void 0),d||(w=s()),x=e.getOptions(x);const A=e.getImageWidth(u.modules.size,x),C=w.getContext("2d"),I=C.createImageData(A,A);return e.qrToImageData(I.data,u,x),n(C,w,A),C.putImageData(I,0,0),w},t.renderToDataURL=function(u,d,p){let x=p;typeof x>"u"&&(!d||!d.getContext)&&(x=d,d=void 0),x||(x={});const w=t.render(u,d,x),A=x.type||"image/png",C=x.rendererOpts||{};return w.toDataURL(A,C.quality)}})(p2);var m2={};const D_=kh;function Ud(t,e){const n=t.a/255,s=e+'="'+t.hex+'"';return n<1?s+" "+e+'-opacity="'+n.toFixed(2).slice(1)+'"':s}function cu(t,e,n){let s=t+e;return typeof n<"u"&&(s+=" "+n),s}function M_(t,e,n){let s="",l=0,u=!1,d=0;for(let p=0;p<t.length;p++){const x=Math.floor(p%e),w=Math.floor(p/e);!x&&!u&&(u=!0),t[p]?(d++,p>0&&x>0&&t[p-1]||(s+=u?cu("M",x+n,.5+w+n):cu("m",l,0),l=0,u=!1),x+1<e&&t[p+1]||(s+=cu("h",d),d=0)):l++}return s}m2.render=function(e,n,s){const l=D_.getOptions(n),u=e.modules.size,d=e.modules.data,p=u+l.margin*2,x=l.color.light.a?"<path "+Ud(l.color.light,"fill")+' d="M0 0h'+p+"v"+p+'H0z"/>':"",w="<path "+Ud(l.color.dark,"stroke")+' d="'+M_(d,u,l.margin)+'"/>',A='viewBox="0 0 '+p+" "+p+'"',I='<svg xmlns="http://www.w3.org/2000/svg" '+(l.width?'width="'+l.width+'" height="'+l.width+'" ':"")+A+' shape-rendering="crispEdges">'+x+w+`</svg>
`;return typeof s=="function"&&s(null,I),I};const k_=Zy,yf=n2,x2=p2,P_=m2;function Ph(t,e,n,s,l){const u=[].slice.call(arguments,1),d=u.length,p=typeof u[d-1]=="function";if(!p&&!k_())throw new Error("Callback required as last argument");if(p){if(d<2)throw new Error("Too few arguments provided");d===2?(l=n,n=e,e=s=void 0):d===3&&(e.getContext&&typeof l>"u"?(l=s,s=void 0):(l=s,s=n,n=e,e=void 0))}else{if(d<1)throw new Error("Too few arguments provided");return d===1?(n=e,e=s=void 0):d===2&&!e.getContext&&(s=n,n=e,e=void 0),new Promise(function(x,w){try{const A=yf.create(n,s);x(t(A,e,s))}catch(A){w(A)}})}try{const x=yf.create(n,s);l(null,t(x,e,s))}catch(x){l(x)}}tl.create=yf.create;tl.toCanvas=Ph.bind(null,x2.render);tl.toDataURL=Ph.bind(null,x2.renderToDataURL);tl.toString=Ph.bind(null,function(t,e,n){return P_.render(t,n)});var se;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(se||(se={}));var Vd=new Map([[se.QR_CODE,"QR_CODE"],[se.AZTEC,"AZTEC"],[se.CODABAR,"CODABAR"],[se.CODE_39,"CODE_39"],[se.CODE_93,"CODE_93"],[se.CODE_128,"CODE_128"],[se.DATA_MATRIX,"DATA_MATRIX"],[se.MAXICODE,"MAXICODE"],[se.ITF,"ITF"],[se.EAN_13,"EAN_13"],[se.EAN_8,"EAN_8"],[se.PDF_417,"PDF_417"],[se.RSS_14,"RSS_14"],[se.RSS_EXPANDED,"RSS_EXPANDED"],[se.UPC_A,"UPC_A"],[se.UPC_E,"UPC_E"],[se.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Hd;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(Hd||(Hd={}));function B_(t){return Object.values(se).includes(t)}var Ta;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Ta||(Ta={}));var L_=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[Ta.SCAN_TYPE_CAMERA,Ta.SCAN_TYPE_FILE],t}(),w2=function(){function t(e,n){this.format=e,this.formatName=n}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!Vd.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,Vd.get(e))},t}(),Wd=function(){function t(){}return t.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t}(),_f;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(_f||(_f={}));var F_=function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:_f.UNKWOWN_ERROR}},t}(),U_=function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t}();function hr(t){return typeof t>"u"||t===null}var ss=function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),y2=function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var s=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(s,"."),!0),!1}for(var l=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],u=new Set(l),d=Object.keys(e),p=0,x=d;p<x.length;p++){var w=x[p];if(u.has(w))return n.logError("".concat(w," is not supported videoConstaints."),!0),!1}return!0},t}(),Ef={exports:{}};(function(t,e){(function(n,s){s(e)})(Qs,function(n){function s(_){return _==null}var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,r){_.__proto__=r}||function(_,r){for(var i in r)r.hasOwnProperty(i)&&(_[i]=r[i])};function u(_,r){l(_,r);function i(){this.constructor=_}_.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}function d(_,r){var i=Object.setPrototypeOf;i?i(_,r):_.__proto__=r}function p(_,r){r===void 0&&(r=_.constructor);var i=Error.captureStackTrace;i&&i(_,r)}var x=function(_){u(r,_);function r(i){var o=this.constructor,a=_.call(this,i)||this;return Object.defineProperty(a,"name",{value:o.name,enumerable:!1}),d(a,o.prototype),p(a),a}return r}(Error);class w extends x{constructor(r=void 0){super(r),this.message=r}getKind(){return this.constructor.kind}}w.kind="Exception";class A extends w{}A.kind="ArgumentException";class C extends w{}C.kind="IllegalArgumentException";class I{constructor(r){if(this.binarizer=r,r===null)throw new C("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(r,i){return this.binarizer.getBlackRow(r,i)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(r,i,o,a){const c=this.binarizer.getLuminanceSource().crop(r,i,o,a);return new I(this.binarizer.createBinarizer(c))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new I(this.binarizer.createBinarizer(r))}rotateCounterClockwise45(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new I(this.binarizer.createBinarizer(r))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class D extends w{static getChecksumInstance(){return new D}}D.kind="ChecksumException";class k{constructor(r){this.source=r}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class B{static arraycopy(r,i,o,a,c){for(;c--;)o[a++]=r[i++]}static currentTimeMillis(){return Date.now()}}class ee extends w{}ee.kind="IndexOutOfBoundsException";class b extends ee{constructor(r=void 0,i=void 0){super(i),this.index=r,this.message=i}}b.kind="ArrayIndexOutOfBoundsException";class N{static fill(r,i){for(let o=0,a=r.length;o<a;o++)r[o]=i}static fillWithin(r,i,o,a){N.rangeCheck(r.length,i,o);for(let c=i;c<o;c++)r[c]=a}static rangeCheck(r,i,o){if(i>o)throw new C("fromIndex("+i+") > toIndex("+o+")");if(i<0)throw new b(i);if(o>r)throw new b(o)}static asList(...r){return r}static create(r,i,o){return Array.from({length:r}).map(c=>Array.from({length:i}).fill(o))}static createInt32Array(r,i,o){return Array.from({length:r}).map(c=>Int32Array.from({length:i}).fill(o))}static equals(r,i){if(!r||!i||!r.length||!i.length||r.length!==i.length)return!1;for(let o=0,a=r.length;o<a;o++)if(r[o]!==i[o])return!1;return!0}static hashCode(r){if(r===null)return 0;let i=1;for(const o of r)i=31*i+o;return i}static fillUint8Array(r,i){for(let o=0;o!==r.length;o++)r[o]=i}static copyOf(r,i){return r.slice(0,i)}static copyOfUint8Array(r,i){if(r.length<=i){const o=new Uint8Array(i);return o.set(r),o}return r.slice(0,i)}static copyOfRange(r,i,o){const a=o-i,c=new Int32Array(a);return B.arraycopy(r,i,c,0,a),c}static binarySearch(r,i,o){o===void 0&&(o=N.numberComparator);let a=0,c=r.length-1;for(;a<=c;){const f=c+a>>1,h=o(i,r[f]);if(h>0)a=f+1;else if(h<0)c=f-1;else return f}return-a-1}static numberComparator(r,i){return r-i}}class R{static numberOfTrailingZeros(r){let i;if(r===0)return 32;let o=31;return i=r<<16,i!==0&&(o-=16,r=i),i=r<<8,i!==0&&(o-=8,r=i),i=r<<4,i!==0&&(o-=4,r=i),i=r<<2,i!==0&&(o-=2,r=i),o-(r<<1>>>31)}static numberOfLeadingZeros(r){if(r===0)return 32;let i=1;return r>>>16||(i+=16,r<<=16),r>>>24||(i+=8,r<<=8),r>>>28||(i+=4,r<<=4),r>>>30||(i+=2,r<<=2),i-=r>>>31,i}static toHexString(r){return r.toString(16)}static toBinaryString(r){return String(parseInt(String(r),2))}static bitCount(r){return r=r-(r>>>1&1431655765),r=(r&858993459)+(r>>>2&858993459),r=r+(r>>>4)&252645135,r=r+(r>>>8),r=r+(r>>>16),r&63}static truncDivision(r,i){return Math.trunc(r/i)}static parseInt(r,i=void 0){return parseInt(r,i)}}R.MIN_VALUE_32_BITS=-2147483648,R.MAX_VALUE=Number.MAX_SAFE_INTEGER;class P{constructor(r,i){r===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=r,i==null?this.bits=P.makeArray(r):this.bits=i)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(r){if(r>this.bits.length*32){const i=P.makeArray(r);B.arraycopy(this.bits,0,i,0,this.bits.length),this.bits=i}}get(r){return(this.bits[Math.floor(r/32)]&1<<(r&31))!==0}set(r){this.bits[Math.floor(r/32)]|=1<<(r&31)}flip(r){this.bits[Math.floor(r/32)]^=1<<(r&31)}getNextSet(r){const i=this.size;if(r>=i)return i;const o=this.bits;let a=Math.floor(r/32),c=o[a];c&=~((1<<(r&31))-1);const f=o.length;for(;c===0;){if(++a===f)return i;c=o[a]}const h=a*32+R.numberOfTrailingZeros(c);return h>i?i:h}getNextUnset(r){const i=this.size;if(r>=i)return i;const o=this.bits;let a=Math.floor(r/32),c=~o[a];c&=~((1<<(r&31))-1);const f=o.length;for(;c===0;){if(++a===f)return i;c=~o[a]}const h=a*32+R.numberOfTrailingZeros(c);return h>i?i:h}setBulk(r,i){this.bits[Math.floor(r/32)]=i}setRange(r,i){if(i<r||r<0||i>this.size)throw new C;if(i===r)return;i--;const o=Math.floor(r/32),a=Math.floor(i/32),c=this.bits;for(let f=o;f<=a;f++){const h=f>o?0:r&31,m=(2<<(f<a?31:i&31))-(1<<h);c[f]|=m}}clear(){const r=this.bits.length,i=this.bits;for(let o=0;o<r;o++)i[o]=0}isRange(r,i,o){if(i<r||r<0||i>this.size)throw new C;if(i===r)return!0;i--;const a=Math.floor(r/32),c=Math.floor(i/32),f=this.bits;for(let h=a;h<=c;h++){const g=h>a?0:r&31,y=(2<<(h<c?31:i&31))-(1<<g)&4294967295;if((f[h]&y)!==(o?y:0))return!1}return!0}appendBit(r){this.ensureCapacity(this.size+1),r&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(r,i){if(i<0||i>32)throw new C("Num bits must be between 0 and 32");this.ensureCapacity(this.size+i);for(let o=i;o>0;o--)this.appendBit((r>>o-1&1)===1)}appendBitArray(r){const i=r.size;this.ensureCapacity(this.size+i);for(let o=0;o<i;o++)this.appendBit(r.get(o))}xor(r){if(this.size!==r.size)throw new C("Sizes don't match");const i=this.bits;for(let o=0,a=i.length;o<a;o++)i[o]^=r.bits[o]}toBytes(r,i,o,a){for(let c=0;c<a;c++){let f=0;for(let h=0;h<8;h++)this.get(r)&&(f|=1<<7-h),r++;i[o+c]=f}}getBitArray(){return this.bits}reverse(){const r=new Int32Array(this.bits.length),i=Math.floor((this.size-1)/32),o=i+1,a=this.bits;for(let c=0;c<o;c++){let f=a[c];f=f>>1&1431655765|(f&1431655765)<<1,f=f>>2&858993459|(f&858993459)<<2,f=f>>4&252645135|(f&252645135)<<4,f=f>>8&16711935|(f&16711935)<<8,f=f>>16&65535|(f&65535)<<16,r[i-c]=f}if(this.size!==o*32){const c=o*32-this.size;let f=r[0]>>>c;for(let h=1;h<o;h++){const g=r[h];f|=g<<32-c,r[h-1]=f,f=g>>>c}r[o-1]=f}this.bits=r}static makeArray(r){return new Int32Array(Math.floor((r+31)/32))}equals(r){if(!(r instanceof P))return!1;const i=r;return this.size===i.size&&N.equals(this.bits,i.bits)}hashCode(){return 31*this.size+N.hashCode(this.bits)}toString(){let r="";for(let i=0,o=this.size;i<o;i++)i&7||(r+=" "),r+=this.get(i)?"X":".";return r}clone(){return new P(this.size,this.bits.slice())}}var X;(function(_){_[_.OTHER=0]="OTHER",_[_.PURE_BARCODE=1]="PURE_BARCODE",_[_.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",_[_.TRY_HARDER=3]="TRY_HARDER",_[_.CHARACTER_SET=4]="CHARACTER_SET",_[_.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",_[_.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",_[_.ASSUME_GS1=7]="ASSUME_GS1",_[_.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",_[_.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",_[_.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(X||(X={}));var G=X;class F extends w{static getFormatInstance(){return new F}}F.kind="FormatException";var K;(function(_){_[_.Cp437=0]="Cp437",_[_.ISO8859_1=1]="ISO8859_1",_[_.ISO8859_2=2]="ISO8859_2",_[_.ISO8859_3=3]="ISO8859_3",_[_.ISO8859_4=4]="ISO8859_4",_[_.ISO8859_5=5]="ISO8859_5",_[_.ISO8859_6=6]="ISO8859_6",_[_.ISO8859_7=7]="ISO8859_7",_[_.ISO8859_8=8]="ISO8859_8",_[_.ISO8859_9=9]="ISO8859_9",_[_.ISO8859_10=10]="ISO8859_10",_[_.ISO8859_11=11]="ISO8859_11",_[_.ISO8859_13=12]="ISO8859_13",_[_.ISO8859_14=13]="ISO8859_14",_[_.ISO8859_15=14]="ISO8859_15",_[_.ISO8859_16=15]="ISO8859_16",_[_.SJIS=16]="SJIS",_[_.Cp1250=17]="Cp1250",_[_.Cp1251=18]="Cp1251",_[_.Cp1252=19]="Cp1252",_[_.Cp1256=20]="Cp1256",_[_.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",_[_.UTF8=22]="UTF8",_[_.ASCII=23]="ASCII",_[_.Big5=24]="Big5",_[_.GB18030=25]="GB18030",_[_.EUC_KR=26]="EUC_KR"})(K||(K={}));class z{constructor(r,i,o,...a){this.valueIdentifier=r,this.name=o,typeof i=="number"?this.values=Int32Array.from([i]):this.values=i,this.otherEncodingNames=a,z.VALUE_IDENTIFIER_TO_ECI.set(r,this),z.NAME_TO_ECI.set(o,this);const c=this.values;for(let f=0,h=c.length;f!==h;f++){const g=c[f];z.VALUES_TO_ECI.set(g,this)}for(const f of a)z.NAME_TO_ECI.set(f,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(r){if(r<0||r>=900)throw new F("incorect value");const i=z.VALUES_TO_ECI.get(r);if(i===void 0)throw new F("incorect value");return i}static getCharacterSetECIByName(r){const i=z.NAME_TO_ECI.get(r);if(i===void 0)throw new F("incorect value");return i}equals(r){if(!(r instanceof z))return!1;const i=r;return this.getName()===i.getName()}}z.VALUE_IDENTIFIER_TO_ECI=new Map,z.VALUES_TO_ECI=new Map,z.NAME_TO_ECI=new Map,z.Cp437=new z(K.Cp437,Int32Array.from([0,2]),"Cp437"),z.ISO8859_1=new z(K.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),z.ISO8859_2=new z(K.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),z.ISO8859_3=new z(K.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),z.ISO8859_4=new z(K.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),z.ISO8859_5=new z(K.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),z.ISO8859_6=new z(K.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),z.ISO8859_7=new z(K.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),z.ISO8859_8=new z(K.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),z.ISO8859_9=new z(K.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),z.ISO8859_10=new z(K.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),z.ISO8859_11=new z(K.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),z.ISO8859_13=new z(K.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),z.ISO8859_14=new z(K.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),z.ISO8859_15=new z(K.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),z.ISO8859_16=new z(K.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),z.SJIS=new z(K.SJIS,20,"SJIS","Shift_JIS"),z.Cp1250=new z(K.Cp1250,21,"Cp1250","windows-1250"),z.Cp1251=new z(K.Cp1251,22,"Cp1251","windows-1251"),z.Cp1252=new z(K.Cp1252,23,"Cp1252","windows-1252"),z.Cp1256=new z(K.Cp1256,24,"Cp1256","windows-1256"),z.UnicodeBigUnmarked=new z(K.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),z.UTF8=new z(K.UTF8,26,"UTF8","UTF-8"),z.ASCII=new z(K.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),z.Big5=new z(K.Big5,28,"Big5"),z.GB18030=new z(K.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),z.EUC_KR=new z(K.EUC_KR,30,"EUC_KR","EUC-KR");class fe extends w{}fe.kind="UnsupportedOperationException";class Se{static decode(r,i){const o=this.encodingName(i);return this.customDecoder?this.customDecoder(r,o):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(o)?this.decodeFallback(r,o):new TextDecoder(o).decode(r)}static shouldDecodeOnFallback(r){return!Se.isBrowser()&&r==="ISO-8859-1"}static encode(r,i){const o=this.encodingName(i);return this.customEncoder?this.customEncoder(r,o):typeof TextEncoder>"u"?this.encodeFallback(r):new TextEncoder().encode(r)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(r){return typeof r=="string"?r:r.getName()}static encodingCharacterSet(r){return r instanceof z?r:z.getCharacterSetECIByName(r)}static decodeFallback(r,i){const o=this.encodingCharacterSet(i);if(Se.isDecodeFallbackSupported(o)){let a="";for(let c=0,f=r.length;c<f;c++){let h=r[c].toString(16);h.length<2&&(h="0"+h),a+="%"+h}return decodeURIComponent(a)}if(o.equals(z.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(r.buffer));throw new fe(`Encoding ${this.encodingName(i)} not supported by fallback.`)}static isDecodeFallbackSupported(r){return r.equals(z.UTF8)||r.equals(z.ISO8859_1)||r.equals(z.ASCII)}static encodeFallback(r){const o=btoa(unescape(encodeURIComponent(r))).split(""),a=[];for(let c=0;c<o.length;c++)a.push(o[c].charCodeAt(0));return new Uint8Array(a)}}class ce{static castAsNonUtf8Char(r,i=null){const o=i?i.getName():this.ISO88591;return Se.decode(new Uint8Array([r]),o)}static guessEncoding(r,i){if(i!=null&&i.get(G.CHARACTER_SET)!==void 0)return i.get(G.CHARACTER_SET).toString();const o=r.length;let a=!0,c=!0,f=!0,h=0,g=0,m=0,y=0,E=0,S=0,T=0,O=0,M=0,L=0,H=0;const Q=r.length>3&&r[0]===239&&r[1]===187&&r[2]===191;for(let q=0;q<o&&(a||c||f);q++){const Y=r[q]&255;f&&(h>0?Y&128?h--:f=!1:Y&128&&(Y&64?(h++,Y&32?(h++,Y&16?(h++,Y&8?f=!1:y++):m++):g++):f=!1)),a&&(Y>127&&Y<160?a=!1:Y>159&&(Y<192||Y===215||Y===247)&&H++),c&&(E>0?Y<64||Y===127||Y>252?c=!1:E--:Y===128||Y===160||Y>239?c=!1:Y>160&&Y<224?(S++,O=0,T++,T>M&&(M=T)):Y>127?(E++,T=0,O++,O>L&&(L=O)):(T=0,O=0))}return f&&h>0&&(f=!1),c&&E>0&&(c=!1),f&&(Q||g+m+y>0)?ce.UTF8:c&&(ce.ASSUME_SHIFT_JIS||M>=3||L>=3)?ce.SHIFT_JIS:a&&c?M===2&&S===2||H*10>=o?ce.SHIFT_JIS:ce.ISO88591:a?ce.ISO88591:c?ce.SHIFT_JIS:f?ce.UTF8:ce.PLATFORM_DEFAULT_ENCODING}static format(r,...i){let o=-1;function a(f,h,g,m,y,E){if(f==="%%")return"%";if(i[++o]===void 0)return;f=m?parseInt(m.substr(1)):void 0;let S=y?parseInt(y.substr(1)):void 0,T;switch(E){case"s":T=i[o];break;case"c":T=i[o][0];break;case"f":T=parseFloat(i[o]).toFixed(f);break;case"p":T=parseFloat(i[o]).toPrecision(f);break;case"e":T=parseFloat(i[o]).toExponential(f);break;case"x":T=parseInt(i[o]).toString(S||16);break;case"d":T=parseFloat(parseInt(i[o],S||10).toPrecision(f)).toFixed(0);break}T=typeof T=="object"?JSON.stringify(T):(+T).toString(S);let O=parseInt(g),M=g&&g[0]+""=="0"?"0":" ";for(;T.length<O;)T=h!==void 0?T+M:M+T;return T}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(c,a)}static getBytes(r,i){return Se.encode(r,i)}static getCharCode(r,i=0){return r.charCodeAt(i)}static getCharAt(r){return String.fromCharCode(r)}}ce.SHIFT_JIS=z.SJIS.getName(),ce.GB2312="GB2312",ce.ISO88591=z.ISO8859_1.getName(),ce.EUC_JP="EUC_JP",ce.UTF8=z.UTF8.getName(),ce.PLATFORM_DEFAULT_ENCODING=ce.UTF8,ce.ASSUME_SHIFT_JIS=!1;class me{constructor(r=""){this.value=r}enableDecoding(r){return this.encoding=r,this}append(r){return typeof r=="string"?this.value+=r.toString():this.encoding?this.value+=ce.castAsNonUtf8Char(r,this.encoding):this.value+=String.fromCharCode(r),this}appendChars(r,i,o){for(let a=i;i<i+o;a++)this.append(r[a]);return this}length(){return this.value.length}charAt(r){return this.value.charAt(r)}deleteCharAt(r){this.value=this.value.substr(0,r)+this.value.substring(r+1)}setCharAt(r,i){this.value=this.value.substr(0,r)+i+this.value.substr(r+1)}substring(r,i){return this.value.substring(r,i)}setLengthToZero(){this.value=""}toString(){return this.value}insert(r,i){this.value=this.value.substr(0,r)+i+this.value.substr(r+i.length)}}class it{constructor(r,i,o,a){if(this.width=r,this.height=i,this.rowSize=o,this.bits=a,i==null&&(i=r),this.height=i,r<1||i<1)throw new C("Both dimensions must be greater than 0");o==null&&(o=Math.floor((r+31)/32)),this.rowSize=o,a==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(r){const i=r.length,o=r[0].length,a=new it(o,i);for(let c=0;c<i;c++){const f=r[c];for(let h=0;h<o;h++)f[h]&&a.set(h,c)}return a}static parseFromString(r,i,o){if(r===null)throw new C("stringRepresentation cannot be null");const a=new Array(r.length);let c=0,f=0,h=-1,g=0,m=0;for(;m<r.length;)if(r.charAt(m)===`
`||r.charAt(m)==="\r"){if(c>f){if(h===-1)h=c-f;else if(c-f!==h)throw new C("row lengths do not match");f=c,g++}m++}else if(r.substring(m,m+i.length)===i)m+=i.length,a[c]=!0,c++;else if(r.substring(m,m+o.length)===o)m+=o.length,a[c]=!1,c++;else throw new C("illegal character encountered: "+r.substring(m));if(c>f){if(h===-1)h=c-f;else if(c-f!==h)throw new C("row lengths do not match");g++}const y=new it(h,g);for(let E=0;E<c;E++)a[E]&&y.set(Math.floor(E%h),Math.floor(E/h));return y}get(r,i){const o=i*this.rowSize+Math.floor(r/32);return(this.bits[o]>>>(r&31)&1)!==0}set(r,i){const o=i*this.rowSize+Math.floor(r/32);this.bits[o]|=1<<(r&31)&4294967295}unset(r,i){const o=i*this.rowSize+Math.floor(r/32);this.bits[o]&=~(1<<(r&31)&4294967295)}flip(r,i){const o=i*this.rowSize+Math.floor(r/32);this.bits[o]^=1<<(r&31)&4294967295}xor(r){if(this.width!==r.getWidth()||this.height!==r.getHeight()||this.rowSize!==r.getRowSize())throw new C("input matrix dimensions do not match");const i=new P(Math.floor(this.width/32)+1),o=this.rowSize,a=this.bits;for(let c=0,f=this.height;c<f;c++){const h=c*o,g=r.getRow(c,i).getBitArray();for(let m=0;m<o;m++)a[h+m]^=g[m]}}clear(){const r=this.bits,i=r.length;for(let o=0;o<i;o++)r[o]=0}setRegion(r,i,o,a){if(i<0||r<0)throw new C("Left and top must be nonnegative");if(a<1||o<1)throw new C("Height and width must be at least 1");const c=r+o,f=i+a;if(f>this.height||c>this.width)throw new C("The region must fit inside the matrix");const h=this.rowSize,g=this.bits;for(let m=i;m<f;m++){const y=m*h;for(let E=r;E<c;E++)g[y+Math.floor(E/32)]|=1<<(E&31)&4294967295}}getRow(r,i){i==null||i.getSize()<this.width?i=new P(this.width):i.clear();const o=this.rowSize,a=this.bits,c=r*o;for(let f=0;f<o;f++)i.setBulk(f*32,a[c+f]);return i}setRow(r,i){B.arraycopy(i.getBitArray(),0,this.bits,r*this.rowSize,this.rowSize)}rotate180(){const r=this.getWidth(),i=this.getHeight();let o=new P(r),a=new P(r);for(let c=0,f=Math.floor((i+1)/2);c<f;c++)o=this.getRow(c,o),a=this.getRow(i-1-c,a),o.reverse(),a.reverse(),this.setRow(c,a),this.setRow(i-1-c,o)}getEnclosingRectangle(){const r=this.width,i=this.height,o=this.rowSize,a=this.bits;let c=r,f=i,h=-1,g=-1;for(let m=0;m<i;m++)for(let y=0;y<o;y++){const E=a[m*o+y];if(E!==0){if(m<f&&(f=m),m>g&&(g=m),y*32<c){let S=0;for(;!(E<<31-S&4294967295);)S++;y*32+S<c&&(c=y*32+S)}if(y*32+31>h){let S=31;for(;!(E>>>S);)S--;y*32+S>h&&(h=y*32+S)}}}return h<c||g<f?null:Int32Array.from([c,f,h-c+1,g-f+1])}getTopLeftOnBit(){const r=this.rowSize,i=this.bits;let o=0;for(;o<i.length&&i[o]===0;)o++;if(o===i.length)return null;const a=o/r;let c=o%r*32;const f=i[o];let h=0;for(;!(f<<31-h&4294967295);)h++;return c+=h,Int32Array.from([c,a])}getBottomRightOnBit(){const r=this.rowSize,i=this.bits;let o=i.length-1;for(;o>=0&&i[o]===0;)o--;if(o<0)return null;const a=Math.floor(o/r);let c=Math.floor(o%r)*32;const f=i[o];let h=31;for(;!(f>>>h);)h--;return c+=h,Int32Array.from([c,a])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(r){if(!(r instanceof it))return!1;const i=r;return this.width===i.width&&this.height===i.height&&this.rowSize===i.rowSize&&N.equals(this.bits,i.bits)}hashCode(){let r=this.width;return r=31*r+this.width,r=31*r+this.height,r=31*r+this.rowSize,r=31*r+N.hashCode(this.bits),r}toString(r="X ",i="  ",o=`
`){return this.buildToString(r,i,o)}buildToString(r,i,o){let a=new me;for(let c=0,f=this.height;c<f;c++){for(let h=0,g=this.width;h<g;h++)a.append(this.get(h,c)?r:i);a.append(o)}return a.toString()}clone(){return new it(this.width,this.height,this.rowSize,this.bits.slice())}}class W extends w{static getNotFoundInstance(){return new W}}W.kind="NotFoundException";class je extends k{constructor(r){super(r),this.luminances=je.EMPTY,this.buckets=new Int32Array(je.LUMINANCE_BUCKETS)}getBlackRow(r,i){const o=this.getLuminanceSource(),a=o.getWidth();i==null||i.getSize()<a?i=new P(a):i.clear(),this.initArrays(a);const c=o.getRow(r,this.luminances),f=this.buckets;for(let g=0;g<a;g++)f[(c[g]&255)>>je.LUMINANCE_SHIFT]++;const h=je.estimateBlackPoint(f);if(a<3)for(let g=0;g<a;g++)(c[g]&255)<h&&i.set(g);else{let g=c[0]&255,m=c[1]&255;for(let y=1;y<a-1;y++){const E=c[y+1]&255;(m*4-g-E)/2<h&&i.set(y),g=m,m=E}}return i}getBlackMatrix(){const r=this.getLuminanceSource(),i=r.getWidth(),o=r.getHeight(),a=new it(i,o);this.initArrays(i);const c=this.buckets;for(let g=1;g<5;g++){const m=Math.floor(o*g/5),y=r.getRow(m,this.luminances),E=Math.floor(i*4/5);for(let S=Math.floor(i/5);S<E;S++){const T=y[S]&255;c[T>>je.LUMINANCE_SHIFT]++}}const f=je.estimateBlackPoint(c),h=r.getMatrix();for(let g=0;g<o;g++){const m=g*i;for(let y=0;y<i;y++)(h[m+y]&255)<f&&a.set(y,g)}return a}createBinarizer(r){return new je(r)}initArrays(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));const i=this.buckets;for(let o=0;o<je.LUMINANCE_BUCKETS;o++)i[o]=0}static estimateBlackPoint(r){const i=r.length;let o=0,a=0,c=0;for(let y=0;y<i;y++)r[y]>c&&(a=y,c=r[y]),r[y]>o&&(o=r[y]);let f=0,h=0;for(let y=0;y<i;y++){const E=y-a,S=r[y]*E*E;S>h&&(f=y,h=S)}if(a>f){const y=a;a=f,f=y}if(f-a<=i/16)throw new W;let g=f-1,m=-1;for(let y=f-1;y>a;y--){const E=y-a,S=E*E*(f-y)*(o-r[y]);S>m&&(g=y,m=S)}return g<<je.LUMINANCE_SHIFT}}je.LUMINANCE_BITS=5,je.LUMINANCE_SHIFT=8-je.LUMINANCE_BITS,je.LUMINANCE_BUCKETS=1<<je.LUMINANCE_BITS,je.EMPTY=Uint8ClampedArray.from([0]);class xe extends je{constructor(r){super(r),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const r=this.getLuminanceSource(),i=r.getWidth(),o=r.getHeight();if(i>=xe.MINIMUM_DIMENSION&&o>=xe.MINIMUM_DIMENSION){const a=r.getMatrix();let c=i>>xe.BLOCK_SIZE_POWER;i&xe.BLOCK_SIZE_MASK&&c++;let f=o>>xe.BLOCK_SIZE_POWER;o&xe.BLOCK_SIZE_MASK&&f++;const h=xe.calculateBlackPoints(a,c,f,i,o),g=new it(i,o);xe.calculateThresholdForBlock(a,c,f,i,o,h,g),this.matrix=g}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(r){return new xe(r)}static calculateThresholdForBlock(r,i,o,a,c,f,h){const g=c-xe.BLOCK_SIZE,m=a-xe.BLOCK_SIZE;for(let y=0;y<o;y++){let E=y<<xe.BLOCK_SIZE_POWER;E>g&&(E=g);const S=xe.cap(y,2,o-3);for(let T=0;T<i;T++){let O=T<<xe.BLOCK_SIZE_POWER;O>m&&(O=m);const M=xe.cap(T,2,i-3);let L=0;for(let Q=-2;Q<=2;Q++){const q=f[S+Q];L+=q[M-2]+q[M-1]+q[M]+q[M+1]+q[M+2]}const H=L/25;xe.thresholdBlock(r,O,E,H,a,h)}}}static cap(r,i,o){return r<i?i:r>o?o:r}static thresholdBlock(r,i,o,a,c,f){for(let h=0,g=o*c+i;h<xe.BLOCK_SIZE;h++,g+=c)for(let m=0;m<xe.BLOCK_SIZE;m++)(r[g+m]&255)<=a&&f.set(i+m,o+h)}static calculateBlackPoints(r,i,o,a,c){const f=c-xe.BLOCK_SIZE,h=a-xe.BLOCK_SIZE,g=new Array(o);for(let m=0;m<o;m++){g[m]=new Int32Array(i);let y=m<<xe.BLOCK_SIZE_POWER;y>f&&(y=f);for(let E=0;E<i;E++){let S=E<<xe.BLOCK_SIZE_POWER;S>h&&(S=h);let T=0,O=255,M=0;for(let H=0,Q=y*a+S;H<xe.BLOCK_SIZE;H++,Q+=a){for(let q=0;q<xe.BLOCK_SIZE;q++){const Y=r[Q+q]&255;T+=Y,Y<O&&(O=Y),Y>M&&(M=Y)}if(M-O>xe.MIN_DYNAMIC_RANGE)for(H++,Q+=a;H<xe.BLOCK_SIZE;H++,Q+=a)for(let q=0;q<xe.BLOCK_SIZE;q++)T+=r[Q+q]&255}let L=T>>xe.BLOCK_SIZE_POWER*2;if(M-O<=xe.MIN_DYNAMIC_RANGE&&(L=O/2,m>0&&E>0)){const H=(g[m-1][E]+2*g[m][E-1]+g[m-1][E-1])/4;O<H&&(L=H)}g[m][E]=L}}return g}}xe.BLOCK_SIZE_POWER=3,xe.BLOCK_SIZE=1<<xe.BLOCK_SIZE_POWER,xe.BLOCK_SIZE_MASK=xe.BLOCK_SIZE-1,xe.MINIMUM_DIMENSION=xe.BLOCK_SIZE*5,xe.MIN_DYNAMIC_RANGE=24;class ne{constructor(r,i){this.width=r,this.height=i}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(r,i,o,a){throw new fe("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new fe("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new fe("This luminance source does not support rotation by 45 degrees.")}toString(){const r=new Uint8ClampedArray(this.width);let i=new me;for(let o=0;o<this.height;o++){const a=this.getRow(o,r);for(let c=0;c<this.width;c++){const f=a[c]&255;let h;f<64?h="#":f<128?h="+":f<192?h=".":h=" ",i.append(h)}i.append(`
`)}return i.toString()}}class de extends ne{constructor(r){super(r.getWidth(),r.getHeight()),this.delegate=r}getRow(r,i){const o=this.delegate.getRow(r,i),a=this.getWidth();for(let c=0;c<a;c++)o[c]=255-(o[c]&255);return o}getMatrix(){const r=this.delegate.getMatrix(),i=this.getWidth()*this.getHeight(),o=new Uint8ClampedArray(i);for(let a=0;a<i;a++)o[a]=255-(r[a]&255);return o}isCropSupported(){return this.delegate.isCropSupported()}crop(r,i,o,a){return new de(this.delegate.crop(r,i,o,a))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new de(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new de(this.delegate.rotateCounterClockwise45())}}class re extends ne{constructor(r){super(r.width,r.height),this.canvas=r,this.tempCanvasElement=null,this.buffer=re.makeBufferFromCanvasImageData(r)}static makeBufferFromCanvasImageData(r){const i=r.getContext("2d").getImageData(0,0,r.width,r.height);return re.toGrayscaleBuffer(i.data,r.width,r.height)}static toGrayscaleBuffer(r,i,o){const a=new Uint8ClampedArray(i*o);for(let c=0,f=0,h=r.length;c<h;c+=4,f++){let g;if(r[c+3]===0)g=255;else{const y=r[c],E=r[c+1],S=r[c+2];g=306*y+601*E+117*S+512>>10}a[f]=g}return a}getRow(r,i){if(r<0||r>=this.getHeight())throw new C("Requested row is outside the image: "+r);const o=this.getWidth(),a=r*o;return i===null?i=this.buffer.slice(a,a+o):(i.length<o&&(i=new Uint8ClampedArray(o)),i.set(this.buffer.slice(a,a+o))),i}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(r,i,o,a){return super.crop(r,i,o,a),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement}rotate(r){const i=this.getTempCanvasElement(),o=i.getContext("2d"),a=r*re.DEGREE_TO_RADIANS,c=this.canvas.width,f=this.canvas.height,h=Math.ceil(Math.abs(Math.cos(a))*c+Math.abs(Math.sin(a))*f),g=Math.ceil(Math.abs(Math.sin(a))*c+Math.abs(Math.cos(a))*f);return i.width=h,i.height=g,o.translate(h/2,g/2),o.rotate(a),o.drawImage(this.canvas,c/-2,f/-2),this.buffer=re.makeBufferFromCanvasImageData(i),this}invert(){return new de(this)}}re.DEGREE_TO_RADIANS=Math.PI/180;class Re{constructor(r,i,o){this.deviceId=r,this.label=i,this.kind="videoinput",this.groupId=o||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Ee=(globalThis||Qs||self||window||void 0)&&(globalThis||Qs||self||window||void 0).__awaiter||function(_,r,i,o){function a(c){return c instanceof i?c:new i(function(f){f(c)})}return new(i||(i=Promise))(function(c,f){function h(y){try{m(o.next(y))}catch(E){f(E)}}function g(y){try{m(o.throw(y))}catch(E){f(E)}}function m(y){y.done?c(y.value):a(y.value).then(h,g)}m((o=o.apply(_,r||[])).next())})};class vn{constructor(r,i=500,o){this.reader=r,this.timeBetweenScansMillis=i,this._hints=o,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(r){this._timeBetweenDecodingAttempts=r<0?0:r}set hints(r){this._hints=r||null}get hints(){return this._hints}listVideoInputDevices(){return Ee(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const r=yield navigator.mediaDevices.enumerateDevices(),i=[];for(const o of r){const a=o.kind==="video"?"videoinput":o.kind;if(a!=="videoinput")continue;const c=o.deviceId||o.id,f=o.label||`Video device ${i.length+1}`,h=o.groupId,g={deviceId:c,label:f,kind:a,groupId:h};i.push(g)}return i})}getVideoInputDevices(){return Ee(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(i=>new Re(i.deviceId,i.label))})}findDeviceById(r){return Ee(this,void 0,void 0,function*(){const i=yield this.listVideoInputDevices();return i?i.find(o=>o.deviceId===r):null})}decodeFromInputVideoDevice(r,i){return Ee(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(r,i)})}decodeOnceFromVideoDevice(r,i){return Ee(this,void 0,void 0,function*(){this.reset();let o;r?o={deviceId:{exact:r}}:o={facingMode:"environment"};const a={video:o};return yield this.decodeOnceFromConstraints(a,i)})}decodeOnceFromConstraints(r,i){return Ee(this,void 0,void 0,function*(){const o=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeOnceFromStream(o,i)})}decodeOnceFromStream(r,i){return Ee(this,void 0,void 0,function*(){this.reset();const o=yield this.attachStreamToVideo(r,i);return yield this.decodeOnce(o)})}decodeFromInputVideoDeviceContinuously(r,i,o){return Ee(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(r,i,o)})}decodeFromVideoDevice(r,i,o){return Ee(this,void 0,void 0,function*(){let a;r?a={deviceId:{exact:r}}:a={facingMode:"environment"};const c={video:a};return yield this.decodeFromConstraints(c,i,o)})}decodeFromConstraints(r,i,o){return Ee(this,void 0,void 0,function*(){const a=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeFromStream(a,i,o)})}decodeFromStream(r,i,o){return Ee(this,void 0,void 0,function*(){this.reset();const a=yield this.attachStreamToVideo(r,i);return yield this.decodeContinuously(a,o)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(r,i){return Ee(this,void 0,void 0,function*(){const o=this.prepareVideoElement(i);return this.addVideoSource(o,r),this.videoElement=o,this.stream=r,yield this.playVideoOnLoadAsync(o),o})}playVideoOnLoadAsync(r){return new Promise((i,o)=>this.playVideoOnLoad(r,()=>i()))}playVideoOnLoad(r,i){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(r),r.addEventListener("ended",this.videoEndedListener),r.addEventListener("canplay",this.videoCanPlayListener),r.addEventListener("playing",i),this.tryPlayVideo(r)}isVideoPlaying(r){return r.currentTime>0&&!r.paused&&!r.ended&&r.readyState>2}tryPlayVideo(r){return Ee(this,void 0,void 0,function*(){if(this.isVideoPlaying(r)){console.warn("Trying to play video that is already playing.");return}try{yield r.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(r,i){const o=document.getElementById(r);if(!o)throw new A(`element with id '${r}' not found`);if(o.nodeName.toLowerCase()!==i.toLowerCase())throw new A(`element with id '${r}' must be an ${i} element`);return o}decodeFromImage(r,i){if(!r&&!i)throw new A("either imageElement with a src set or an url must be provided");return i&&!r?this.decodeFromImageUrl(i):this.decodeFromImageElement(r)}decodeFromVideo(r,i){if(!r&&!i)throw new A("Either an element with a src set or an URL must be provided");return i&&!r?this.decodeFromVideoUrl(i):this.decodeFromVideoElement(r)}decodeFromVideoContinuously(r,i,o){if(r===void 0&&i===void 0)throw new A("Either an element with a src set or an URL must be provided");return i&&!r?this.decodeFromVideoUrlContinuously(i,o):this.decodeFromVideoElementContinuously(r,o)}decodeFromImageElement(r){if(!r)throw new A("An image element must be provided.");this.reset();const i=this.prepareImageElement(r);this.imageElement=i;let o;return this.isImageLoaded(i)?o=this.decodeOnce(i,!1,!0):o=this._decodeOnLoadImage(i),o}decodeFromVideoElement(r){const i=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideo(i)}decodeFromVideoElementContinuously(r,i){const o=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideoContinuously(o,i)}_decodeFromVideoElementSetup(r){if(!r)throw new A("A video element must be provided.");this.reset();const i=this.prepareVideoElement(r);return this.videoElement=i,i}decodeFromImageUrl(r){if(!r)throw new A("An URL must be provided.");this.reset();const i=this.prepareImageElement();this.imageElement=i;const o=this._decodeOnLoadImage(i);return i.src=r,o}decodeFromVideoUrl(r){if(!r)throw new A("An URL must be provided.");this.reset();const i=this.prepareVideoElement(),o=this.decodeFromVideoElement(i);return i.src=r,o}decodeFromVideoUrlContinuously(r,i){if(!r)throw new A("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),a=this.decodeFromVideoElementContinuously(o,i);return o.src=r,a}_decodeOnLoadImage(r){return new Promise((i,o)=>{this.imageLoadedListener=()=>this.decodeOnce(r,!1,!0).then(i,o),r.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(r){return Ee(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(r),yield this.decodeOnce(r)})}_decodeOnLoadVideoContinuously(r,i){return Ee(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(r),this.decodeContinuously(r,i)})}isImageLoaded(r){return!(!r.complete||r.naturalWidth===0)}prepareImageElement(r){let i;return typeof r>"u"&&(i=document.createElement("img"),i.width=200,i.height=200),typeof r=="string"&&(i=this.getMediaElement(r,"img")),r instanceof HTMLImageElement&&(i=r),i}prepareVideoElement(r){let i;return!r&&typeof document<"u"&&(i=document.createElement("video"),i.width=200,i.height=200),typeof r=="string"&&(i=this.getMediaElement(r,"video")),r instanceof HTMLVideoElement&&(i=r),i.setAttribute("autoplay","true"),i.setAttribute("muted","true"),i.setAttribute("playsinline","true"),i}decodeOnce(r,i=!0,o=!0){this._stopAsyncDecode=!1;const a=(c,f)=>{if(this._stopAsyncDecode){f(new W("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const h=this.decode(r);c(h)}catch(h){const g=i&&h instanceof W,y=(h instanceof D||h instanceof F)&&o;if(g||y)return setTimeout(a,this._timeBetweenDecodingAttempts,c,f);f(h)}};return new Promise((c,f)=>a(c,f))}decodeContinuously(r,i){this._stopContinuousDecode=!1;const o=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const a=this.decode(r);i(a,null),setTimeout(o,this.timeBetweenScansMillis)}catch(a){i(null,a);const c=a instanceof D||a instanceof F,f=a instanceof W;(c||f)&&setTimeout(o,this._timeBetweenDecodingAttempts)}};o()}decode(r){const i=this.createBinaryBitmap(r);return this.decodeBitmap(i)}_isHTMLVideoElement(r){return r.videoWidth!==0}drawFrameOnCanvas(r,i,o){i||(i={sx:0,sy:0,sWidth:r.videoWidth,sHeight:r.videoHeight,dx:0,dy:0,dWidth:r.videoWidth,dHeight:r.videoHeight}),o||(o=this.captureCanvasContext),o.drawImage(r,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}drawImageOnCanvas(r,i,o=this.captureCanvasContext){i||(i={sx:0,sy:0,sWidth:r.naturalWidth,sHeight:r.naturalHeight,dx:0,dy:0,dWidth:r.naturalWidth,dHeight:r.naturalHeight}),o||(o=this.captureCanvasContext),o.drawImage(r,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}createBinaryBitmap(r){this.getCaptureCanvasContext(r),this._isHTMLVideoElement(r)?this.drawFrameOnCanvas(r):this.drawImageOnCanvas(r);const i=this.getCaptureCanvas(r),o=new re(i),a=new xe(o);return new I(a)}getCaptureCanvasContext(r){if(!this.captureCanvasContext){const o=this.getCaptureCanvas(r).getContext("2d");this.captureCanvasContext=o}return this.captureCanvasContext}getCaptureCanvas(r){if(!this.captureCanvas){const i=this.createCaptureCanvas(r);this.captureCanvas=i}return this.captureCanvas}decodeBitmap(r){return this.reader.decode(r,this._hints)}createCaptureCanvas(r){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const i=document.createElement("canvas");let o,a;return typeof r<"u"&&(r instanceof HTMLVideoElement?(o=r.videoWidth,a=r.videoHeight):r instanceof HTMLImageElement&&(o=r.naturalWidth||r.width,a=r.naturalHeight||r.height)),i.style.width=o+"px",i.style.height=a+"px",i.width=o,i.height=a,i}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(r=>r.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(r,i){try{r.srcObject=i}catch{r.src=URL.createObjectURL(i)}}cleanVideoSource(r){try{r.srcObject=null}catch{r.src=""}this.videoElement.removeAttribute("src")}}class st{constructor(r,i,o=i==null?0:8*i.length,a,c,f=B.currentTimeMillis()){this.text=r,this.rawBytes=i,this.numBits=o,this.resultPoints=a,this.format=c,this.timestamp=f,this.text=r,this.rawBytes=i,o==null?this.numBits=i==null?0:8*i.length:this.numBits=o,this.resultPoints=a,this.format=c,this.resultMetadata=null,f==null?this.timestamp=B.currentTimeMillis():this.timestamp=f}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(r,i){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(r,i)}putAllMetadata(r){r!==null&&(this.resultMetadata===null?this.resultMetadata=r:this.resultMetadata=new Map(r))}addResultPoints(r){const i=this.resultPoints;if(i===null)this.resultPoints=r;else if(r!==null&&r.length>0){const o=new Array(i.length+r.length);B.arraycopy(i,0,o,0,i.length),B.arraycopy(r,0,o,i.length,r.length),this.resultPoints=o}}getTimestamp(){return this.timestamp}toString(){return this.text}}var oi;(function(_){_[_.AZTEC=0]="AZTEC",_[_.CODABAR=1]="CODABAR",_[_.CODE_39=2]="CODE_39",_[_.CODE_93=3]="CODE_93",_[_.CODE_128=4]="CODE_128",_[_.DATA_MATRIX=5]="DATA_MATRIX",_[_.EAN_8=6]="EAN_8",_[_.EAN_13=7]="EAN_13",_[_.ITF=8]="ITF",_[_.MAXICODE=9]="MAXICODE",_[_.PDF_417=10]="PDF_417",_[_.QR_CODE=11]="QR_CODE",_[_.RSS_14=12]="RSS_14",_[_.RSS_EXPANDED=13]="RSS_EXPANDED",_[_.UPC_A=14]="UPC_A",_[_.UPC_E=15]="UPC_E",_[_.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(oi||(oi={}));var ae=oi,Tr;(function(_){_[_.OTHER=0]="OTHER",_[_.ORIENTATION=1]="ORIENTATION",_[_.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",_[_.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",_[_.ISSUE_NUMBER=4]="ISSUE_NUMBER",_[_.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",_[_.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",_[_.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",_[_.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",_[_.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",_[_.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Tr||(Tr={}));var vt=Tr;class Fs{constructor(r,i,o,a,c=-1,f=-1){this.rawBytes=r,this.text=i,this.byteSegments=o,this.ecLevel=a,this.structuredAppendSequenceNumber=c,this.structuredAppendParity=f,this.numBits=r==null?0:8*r.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(r){this.numBits=r}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(r){this.errorsCorrected=r}getErasures(){return this.erasures}setErasures(r){this.erasures=r}getOther(){return this.other}setOther(r){this.other=r}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Us{exp(r){return this.expTable[r]}log(r){if(r===0)throw new C;return this.logTable[r]}static addOrSubtract(r,i){return r^i}}class nn{constructor(r,i){if(i.length===0)throw new C;this.field=r;const o=i.length;if(o>1&&i[0]===0){let a=1;for(;a<o&&i[a]===0;)a++;a===o?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(o-a),B.arraycopy(i,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);const i=this.coefficients;let o;if(r===1){o=0;for(let f=0,h=i.length;f!==h;f++){const g=i[f];o=Us.addOrSubtract(o,g)}return o}o=i[0];const a=i.length,c=this.field;for(let f=1;f<a;f++)o=Us.addOrSubtract(c.multiply(r,o),i[f]);return o}addOrSubtract(r){if(!this.field.equals(r.field))throw new C("GenericGFPolys do not have same GenericGF field");if(this.isZero())return r;if(r.isZero())return this;let i=this.coefficients,o=r.coefficients;if(i.length>o.length){const f=i;i=o,o=f}let a=new Int32Array(o.length);const c=o.length-i.length;B.arraycopy(o,0,a,0,c);for(let f=c;f<o.length;f++)a[f]=Us.addOrSubtract(i[f-c],o[f]);return new nn(this.field,a)}multiply(r){if(!this.field.equals(r.field))throw new C("GenericGFPolys do not have same GenericGF field");if(this.isZero()||r.isZero())return this.field.getZero();const i=this.coefficients,o=i.length,a=r.coefficients,c=a.length,f=new Int32Array(o+c-1),h=this.field;for(let g=0;g<o;g++){const m=i[g];for(let y=0;y<c;y++)f[g+y]=Us.addOrSubtract(f[g+y],h.multiply(m,a[y]))}return new nn(h,f)}multiplyScalar(r){if(r===0)return this.field.getZero();if(r===1)return this;const i=this.coefficients.length,o=this.field,a=new Int32Array(i),c=this.coefficients;for(let f=0;f<i;f++)a[f]=o.multiply(c[f],r);return new nn(o,a)}multiplyByMonomial(r,i){if(r<0)throw new C;if(i===0)return this.field.getZero();const o=this.coefficients,a=o.length,c=new Int32Array(a+r),f=this.field;for(let h=0;h<a;h++)c[h]=f.multiply(o[h],i);return new nn(f,c)}divide(r){if(!this.field.equals(r.field))throw new C("GenericGFPolys do not have same GenericGF field");if(r.isZero())throw new C("Divide by 0");const i=this.field;let o=i.getZero(),a=this;const c=r.getCoefficient(r.getDegree()),f=i.inverse(c);for(;a.getDegree()>=r.getDegree()&&!a.isZero();){const h=a.getDegree()-r.getDegree(),g=i.multiply(a.getCoefficient(a.getDegree()),f),m=r.multiplyByMonomial(h,g),y=i.buildMonomial(h,g);o=o.addOrSubtract(y),a=a.addOrSubtract(m)}return[o,a]}toString(){let r="";for(let i=this.getDegree();i>=0;i--){let o=this.getCoefficient(i);if(o!==0){if(o<0?(r+=" - ",o=-o):r.length>0&&(r+=" + "),i===0||o!==1){const a=this.field.log(o);a===0?r+="1":a===1?r+="a":(r+="a^",r+=a)}i!==0&&(i===1?r+="x":(r+="x^",r+=i))}}return r}}class cl extends w{}cl.kind="ArithmeticException";class Me extends Us{constructor(r,i,o){super(),this.primitive=r,this.size=i,this.generatorBase=o;const a=new Int32Array(i);let c=1;for(let h=0;h<i;h++)a[h]=c,c*=2,c>=i&&(c^=r,c&=i-1);this.expTable=a;const f=new Int32Array(i);for(let h=0;h<i-1;h++)f[a[h]]=h;this.logTable=f,this.zero=new nn(this,Int32Array.from([0])),this.one=new nn(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,i){if(r<0)throw new C;if(i===0)return this.zero;const o=new Int32Array(r+1);return o[0]=i,new nn(this,o)}inverse(r){if(r===0)throw new cl;return this.expTable[this.size-this.logTable[r]-1]}multiply(r,i){return r===0||i===0?0:this.expTable[(this.logTable[r]+this.logTable[i])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+R.toHexString(this.primitive)+","+this.size+")"}equals(r){return r===this}}Me.AZTEC_DATA_12=new Me(4201,4096,1),Me.AZTEC_DATA_10=new Me(1033,1024,1),Me.AZTEC_DATA_6=new Me(67,64,1),Me.AZTEC_PARAM=new Me(19,16,1),Me.QR_CODE_FIELD_256=new Me(285,256,0),Me.DATA_MATRIX_FIELD_256=new Me(301,256,1),Me.AZTEC_DATA_8=Me.DATA_MATRIX_FIELD_256,Me.MAXICODE_FIELD_64=Me.AZTEC_DATA_6;class Pi extends w{}Pi.kind="ReedSolomonException";class qn extends w{}qn.kind="IllegalStateException";class Vs{constructor(r){this.field=r}decode(r,i){const o=this.field,a=new nn(o,r),c=new Int32Array(i);let f=!0;for(let T=0;T<i;T++){const O=a.evaluateAt(o.exp(T+o.getGeneratorBase()));c[c.length-1-T]=O,O!==0&&(f=!1)}if(f)return;const h=new nn(o,c),g=this.runEuclideanAlgorithm(o.buildMonomial(i,1),h,i),m=g[0],y=g[1],E=this.findErrorLocations(m),S=this.findErrorMagnitudes(y,E);for(let T=0;T<E.length;T++){const O=r.length-1-o.log(E[T]);if(O<0)throw new Pi("Bad error location");r[O]=Me.addOrSubtract(r[O],S[T])}}runEuclideanAlgorithm(r,i,o){if(r.getDegree()<i.getDegree()){const T=r;r=i,i=T}const a=this.field;let c=r,f=i,h=a.getZero(),g=a.getOne();for(;f.getDegree()>=(o/2|0);){let T=c,O=h;if(c=f,h=g,c.isZero())throw new Pi("r_{i-1} was zero");f=T;let M=a.getZero();const L=c.getCoefficient(c.getDegree()),H=a.inverse(L);for(;f.getDegree()>=c.getDegree()&&!f.isZero();){const Q=f.getDegree()-c.getDegree(),q=a.multiply(f.getCoefficient(f.getDegree()),H);M=M.addOrSubtract(a.buildMonomial(Q,q)),f=f.addOrSubtract(c.multiplyByMonomial(Q,q))}if(g=M.multiply(h).addOrSubtract(O),f.getDegree()>=c.getDegree())throw new qn("Division algorithm failed to reduce polynomial?")}const m=g.getCoefficient(0);if(m===0)throw new Pi("sigmaTilde(0) was zero");const y=a.inverse(m),E=g.multiplyScalar(y),S=f.multiplyScalar(y);return[E,S]}findErrorLocations(r){const i=r.getDegree();if(i===1)return Int32Array.from([r.getCoefficient(1)]);const o=new Int32Array(i);let a=0;const c=this.field;for(let f=1;f<c.getSize()&&a<i;f++)r.evaluateAt(f)===0&&(o[a]=c.inverse(f),a++);if(a!==i)throw new Pi("Error locator degree does not match number of roots");return o}findErrorMagnitudes(r,i){const o=i.length,a=new Int32Array(o),c=this.field;for(let f=0;f<o;f++){const h=c.inverse(i[f]);let g=1;for(let m=0;m<o;m++)if(f!==m){const y=c.multiply(i[m],h),E=y&1?y&-2:y|1;g=c.multiply(g,E)}a[f]=c.multiply(r.evaluateAt(h),c.inverse(g)),c.getGeneratorBase()!==0&&(a[f]=c.multiply(a[f],h))}return a}}var Mt;(function(_){_[_.UPPER=0]="UPPER",_[_.LOWER=1]="LOWER",_[_.MIXED=2]="MIXED",_[_.DIGIT=3]="DIGIT",_[_.PUNCT=4]="PUNCT",_[_.BINARY=5]="BINARY"})(Mt||(Mt={}));class Xe{decode(r){this.ddata=r;let i=r.getBits(),o=this.extractBits(i),a=this.correctBits(o),c=Xe.convertBoolArrayToByteArray(a),f=Xe.getEncodedData(a),h=new Fs(c,f,null,null);return h.setNumBits(a.length),h}static highLevelDecode(r){return this.getEncodedData(r)}static getEncodedData(r){let i=r.length,o=Mt.UPPER,a=Mt.UPPER,c="",f=0;for(;f<i;)if(a===Mt.BINARY){if(i-f<5)break;let h=Xe.readCode(r,f,5);if(f+=5,h===0){if(i-f<11)break;h=Xe.readCode(r,f,11)+31,f+=11}for(let g=0;g<h;g++){if(i-f<8){f=i;break}const m=Xe.readCode(r,f,8);c+=ce.castAsNonUtf8Char(m),f+=8}a=o}else{let h=a===Mt.DIGIT?4:5;if(i-f<h)break;let g=Xe.readCode(r,f,h);f+=h;let m=Xe.getCharacter(a,g);m.startsWith("CTRL_")?(o=a,a=Xe.getTable(m.charAt(5)),m.charAt(6)==="L"&&(o=a)):(c+=m,a=o)}return c}static getTable(r){switch(r){case"L":return Mt.LOWER;case"P":return Mt.PUNCT;case"M":return Mt.MIXED;case"D":return Mt.DIGIT;case"B":return Mt.BINARY;case"U":default:return Mt.UPPER}}static getCharacter(r,i){switch(r){case Mt.UPPER:return Xe.UPPER_TABLE[i];case Mt.LOWER:return Xe.LOWER_TABLE[i];case Mt.MIXED:return Xe.MIXED_TABLE[i];case Mt.PUNCT:return Xe.PUNCT_TABLE[i];case Mt.DIGIT:return Xe.DIGIT_TABLE[i];default:throw new qn("Bad table")}}correctBits(r){let i,o;this.ddata.getNbLayers()<=2?(o=6,i=Me.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(o=8,i=Me.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(o=10,i=Me.AZTEC_DATA_10):(o=12,i=Me.AZTEC_DATA_12);let a=this.ddata.getNbDatablocks(),c=r.length/o;if(c<a)throw new F;let f=r.length%o,h=new Int32Array(c);for(let S=0;S<c;S++,f+=o)h[S]=Xe.readCode(r,f,o);try{new Vs(i).decode(h,c-a)}catch(S){throw new F(S)}let g=(1<<o)-1,m=0;for(let S=0;S<a;S++){let T=h[S];if(T===0||T===g)throw new F;(T===1||T===g-1)&&m++}let y=new Array(a*o-m),E=0;for(let S=0;S<a;S++){let T=h[S];if(T===1||T===g-1)y.fill(T>1,E,E+o-1),E+=o-1;else for(let O=o-1;O>=0;--O)y[E++]=(T&1<<O)!==0}return y}extractBits(r){let i=this.ddata.isCompact(),o=this.ddata.getNbLayers(),a=(i?11:14)+o*4,c=new Int32Array(a),f=new Array(this.totalBitsInLayer(o,i));if(i)for(let h=0;h<c.length;h++)c[h]=h;else{let h=a+1+2*R.truncDivision(R.truncDivision(a,2)-1,15),g=a/2,m=R.truncDivision(h,2);for(let y=0;y<g;y++){let E=y+R.truncDivision(y,15);c[g-y-1]=m-E-1,c[g+y]=m+E+1}}for(let h=0,g=0;h<o;h++){let m=(o-h)*4+(i?9:12),y=h*2,E=a-1-y;for(let S=0;S<m;S++){let T=S*2;for(let O=0;O<2;O++)f[g+T+O]=r.get(c[y+O],c[y+S]),f[g+2*m+T+O]=r.get(c[y+S],c[E-O]),f[g+4*m+T+O]=r.get(c[E-O],c[E-S]),f[g+6*m+T+O]=r.get(c[E-S],c[y+O])}g+=m*8}return f}static readCode(r,i,o){let a=0;for(let c=i;c<i+o;c++)a<<=1,r[c]&&(a|=1);return a}static readByte(r,i){let o=r.length-i;return o>=8?Xe.readCode(r,i,8):Xe.readCode(r,i,o)<<8-o}static convertBoolArrayToByteArray(r){let i=new Uint8Array((r.length+7)/8);for(let o=0;o<i.length;o++)i[o]=Xe.readByte(r,8*o);return i}totalBitsInLayer(r,i){return((i?88:112)+16*r)*r}}Xe.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Xe.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Xe.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Xe.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Xe.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class be{constructor(){}static round(r){return r===NaN?0:r<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:r>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:r+(r<0?-.5:.5)|0}static distance(r,i,o,a){const c=r-o,f=i-a;return Math.sqrt(c*c+f*f)}static sum(r){let i=0;for(let o=0,a=r.length;o!==a;o++){const c=r[o];i+=c}return i}}class ul{static floatToIntBits(r){return r}}ul.MAX_VALUE=Number.MAX_SAFE_INTEGER;class le{constructor(r,i){this.x=r,this.y=i}getX(){return this.x}getY(){return this.y}equals(r){if(r instanceof le){const i=r;return this.x===i.x&&this.y===i.y}return!1}hashCode(){return 31*ul.floatToIntBits(this.x)+ul.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(r){const i=this.distance(r[0],r[1]),o=this.distance(r[1],r[2]),a=this.distance(r[0],r[2]);let c,f,h;if(o>=i&&o>=a?(f=r[0],c=r[1],h=r[2]):a>=o&&a>=i?(f=r[1],c=r[0],h=r[2]):(f=r[2],c=r[0],h=r[1]),this.crossProductZ(c,f,h)<0){const g=c;c=h,h=g}r[0]=c,r[1]=f,r[2]=h}static distance(r,i){return be.distance(r.x,r.y,i.x,i.y)}static crossProductZ(r,i,o){const a=i.x,c=i.y;return(o.x-a)*(r.y-c)-(o.y-c)*(r.x-a)}}class fl{constructor(r,i){this.bits=r,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class a1 extends fl{constructor(r,i,o,a,c){super(r,i),this.compact=o,this.nbDatablocks=a,this.nbLayers=c}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class fr{constructor(r,i,o,a){this.image=r,this.height=r.getHeight(),this.width=r.getWidth(),i==null&&(i=fr.INIT_SIZE),o==null&&(o=r.getWidth()/2|0),a==null&&(a=r.getHeight()/2|0);const c=i/2|0;if(this.leftInit=o-c,this.rightInit=o+c,this.upInit=a-c,this.downInit=a+c,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new W}detect(){let r=this.leftInit,i=this.rightInit,o=this.upInit,a=this.downInit,c=!1,f=!0,h=!1,g=!1,m=!1,y=!1,E=!1;const S=this.width,T=this.height;for(;f;){f=!1;let O=!0;for(;(O||!g)&&i<S;)O=this.containsBlackPoint(o,a,i,!1),O?(i++,f=!0,g=!0):g||i++;if(i>=S){c=!0;break}let M=!0;for(;(M||!m)&&a<T;)M=this.containsBlackPoint(r,i,a,!0),M?(a++,f=!0,m=!0):m||a++;if(a>=T){c=!0;break}let L=!0;for(;(L||!y)&&r>=0;)L=this.containsBlackPoint(o,a,r,!1),L?(r--,f=!0,y=!0):y||r--;if(r<0){c=!0;break}let H=!0;for(;(H||!E)&&o>=0;)H=this.containsBlackPoint(r,i,o,!0),H?(o--,f=!0,E=!0):E||o--;if(o<0){c=!0;break}f&&(h=!0)}if(!c&&h){const O=i-r;let M=null;for(let q=1;M===null&&q<O;q++)M=this.getBlackPointOnSegment(r,a-q,r+q,a);if(M==null)throw new W;let L=null;for(let q=1;L===null&&q<O;q++)L=this.getBlackPointOnSegment(r,o+q,r+q,o);if(L==null)throw new W;let H=null;for(let q=1;H===null&&q<O;q++)H=this.getBlackPointOnSegment(i,o+q,i-q,o);if(H==null)throw new W;let Q=null;for(let q=1;Q===null&&q<O;q++)Q=this.getBlackPointOnSegment(i,a-q,i-q,a);if(Q==null)throw new W;return this.centerEdges(Q,M,H,L)}else throw new W}getBlackPointOnSegment(r,i,o,a){const c=be.round(be.distance(r,i,o,a)),f=(o-r)/c,h=(a-i)/c,g=this.image;for(let m=0;m<c;m++){const y=be.round(r+m*f),E=be.round(i+m*h);if(g.get(y,E))return new le(y,E)}return null}centerEdges(r,i,o,a){const c=r.getX(),f=r.getY(),h=i.getX(),g=i.getY(),m=o.getX(),y=o.getY(),E=a.getX(),S=a.getY(),T=fr.CORR;return c<this.width/2?[new le(E-T,S+T),new le(h+T,g+T),new le(m-T,y-T),new le(c+T,f-T)]:[new le(E+T,S+T),new le(h+T,g-T),new le(m-T,y+T),new le(c-T,f-T)]}containsBlackPoint(r,i,o,a){const c=this.image;if(a){for(let f=r;f<=i;f++)if(c.get(f,o))return!0}else for(let f=r;f<=i;f++)if(c.get(o,f))return!0;return!1}}fr.INIT_SIZE=10,fr.CORR=1;class dc{static checkAndNudgePoints(r,i){const o=r.getWidth(),a=r.getHeight();let c=!0;for(let f=0;f<i.length&&c;f+=2){const h=Math.floor(i[f]),g=Math.floor(i[f+1]);if(h<-1||h>o||g<-1||g>a)throw new W;c=!1,h===-1?(i[f]=0,c=!0):h===o&&(i[f]=o-1,c=!0),g===-1?(i[f+1]=0,c=!0):g===a&&(i[f+1]=a-1,c=!0)}c=!0;for(let f=i.length-2;f>=0&&c;f-=2){const h=Math.floor(i[f]),g=Math.floor(i[f+1]);if(h<-1||h>o||g<-1||g>a)throw new W;c=!1,h===-1?(i[f]=0,c=!0):h===o&&(i[f]=o-1,c=!0),g===-1?(i[f+1]=0,c=!0):g===a&&(i[f+1]=a-1,c=!0)}}}class Fn{constructor(r,i,o,a,c,f,h,g,m){this.a11=r,this.a21=i,this.a31=o,this.a12=a,this.a22=c,this.a32=f,this.a13=h,this.a23=g,this.a33=m}static quadrilateralToQuadrilateral(r,i,o,a,c,f,h,g,m,y,E,S,T,O,M,L){const H=Fn.quadrilateralToSquare(r,i,o,a,c,f,h,g);return Fn.squareToQuadrilateral(m,y,E,S,T,O,M,L).times(H)}transformPoints(r){const i=r.length,o=this.a11,a=this.a12,c=this.a13,f=this.a21,h=this.a22,g=this.a23,m=this.a31,y=this.a32,E=this.a33;for(let S=0;S<i;S+=2){const T=r[S],O=r[S+1],M=c*T+g*O+E;r[S]=(o*T+f*O+m)/M,r[S+1]=(a*T+h*O+y)/M}}transformPointsWithValues(r,i){const o=this.a11,a=this.a12,c=this.a13,f=this.a21,h=this.a22,g=this.a23,m=this.a31,y=this.a32,E=this.a33,S=r.length;for(let T=0;T<S;T++){const O=r[T],M=i[T],L=c*O+g*M+E;r[T]=(o*O+f*M+m)/L,i[T]=(a*O+h*M+y)/L}}static squareToQuadrilateral(r,i,o,a,c,f,h,g){const m=r-o+c-h,y=i-a+f-g;if(m===0&&y===0)return new Fn(o-r,c-o,r,a-i,f-a,i,0,0,1);{const E=o-c,S=h-c,T=a-f,O=g-f,M=E*O-S*T,L=(m*O-S*y)/M,H=(E*y-m*T)/M;return new Fn(o-r+L*o,h-r+H*h,r,a-i+L*a,g-i+H*g,i,L,H,1)}}static quadrilateralToSquare(r,i,o,a,c,f,h,g){return Fn.squareToQuadrilateral(r,i,o,a,c,f,h,g).buildAdjoint()}buildAdjoint(){return new Fn(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(r){return new Fn(this.a11*r.a11+this.a21*r.a12+this.a31*r.a13,this.a11*r.a21+this.a21*r.a22+this.a31*r.a23,this.a11*r.a31+this.a21*r.a32+this.a31*r.a33,this.a12*r.a11+this.a22*r.a12+this.a32*r.a13,this.a12*r.a21+this.a22*r.a22+this.a32*r.a23,this.a12*r.a31+this.a22*r.a32+this.a32*r.a33,this.a13*r.a11+this.a23*r.a12+this.a33*r.a13,this.a13*r.a21+this.a23*r.a22+this.a33*r.a23,this.a13*r.a31+this.a23*r.a32+this.a33*r.a33)}}class c1 extends dc{sampleGrid(r,i,o,a,c,f,h,g,m,y,E,S,T,O,M,L,H,Q,q){const Y=Fn.quadrilateralToQuadrilateral(a,c,f,h,g,m,y,E,S,T,O,M,L,H,Q,q);return this.sampleGridWithTransform(r,i,o,Y)}sampleGridWithTransform(r,i,o,a){if(i<=0||o<=0)throw new W;const c=new it(i,o),f=new Float32Array(2*i);for(let h=0;h<o;h++){const g=f.length,m=h+.5;for(let y=0;y<g;y+=2)f[y]=y/2+.5,f[y+1]=m;a.transformPoints(f),dc.checkAndNudgePoints(r,f);try{for(let y=0;y<g;y+=2)r.get(Math.floor(f[y]),Math.floor(f[y+1]))&&c.set(y/2,h)}catch{throw new W}}return c}}class Nr{static setGridSampler(r){Nr.gridSampler=r}static getInstance(){return Nr.gridSampler}}Nr.gridSampler=new c1;class Qt{constructor(r,i){this.x=r,this.y=i}toResultPoint(){return new le(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class u1{constructor(r){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=r}detect(){return this.detectMirror(!1)}detectMirror(r){let i=this.getMatrixCenter(),o=this.getBullsEyeCorners(i);if(r){let f=o[0];o[0]=o[2],o[2]=f}this.extractParameters(o);let a=this.sampleGrid(this.image,o[this.shift%4],o[(this.shift+1)%4],o[(this.shift+2)%4],o[(this.shift+3)%4]),c=this.getMatrixCornerPoints(o);return new a1(a,c,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(r){if(!this.isValidPoint(r[0])||!this.isValidPoint(r[1])||!this.isValidPoint(r[2])||!this.isValidPoint(r[3]))throw new W;let i=2*this.nbCenterLayers,o=new Int32Array([this.sampleLine(r[0],r[1],i),this.sampleLine(r[1],r[2],i),this.sampleLine(r[2],r[3],i),this.sampleLine(r[3],r[0],i)]);this.shift=this.getRotation(o,i);let a=0;for(let f=0;f<4;f++){let h=o[(this.shift+f)%4];this.compact?(a<<=7,a+=h>>1&127):(a<<=10,a+=(h>>2&992)+(h>>1&31))}let c=this.getCorrectedParameterData(a,this.compact);this.compact?(this.nbLayers=(c>>6)+1,this.nbDataBlocks=(c&63)+1):(this.nbLayers=(c>>11)+1,this.nbDataBlocks=(c&2047)+1)}getRotation(r,i){let o=0;r.forEach((a,c,f)=>{let h=(a>>i-2<<1)+(a&1);o=(o<<3)+h}),o=((o&1)<<11)+(o>>1);for(let a=0;a<4;a++)if(R.bitCount(o^this.EXPECTED_CORNER_BITS[a])<=2)return a;throw new W}getCorrectedParameterData(r,i){let o,a;i?(o=7,a=2):(o=10,a=4);let c=o-a,f=new Int32Array(o);for(let g=o-1;g>=0;--g)f[g]=r&15,r>>=4;try{new Vs(Me.AZTEC_PARAM).decode(f,c)}catch{throw new W}let h=0;for(let g=0;g<a;g++)h=(h<<4)+f[g];return h}getBullsEyeCorners(r){let i=r,o=r,a=r,c=r,f=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let E=this.getFirstDifferent(i,f,1,-1),S=this.getFirstDifferent(o,f,1,1),T=this.getFirstDifferent(a,f,-1,1),O=this.getFirstDifferent(c,f,-1,-1);if(this.nbCenterLayers>2){let M=this.distancePoint(O,E)*this.nbCenterLayers/(this.distancePoint(c,i)*(this.nbCenterLayers+2));if(M<.75||M>1.25||!this.isWhiteOrBlackRectangle(E,S,T,O))break}i=E,o=S,a=T,c=O,f=!f}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new W;this.compact=this.nbCenterLayers===5;let h=new le(i.getX()+.5,i.getY()-.5),g=new le(o.getX()+.5,o.getY()+.5),m=new le(a.getX()-.5,a.getY()+.5),y=new le(c.getX()-.5,c.getY()-.5);return this.expandSquare([h,g,m,y],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let r,i,o,a;try{let h=new fr(this.image).detect();r=h[0],i=h[1],o=h[2],a=h[3]}catch{let g=this.image.getWidth()/2,m=this.image.getHeight()/2;r=this.getFirstDifferent(new Qt(g+7,m-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new Qt(g+7,m+7),!1,1,1).toResultPoint(),o=this.getFirstDifferent(new Qt(g-7,m+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new Qt(g-7,m-7),!1,-1,-1).toResultPoint()}let c=be.round((r.getX()+a.getX()+i.getX()+o.getX())/4),f=be.round((r.getY()+a.getY()+i.getY()+o.getY())/4);try{let h=new fr(this.image,15,c,f).detect();r=h[0],i=h[1],o=h[2],a=h[3]}catch{r=this.getFirstDifferent(new Qt(c+7,f-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new Qt(c+7,f+7),!1,1,1).toResultPoint(),o=this.getFirstDifferent(new Qt(c-7,f+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new Qt(c-7,f-7),!1,-1,-1).toResultPoint()}return c=be.round((r.getX()+a.getX()+i.getX()+o.getX())/4),f=be.round((r.getY()+a.getY()+i.getY()+o.getY())/4),new Qt(c,f)}getMatrixCornerPoints(r){return this.expandSquare(r,2*this.nbCenterLayers,this.getDimension())}sampleGrid(r,i,o,a,c){let f=Nr.getInstance(),h=this.getDimension(),g=h/2-this.nbCenterLayers,m=h/2+this.nbCenterLayers;return f.sampleGrid(r,h,h,g,g,m,g,m,m,g,m,i.getX(),i.getY(),o.getX(),o.getY(),a.getX(),a.getY(),c.getX(),c.getY())}sampleLine(r,i,o){let a=0,c=this.distanceResultPoint(r,i),f=c/o,h=r.getX(),g=r.getY(),m=f*(i.getX()-r.getX())/c,y=f*(i.getY()-r.getY())/c;for(let E=0;E<o;E++)this.image.get(be.round(h+E*m),be.round(g+E*y))&&(a|=1<<o-E-1);return a}isWhiteOrBlackRectangle(r,i,o,a){let c=3;r=new Qt(r.getX()-c,r.getY()+c),i=new Qt(i.getX()-c,i.getY()-c),o=new Qt(o.getX()+c,o.getY()-c),a=new Qt(a.getX()+c,a.getY()+c);let f=this.getColor(a,r);if(f===0)return!1;let h=this.getColor(r,i);return h!==f||(h=this.getColor(i,o),h!==f)?!1:(h=this.getColor(o,a),h===f)}getColor(r,i){let o=this.distancePoint(r,i),a=(i.getX()-r.getX())/o,c=(i.getY()-r.getY())/o,f=0,h=r.getX(),g=r.getY(),m=this.image.get(r.getX(),r.getY()),y=Math.ceil(o);for(let S=0;S<y;S++)h+=a,g+=c,this.image.get(be.round(h),be.round(g))!==m&&f++;let E=f/o;return E>.1&&E<.9?0:E<=.1===m?1:-1}getFirstDifferent(r,i,o,a){let c=r.getX()+o,f=r.getY()+a;for(;this.isValid(c,f)&&this.image.get(c,f)===i;)c+=o,f+=a;for(c-=o,f-=a;this.isValid(c,f)&&this.image.get(c,f)===i;)c+=o;for(c-=o;this.isValid(c,f)&&this.image.get(c,f)===i;)f+=a;return f-=a,new Qt(c,f)}expandSquare(r,i,o){let a=o/(2*i),c=r[0].getX()-r[2].getX(),f=r[0].getY()-r[2].getY(),h=(r[0].getX()+r[2].getX())/2,g=(r[0].getY()+r[2].getY())/2,m=new le(h+a*c,g+a*f),y=new le(h-a*c,g-a*f);c=r[1].getX()-r[3].getX(),f=r[1].getY()-r[3].getY(),h=(r[1].getX()+r[3].getX())/2,g=(r[1].getY()+r[3].getY())/2;let E=new le(h+a*c,g+a*f),S=new le(h-a*c,g-a*f);return[m,E,y,S]}isValid(r,i){return r>=0&&r<this.image.getWidth()&&i>0&&i<this.image.getHeight()}isValidPoint(r){let i=be.round(r.getX()),o=be.round(r.getY());return this.isValid(i,o)}distancePoint(r,i){return be.distance(r.getX(),r.getY(),i.getX(),i.getY())}distanceResultPoint(r,i){return be.distance(r.getX(),r.getY(),i.getX(),i.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(R.truncDivision(this.nbLayers-4,8)+1)+15}}class hl{decode(r,i=null){let o=null,a=new u1(r.getBlackMatrix()),c=null,f=null;try{let y=a.detectMirror(!1);c=y.getPoints(),this.reportFoundResultPoints(i,c),f=new Xe().decode(y)}catch(y){o=y}if(f==null)try{let y=a.detectMirror(!0);c=y.getPoints(),this.reportFoundResultPoints(i,c),f=new Xe().decode(y)}catch(y){throw o??y}let h=new st(f.getText(),f.getRawBytes(),f.getNumBits(),c,ae.AZTEC,B.currentTimeMillis()),g=f.getByteSegments();g!=null&&h.putMetadata(vt.BYTE_SEGMENTS,g);let m=f.getECLevel();return m!=null&&h.putMetadata(vt.ERROR_CORRECTION_LEVEL,m),h}reportFoundResultPoints(r,i){if(r!=null){let o=r.get(G.NEED_RESULT_POINT_CALLBACK);o!=null&&i.forEach((a,c,f)=>{o.foundPossibleResultPoint(a)})}}reset(){}}class Xm extends vn{constructor(r=500){super(new hl,r)}}class wt{decode(r,i){try{return this.doDecode(r,i)}catch{if(i&&i.get(G.TRY_HARDER)===!0&&r.isRotateSupported()){const c=r.rotateCounterClockwise(),f=this.doDecode(c,i),h=f.getResultMetadata();let g=270;h!==null&&h.get(vt.ORIENTATION)===!0&&(g=g+h.get(vt.ORIENTATION)%360),f.putMetadata(vt.ORIENTATION,g);const m=f.getResultPoints();if(m!==null){const y=c.getHeight();for(let E=0;E<m.length;E++)m[E]=new le(y-m[E].getY()-1,m[E].getX())}return f}else throw new W}}reset(){}doDecode(r,i){const o=r.getWidth(),a=r.getHeight();let c=new P(o);const f=i&&i.get(G.TRY_HARDER)===!0,h=Math.max(1,a>>(f?8:5));let g;f?g=a:g=15;const m=Math.trunc(a/2);for(let y=0;y<g;y++){const E=Math.trunc((y+1)/2),S=(y&1)===0,T=m+h*(S?E:-E);if(T<0||T>=a)break;try{c=r.getBlackRow(T,c)}catch{continue}for(let O=0;O<2;O++){if(O===1&&(c.reverse(),i&&i.get(G.NEED_RESULT_POINT_CALLBACK)===!0)){const M=new Map;i.forEach((L,H)=>M.set(H,L)),M.delete(G.NEED_RESULT_POINT_CALLBACK),i=M}try{const M=this.decodeRow(T,c,i);if(O===1){M.putMetadata(vt.ORIENTATION,180);const L=M.getResultPoints();L!==null&&(L[0]=new le(o-L[0].getX()-1,L[0].getY()),L[1]=new le(o-L[1].getX()-1,L[1].getY()))}return M}catch{}}}throw new W}static recordPattern(r,i,o){const a=o.length;for(let m=0;m<a;m++)o[m]=0;const c=r.getSize();if(i>=c)throw new W;let f=!r.get(i),h=0,g=i;for(;g<c;){if(r.get(g)!==f)o[h]++;else{if(++h===a)break;o[h]=1,f=!f}g++}if(!(h===a||h===a-1&&g===c))throw new W}static recordPatternInReverse(r,i,o){let a=o.length,c=r.get(i);for(;i>0&&a>=0;)r.get(--i)!==c&&(a--,c=!c);if(a>=0)throw new W;wt.recordPattern(r,i+1,o)}static patternMatchVariance(r,i,o){const a=r.length;let c=0,f=0;for(let m=0;m<a;m++)c+=r[m],f+=i[m];if(c<f)return Number.POSITIVE_INFINITY;const h=c/f;o*=h;let g=0;for(let m=0;m<a;m++){const y=r[m],E=i[m]*h,S=y>E?y-E:E-y;if(S>o)return Number.POSITIVE_INFINITY;g+=S}return g/c}}class $ extends wt{static findStartPattern(r){const i=r.getSize(),o=r.getNextSet(0);let a=0,c=Int32Array.from([0,0,0,0,0,0]),f=o,h=!1;const g=6;for(let m=o;m<i;m++)if(r.get(m)!==h)c[a]++;else{if(a===g-1){let y=$.MAX_AVG_VARIANCE,E=-1;for(let S=$.CODE_START_A;S<=$.CODE_START_C;S++){const T=wt.patternMatchVariance(c,$.CODE_PATTERNS[S],$.MAX_INDIVIDUAL_VARIANCE);T<y&&(y=T,E=S)}if(E>=0&&r.isRange(Math.max(0,f-(m-f)/2),f,!1))return Int32Array.from([f,m,E]);f+=c[0]+c[1],c=c.slice(2,c.length-1),c[a-1]=0,c[a]=0,a--}else a++;c[a]=1,h=!h}throw new W}static decodeCode(r,i,o){wt.recordPattern(r,o,i);let a=$.MAX_AVG_VARIANCE,c=-1;for(let f=0;f<$.CODE_PATTERNS.length;f++){const h=$.CODE_PATTERNS[f],g=this.patternMatchVariance(i,h,$.MAX_INDIVIDUAL_VARIANCE);g<a&&(a=g,c=f)}if(c>=0)return c;throw new W}decodeRow(r,i,o){const a=o&&o.get(G.ASSUME_GS1)===!0,c=$.findStartPattern(i),f=c[2];let h=0;const g=new Uint8Array(20);g[h++]=f;let m;switch(f){case $.CODE_START_A:m=$.CODE_CODE_A;break;case $.CODE_START_B:m=$.CODE_CODE_B;break;case $.CODE_START_C:m=$.CODE_CODE_C;break;default:throw new F}let y=!1,E=!1,S="",T=c[0],O=c[1];const M=Int32Array.from([0,0,0,0,0,0]);let L=0,H=0,Q=f,q=0,Y=!0,Ae=!1,we=!1;for(;!y;){const Gi=E;switch(E=!1,L=H,H=$.decodeCode(i,M,O),g[h++]=H,H!==$.CODE_STOP&&(Y=!0),H!==$.CODE_STOP&&(q++,Q+=q*H),T=O,O+=M.reduce((Ex,Cx)=>Ex+Cx,0),H){case $.CODE_START_A:case $.CODE_START_B:case $.CODE_START_C:throw new F}switch(m){case $.CODE_CODE_A:if(H<64)we===Ae?S+=String.fromCharCode(32+H):S+=String.fromCharCode(32+H+128),we=!1;else if(H<96)we===Ae?S+=String.fromCharCode(H-64):S+=String.fromCharCode(H+64),we=!1;else switch(H!==$.CODE_STOP&&(Y=!1),H){case $.CODE_FNC_1:a&&(S.length===0?S+="]C1":S+="");break;case $.CODE_FNC_2:case $.CODE_FNC_3:break;case $.CODE_FNC_4_A:!Ae&&we?(Ae=!0,we=!1):Ae&&we?(Ae=!1,we=!1):we=!0;break;case $.CODE_SHIFT:E=!0,m=$.CODE_CODE_B;break;case $.CODE_CODE_B:m=$.CODE_CODE_B;break;case $.CODE_CODE_C:m=$.CODE_CODE_C;break;case $.CODE_STOP:y=!0;break}break;case $.CODE_CODE_B:if(H<96)we===Ae?S+=String.fromCharCode(32+H):S+=String.fromCharCode(32+H+128),we=!1;else switch(H!==$.CODE_STOP&&(Y=!1),H){case $.CODE_FNC_1:a&&(S.length===0?S+="]C1":S+="");break;case $.CODE_FNC_2:case $.CODE_FNC_3:break;case $.CODE_FNC_4_B:!Ae&&we?(Ae=!0,we=!1):Ae&&we?(Ae=!1,we=!1):we=!0;break;case $.CODE_SHIFT:E=!0,m=$.CODE_CODE_A;break;case $.CODE_CODE_A:m=$.CODE_CODE_A;break;case $.CODE_CODE_C:m=$.CODE_CODE_C;break;case $.CODE_STOP:y=!0;break}break;case $.CODE_CODE_C:if(H<100)H<10&&(S+="0"),S+=H;else switch(H!==$.CODE_STOP&&(Y=!1),H){case $.CODE_FNC_1:a&&(S.length===0?S+="]C1":S+="");break;case $.CODE_CODE_A:m=$.CODE_CODE_A;break;case $.CODE_CODE_B:m=$.CODE_CODE_B;break;case $.CODE_STOP:y=!0;break}break}Gi&&(m=m===$.CODE_CODE_A?$.CODE_CODE_B:$.CODE_CODE_A)}const ln=O-T;if(O=i.getNextUnset(O),!i.isRange(O,Math.min(i.getSize(),O+(O-T)/2),!1))throw new W;if(Q-=q*L,Q%103!==L)throw new D;const Vn=S.length;if(Vn===0)throw new W;Vn>0&&Y&&(m===$.CODE_CODE_C?S=S.substring(0,Vn-2):S=S.substring(0,Vn-1));const an=(c[1]+c[0])/2,Ge=T+ln/2,Bt=g.length,pn=new Uint8Array(Bt);for(let Gi=0;Gi<Bt;Gi++)pn[Gi]=g[Gi];const zi=[new le(an,r),new le(Ge,r)];return new st(S,pn,0,zi,ae.CODE_128,new Date().getTime())}}$.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],$.MAX_AVG_VARIANCE=.25,$.MAX_INDIVIDUAL_VARIANCE=.7,$.CODE_SHIFT=98,$.CODE_CODE_C=99,$.CODE_CODE_B=100,$.CODE_CODE_A=101,$.CODE_FNC_1=102,$.CODE_FNC_2=97,$.CODE_FNC_3=96,$.CODE_FNC_4_A=101,$.CODE_FNC_4_B=100,$.CODE_START_A=103,$.CODE_START_B=104,$.CODE_START_C=105,$.CODE_STOP=106;class _t extends wt{constructor(r=!1,i=!1){super(),this.usingCheckDigit=r,this.extendedMode=i,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(r,i,o){let a=this.counters;a.fill(0),this.decodeRowResult="";let c=_t.findAsteriskPattern(i,a),f=i.getNextSet(c[1]),h=i.getSize(),g,m;do{_t.recordPattern(i,f,a);let M=_t.toNarrowWidePattern(a);if(M<0)throw new W;g=_t.patternToChar(M),this.decodeRowResult+=g,m=f;for(let L of a)f+=L;f=i.getNextSet(f)}while(g!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let y=0;for(let M of a)y+=M;let E=f-m-y;if(f!==h&&E*2<y)throw new W;if(this.usingCheckDigit){let M=this.decodeRowResult.length-1,L=0;for(let H=0;H<M;H++)L+=_t.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(H));if(this.decodeRowResult.charAt(M)!==_t.ALPHABET_STRING.charAt(L%43))throw new D;this.decodeRowResult=this.decodeRowResult.substring(0,M)}if(this.decodeRowResult.length===0)throw new W;let S;this.extendedMode?S=_t.decodeExtended(this.decodeRowResult):S=this.decodeRowResult;let T=(c[1]+c[0])/2,O=m+y/2;return new st(S,null,0,[new le(T,r),new le(O,r)],ae.CODE_39,new Date().getTime())}static findAsteriskPattern(r,i){let o=r.getSize(),a=r.getNextSet(0),c=0,f=a,h=!1,g=i.length;for(let m=a;m<o;m++)if(r.get(m)!==h)i[c]++;else{if(c===g-1){if(this.toNarrowWidePattern(i)===_t.ASTERISK_ENCODING&&r.isRange(Math.max(0,f-Math.floor((m-f)/2)),f,!1))return[f,m];f+=i[0]+i[1],i.copyWithin(0,2,2+c-1),i[c-1]=0,i[c]=0,c--}else c++;i[c]=1,h=!h}throw new W}static toNarrowWidePattern(r){let i=r.length,o=0,a;do{let c=2147483647;for(let g of r)g<c&&g>o&&(c=g);o=c,a=0;let f=0,h=0;for(let g=0;g<i;g++){let m=r[g];m>o&&(h|=1<<i-1-g,a++,f+=m)}if(a===3){for(let g=0;g<i&&a>0;g++){let m=r[g];if(m>o&&(a--,m*2>=f))return-1}return h}}while(a>3);return-1}static patternToChar(r){for(let i=0;i<_t.CHARACTER_ENCODINGS.length;i++)if(_t.CHARACTER_ENCODINGS[i]===r)return _t.ALPHABET_STRING.charAt(i);if(r===_t.ASTERISK_ENCODING)return"*";throw new W}static decodeExtended(r){let i=r.length,o="";for(let a=0;a<i;a++){let c=r.charAt(a);if(c==="+"||c==="$"||c==="%"||c==="/"){let f=r.charAt(a+1),h="\0";switch(c){case"+":if(f>="A"&&f<="Z")h=String.fromCharCode(f.charCodeAt(0)+32);else throw new F;break;case"$":if(f>="A"&&f<="Z")h=String.fromCharCode(f.charCodeAt(0)-64);else throw new F;break;case"%":if(f>="A"&&f<="E")h=String.fromCharCode(f.charCodeAt(0)-38);else if(f>="F"&&f<="J")h=String.fromCharCode(f.charCodeAt(0)-11);else if(f>="K"&&f<="O")h=String.fromCharCode(f.charCodeAt(0)+16);else if(f>="P"&&f<="T")h=String.fromCharCode(f.charCodeAt(0)+43);else if(f==="U")h="\0";else if(f==="V")h="@";else if(f==="W")h="`";else if(f==="X"||f==="Y"||f==="Z")h="";else throw new F;break;case"/":if(f>="A"&&f<="O")h=String.fromCharCode(f.charCodeAt(0)-32);else if(f==="Z")h=":";else throw new F;break}o+=h,a++}else o+=c}return o}}_t.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",_t.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],_t.ASTERISK_ENCODING=148;class We extends wt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(r,i,o){let a=this.decodeStart(i),c=this.decodeEnd(i),f=new me;We.decodeMiddle(i,a[1],c[0],f);let h=f.toString(),g=null;o!=null&&(g=o.get(G.ALLOWED_LENGTHS)),g==null&&(g=We.DEFAULT_ALLOWED_LENGTHS);let m=h.length,y=!1,E=0;for(let O of g){if(m===O){y=!0;break}O>E&&(E=O)}if(!y&&m>E&&(y=!0),!y)throw new F;const S=[new le(a[1],r),new le(c[0],r)];return new st(h,null,0,S,ae.ITF,new Date().getTime())}static decodeMiddle(r,i,o,a){let c=new Int32Array(10),f=new Int32Array(5),h=new Int32Array(5);for(c.fill(0),f.fill(0),h.fill(0);i<o;){wt.recordPattern(r,i,c);for(let m=0;m<5;m++){let y=2*m;f[m]=c[y],h[m]=c[y+1]}let g=We.decodeDigit(f);a.append(g.toString()),g=this.decodeDigit(h),a.append(g.toString()),c.forEach(function(m){i+=m})}}decodeStart(r){let i=We.skipWhiteSpace(r),o=We.findGuardPattern(r,i,We.START_PATTERN);return this.narrowLineWidth=(o[1]-o[0])/4,this.validateQuietZone(r,o[0]),o}validateQuietZone(r,i){let o=this.narrowLineWidth*10;o=o<i?o:i;for(let a=i-1;o>0&&a>=0&&!r.get(a);a--)o--;if(o!==0)throw new W}static skipWhiteSpace(r){const i=r.getSize(),o=r.getNextSet(0);if(o===i)throw new W;return o}decodeEnd(r){r.reverse();try{let i=We.skipWhiteSpace(r),o;try{o=We.findGuardPattern(r,i,We.END_PATTERN_REVERSED[0])}catch(c){c instanceof W&&(o=We.findGuardPattern(r,i,We.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,o[0]);let a=o[0];return o[0]=r.getSize()-o[1],o[1]=r.getSize()-a,o}finally{r.reverse()}}static findGuardPattern(r,i,o){let a=o.length,c=new Int32Array(a),f=r.getSize(),h=!1,g=0,m=i;c.fill(0);for(let y=i;y<f;y++)if(r.get(y)!==h)c[g]++;else{if(g===a-1){if(wt.patternMatchVariance(c,o,We.MAX_INDIVIDUAL_VARIANCE)<We.MAX_AVG_VARIANCE)return[m,y];m+=c[0]+c[1],B.arraycopy(c,2,c,0,g-1),c[g-1]=0,c[g]=0,g--}else g++;c[g]=1,h=!h}throw new W}static decodeDigit(r){let i=We.MAX_AVG_VARIANCE,o=-1,a=We.PATTERNS.length;for(let c=0;c<a;c++){let f=We.PATTERNS[c],h=wt.patternMatchVariance(r,f,We.MAX_INDIVIDUAL_VARIANCE);h<i?(i=h,o=c):h===i&&(o=-1)}if(o>=0)return o%10;throw new W}}We.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],We.MAX_AVG_VARIANCE=.38,We.MAX_INDIVIDUAL_VARIANCE=.5,We.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],We.START_PATTERN=Int32Array.from([1,1,1,1]),We.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class ft extends wt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(r){let i=!1,o,a=0,c=Int32Array.from([0,0,0]);for(;!i;){c=Int32Array.from([0,0,0]),o=ft.findGuardPattern(r,a,!1,this.START_END_PATTERN,c);let f=o[0];a=o[1];let h=f-(a-f);h>=0&&(i=r.isRange(h,f,!1))}return o}static checkChecksum(r){return ft.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let i=r.length;if(i===0)return!1;let o=parseInt(r.charAt(i-1),10);return ft.getStandardUPCEANChecksum(r.substring(0,i-1))===o}static getStandardUPCEANChecksum(r){let i=r.length,o=0;for(let a=i-1;a>=0;a-=2){let c=r.charAt(a).charCodeAt(0)-48;if(c<0||c>9)throw new F;o+=c}o*=3;for(let a=i-2;a>=0;a-=2){let c=r.charAt(a).charCodeAt(0)-48;if(c<0||c>9)throw new F;o+=c}return(1e3-o)%10}static decodeEnd(r,i){return ft.findGuardPattern(r,i,!1,ft.START_END_PATTERN,new Int32Array(ft.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(r,i,o,a){return this.findGuardPattern(r,i,o,a,new Int32Array(a.length))}static findGuardPattern(r,i,o,a,c){let f=r.getSize();i=o?r.getNextUnset(i):r.getNextSet(i);let h=0,g=i,m=a.length,y=o;for(let E=i;E<f;E++)if(r.get(E)!==y)c[h]++;else{if(h===m-1){if(wt.patternMatchVariance(c,a,ft.MAX_INDIVIDUAL_VARIANCE)<ft.MAX_AVG_VARIANCE)return Int32Array.from([g,E]);g+=c[0]+c[1];let S=c.slice(2,c.length-1);for(let T=0;T<h-1;T++)c[T]=S[T];c[h-1]=0,c[h]=0,h--}else h++;c[h]=1,y=!y}throw new W}static decodeDigit(r,i,o,a){this.recordPattern(r,o,i);let c=this.MAX_AVG_VARIANCE,f=-1,h=a.length;for(let g=0;g<h;g++){let m=a[g],y=wt.patternMatchVariance(i,m,ft.MAX_INDIVIDUAL_VARIANCE);y<c&&(c=y,f=g)}if(f>=0)return f;throw new W}}ft.MAX_AVG_VARIANCE=.48,ft.MAX_INDIVIDUAL_VARIANCE=.7,ft.START_END_PATTERN=Int32Array.from([1,1,1]),ft.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),ft.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),ft.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Hs{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,i,o){let a=this.decodeRowStringBuffer,c=this.decodeMiddle(i,o,a),f=a.toString(),h=Hs.parseExtensionString(f),g=[new le((o[0]+o[1])/2,r),new le(c,r)],m=new st(f,null,0,g,ae.UPC_EAN_EXTENSION,new Date().getTime());return h!=null&&m.putAllMetadata(h),m}decodeMiddle(r,i,o){let a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let c=r.getSize(),f=i[1],h=0;for(let m=0;m<5&&f<c;m++){let y=ft.decodeDigit(r,a,f,ft.L_AND_G_PATTERNS);o+=String.fromCharCode(48+y%10);for(let E of a)f+=E;y>=10&&(h|=1<<4-m),m!==4&&(f=r.getNextSet(f),f=r.getNextUnset(f))}if(o.length!==5)throw new W;let g=this.determineCheckDigit(h);if(Hs.extensionChecksum(o.toString())!==g)throw new W;return f}static extensionChecksum(r){let i=r.length,o=0;for(let a=i-2;a>=0;a-=2)o+=r.charAt(a).charCodeAt(0)-48;o*=3;for(let a=i-1;a>=0;a-=2)o+=r.charAt(a).charCodeAt(0)-48;return o*=3,o%10}determineCheckDigit(r){for(let i=0;i<10;i++)if(r===this.CHECK_DIGIT_ENCODINGS[i])return i;throw new W}static parseExtensionString(r){if(r.length!==5)return null;let i=Hs.parseExtension5String(r);return i==null?null:new Map([[vt.SUGGESTED_PRICE,i]])}static parseExtension5String(r){let i;switch(r.charAt(0)){case"0":i="";break;case"5":i="$";break;case"9":switch(r){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}i="";break;default:i="";break}let o=parseInt(r.substring(1)),a=(o/100).toString(),c=o%100,f=c<10?"0"+c:c.toString();return i+a+"."+f}}class gc{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,i,o){let a=this.decodeRowStringBuffer,c=this.decodeMiddle(i,o,a),f=a.toString(),h=gc.parseExtensionString(f),g=[new le((o[0]+o[1])/2,r),new le(c,r)],m=new st(f,null,0,g,ae.UPC_EAN_EXTENSION,new Date().getTime());return h!=null&&m.putAllMetadata(h),m}decodeMiddle(r,i,o){let a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let c=r.getSize(),f=i[1],h=0;for(let g=0;g<2&&f<c;g++){let m=ft.decodeDigit(r,a,f,ft.L_AND_G_PATTERNS);o+=String.fromCharCode(48+m%10);for(let y of a)f+=y;m>=10&&(h|=1<<1-g),g!==1&&(f=r.getNextSet(f),f=r.getNextUnset(f))}if(o.length!==2)throw new W;if(parseInt(o.toString())%4!==h)throw new W;return f}static parseExtensionString(r){return r.length!==2?null:new Map([[vt.ISSUE_NUMBER,parseInt(r)]])}}class f1{static decodeRow(r,i,o){let a=ft.findGuardPattern(i,o,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Hs().decodeRow(r,i,a)}catch{return new gc().decodeRow(r,i,a)}}}f1.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class ke extends ft{constructor(){super(),this.decodeRowStringBuffer="",ke.L_AND_G_PATTERNS=ke.L_PATTERNS.map(r=>Int32Array.from(r));for(let r=10;r<20;r++){let i=ke.L_PATTERNS[r-10],o=new Int32Array(i.length);for(let a=0;a<i.length;a++)o[a]=i[i.length-a-1];ke.L_AND_G_PATTERNS[r]=o}}decodeRow(r,i,o){let a=ke.findStartGuardPattern(i),c=o==null?null:o.get(G.NEED_RESULT_POINT_CALLBACK);if(c!=null){const Y=new le((a[0]+a[1])/2,r);c.foundPossibleResultPoint(Y)}let f=this.decodeMiddle(i,a,this.decodeRowStringBuffer),h=f.rowOffset,g=f.resultString;if(c!=null){const Y=new le(h,r);c.foundPossibleResultPoint(Y)}let m=this.decodeEnd(i,h);if(c!=null){const Y=new le((m[0]+m[1])/2,r);c.foundPossibleResultPoint(Y)}let y=m[1],E=y+(y-m[0]);if(E>=i.getSize()||!i.isRange(y,E,!1))throw new W;let S=g.toString();if(S.length<8)throw new F;if(!ke.checkChecksum(S))throw new D;let T=(a[1]+a[0])/2,O=(m[1]+m[0])/2,M=this.getBarcodeFormat(),L=[new le(T,r),new le(O,r)],H=new st(S,null,0,L,M,new Date().getTime()),Q=0;try{let Y=f1.decodeRow(r,i,m[1]);H.putMetadata(vt.UPC_EAN_EXTENSION,Y.getText()),H.putAllMetadata(Y.getResultMetadata()),H.addResultPoints(Y.getResultPoints()),Q=Y.getText().length}catch{}let q=o==null?null:o.get(G.ALLOWED_EAN_EXTENSIONS);if(q!=null){let Y=!1;for(let Ae in q)if(Q.toString()===Ae){Y=!0;break}if(!Y)throw new W}return H}decodeEnd(r,i){return ke.findGuardPattern(r,i,!1,ke.START_END_PATTERN,new Int32Array(ke.START_END_PATTERN.length).fill(0))}static checkChecksum(r){return ke.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let i=r.length;if(i===0)return!1;let o=parseInt(r.charAt(i-1),10);return ke.getStandardUPCEANChecksum(r.substring(0,i-1))===o}static getStandardUPCEANChecksum(r){let i=r.length,o=0;for(let a=i-1;a>=0;a-=2){let c=r.charAt(a).charCodeAt(0)-48;if(c<0||c>9)throw new F;o+=c}o*=3;for(let a=i-2;a>=0;a-=2){let c=r.charAt(a).charCodeAt(0)-48;if(c<0||c>9)throw new F;o+=c}return(1e3-o)%10}}class li extends ke{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,i,o){let a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let c=r.getSize(),f=i[1],h=0;for(let m=0;m<6&&f<c;m++){let y=ke.decodeDigit(r,a,f,ke.L_AND_G_PATTERNS);o+=String.fromCharCode(48+y%10);for(let E of a)f+=E;y>=10&&(h|=1<<5-m)}o=li.determineFirstDigit(o,h),f=ke.findGuardPattern(r,f,!0,ke.MIDDLE_PATTERN,new Int32Array(ke.MIDDLE_PATTERN.length).fill(0))[1];for(let m=0;m<6&&f<c;m++){let y=ke.decodeDigit(r,a,f,ke.L_PATTERNS);o+=String.fromCharCode(48+y);for(let E of a)f+=E}return{rowOffset:f,resultString:o}}getBarcodeFormat(){return ae.EAN_13}static determineFirstDigit(r,i){for(let o=0;o<10;o++)if(i===this.FIRST_DIGIT_ENCODINGS[o])return r=String.fromCharCode(48+o)+r,r;throw new W}}li.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class h1 extends ke{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,i,o){const a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let c=r.getSize(),f=i[1];for(let g=0;g<4&&f<c;g++){let m=ke.decodeDigit(r,a,f,ke.L_PATTERNS);o+=String.fromCharCode(48+m);for(let y of a)f+=y}f=ke.findGuardPattern(r,f,!0,ke.MIDDLE_PATTERN,new Int32Array(ke.MIDDLE_PATTERN.length).fill(0))[1];for(let g=0;g<4&&f<c;g++){let m=ke.decodeDigit(r,a,f,ke.L_PATTERNS);o+=String.fromCharCode(48+m);for(let y of a)f+=y}return{rowOffset:f,resultString:o}}getBarcodeFormat(){return ae.EAN_8}}class d1 extends ke{constructor(){super(...arguments),this.ean13Reader=new li}getBarcodeFormat(){return ae.UPC_A}decode(r,i){return this.maybeReturnResult(this.ean13Reader.decode(r))}decodeRow(r,i,o){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,i,o))}decodeMiddle(r,i,o){return this.ean13Reader.decodeMiddle(r,i,o)}maybeReturnResult(r){let i=r.getText();if(i.charAt(0)==="0"){let o=new st(i.substring(1),null,null,r.getResultPoints(),ae.UPC_A);return r.getResultMetadata()!=null&&o.putAllMetadata(r.getResultMetadata()),o}else throw new W}reset(){this.ean13Reader.reset()}}class Un extends ke{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(r,i,o){const a=this.decodeMiddleCounters.map(m=>m);a[0]=0,a[1]=0,a[2]=0,a[3]=0;const c=r.getSize();let f=i[1],h=0;for(let m=0;m<6&&f<c;m++){const y=Un.decodeDigit(r,a,f,Un.L_AND_G_PATTERNS);o+=String.fromCharCode(48+y%10);for(let E of a)f+=E;y>=10&&(h|=1<<5-m)}let g=Un.determineNumSysAndCheckDigit(o,h);return{rowOffset:f,resultString:g}}decodeEnd(r,i){return Un.findGuardPatternWithoutCounters(r,i,!0,Un.MIDDLE_END_PATTERN)}checkChecksum(r){return ke.checkChecksum(Un.convertUPCEtoUPCA(r))}static determineNumSysAndCheckDigit(r,i){for(let o=0;o<=1;o++)for(let a=0;a<10;a++)if(i===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[o][a]){let c=String.fromCharCode(48+o),f=String.fromCharCode(48+a);return c+r+f}throw W.getNotFoundInstance()}getBarcodeFormat(){return ae.UPC_E}static convertUPCEtoUPCA(r){const i=r.slice(1,7).split("").map(c=>c.charCodeAt(0)),o=new me;o.append(r.charAt(0));let a=i[5];switch(a){case 0:case 1:case 2:o.appendChars(i,0,2),o.append(a),o.append("0000"),o.appendChars(i,2,3);break;case 3:o.appendChars(i,0,3),o.append("00000"),o.appendChars(i,3,2);break;case 4:o.appendChars(i,0,4),o.append("00000"),o.append(i[4]);break;default:o.appendChars(i,0,5),o.append("0000"),o.append(a);break}return r.length>=8&&o.append(r.charAt(7)),o.toString()}}Un.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Un.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class pc extends wt{constructor(r){super();let i=r==null?null:r.get(G.POSSIBLE_FORMATS),o=[];s(i)?(o.push(new li),o.push(new d1),o.push(new h1),o.push(new Un)):(i.indexOf(ae.EAN_13)>-1&&o.push(new li),i.indexOf(ae.UPC_A)>-1&&o.push(new d1),i.indexOf(ae.EAN_8)>-1&&o.push(new h1),i.indexOf(ae.UPC_E)>-1&&o.push(new Un)),this.readers=o}decodeRow(r,i,o){for(let a of this.readers)try{const c=a.decodeRow(r,i,o),f=c.getBarcodeFormat()===ae.EAN_13&&c.getText().charAt(0)==="0",h=o==null?null:o.get(G.POSSIBLE_FORMATS),g=h==null||h.includes(ae.UPC_A);if(f&&g){const m=c.getRawBytes(),y=new st(c.getText().substring(1),m,m?m.length:null,c.getResultPoints(),ae.UPC_A);return y.putAllMetadata(c.getResultMetadata()),y}return c}catch{}throw new W}reset(){for(let r of this.readers)r.reset()}}class Ht extends wt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(r,i){for(let o=0;o<i.length;o++)if(wt.patternMatchVariance(r,i[o],Ht.MAX_INDIVIDUAL_VARIANCE)<Ht.MAX_AVG_VARIANCE)return o;throw new W}static count(r){return be.sum(new Int32Array(r))}static increment(r,i){let o=0,a=i[0];for(let c=1;c<r.length;c++)i[c]>a&&(a=i[c],o=c);r[o]++}static decrement(r,i){let o=0,a=i[0];for(let c=1;c<r.length;c++)i[c]<a&&(a=i[c],o=c);r[o]--}static isFinderPattern(r){let i=r[0]+r[1],o=i+r[2]+r[3],a=i/o;if(a>=Ht.MIN_FINDER_PATTERN_RATIO&&a<=Ht.MAX_FINDER_PATTERN_RATIO){let c=Number.MAX_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER;for(let h of r)h>f&&(f=h),h<c&&(c=h);return f<10*c}return!1}}Ht.MAX_AVG_VARIANCE=.2,Ht.MAX_INDIVIDUAL_VARIANCE=.45,Ht.MIN_FINDER_PATTERN_RATIO=9.5/12,Ht.MAX_FINDER_PATTERN_RATIO=12.5/14;class Bi{constructor(r,i){this.value=r,this.checksumPortion=i}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(r){if(!(r instanceof Bi))return!1;const i=r;return this.value===i.value&&this.checksumPortion===i.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class dl{constructor(r,i,o,a,c){this.value=r,this.startEnd=i,this.value=r,this.startEnd=i,this.resultPoints=new Array,this.resultPoints.push(new le(o,c)),this.resultPoints.push(new le(a,c))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(r){if(!(r instanceof dl))return!1;const i=r;return this.value===i.value}hashCode(){return this.value}}class Jn{constructor(){}static getRSSvalue(r,i,o){let a=0;for(let g of r)a+=g;let c=0,f=0,h=r.length;for(let g=0;g<h-1;g++){let m;for(m=1,f|=1<<g;m<r[g];m++,f&=~(1<<g)){let y=Jn.combins(a-m-1,h-g-2);if(o&&f===0&&a-m-(h-g-1)>=h-g-1&&(y-=Jn.combins(a-m-(h-g),h-g-2)),h-g-1>1){let E=0;for(let S=a-m-(h-g-2);S>i;S--)E+=Jn.combins(a-m-S-1,h-g-3);y-=E*(h-1-g)}else a-m>i&&y--;c+=y}a-=m}return c}static combins(r,i){let o,a;r-i>i?(a=i,o=r-i):(a=r-i,o=i);let c=1,f=1;for(let h=r;h>o;h--)c*=h,f<=a&&(c/=f,f++);for(;f<=a;)c/=f,f++;return c}}class Ym{static buildBitArray(r){let i=r.length*2-1;r[r.length-1].getRightChar()==null&&(i-=1);let o=12*i,a=new P(o),c=0,h=r[0].getRightChar().getValue();for(let g=11;g>=0;--g)h&1<<g&&a.set(c),c++;for(let g=1;g<r.length;++g){let m=r[g],y=m.getLeftChar().getValue();for(let E=11;E>=0;--E)y&1<<E&&a.set(c),c++;if(m.getRightChar()!=null){let E=m.getRightChar().getValue();for(let S=11;S>=0;--S)E&1<<S&&a.set(c),c++}}return a}}class ai{constructor(r,i){i?this.decodedInformation=null:(this.finished=r,this.decodedInformation=i)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class mc{constructor(r){this.newPosition=r}getNewPosition(){return this.newPosition}}class rn extends mc{constructor(r,i){super(r),this.value=i}getValue(){return this.value}isFNC1(){return this.value===rn.FNC1}}rn.FNC1="$";class ci extends mc{constructor(r,i,o){super(r),o?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=i}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class In extends mc{constructor(r,i,o){if(super(r),i<0||i>10||o<0||o>10)throw new F;this.firstDigit=i,this.secondDigit=o}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===In.FNC1}isSecondDigitFNC1(){return this.secondDigit===In.FNC1}isAnyFNC1(){return this.firstDigit===In.FNC1||this.secondDigit===In.FNC1}}In.FNC1=10;class ie{constructor(){}static parseFieldsInGeneralPurpose(r){if(!r)return null;if(r.length<2)throw new W;let i=r.substring(0,2);for(let c of ie.TWO_DIGIT_DATA_LENGTH)if(c[0]===i)return c[1]===ie.VARIABLE_LENGTH?ie.processVariableAI(2,c[2],r):ie.processFixedAI(2,c[1],r);if(r.length<3)throw new W;let o=r.substring(0,3);for(let c of ie.THREE_DIGIT_DATA_LENGTH)if(c[0]===o)return c[1]===ie.VARIABLE_LENGTH?ie.processVariableAI(3,c[2],r):ie.processFixedAI(3,c[1],r);for(let c of ie.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(c[0]===o)return c[1]===ie.VARIABLE_LENGTH?ie.processVariableAI(4,c[2],r):ie.processFixedAI(4,c[1],r);if(r.length<4)throw new W;let a=r.substring(0,4);for(let c of ie.FOUR_DIGIT_DATA_LENGTH)if(c[0]===a)return c[1]===ie.VARIABLE_LENGTH?ie.processVariableAI(4,c[2],r):ie.processFixedAI(4,c[1],r);throw new W}static processFixedAI(r,i,o){if(o.length<r)throw new W;let a=o.substring(0,r);if(o.length<r+i)throw new W;let c=o.substring(r,r+i),f=o.substring(r+i),h="("+a+")"+c,g=ie.parseFieldsInGeneralPurpose(f);return g==null?h:h+g}static processVariableAI(r,i,o){let a=o.substring(0,r),c;o.length<r+i?c=o.length:c=r+i;let f=o.substring(r,c),h=o.substring(c),g="("+a+")"+f,m=ie.parseFieldsInGeneralPurpose(h);return m==null?g:g+m}}ie.VARIABLE_LENGTH=[],ie.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",ie.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",ie.VARIABLE_LENGTH,20],["22",ie.VARIABLE_LENGTH,29],["30",ie.VARIABLE_LENGTH,8],["37",ie.VARIABLE_LENGTH,8],["90",ie.VARIABLE_LENGTH,30],["91",ie.VARIABLE_LENGTH,30],["92",ie.VARIABLE_LENGTH,30],["93",ie.VARIABLE_LENGTH,30],["94",ie.VARIABLE_LENGTH,30],["95",ie.VARIABLE_LENGTH,30],["96",ie.VARIABLE_LENGTH,30],["97",ie.VARIABLE_LENGTH,3],["98",ie.VARIABLE_LENGTH,30],["99",ie.VARIABLE_LENGTH,30]],ie.THREE_DIGIT_DATA_LENGTH=[["240",ie.VARIABLE_LENGTH,30],["241",ie.VARIABLE_LENGTH,30],["242",ie.VARIABLE_LENGTH,6],["250",ie.VARIABLE_LENGTH,30],["251",ie.VARIABLE_LENGTH,30],["253",ie.VARIABLE_LENGTH,17],["254",ie.VARIABLE_LENGTH,20],["400",ie.VARIABLE_LENGTH,30],["401",ie.VARIABLE_LENGTH,30],["402",17],["403",ie.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",ie.VARIABLE_LENGTH,20],["421",ie.VARIABLE_LENGTH,15],["422",3],["423",ie.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],ie.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",ie.VARIABLE_LENGTH,15],["391",ie.VARIABLE_LENGTH,18],["392",ie.VARIABLE_LENGTH,15],["393",ie.VARIABLE_LENGTH,18],["703",ie.VARIABLE_LENGTH,30]],ie.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",ie.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",ie.VARIABLE_LENGTH,20],["8003",ie.VARIABLE_LENGTH,30],["8004",ie.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",ie.VARIABLE_LENGTH,30],["8008",ie.VARIABLE_LENGTH,12],["8018",18],["8020",ie.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",ie.VARIABLE_LENGTH,70],["8200",ie.VARIABLE_LENGTH,70]];class Li{constructor(r){this.buffer=new me,this.information=r}decodeAllCodes(r,i){let o=i,a=null;do{let c=this.decodeGeneralPurposeField(o,a),f=ie.parseFieldsInGeneralPurpose(c.getNewString());if(f!=null&&r.append(f),c.isRemaining()?a=""+c.getRemainingValue():a=null,o===c.getNewPosition())break;o=c.getNewPosition()}while(!0);return r.toString()}isStillNumeric(r){if(r+7>this.information.getSize())return r+4<=this.information.getSize();for(let i=r;i<r+3;++i)if(this.information.get(i))return!0;return this.information.get(r+3)}decodeNumeric(r){if(r+7>this.information.getSize()){let c=this.extractNumericValueFromBitArray(r,4);return c===0?new In(this.information.getSize(),In.FNC1,In.FNC1):new In(this.information.getSize(),c-1,In.FNC1)}let i=this.extractNumericValueFromBitArray(r,7),o=(i-8)/11,a=(i-8)%11;return new In(r+7,o,a)}extractNumericValueFromBitArray(r,i){return Li.extractNumericValueFromBitArray(this.information,r,i)}static extractNumericValueFromBitArray(r,i,o){let a=0;for(let c=0;c<o;++c)r.get(i+c)&&(a|=1<<o-c-1);return a}decodeGeneralPurposeField(r,i){this.buffer.setLengthToZero(),i!=null&&this.buffer.append(i),this.current.setPosition(r);let o=this.parseBlocks();return o!=null&&o.isRemaining()?new ci(this.current.getPosition(),this.buffer.toString(),o.getRemainingValue()):new ci(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let r,i;do{let o=this.current.getPosition();if(this.current.isAlpha()?(i=this.parseAlphaBlock(),r=i.isFinished()):this.current.isIsoIec646()?(i=this.parseIsoIec646Block(),r=i.isFinished()):(i=this.parseNumericBlock(),r=i.isFinished()),!(o!==this.current.getPosition())&&!r)break}while(!r);return i.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let r=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFirstDigitFNC1()){let i;return r.isSecondDigitFNC1()?i=new ci(this.current.getPosition(),this.buffer.toString()):i=new ci(this.current.getPosition(),this.buffer.toString(),r.getSecondDigit()),new ai(!0,i)}if(this.buffer.append(r.getFirstDigit()),r.isSecondDigitFNC1()){let i=new ci(this.current.getPosition(),this.buffer.toString());return new ai(!0,i)}this.buffer.append(r.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new ai(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let r=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let i=new ci(this.current.getPosition(),this.buffer.toString());return new ai(!0,i)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new ai(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let r=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let i=new ci(this.current.getPosition(),this.buffer.toString());return new ai(!0,i)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new ai(!1)}isStillIsoIec646(r){if(r+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(r,5);if(i>=5&&i<16)return!0;if(r+7>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(r,7);if(o>=64&&o<116)return!0;if(r+8>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(r,8);return a>=232&&a<253}decodeIsoIec646(r){let i=this.extractNumericValueFromBitArray(r,5);if(i===15)return new rn(r+5,rn.FNC1);if(i>=5&&i<15)return new rn(r+5,"0"+(i-5));let o=this.extractNumericValueFromBitArray(r,7);if(o>=64&&o<90)return new rn(r+7,""+(o+1));if(o>=90&&o<116)return new rn(r+7,""+(o+7));let a=this.extractNumericValueFromBitArray(r,8),c;switch(a){case 232:c="!";break;case 233:c='"';break;case 234:c="%";break;case 235:c="&";break;case 236:c="'";break;case 237:c="(";break;case 238:c=")";break;case 239:c="*";break;case 240:c="+";break;case 241:c=",";break;case 242:c="-";break;case 243:c=".";break;case 244:c="/";break;case 245:c=":";break;case 246:c=";";break;case 247:c="<";break;case 248:c="=";break;case 249:c=">";break;case 250:c="?";break;case 251:c="_";break;case 252:c=" ";break;default:throw new F}return new rn(r+8,c)}isStillAlpha(r){if(r+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(r,5);if(i>=5&&i<16)return!0;if(r+6>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(r,6);return o>=16&&o<63}decodeAlphanumeric(r){let i=this.extractNumericValueFromBitArray(r,5);if(i===15)return new rn(r+5,rn.FNC1);if(i>=5&&i<15)return new rn(r+5,"0"+(i-5));let o=this.extractNumericValueFromBitArray(r,6);if(o>=32&&o<58)return new rn(r+6,""+(o+33));let a;switch(o){case 58:a="*";break;case 59:a=",";break;case 60:a="-";break;case 61:a=".";break;case 62:a="/";break;default:throw new qn("Decoding invalid alphanumeric value: "+o)}return new rn(r+6,a)}isAlphaTo646ToAlphaLatch(r){if(r+1>this.information.getSize())return!1;for(let i=0;i<5&&i+r<this.information.getSize();++i)if(i===2){if(!this.information.get(r+2))return!1}else if(this.information.get(r+i))return!1;return!0}isAlphaOr646ToNumericLatch(r){if(r+3>this.information.getSize())return!1;for(let i=r;i<r+3;++i)if(this.information.get(i))return!1;return!0}isNumericToAlphaNumericLatch(r){if(r+1>this.information.getSize())return!1;for(let i=0;i<4&&i+r<this.information.getSize();++i)if(this.information.get(r+i))return!1;return!0}}class xc{constructor(r){this.information=r,this.generalDecoder=new Li(r)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class sn extends xc{constructor(r){super(r)}encodeCompressedGtin(r,i){r.append("(01)");let o=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,i,o)}encodeCompressedGtinWithoutAI(r,i,o){for(let a=0;a<4;++a){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(i+10*a,10);c/100===0&&r.append("0"),c/10===0&&r.append("0"),r.append(c)}sn.appendCheckDigit(r,o)}static appendCheckDigit(r,i){let o=0;for(let a=0;a<13;a++){let c=r.charAt(a+i).charCodeAt(0)-48;o+=a&1?c:3*c}o=10-o%10,o===10&&(o=0),r.append(o)}}sn.GTIN_SIZE=40;class Fi extends sn{constructor(r){super(r)}parseInformation(){let r=new me;r.append("(01)");let i=r.length(),o=this.getGeneralDecoder().extractNumericValueFromBitArray(Fi.HEADER_SIZE,4);return r.append(o),this.encodeCompressedGtinWithoutAI(r,Fi.HEADER_SIZE+4,i),this.getGeneralDecoder().decodeAllCodes(r,Fi.HEADER_SIZE+44)}}Fi.HEADER_SIZE=4;class gl extends xc{constructor(r){super(r)}parseInformation(){let r=new me;return this.getGeneralDecoder().decodeAllCodes(r,gl.HEADER_SIZE)}}gl.HEADER_SIZE=5;class pl extends sn{constructor(r){super(r)}encodeCompressedWeight(r,i,o){let a=this.getGeneralDecoder().extractNumericValueFromBitArray(i,o);this.addWeightCode(r,a);let c=this.checkWeight(a),f=1e5;for(let h=0;h<5;++h)c/f===0&&r.append("0"),f/=10;r.append(c)}}class $n extends pl{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()!=$n.HEADER_SIZE+pl.GTIN_SIZE+$n.WEIGHT_SIZE)throw new W;let r=new me;return this.encodeCompressedGtin(r,$n.HEADER_SIZE),this.encodeCompressedWeight(r,$n.HEADER_SIZE+pl.GTIN_SIZE,$n.WEIGHT_SIZE),r.toString()}}$n.HEADER_SIZE=5,$n.WEIGHT_SIZE=15;class Km extends $n{constructor(r){super(r)}addWeightCode(r,i){r.append("(3103)")}checkWeight(r){return r}}class Zm extends $n{constructor(r){super(r)}addWeightCode(r,i){i<1e4?r.append("(3202)"):r.append("(3203)")}checkWeight(r){return r<1e4?r:r-1e4}}class er extends sn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<er.HEADER_SIZE+sn.GTIN_SIZE)throw new W;let r=new me;this.encodeCompressedGtin(r,er.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray(er.HEADER_SIZE+sn.GTIN_SIZE,er.LAST_DIGIT_SIZE);r.append("(392"),r.append(i),r.append(")");let o=this.getGeneralDecoder().decodeGeneralPurposeField(er.HEADER_SIZE+sn.GTIN_SIZE+er.LAST_DIGIT_SIZE,null);return r.append(o.getNewString()),r.toString()}}er.HEADER_SIZE=8,er.LAST_DIGIT_SIZE=2;class qt extends sn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<qt.HEADER_SIZE+sn.GTIN_SIZE)throw new W;let r=new me;this.encodeCompressedGtin(r,qt.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray(qt.HEADER_SIZE+sn.GTIN_SIZE,qt.LAST_DIGIT_SIZE);r.append("(393"),r.append(i),r.append(")");let o=this.getGeneralDecoder().extractNumericValueFromBitArray(qt.HEADER_SIZE+sn.GTIN_SIZE+qt.LAST_DIGIT_SIZE,qt.FIRST_THREE_DIGITS_SIZE);o/100==0&&r.append("0"),o/10==0&&r.append("0"),r.append(o);let a=this.getGeneralDecoder().decodeGeneralPurposeField(qt.HEADER_SIZE+sn.GTIN_SIZE+qt.LAST_DIGIT_SIZE+qt.FIRST_THREE_DIGITS_SIZE,null);return r.append(a.getNewString()),r.toString()}}qt.HEADER_SIZE=8,qt.LAST_DIGIT_SIZE=2,qt.FIRST_THREE_DIGITS_SIZE=10;class nt extends pl{constructor(r,i,o){super(r),this.dateCode=o,this.firstAIdigits=i}parseInformation(){if(this.getInformation().getSize()!=nt.HEADER_SIZE+nt.GTIN_SIZE+nt.WEIGHT_SIZE+nt.DATE_SIZE)throw new W;let r=new me;return this.encodeCompressedGtin(r,nt.HEADER_SIZE),this.encodeCompressedWeight(r,nt.HEADER_SIZE+nt.GTIN_SIZE,nt.WEIGHT_SIZE),this.encodeCompressedDate(r,nt.HEADER_SIZE+nt.GTIN_SIZE+nt.WEIGHT_SIZE),r.toString()}encodeCompressedDate(r,i){let o=this.getGeneralDecoder().extractNumericValueFromBitArray(i,nt.DATE_SIZE);if(o==38400)return;r.append("("),r.append(this.dateCode),r.append(")");let a=o%32;o/=32;let c=o%12+1;o/=12;let f=o;f/10==0&&r.append("0"),r.append(f),c/10==0&&r.append("0"),r.append(c),a/10==0&&r.append("0"),r.append(a)}addWeightCode(r,i){r.append("("),r.append(this.firstAIdigits),r.append(i/1e5),r.append(")")}checkWeight(r){return r%1e5}}nt.HEADER_SIZE=8,nt.WEIGHT_SIZE=20,nt.DATE_SIZE=16;function g1(_){try{if(_.get(1))return new Fi(_);if(!_.get(2))return new gl(_);switch(Li.extractNumericValueFromBitArray(_,1,4)){case 4:return new Km(_);case 5:return new Zm(_)}switch(Li.extractNumericValueFromBitArray(_,1,5)){case 12:return new er(_);case 13:return new qt(_)}switch(Li.extractNumericValueFromBitArray(_,1,7)){case 56:return new nt(_,"310","11");case 57:return new nt(_,"320","11");case 58:return new nt(_,"310","13");case 59:return new nt(_,"320","13");case 60:return new nt(_,"310","15");case 61:return new nt(_,"320","15");case 62:return new nt(_,"310","17");case 63:return new nt(_,"320","17")}}catch(r){throw console.log(r),new qn("unknown decoder: "+_)}}class Rr{constructor(r,i,o,a){this.leftchar=r,this.rightchar=i,this.finderpattern=o,this.maybeLast=a}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(r,i){return r instanceof Rr?Rr.equalsOrNull(r.leftchar,i.leftchar)&&Rr.equalsOrNull(r.rightchar,i.rightchar)&&Rr.equalsOrNull(r.finderpattern,i.finderpattern):!1}static equalsOrNull(r,i){return r===null?i===null:Rr.equals(r,i)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class wc{constructor(r,i,o){this.pairs=r,this.rowNumber=i,this.wasReversed=o}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(r){return this.checkEqualitity(this,r)}toString(){return"{ "+this.pairs+" }"}equals(r,i){return r instanceof wc?this.checkEqualitity(r,i)&&r.wasReversed===i.wasReversed:!1}checkEqualitity(r,i){if(!r||!i)return;let o;return r.forEach((a,c)=>{i.forEach(f=>{a.getLeftChar().getValue()===f.getLeftChar().getValue()&&a.getRightChar().getValue()===f.getRightChar().getValue()&&a.getFinderPatter().getValue()===f.getFinderPatter().getValue()&&(o=!0)})}),o}}class j extends Ht{constructor(r){super(...arguments),this.pairs=new Array(j.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=r===!0}decodeRow(r,i,o){this.pairs.length=0,this.startFromEven=!1;try{return j.constructResult(this.decodeRow2pairs(r,i))}catch(a){this.verbose&&console.log(a)}return this.pairs.length=0,this.startFromEven=!0,j.constructResult(this.decodeRow2pairs(r,i))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(r,i){let o=!1;for(;!o;)try{this.pairs.push(this.retrieveNextPair(i,this.pairs,r))}catch(c){if(c instanceof W){if(!this.pairs.length)throw new W;o=!0}}if(this.checkChecksum())return this.pairs;let a;if(this.rows.length?a=!0:a=!1,this.storeRow(r,!1),a){let c=this.checkRowsBoolean(!1);if(c!=null||(c=this.checkRowsBoolean(!0),c!=null))return c}throw new W}checkRowsBoolean(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());let i=null;try{i=this.checkRows(new Array,0)}catch(o){this.verbose&&console.log(o)}return r&&(this.rows=this.rows.reverse()),i}checkRows(r,i){for(let o=i;o<this.rows.length;o++){let a=this.rows[o];this.pairs.length=0;for(let f of r)this.pairs.push(f.getPairs());if(this.pairs.push(a.getPairs()),!j.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let c=new Array(r);c.push(a);try{return this.checkRows(c,o+1)}catch(f){this.verbose&&console.log(f)}}throw new W}static isValidSequence(r){for(let i of j.FINDER_PATTERN_SEQUENCES){if(r.length>i.length)continue;let o=!0;for(let a=0;a<r.length;a++)if(r[a].getFinderPattern().getValue()!=i[a]){o=!1;break}if(o)return!0}return!1}storeRow(r,i){let o=0,a=!1,c=!1;for(;o<this.rows.length;){let f=this.rows[o];if(f.getRowNumber()>r){c=f.isEquivalent(this.pairs);break}a=f.isEquivalent(this.pairs),o++}c||a||j.isPartialRow(this.pairs,this.rows)||(this.rows.push(o,new wc(this.pairs,r,i)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(r,i){for(let o of i)if(o.getPairs().length!==r.length){for(let a of o.getPairs())for(let c of r)if(Rr.equals(a,c))break}}static isPartialRow(r,i){for(let o of i){let a=!0;for(let c of r){let f=!1;for(let h of o.getPairs())if(c.equals(h)){f=!0;break}if(!f){a=!1;break}}if(a)return!0}return!1}getRows(){return this.rows}static constructResult(r){let i=Ym.buildBitArray(r),a=g1(i).parseInformation(),c=r[0].getFinderPattern().getResultPoints(),f=r[r.length-1].getFinderPattern().getResultPoints(),h=[c[0],c[1],f[0],f[1]];return new st(a,null,null,h,ae.RSS_EXPANDED,null)}checkChecksum(){let r=this.pairs.get(0),i=r.getLeftChar(),o=r.getRightChar();if(o==null)return!1;let a=o.getChecksumPortion(),c=2;for(let h=1;h<this.pairs.size();++h){let g=this.pairs.get(h);a+=g.getLeftChar().getChecksumPortion(),c++;let m=g.getRightChar();m!=null&&(a+=m.getChecksumPortion(),c++)}return a%=211,211*(c-4)+a==i.getValue()}static getNextSecondBar(r,i){let o;return r.get(i)?(o=r.getNextUnset(i),o=r.getNextSet(o)):(o=r.getNextSet(i),o=r.getNextUnset(o)),o}retrieveNextPair(r,i,o){let a=i.length%2==0;this.startFromEven&&(a=!a);let c,f=!0,h=-1;do this.findNextPair(r,i,h),c=this.parseFoundFinderPattern(r,o,a),c==null?h=j.getNextSecondBar(r,this.startEnd[0]):f=!1;while(f);let g=this.decodeDataCharacter(r,c,a,!0);if(!this.isEmptyPair(i)&&i[i.length-1].mustBeLast())throw new W;let m;try{m=this.decodeDataCharacter(r,c,a,!1)}catch(y){m=null,this.verbose&&console.log(y)}return new Rr(g,m,c,!0)}isEmptyPair(r){return r.length===0}findNextPair(r,i,o){let a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;let c=r.getSize(),f;o>=0?f=o:this.isEmptyPair(i)?f=0:f=i[i.length-1].getFinderPattern().getStartEnd()[1];let h=i.length%2!=0;this.startFromEven&&(h=!h);let g=!1;for(;f<c&&(g=!r.get(f),!!g);)f++;let m=0,y=f;for(let E=f;E<c;E++)if(r.get(E)!=g)a[m]++;else{if(m==3){if(h&&j.reverseCounters(a),j.isFinderPattern(a)){this.startEnd[0]=y,this.startEnd[1]=E;return}h&&j.reverseCounters(a),y+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,m--}else m++;a[m]=1,g=!g}throw new W}static reverseCounters(r){let i=r.length;for(let o=0;o<i/2;++o){let a=r[o];r[o]=r[i-o-1],r[i-o-1]=a}}parseFoundFinderPattern(r,i,o){let a,c,f;if(o){let m=this.startEnd[0]-1;for(;m>=0&&!r.get(m);)m--;m++,a=this.startEnd[0]-m,c=m,f=this.startEnd[1]}else c=this.startEnd[0],f=r.getNextUnset(this.startEnd[1]+1),a=f-this.startEnd[1];let h=this.getDecodeFinderCounters();B.arraycopy(h,0,h,1,h.length-1),h[0]=a;let g;try{g=this.parseFinderValue(h,j.FINDER_PATTERNS)}catch{return null}return new dl(g,[c,f],c,f,i)}decodeDataCharacter(r,i,o,a){let c=this.getDataCharacterCounters();for(let Ge=0;Ge<c.length;Ge++)c[Ge]=0;if(a)j.recordPatternInReverse(r,i.getStartEnd()[0],c);else{j.recordPattern(r,i.getStartEnd()[1],c);for(let Ge=0,Bt=c.length-1;Ge<Bt;Ge++,Bt--){let pn=c[Ge];c[Ge]=c[Bt],c[Bt]=pn}}let f=17,h=be.sum(new Int32Array(c))/f,g=(i.getStartEnd()[1]-i.getStartEnd()[0])/15;if(Math.abs(h-g)/g>.3)throw new W;let m=this.getOddCounts(),y=this.getEvenCounts(),E=this.getOddRoundingErrors(),S=this.getEvenRoundingErrors();for(let Ge=0;Ge<c.length;Ge++){let Bt=1*c[Ge]/h,pn=Bt+.5;if(pn<1){if(Bt<.3)throw new W;pn=1}else if(pn>8){if(Bt>8.7)throw new W;pn=8}let zi=Ge/2;Ge&1?(y[zi]=pn,S[zi]=Bt-pn):(m[zi]=pn,E[zi]=Bt-pn)}this.adjustOddEvenCounts(f);let T=4*i.getValue()+(o?0:2)+(a?0:1)-1,O=0,M=0;for(let Ge=m.length-1;Ge>=0;Ge--){if(j.isNotA1left(i,o,a)){let Bt=j.WEIGHTS[T][2*Ge];M+=m[Ge]*Bt}O+=m[Ge]}let L=0;for(let Ge=y.length-1;Ge>=0;Ge--)if(j.isNotA1left(i,o,a)){let Bt=j.WEIGHTS[T][2*Ge+1];L+=y[Ge]*Bt}let H=M+L;if(O&1||O>13||O<4)throw new W;let Q=(13-O)/2,q=j.SYMBOL_WIDEST[Q],Y=9-q,Ae=Jn.getRSSvalue(m,q,!0),we=Jn.getRSSvalue(y,Y,!1),ln=j.EVEN_TOTAL_SUBSET[Q],Vn=j.GSUM[Q],an=Ae*ln+we+Vn;return new Bi(an,H)}static isNotA1left(r,i,o){return!(r.getValue()==0&&i&&o)}adjustOddEvenCounts(r){let i=be.sum(new Int32Array(this.getOddCounts())),o=be.sum(new Int32Array(this.getEvenCounts())),a=!1,c=!1;i>13?c=!0:i<4&&(a=!0);let f=!1,h=!1;o>13?h=!0:o<4&&(f=!0);let g=i+o-r,m=(i&1)==1,y=(o&1)==0;if(g==1)if(m){if(y)throw new W;c=!0}else{if(!y)throw new W;h=!0}else if(g==-1)if(m){if(y)throw new W;a=!0}else{if(!y)throw new W;f=!0}else if(g==0){if(m){if(!y)throw new W;i<o?(a=!0,h=!0):(c=!0,f=!0)}else if(y)throw new W}else throw new W;if(a){if(c)throw new W;j.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(c&&j.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(h)throw new W;j.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&j.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}j.SYMBOL_WIDEST=[7,5,4,3,1],j.EVEN_TOTAL_SUBSET=[4,20,52,104,204],j.GSUM=[0,348,1388,2948,3988],j.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],j.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],j.FINDER_PAT_A=0,j.FINDER_PAT_B=1,j.FINDER_PAT_C=2,j.FINDER_PAT_D=3,j.FINDER_PAT_E=4,j.FINDER_PAT_F=5,j.FINDER_PATTERN_SEQUENCES=[[j.FINDER_PAT_A,j.FINDER_PAT_A],[j.FINDER_PAT_A,j.FINDER_PAT_B,j.FINDER_PAT_B],[j.FINDER_PAT_A,j.FINDER_PAT_C,j.FINDER_PAT_B,j.FINDER_PAT_D],[j.FINDER_PAT_A,j.FINDER_PAT_E,j.FINDER_PAT_B,j.FINDER_PAT_D,j.FINDER_PAT_C],[j.FINDER_PAT_A,j.FINDER_PAT_E,j.FINDER_PAT_B,j.FINDER_PAT_D,j.FINDER_PAT_D,j.FINDER_PAT_F],[j.FINDER_PAT_A,j.FINDER_PAT_E,j.FINDER_PAT_B,j.FINDER_PAT_D,j.FINDER_PAT_E,j.FINDER_PAT_F,j.FINDER_PAT_F],[j.FINDER_PAT_A,j.FINDER_PAT_A,j.FINDER_PAT_B,j.FINDER_PAT_B,j.FINDER_PAT_C,j.FINDER_PAT_C,j.FINDER_PAT_D,j.FINDER_PAT_D],[j.FINDER_PAT_A,j.FINDER_PAT_A,j.FINDER_PAT_B,j.FINDER_PAT_B,j.FINDER_PAT_C,j.FINDER_PAT_C,j.FINDER_PAT_D,j.FINDER_PAT_E,j.FINDER_PAT_E],[j.FINDER_PAT_A,j.FINDER_PAT_A,j.FINDER_PAT_B,j.FINDER_PAT_B,j.FINDER_PAT_C,j.FINDER_PAT_C,j.FINDER_PAT_D,j.FINDER_PAT_E,j.FINDER_PAT_F,j.FINDER_PAT_F],[j.FINDER_PAT_A,j.FINDER_PAT_A,j.FINDER_PAT_B,j.FINDER_PAT_B,j.FINDER_PAT_C,j.FINDER_PAT_D,j.FINDER_PAT_D,j.FINDER_PAT_E,j.FINDER_PAT_E,j.FINDER_PAT_F,j.FINDER_PAT_F]],j.MAX_PAIRS=11;class Qm extends Bi{constructor(r,i,o){super(r,i),this.count=0,this.finderPattern=o}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class ht extends Ht{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(r,i,o){const a=this.decodePair(i,!1,r,o);ht.addOrTally(this.possibleLeftPairs,a),i.reverse();let c=this.decodePair(i,!0,r,o);ht.addOrTally(this.possibleRightPairs,c),i.reverse();for(let f of this.possibleLeftPairs)if(f.getCount()>1){for(let h of this.possibleRightPairs)if(h.getCount()>1&&ht.checkChecksum(f,h))return ht.constructResult(f,h)}throw new W}static addOrTally(r,i){if(i==null)return;let o=!1;for(let a of r)if(a.getValue()===i.getValue()){a.incrementCount(),o=!0;break}o||r.push(i)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(r,i){let o=4537077*r.getValue()+i.getValue(),a=new String(o).toString(),c=new me;for(let m=13-a.length;m>0;m--)c.append("0");c.append(a);let f=0;for(let m=0;m<13;m++){let y=c.charAt(m).charCodeAt(0)-48;f+=m&1?y:3*y}f=10-f%10,f===10&&(f=0),c.append(f.toString());let h=r.getFinderPattern().getResultPoints(),g=i.getFinderPattern().getResultPoints();return new st(c.toString(),null,0,[h[0],h[1],g[0],g[1]],ae.RSS_14,new Date().getTime())}static checkChecksum(r,i){let o=(r.getChecksumPortion()+16*i.getChecksumPortion())%79,a=9*r.getFinderPattern().getValue()+i.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,o===a}decodePair(r,i,o,a){try{let c=this.findFinderPattern(r,i),f=this.parseFoundFinderPattern(r,o,i,c),h=a==null?null:a.get(G.NEED_RESULT_POINT_CALLBACK);if(h!=null){let y=(c[0]+c[1])/2;i&&(y=r.getSize()-1-y),h.foundPossibleResultPoint(new le(y,o))}let g=this.decodeDataCharacter(r,f,!0),m=this.decodeDataCharacter(r,f,!1);return new Qm(1597*g.getValue()+m.getValue(),g.getChecksumPortion()+4*m.getChecksumPortion(),f)}catch{return null}}decodeDataCharacter(r,i,o){let a=this.getDataCharacterCounters();for(let L=0;L<a.length;L++)a[L]=0;if(o)wt.recordPatternInReverse(r,i.getStartEnd()[0],a);else{wt.recordPattern(r,i.getStartEnd()[1]+1,a);for(let L=0,H=a.length-1;L<H;L++,H--){let Q=a[L];a[L]=a[H],a[H]=Q}}let c=o?16:15,f=be.sum(new Int32Array(a))/c,h=this.getOddCounts(),g=this.getEvenCounts(),m=this.getOddRoundingErrors(),y=this.getEvenRoundingErrors();for(let L=0;L<a.length;L++){let H=a[L]/f,Q=Math.floor(H+.5);Q<1?Q=1:Q>8&&(Q=8);let q=Math.floor(L/2);L&1?(g[q]=Q,y[q]=H-Q):(h[q]=Q,m[q]=H-Q)}this.adjustOddEvenCounts(o,c);let E=0,S=0;for(let L=h.length-1;L>=0;L--)S*=9,S+=h[L],E+=h[L];let T=0,O=0;for(let L=g.length-1;L>=0;L--)T*=9,T+=g[L],O+=g[L];let M=S+3*T;if(o){if(E&1||E>12||E<4)throw new W;let L=(12-E)/2,H=ht.OUTSIDE_ODD_WIDEST[L],Q=9-H,q=Jn.getRSSvalue(h,H,!1),Y=Jn.getRSSvalue(g,Q,!0),Ae=ht.OUTSIDE_EVEN_TOTAL_SUBSET[L],we=ht.OUTSIDE_GSUM[L];return new Bi(q*Ae+Y+we,M)}else{if(O&1||O>10||O<4)throw new W;let L=(10-O)/2,H=ht.INSIDE_ODD_WIDEST[L],Q=9-H,q=Jn.getRSSvalue(h,H,!0),Y=Jn.getRSSvalue(g,Q,!1),Ae=ht.INSIDE_ODD_TOTAL_SUBSET[L],we=ht.INSIDE_GSUM[L];return new Bi(Y*Ae+q+we,M)}}findFinderPattern(r,i){let o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;let a=r.getSize(),c=!1,f=0;for(;f<a&&(c=!r.get(f),i!==c);)f++;let h=0,g=f;for(let m=f;m<a;m++)if(r.get(m)!==c)o[h]++;else{if(h===3){if(Ht.isFinderPattern(o))return[g,m];g+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,h--}else h++;o[h]=1,c=!c}throw new W}parseFoundFinderPattern(r,i,o,a){let c=r.get(a[0]),f=a[0]-1;for(;f>=0&&c!==r.get(f);)f--;f++;const h=a[0]-f,g=this.getDecodeFinderCounters(),m=new Int32Array(g.length);B.arraycopy(g,0,m,1,g.length-1),m[0]=h;const y=this.parseFinderValue(m,ht.FINDER_PATTERNS);let E=f,S=a[1];return o&&(E=r.getSize()-1-E,S=r.getSize()-1-S),new dl(y,[f,a[1]],E,S,i)}adjustOddEvenCounts(r,i){let o=be.sum(new Int32Array(this.getOddCounts())),a=be.sum(new Int32Array(this.getEvenCounts())),c=!1,f=!1,h=!1,g=!1;r?(o>12?f=!0:o<4&&(c=!0),a>12?g=!0:a<4&&(h=!0)):(o>11?f=!0:o<5&&(c=!0),a>10?g=!0:a<4&&(h=!0));let m=o+a-i,y=(o&1)===(r?1:0),E=(a&1)===1;if(m===1)if(y){if(E)throw new W;f=!0}else{if(!E)throw new W;g=!0}else if(m===-1)if(y){if(E)throw new W;c=!0}else{if(!E)throw new W;h=!0}else if(m===0){if(y){if(!E)throw new W;o<a?(c=!0,g=!0):(f=!0,h=!0)}else if(E)throw new W}else throw new W;if(c){if(f)throw new W;Ht.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&Ht.decrement(this.getOddCounts(),this.getOddRoundingErrors()),h){if(g)throw new W;Ht.increment(this.getEvenCounts(),this.getOddRoundingErrors())}g&&Ht.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ht.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],ht.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],ht.OUTSIDE_GSUM=[0,161,961,2015,2715],ht.INSIDE_GSUM=[0,336,1036,1516],ht.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],ht.INSIDE_ODD_WIDEST=[2,4,6,8],ht.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Ui extends wt{constructor(r,i){super(),this.readers=[],this.verbose=i===!0;const o=r?r.get(G.POSSIBLE_FORMATS):null,a=r&&r.get(G.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;o?((o.includes(ae.EAN_13)||o.includes(ae.UPC_A)||o.includes(ae.EAN_8)||o.includes(ae.UPC_E))&&this.readers.push(new pc(r)),o.includes(ae.CODE_39)&&this.readers.push(new _t(a)),o.includes(ae.CODE_128)&&this.readers.push(new $),o.includes(ae.ITF)&&this.readers.push(new We),o.includes(ae.RSS_14)&&this.readers.push(new ht),o.includes(ae.RSS_EXPANDED)&&this.readers.push(new j(this.verbose))):(this.readers.push(new pc(r)),this.readers.push(new _t),this.readers.push(new pc(r)),this.readers.push(new $),this.readers.push(new We),this.readers.push(new ht),this.readers.push(new j(this.verbose)))}decodeRow(r,i,o){for(let a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(r,i,o)}catch{}throw new W}reset(){this.readers.forEach(r=>r.reset())}}class qm extends vn{constructor(r=500,i){super(new Ui(i),r,i)}}class Be{constructor(r,i,o){this.ecCodewords=r,this.ecBlocks=[i],o&&this.ecBlocks.push(o)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Pe{constructor(r,i){this.count=r,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ve{constructor(r,i,o,a,c,f){this.versionNumber=r,this.symbolSizeRows=i,this.symbolSizeColumns=o,this.dataRegionSizeRows=a,this.dataRegionSizeColumns=c,this.ecBlocks=f;let h=0;const g=f.getECCodewords(),m=f.getECBlocks();for(let y of m)h+=y.getCount()*(y.getDataCodewords()+g);this.totalCodewords=h}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(r,i){if(r&1||i&1)throw new F;for(let o of ve.VERSIONS)if(o.symbolSizeRows===r&&o.symbolSizeColumns===i)return o;throw new F}toString(){return""+this.versionNumber}static buildVersions(){return[new ve(1,10,10,8,8,new Be(5,new Pe(1,3))),new ve(2,12,12,10,10,new Be(7,new Pe(1,5))),new ve(3,14,14,12,12,new Be(10,new Pe(1,8))),new ve(4,16,16,14,14,new Be(12,new Pe(1,12))),new ve(5,18,18,16,16,new Be(14,new Pe(1,18))),new ve(6,20,20,18,18,new Be(18,new Pe(1,22))),new ve(7,22,22,20,20,new Be(20,new Pe(1,30))),new ve(8,24,24,22,22,new Be(24,new Pe(1,36))),new ve(9,26,26,24,24,new Be(28,new Pe(1,44))),new ve(10,32,32,14,14,new Be(36,new Pe(1,62))),new ve(11,36,36,16,16,new Be(42,new Pe(1,86))),new ve(12,40,40,18,18,new Be(48,new Pe(1,114))),new ve(13,44,44,20,20,new Be(56,new Pe(1,144))),new ve(14,48,48,22,22,new Be(68,new Pe(1,174))),new ve(15,52,52,24,24,new Be(42,new Pe(2,102))),new ve(16,64,64,14,14,new Be(56,new Pe(2,140))),new ve(17,72,72,16,16,new Be(36,new Pe(4,92))),new ve(18,80,80,18,18,new Be(48,new Pe(4,114))),new ve(19,88,88,20,20,new Be(56,new Pe(4,144))),new ve(20,96,96,22,22,new Be(68,new Pe(4,174))),new ve(21,104,104,24,24,new Be(56,new Pe(6,136))),new ve(22,120,120,18,18,new Be(68,new Pe(6,175))),new ve(23,132,132,20,20,new Be(62,new Pe(8,163))),new ve(24,144,144,22,22,new Be(62,new Pe(8,156),new Pe(2,155))),new ve(25,8,18,6,16,new Be(7,new Pe(1,5))),new ve(26,8,32,6,14,new Be(11,new Pe(1,10))),new ve(27,12,26,10,24,new Be(14,new Pe(1,16))),new ve(28,12,36,10,16,new Be(18,new Pe(1,22))),new ve(29,16,36,14,16,new Be(24,new Pe(1,32))),new ve(30,16,48,14,22,new Be(28,new Pe(1,49)))]}}ve.VERSIONS=ve.buildVersions();class yc{constructor(r){const i=r.getHeight();if(i<8||i>144||i&1)throw new F;this.version=yc.readVersion(r),this.mappingBitMatrix=this.extractDataRegion(r),this.readMappingMatrix=new it(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(r){const i=r.getHeight(),o=r.getWidth();return ve.getVersionForDimensions(i,o)}readCodewords(){const r=new Int8Array(this.version.getTotalCodewords());let i=0,o=4,a=0;const c=this.mappingBitMatrix.getHeight(),f=this.mappingBitMatrix.getWidth();let h=!1,g=!1,m=!1,y=!1;do if(o===c&&a===0&&!h)r[i++]=this.readCorner1(c,f)&255,o-=2,a+=2,h=!0;else if(o===c-2&&a===0&&f&3&&!g)r[i++]=this.readCorner2(c,f)&255,o-=2,a+=2,g=!0;else if(o===c+4&&a===2&&!(f&7)&&!m)r[i++]=this.readCorner3(c,f)&255,o-=2,a+=2,m=!0;else if(o===c-2&&a===0&&(f&7)===4&&!y)r[i++]=this.readCorner4(c,f)&255,o-=2,a+=2,y=!0;else{do o<c&&a>=0&&!this.readMappingMatrix.get(a,o)&&(r[i++]=this.readUtah(o,a,c,f)&255),o-=2,a+=2;while(o>=0&&a<f);o+=1,a+=3;do o>=0&&a<f&&!this.readMappingMatrix.get(a,o)&&(r[i++]=this.readUtah(o,a,c,f)&255),o+=2,a-=2;while(o<c&&a>=0);o+=3,a+=1}while(o<c||a<f);if(i!==this.version.getTotalCodewords())throw new F;return r}readModule(r,i,o,a){return r<0&&(r+=o,i+=4-(o+4&7)),i<0&&(i+=a,r+=4-(a+4&7)),this.readMappingMatrix.set(i,r),this.mappingBitMatrix.get(i,r)}readUtah(r,i,o,a){let c=0;return this.readModule(r-2,i-2,o,a)&&(c|=1),c<<=1,this.readModule(r-2,i-1,o,a)&&(c|=1),c<<=1,this.readModule(r-1,i-2,o,a)&&(c|=1),c<<=1,this.readModule(r-1,i-1,o,a)&&(c|=1),c<<=1,this.readModule(r-1,i,o,a)&&(c|=1),c<<=1,this.readModule(r,i-2,o,a)&&(c|=1),c<<=1,this.readModule(r,i-1,o,a)&&(c|=1),c<<=1,this.readModule(r,i,o,a)&&(c|=1),c}readCorner1(r,i){let o=0;return this.readModule(r-1,0,r,i)&&(o|=1),o<<=1,this.readModule(r-1,1,r,i)&&(o|=1),o<<=1,this.readModule(r-1,2,r,i)&&(o|=1),o<<=1,this.readModule(0,i-2,r,i)&&(o|=1),o<<=1,this.readModule(0,i-1,r,i)&&(o|=1),o<<=1,this.readModule(1,i-1,r,i)&&(o|=1),o<<=1,this.readModule(2,i-1,r,i)&&(o|=1),o<<=1,this.readModule(3,i-1,r,i)&&(o|=1),o}readCorner2(r,i){let o=0;return this.readModule(r-3,0,r,i)&&(o|=1),o<<=1,this.readModule(r-2,0,r,i)&&(o|=1),o<<=1,this.readModule(r-1,0,r,i)&&(o|=1),o<<=1,this.readModule(0,i-4,r,i)&&(o|=1),o<<=1,this.readModule(0,i-3,r,i)&&(o|=1),o<<=1,this.readModule(0,i-2,r,i)&&(o|=1),o<<=1,this.readModule(0,i-1,r,i)&&(o|=1),o<<=1,this.readModule(1,i-1,r,i)&&(o|=1),o}readCorner3(r,i){let o=0;return this.readModule(r-1,0,r,i)&&(o|=1),o<<=1,this.readModule(r-1,i-1,r,i)&&(o|=1),o<<=1,this.readModule(0,i-3,r,i)&&(o|=1),o<<=1,this.readModule(0,i-2,r,i)&&(o|=1),o<<=1,this.readModule(0,i-1,r,i)&&(o|=1),o<<=1,this.readModule(1,i-3,r,i)&&(o|=1),o<<=1,this.readModule(1,i-2,r,i)&&(o|=1),o<<=1,this.readModule(1,i-1,r,i)&&(o|=1),o}readCorner4(r,i){let o=0;return this.readModule(r-3,0,r,i)&&(o|=1),o<<=1,this.readModule(r-2,0,r,i)&&(o|=1),o<<=1,this.readModule(r-1,0,r,i)&&(o|=1),o<<=1,this.readModule(0,i-2,r,i)&&(o|=1),o<<=1,this.readModule(0,i-1,r,i)&&(o|=1),o<<=1,this.readModule(1,i-1,r,i)&&(o|=1),o<<=1,this.readModule(2,i-1,r,i)&&(o|=1),o<<=1,this.readModule(3,i-1,r,i)&&(o|=1),o}extractDataRegion(r){const i=this.version.getSymbolSizeRows(),o=this.version.getSymbolSizeColumns();if(r.getHeight()!==i)throw new C("Dimension of bitMatrix must match the version size");const a=this.version.getDataRegionSizeRows(),c=this.version.getDataRegionSizeColumns(),f=i/a|0,h=o/c|0,g=f*a,m=h*c,y=new it(m,g);for(let E=0;E<f;++E){const S=E*a;for(let T=0;T<h;++T){const O=T*c;for(let M=0;M<a;++M){const L=E*(a+2)+1+M,H=S+M;for(let Q=0;Q<c;++Q){const q=T*(c+2)+1+Q;if(r.get(q,L)){const Y=O+Q;y.set(Y,H)}}}}}return y}}class _c{constructor(r,i){this.numDataCodewords=r,this.codewords=i}static getDataBlocks(r,i){const o=i.getECBlocks();let a=0;const c=o.getECBlocks();for(let M of c)a+=M.getCount();const f=new Array(a);let h=0;for(let M of c)for(let L=0;L<M.getCount();L++){const H=M.getDataCodewords(),Q=o.getECCodewords()+H;f[h++]=new _c(H,new Uint8Array(Q))}const m=f[0].codewords.length-o.getECCodewords(),y=m-1;let E=0;for(let M=0;M<y;M++)for(let L=0;L<h;L++)f[L].codewords[M]=r[E++];const S=i.getVersionNumber()===24,T=S?8:h;for(let M=0;M<T;M++)f[M].codewords[m-1]=r[E++];const O=f[0].codewords.length;for(let M=m;M<O;M++)for(let L=0;L<h;L++){const H=S?(L+8)%h:L,Q=S&&H>7?M-1:M;f[H].codewords[Q]=r[E++]}if(E!==r.length)throw new C;return f}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Ec{constructor(r){this.bytes=r,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(r){if(r<1||r>32||r>this.available())throw new C(""+r);let i=0,o=this.bitOffset,a=this.byteOffset;const c=this.bytes;if(o>0){const f=8-o,h=r<f?r:f,g=f-h,m=255>>8-h<<g;i=(c[a]&m)>>g,r-=h,o+=h,o===8&&(o=0,a++)}if(r>0){for(;r>=8;)i=i<<8|c[a]&255,a++,r-=8;if(r>0){const f=8-r,h=255>>f<<f;i=i<<r|(c[a]&h)>>f,o+=r}}return this.bitOffset=o,this.byteOffset=a,i}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Et;(function(_){_[_.PAD_ENCODE=0]="PAD_ENCODE",_[_.ASCII_ENCODE=1]="ASCII_ENCODE",_[_.C40_ENCODE=2]="C40_ENCODE",_[_.TEXT_ENCODE=3]="TEXT_ENCODE",_[_.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",_[_.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",_[_.BASE256_ENCODE=6]="BASE256_ENCODE"})(Et||(Et={}));class br{static decode(r){const i=new Ec(r),o=new me,a=new me,c=new Array;let f=Et.ASCII_ENCODE;do if(f===Et.ASCII_ENCODE)f=this.decodeAsciiSegment(i,o,a);else{switch(f){case Et.C40_ENCODE:this.decodeC40Segment(i,o);break;case Et.TEXT_ENCODE:this.decodeTextSegment(i,o);break;case Et.ANSIX12_ENCODE:this.decodeAnsiX12Segment(i,o);break;case Et.EDIFACT_ENCODE:this.decodeEdifactSegment(i,o);break;case Et.BASE256_ENCODE:this.decodeBase256Segment(i,o,c);break;default:throw new F}f=Et.ASCII_ENCODE}while(f!==Et.PAD_ENCODE&&i.available()>0);return a.length()>0&&o.append(a.toString()),new Fs(r,o.toString(),c.length===0?null:c,null)}static decodeAsciiSegment(r,i,o){let a=!1;do{let c=r.readBits(8);if(c===0)throw new F;if(c<=128)return a&&(c+=128),i.append(String.fromCharCode(c-1)),Et.ASCII_ENCODE;if(c===129)return Et.PAD_ENCODE;if(c<=229){const f=c-130;f<10&&i.append("0"),i.append(""+f)}else switch(c){case 230:return Et.C40_ENCODE;case 231:return Et.BASE256_ENCODE;case 232:i.append("");break;case 233:case 234:break;case 235:a=!0;break;case 236:i.append("[)>05"),o.insert(0,"");break;case 237:i.append("[)>06"),o.insert(0,"");break;case 238:return Et.ANSIX12_ENCODE;case 239:return Et.TEXT_ENCODE;case 240:return Et.EDIFACT_ENCODE;case 241:break;default:if(c!==254||r.available()!==0)throw new F;break}}while(r.available()>0);return Et.ASCII_ENCODE}static decodeC40Segment(r,i){let o=!1;const a=[];let c=0;do{if(r.available()===8)return;const f=r.readBits(8);if(f===254)return;this.parseTwoBytes(f,r.readBits(8),a);for(let h=0;h<3;h++){const g=a[h];switch(c){case 0:if(g<3)c=g+1;else if(g<this.C40_BASIC_SET_CHARS.length){const m=this.C40_BASIC_SET_CHARS[g];o?(i.append(String.fromCharCode(m.charCodeAt(0)+128)),o=!1):i.append(m)}else throw new F;break;case 1:o?(i.append(String.fromCharCode(g+128)),o=!1):i.append(String.fromCharCode(g)),c=0;break;case 2:if(g<this.C40_SHIFT2_SET_CHARS.length){const m=this.C40_SHIFT2_SET_CHARS[g];o?(i.append(String.fromCharCode(m.charCodeAt(0)+128)),o=!1):i.append(m)}else switch(g){case 27:i.append("");break;case 30:o=!0;break;default:throw new F}c=0;break;case 3:o?(i.append(String.fromCharCode(g+224)),o=!1):i.append(String.fromCharCode(g+96)),c=0;break;default:throw new F}}}while(r.available()>0)}static decodeTextSegment(r,i){let o=!1,a=[],c=0;do{if(r.available()===8)return;const f=r.readBits(8);if(f===254)return;this.parseTwoBytes(f,r.readBits(8),a);for(let h=0;h<3;h++){const g=a[h];switch(c){case 0:if(g<3)c=g+1;else if(g<this.TEXT_BASIC_SET_CHARS.length){const m=this.TEXT_BASIC_SET_CHARS[g];o?(i.append(String.fromCharCode(m.charCodeAt(0)+128)),o=!1):i.append(m)}else throw new F;break;case 1:o?(i.append(String.fromCharCode(g+128)),o=!1):i.append(String.fromCharCode(g)),c=0;break;case 2:if(g<this.TEXT_SHIFT2_SET_CHARS.length){const m=this.TEXT_SHIFT2_SET_CHARS[g];o?(i.append(String.fromCharCode(m.charCodeAt(0)+128)),o=!1):i.append(m)}else switch(g){case 27:i.append("");break;case 30:o=!0;break;default:throw new F}c=0;break;case 3:if(g<this.TEXT_SHIFT3_SET_CHARS.length){const m=this.TEXT_SHIFT3_SET_CHARS[g];o?(i.append(String.fromCharCode(m.charCodeAt(0)+128)),o=!1):i.append(m),c=0}else throw new F;break;default:throw new F}}}while(r.available()>0)}static decodeAnsiX12Segment(r,i){const o=[];do{if(r.available()===8)return;const a=r.readBits(8);if(a===254)return;this.parseTwoBytes(a,r.readBits(8),o);for(let c=0;c<3;c++){const f=o[c];switch(f){case 0:i.append("\r");break;case 1:i.append("*");break;case 2:i.append(">");break;case 3:i.append(" ");break;default:if(f<14)i.append(String.fromCharCode(f+44));else if(f<40)i.append(String.fromCharCode(f+51));else throw new F;break}}}while(r.available()>0)}static parseTwoBytes(r,i,o){let a=(r<<8)+i-1,c=Math.floor(a/1600);o[0]=c,a-=c*1600,c=Math.floor(a/40),o[1]=c,o[2]=a-c*40}static decodeEdifactSegment(r,i){do{if(r.available()<=16)return;for(let o=0;o<4;o++){let a=r.readBits(6);if(a===31){const c=8-r.getBitOffset();c!==8&&r.readBits(c);return}a&32||(a|=64),i.append(String.fromCharCode(a))}}while(r.available()>0)}static decodeBase256Segment(r,i,o){let a=1+r.getByteOffset();const c=this.unrandomize255State(r.readBits(8),a++);let f;if(c===0?f=r.available()/8|0:c<250?f=c:f=250*(c-249)+this.unrandomize255State(r.readBits(8),a++),f<0)throw new F;const h=new Uint8Array(f);for(let g=0;g<f;g++){if(r.available()<8)throw new F;h[g]=this.unrandomize255State(r.readBits(8),a++)}o.push(h);try{i.append(Se.decode(h,ce.ISO88591))}catch(g){throw new qn("Platform does not support required encoding: "+g.message)}}static unrandomize255State(r,i){const o=149*i%255+1,a=r-o;return a>=0?a:a+256}}br.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],br.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],br.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],br.TEXT_SHIFT2_SET_CHARS=br.C40_SHIFT2_SET_CHARS,br.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Jm{constructor(){this.rsDecoder=new Vs(Me.DATA_MATRIX_FIELD_256)}decode(r){const i=new yc(r),o=i.getVersion(),a=i.readCodewords(),c=_c.getDataBlocks(a,o);let f=0;for(let m of c)f+=m.getNumDataCodewords();const h=new Uint8Array(f),g=c.length;for(let m=0;m<g;m++){const y=c[m],E=y.getCodewords(),S=y.getNumDataCodewords();this.correctErrors(E,S);for(let T=0;T<S;T++)h[T*g+m]=E[T]}return br.decode(h)}correctErrors(r,i){const o=new Int32Array(r);try{this.rsDecoder.decode(o,r.length-i)}catch{throw new D}for(let a=0;a<i;a++)r[a]=o[a]}}class mt{constructor(r){this.image=r,this.rectangleDetector=new fr(this.image)}detect(){const r=this.rectangleDetector.detect();let i=this.detectSolid1(r);if(i=this.detectSolid2(i),i[3]=this.correctTopRight(i),!i[3])throw new W;i=this.shiftToModuleCenter(i);const o=i[0],a=i[1],c=i[2],f=i[3];let h=this.transitionsBetween(o,f)+1,g=this.transitionsBetween(c,f)+1;(h&1)===1&&(h+=1),(g&1)===1&&(g+=1),4*h<7*g&&4*g<7*h&&(h=g=Math.max(h,g));let m=mt.sampleGrid(this.image,o,a,c,f,h,g);return new fl(m,[o,a,c,f])}static shiftPoint(r,i,o){let a=(i.getX()-r.getX())/(o+1),c=(i.getY()-r.getY())/(o+1);return new le(r.getX()+a,r.getY()+c)}static moveAway(r,i,o){let a=r.getX(),c=r.getY();return a<i?a-=1:a+=1,c<o?c-=1:c+=1,new le(a,c)}detectSolid1(r){let i=r[0],o=r[1],a=r[3],c=r[2],f=this.transitionsBetween(i,o),h=this.transitionsBetween(o,a),g=this.transitionsBetween(a,c),m=this.transitionsBetween(c,i),y=f,E=[c,i,o,a];return y>h&&(y=h,E[0]=i,E[1]=o,E[2]=a,E[3]=c),y>g&&(y=g,E[0]=o,E[1]=a,E[2]=c,E[3]=i),y>m&&(E[0]=a,E[1]=c,E[2]=i,E[3]=o),E}detectSolid2(r){let i=r[0],o=r[1],a=r[2],c=r[3],f=this.transitionsBetween(i,c),h=mt.shiftPoint(o,a,(f+1)*4),g=mt.shiftPoint(a,o,(f+1)*4),m=this.transitionsBetween(h,i),y=this.transitionsBetween(g,c);return m<y?(r[0]=i,r[1]=o,r[2]=a,r[3]=c):(r[0]=o,r[1]=a,r[2]=c,r[3]=i),r}correctTopRight(r){let i=r[0],o=r[1],a=r[2],c=r[3],f=this.transitionsBetween(i,c),h=this.transitionsBetween(o,c),g=mt.shiftPoint(i,o,(h+1)*4),m=mt.shiftPoint(a,o,(f+1)*4);f=this.transitionsBetween(g,c),h=this.transitionsBetween(m,c);let y=new le(c.getX()+(a.getX()-o.getX())/(f+1),c.getY()+(a.getY()-o.getY())/(f+1)),E=new le(c.getX()+(i.getX()-o.getX())/(h+1),c.getY()+(i.getY()-o.getY())/(h+1));if(!this.isValid(y))return this.isValid(E)?E:null;if(!this.isValid(E))return y;let S=this.transitionsBetween(g,y)+this.transitionsBetween(m,y),T=this.transitionsBetween(g,E)+this.transitionsBetween(m,E);return S>T?y:E}shiftToModuleCenter(r){let i=r[0],o=r[1],a=r[2],c=r[3],f=this.transitionsBetween(i,c)+1,h=this.transitionsBetween(a,c)+1,g=mt.shiftPoint(i,o,h*4),m=mt.shiftPoint(a,o,f*4);f=this.transitionsBetween(g,c)+1,h=this.transitionsBetween(m,c)+1,(f&1)===1&&(f+=1),(h&1)===1&&(h+=1);let y=(i.getX()+o.getX()+a.getX()+c.getX())/4,E=(i.getY()+o.getY()+a.getY()+c.getY())/4;i=mt.moveAway(i,y,E),o=mt.moveAway(o,y,E),a=mt.moveAway(a,y,E),c=mt.moveAway(c,y,E);let S,T;return g=mt.shiftPoint(i,o,h*4),g=mt.shiftPoint(g,c,f*4),S=mt.shiftPoint(o,i,h*4),S=mt.shiftPoint(S,a,f*4),m=mt.shiftPoint(a,c,h*4),m=mt.shiftPoint(m,o,f*4),T=mt.shiftPoint(c,a,h*4),T=mt.shiftPoint(T,i,f*4),[g,S,m,T]}isValid(r){return r.getX()>=0&&r.getX()<this.image.getWidth()&&r.getY()>0&&r.getY()<this.image.getHeight()}static sampleGrid(r,i,o,a,c,f,h){return Nr.getInstance().sampleGrid(r,f,h,.5,.5,f-.5,.5,f-.5,h-.5,.5,h-.5,i.getX(),i.getY(),c.getX(),c.getY(),a.getX(),a.getY(),o.getX(),o.getY())}transitionsBetween(r,i){let o=Math.trunc(r.getX()),a=Math.trunc(r.getY()),c=Math.trunc(i.getX()),f=Math.trunc(i.getY()),h=Math.abs(f-a)>Math.abs(c-o);if(h){let M=o;o=a,a=M,M=c,c=f,f=M}let g=Math.abs(c-o),m=Math.abs(f-a),y=-g/2,E=a<f?1:-1,S=o<c?1:-1,T=0,O=this.image.get(h?a:o,h?o:a);for(let M=o,L=a;M!==c;M+=S){let H=this.image.get(h?L:M,h?M:L);if(H!==O&&(T++,O=H),y+=m,y>0){if(L===f)break;L+=E,y-=g}}return T}}class Or{constructor(){this.decoder=new Jm}decode(r,i=null){let o,a;if(i!=null&&i.has(G.PURE_BARCODE)){const m=Or.extractPureBits(r.getBlackMatrix());o=this.decoder.decode(m),a=Or.NO_POINTS}else{const m=new mt(r.getBlackMatrix()).detect();o=this.decoder.decode(m.getBits()),a=m.getPoints()}const c=o.getRawBytes(),f=new st(o.getText(),c,8*c.length,a,ae.DATA_MATRIX,B.currentTimeMillis()),h=o.getByteSegments();h!=null&&f.putMetadata(vt.BYTE_SEGMENTS,h);const g=o.getECLevel();return g!=null&&f.putMetadata(vt.ERROR_CORRECTION_LEVEL,g),f}reset(){}static extractPureBits(r){const i=r.getTopLeftOnBit(),o=r.getBottomRightOnBit();if(i==null||o==null)throw new W;const a=this.moduleSize(i,r);let c=i[1];const f=o[1];let h=i[0];const m=(o[0]-h+1)/a,y=(f-c+1)/a;if(m<=0||y<=0)throw new W;const E=a/2;c+=E,h+=E;const S=new it(m,y);for(let T=0;T<y;T++){const O=c+T*a;for(let M=0;M<m;M++)r.get(h+M*a,O)&&S.set(M,T)}return S}static moduleSize(r,i){const o=i.getWidth();let a=r[0];const c=r[1];for(;a<o&&i.get(a,c);)a++;if(a===o)throw new W;const f=a-r[0];if(f===0)throw new W;return f}}Or.NO_POINTS=[];class $m extends vn{constructor(r=500){super(new Or,r)}}var Vi;(function(_){_[_.L=0]="L",_[_.M=1]="M",_[_.Q=2]="Q",_[_.H=3]="H"})(Vi||(Vi={}));class Ye{constructor(r,i,o){this.value=r,this.stringValue=i,this.bits=o,Ye.FOR_BITS.set(o,this),Ye.FOR_VALUE.set(r,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(r){switch(r){case"L":return Ye.L;case"M":return Ye.M;case"Q":return Ye.Q;case"H":return Ye.H;default:throw new A(r+"not available")}}toString(){return this.stringValue}equals(r){if(!(r instanceof Ye))return!1;const i=r;return this.value===i.value}static forBits(r){if(r<0||r>=Ye.FOR_BITS.size)throw new C;return Ye.FOR_BITS.get(r)}}Ye.FOR_BITS=new Map,Ye.FOR_VALUE=new Map,Ye.L=new Ye(Vi.L,"L",1),Ye.M=new Ye(Vi.M,"M",0),Ye.Q=new Ye(Vi.Q,"Q",3),Ye.H=new Ye(Vi.H,"H",2);class Wt{constructor(r){this.errorCorrectionLevel=Ye.forBits(r>>3&3),this.dataMask=r&7}static numBitsDiffering(r,i){return R.bitCount(r^i)}static decodeFormatInformation(r,i){const o=Wt.doDecodeFormatInformation(r,i);return o!==null?o:Wt.doDecodeFormatInformation(r^Wt.FORMAT_INFO_MASK_QR,i^Wt.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(r,i){let o=Number.MAX_SAFE_INTEGER,a=0;for(const c of Wt.FORMAT_INFO_DECODE_LOOKUP){const f=c[0];if(f===r||f===i)return new Wt(c[1]);let h=Wt.numBitsDiffering(r,f);h<o&&(a=c[1],o=h),r!==i&&(h=Wt.numBitsDiffering(i,f),h<o&&(a=c[1],o=h))}return o<=3?new Wt(a):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(r){if(!(r instanceof Wt))return!1;const i=r;return this.errorCorrectionLevel===i.errorCorrectionLevel&&this.dataMask===i.dataMask}}Wt.FORMAT_INFO_MASK_QR=21522,Wt.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class U{constructor(r,...i){this.ecCodewordsPerBlock=r,this.ecBlocks=i}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let r=0;const i=this.ecBlocks;for(const o of i)r+=o.getCount();return r}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class v{constructor(r,i){this.count=r,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ue{constructor(r,i,...o){this.versionNumber=r,this.alignmentPatternCenters=i,this.ecBlocks=o;let a=0;const c=o[0].getECCodewordsPerBlock(),f=o[0].getECBlocks();for(const h of f)a+=h.getCount()*(h.getDataCodewords()+c);this.totalCodewords=a}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(r){return this.ecBlocks[r.getValue()]}static getProvisionalVersionForDimension(r){if(r%4!==1)throw new F;try{return this.getVersionForNumber((r-17)/4)}catch{throw new F}}static getVersionForNumber(r){if(r<1||r>40)throw new C;return ue.VERSIONS[r-1]}static decodeVersionInformation(r){let i=Number.MAX_SAFE_INTEGER,o=0;for(let a=0;a<ue.VERSION_DECODE_INFO.length;a++){const c=ue.VERSION_DECODE_INFO[a];if(c===r)return ue.getVersionForNumber(a+7);const f=Wt.numBitsDiffering(r,c);f<i&&(o=a+7,i=f)}return i<=3?ue.getVersionForNumber(o):null}buildFunctionPattern(){const r=this.getDimensionForVersion(),i=new it(r);i.setRegion(0,0,9,9),i.setRegion(r-8,0,8,9),i.setRegion(0,r-8,9,8);const o=this.alignmentPatternCenters.length;for(let a=0;a<o;a++){const c=this.alignmentPatternCenters[a]-2;for(let f=0;f<o;f++)a===0&&(f===0||f===o-1)||a===o-1&&f===0||i.setRegion(this.alignmentPatternCenters[f]-2,c,5,5)}return i.setRegion(6,9,1,r-17),i.setRegion(9,6,r-17,1),this.versionNumber>6&&(i.setRegion(r-11,0,3,6),i.setRegion(0,r-11,6,3)),i}toString(){return""+this.versionNumber}}ue.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),ue.VERSIONS=[new ue(1,new Int32Array(0),new U(7,new v(1,19)),new U(10,new v(1,16)),new U(13,new v(1,13)),new U(17,new v(1,9))),new ue(2,Int32Array.from([6,18]),new U(10,new v(1,34)),new U(16,new v(1,28)),new U(22,new v(1,22)),new U(28,new v(1,16))),new ue(3,Int32Array.from([6,22]),new U(15,new v(1,55)),new U(26,new v(1,44)),new U(18,new v(2,17)),new U(22,new v(2,13))),new ue(4,Int32Array.from([6,26]),new U(20,new v(1,80)),new U(18,new v(2,32)),new U(26,new v(2,24)),new U(16,new v(4,9))),new ue(5,Int32Array.from([6,30]),new U(26,new v(1,108)),new U(24,new v(2,43)),new U(18,new v(2,15),new v(2,16)),new U(22,new v(2,11),new v(2,12))),new ue(6,Int32Array.from([6,34]),new U(18,new v(2,68)),new U(16,new v(4,27)),new U(24,new v(4,19)),new U(28,new v(4,15))),new ue(7,Int32Array.from([6,22,38]),new U(20,new v(2,78)),new U(18,new v(4,31)),new U(18,new v(2,14),new v(4,15)),new U(26,new v(4,13),new v(1,14))),new ue(8,Int32Array.from([6,24,42]),new U(24,new v(2,97)),new U(22,new v(2,38),new v(2,39)),new U(22,new v(4,18),new v(2,19)),new U(26,new v(4,14),new v(2,15))),new ue(9,Int32Array.from([6,26,46]),new U(30,new v(2,116)),new U(22,new v(3,36),new v(2,37)),new U(20,new v(4,16),new v(4,17)),new U(24,new v(4,12),new v(4,13))),new ue(10,Int32Array.from([6,28,50]),new U(18,new v(2,68),new v(2,69)),new U(26,new v(4,43),new v(1,44)),new U(24,new v(6,19),new v(2,20)),new U(28,new v(6,15),new v(2,16))),new ue(11,Int32Array.from([6,30,54]),new U(20,new v(4,81)),new U(30,new v(1,50),new v(4,51)),new U(28,new v(4,22),new v(4,23)),new U(24,new v(3,12),new v(8,13))),new ue(12,Int32Array.from([6,32,58]),new U(24,new v(2,92),new v(2,93)),new U(22,new v(6,36),new v(2,37)),new U(26,new v(4,20),new v(6,21)),new U(28,new v(7,14),new v(4,15))),new ue(13,Int32Array.from([6,34,62]),new U(26,new v(4,107)),new U(22,new v(8,37),new v(1,38)),new U(24,new v(8,20),new v(4,21)),new U(22,new v(12,11),new v(4,12))),new ue(14,Int32Array.from([6,26,46,66]),new U(30,new v(3,115),new v(1,116)),new U(24,new v(4,40),new v(5,41)),new U(20,new v(11,16),new v(5,17)),new U(24,new v(11,12),new v(5,13))),new ue(15,Int32Array.from([6,26,48,70]),new U(22,new v(5,87),new v(1,88)),new U(24,new v(5,41),new v(5,42)),new U(30,new v(5,24),new v(7,25)),new U(24,new v(11,12),new v(7,13))),new ue(16,Int32Array.from([6,26,50,74]),new U(24,new v(5,98),new v(1,99)),new U(28,new v(7,45),new v(3,46)),new U(24,new v(15,19),new v(2,20)),new U(30,new v(3,15),new v(13,16))),new ue(17,Int32Array.from([6,30,54,78]),new U(28,new v(1,107),new v(5,108)),new U(28,new v(10,46),new v(1,47)),new U(28,new v(1,22),new v(15,23)),new U(28,new v(2,14),new v(17,15))),new ue(18,Int32Array.from([6,30,56,82]),new U(30,new v(5,120),new v(1,121)),new U(26,new v(9,43),new v(4,44)),new U(28,new v(17,22),new v(1,23)),new U(28,new v(2,14),new v(19,15))),new ue(19,Int32Array.from([6,30,58,86]),new U(28,new v(3,113),new v(4,114)),new U(26,new v(3,44),new v(11,45)),new U(26,new v(17,21),new v(4,22)),new U(26,new v(9,13),new v(16,14))),new ue(20,Int32Array.from([6,34,62,90]),new U(28,new v(3,107),new v(5,108)),new U(26,new v(3,41),new v(13,42)),new U(30,new v(15,24),new v(5,25)),new U(28,new v(15,15),new v(10,16))),new ue(21,Int32Array.from([6,28,50,72,94]),new U(28,new v(4,116),new v(4,117)),new U(26,new v(17,42)),new U(28,new v(17,22),new v(6,23)),new U(30,new v(19,16),new v(6,17))),new ue(22,Int32Array.from([6,26,50,74,98]),new U(28,new v(2,111),new v(7,112)),new U(28,new v(17,46)),new U(30,new v(7,24),new v(16,25)),new U(24,new v(34,13))),new ue(23,Int32Array.from([6,30,54,78,102]),new U(30,new v(4,121),new v(5,122)),new U(28,new v(4,47),new v(14,48)),new U(30,new v(11,24),new v(14,25)),new U(30,new v(16,15),new v(14,16))),new ue(24,Int32Array.from([6,28,54,80,106]),new U(30,new v(6,117),new v(4,118)),new U(28,new v(6,45),new v(14,46)),new U(30,new v(11,24),new v(16,25)),new U(30,new v(30,16),new v(2,17))),new ue(25,Int32Array.from([6,32,58,84,110]),new U(26,new v(8,106),new v(4,107)),new U(28,new v(8,47),new v(13,48)),new U(30,new v(7,24),new v(22,25)),new U(30,new v(22,15),new v(13,16))),new ue(26,Int32Array.from([6,30,58,86,114]),new U(28,new v(10,114),new v(2,115)),new U(28,new v(19,46),new v(4,47)),new U(28,new v(28,22),new v(6,23)),new U(30,new v(33,16),new v(4,17))),new ue(27,Int32Array.from([6,34,62,90,118]),new U(30,new v(8,122),new v(4,123)),new U(28,new v(22,45),new v(3,46)),new U(30,new v(8,23),new v(26,24)),new U(30,new v(12,15),new v(28,16))),new ue(28,Int32Array.from([6,26,50,74,98,122]),new U(30,new v(3,117),new v(10,118)),new U(28,new v(3,45),new v(23,46)),new U(30,new v(4,24),new v(31,25)),new U(30,new v(11,15),new v(31,16))),new ue(29,Int32Array.from([6,30,54,78,102,126]),new U(30,new v(7,116),new v(7,117)),new U(28,new v(21,45),new v(7,46)),new U(30,new v(1,23),new v(37,24)),new U(30,new v(19,15),new v(26,16))),new ue(30,Int32Array.from([6,26,52,78,104,130]),new U(30,new v(5,115),new v(10,116)),new U(28,new v(19,47),new v(10,48)),new U(30,new v(15,24),new v(25,25)),new U(30,new v(23,15),new v(25,16))),new ue(31,Int32Array.from([6,30,56,82,108,134]),new U(30,new v(13,115),new v(3,116)),new U(28,new v(2,46),new v(29,47)),new U(30,new v(42,24),new v(1,25)),new U(30,new v(23,15),new v(28,16))),new ue(32,Int32Array.from([6,34,60,86,112,138]),new U(30,new v(17,115)),new U(28,new v(10,46),new v(23,47)),new U(30,new v(10,24),new v(35,25)),new U(30,new v(19,15),new v(35,16))),new ue(33,Int32Array.from([6,30,58,86,114,142]),new U(30,new v(17,115),new v(1,116)),new U(28,new v(14,46),new v(21,47)),new U(30,new v(29,24),new v(19,25)),new U(30,new v(11,15),new v(46,16))),new ue(34,Int32Array.from([6,34,62,90,118,146]),new U(30,new v(13,115),new v(6,116)),new U(28,new v(14,46),new v(23,47)),new U(30,new v(44,24),new v(7,25)),new U(30,new v(59,16),new v(1,17))),new ue(35,Int32Array.from([6,30,54,78,102,126,150]),new U(30,new v(12,121),new v(7,122)),new U(28,new v(12,47),new v(26,48)),new U(30,new v(39,24),new v(14,25)),new U(30,new v(22,15),new v(41,16))),new ue(36,Int32Array.from([6,24,50,76,102,128,154]),new U(30,new v(6,121),new v(14,122)),new U(28,new v(6,47),new v(34,48)),new U(30,new v(46,24),new v(10,25)),new U(30,new v(2,15),new v(64,16))),new ue(37,Int32Array.from([6,28,54,80,106,132,158]),new U(30,new v(17,122),new v(4,123)),new U(28,new v(29,46),new v(14,47)),new U(30,new v(49,24),new v(10,25)),new U(30,new v(24,15),new v(46,16))),new ue(38,Int32Array.from([6,32,58,84,110,136,162]),new U(30,new v(4,122),new v(18,123)),new U(28,new v(13,46),new v(32,47)),new U(30,new v(48,24),new v(14,25)),new U(30,new v(42,15),new v(32,16))),new ue(39,Int32Array.from([6,26,54,82,110,138,166]),new U(30,new v(20,117),new v(4,118)),new U(28,new v(40,47),new v(7,48)),new U(30,new v(43,24),new v(22,25)),new U(30,new v(10,15),new v(67,16))),new ue(40,Int32Array.from([6,30,58,86,114,142,170]),new U(30,new v(19,118),new v(6,119)),new U(28,new v(18,47),new v(31,48)),new U(30,new v(34,24),new v(34,25)),new U(30,new v(20,15),new v(61,16)))];var It;(function(_){_[_.DATA_MASK_000=0]="DATA_MASK_000",_[_.DATA_MASK_001=1]="DATA_MASK_001",_[_.DATA_MASK_010=2]="DATA_MASK_010",_[_.DATA_MASK_011=3]="DATA_MASK_011",_[_.DATA_MASK_100=4]="DATA_MASK_100",_[_.DATA_MASK_101=5]="DATA_MASK_101",_[_.DATA_MASK_110=6]="DATA_MASK_110",_[_.DATA_MASK_111=7]="DATA_MASK_111"})(It||(It={}));class Tn{constructor(r,i){this.value=r,this.isMasked=i}unmaskBitMatrix(r,i){for(let o=0;o<i;o++)for(let a=0;a<i;a++)this.isMasked(o,a)&&r.flip(a,o)}}Tn.values=new Map([[It.DATA_MASK_000,new Tn(It.DATA_MASK_000,(_,r)=>(_+r&1)===0)],[It.DATA_MASK_001,new Tn(It.DATA_MASK_001,(_,r)=>(_&1)===0)],[It.DATA_MASK_010,new Tn(It.DATA_MASK_010,(_,r)=>r%3===0)],[It.DATA_MASK_011,new Tn(It.DATA_MASK_011,(_,r)=>(_+r)%3===0)],[It.DATA_MASK_100,new Tn(It.DATA_MASK_100,(_,r)=>(Math.floor(_/2)+Math.floor(r/3)&1)===0)],[It.DATA_MASK_101,new Tn(It.DATA_MASK_101,(_,r)=>_*r%6===0)],[It.DATA_MASK_110,new Tn(It.DATA_MASK_110,(_,r)=>_*r%6<3)],[It.DATA_MASK_111,new Tn(It.DATA_MASK_111,(_,r)=>(_+r+_*r%3&1)===0)]]);class ex{constructor(r){const i=r.getHeight();if(i<21||(i&3)!==1)throw new F;this.bitMatrix=r}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let r=0;for(let c=0;c<6;c++)r=this.copyBit(c,8,r);r=this.copyBit(7,8,r),r=this.copyBit(8,8,r),r=this.copyBit(8,7,r);for(let c=5;c>=0;c--)r=this.copyBit(8,c,r);const i=this.bitMatrix.getHeight();let o=0;const a=i-7;for(let c=i-1;c>=a;c--)o=this.copyBit(8,c,o);for(let c=i-8;c<i;c++)o=this.copyBit(c,8,o);if(this.parsedFormatInfo=Wt.decodeFormatInformation(r,o),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new F}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const r=this.bitMatrix.getHeight(),i=Math.floor((r-17)/4);if(i<=6)return ue.getVersionForNumber(i);let o=0;const a=r-11;for(let f=5;f>=0;f--)for(let h=r-9;h>=a;h--)o=this.copyBit(h,f,o);let c=ue.decodeVersionInformation(o);if(c!==null&&c.getDimensionForVersion()===r)return this.parsedVersion=c,c;o=0;for(let f=5;f>=0;f--)for(let h=r-9;h>=a;h--)o=this.copyBit(f,h,o);if(c=ue.decodeVersionInformation(o),c!==null&&c.getDimensionForVersion()===r)return this.parsedVersion=c,c;throw new F}copyBit(r,i,o){return(this.isMirror?this.bitMatrix.get(i,r):this.bitMatrix.get(r,i))?o<<1|1:o<<1}readCodewords(){const r=this.readFormatInformation(),i=this.readVersion(),o=Tn.values.get(r.getDataMask()),a=this.bitMatrix.getHeight();o.unmaskBitMatrix(this.bitMatrix,a);const c=i.buildFunctionPattern();let f=!0;const h=new Uint8Array(i.getTotalCodewords());let g=0,m=0,y=0;for(let E=a-1;E>0;E-=2){E===6&&E--;for(let S=0;S<a;S++){const T=f?a-1-S:S;for(let O=0;O<2;O++)c.get(E-O,T)||(y++,m<<=1,this.bitMatrix.get(E-O,T)&&(m|=1),y===8&&(h[g++]=m,y=0,m=0))}f=!f}if(g!==i.getTotalCodewords())throw new F;return h}remask(){if(this.parsedFormatInfo===null)return;const r=Tn.values[this.parsedFormatInfo.getDataMask()],i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i)}setMirror(r){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=r}mirror(){const r=this.bitMatrix;for(let i=0,o=r.getWidth();i<o;i++)for(let a=i+1,c=r.getHeight();a<c;a++)r.get(i,a)!==r.get(a,i)&&(r.flip(a,i),r.flip(i,a))}}class Cc{constructor(r,i){this.numDataCodewords=r,this.codewords=i}static getDataBlocks(r,i,o){if(r.length!==i.getTotalCodewords())throw new C;const a=i.getECBlocksForLevel(o);let c=0;const f=a.getECBlocks();for(const O of f)c+=O.getCount();const h=new Array(c);let g=0;for(const O of f)for(let M=0;M<O.getCount();M++){const L=O.getDataCodewords(),H=a.getECCodewordsPerBlock()+L;h[g++]=new Cc(L,new Uint8Array(H))}const m=h[0].codewords.length;let y=h.length-1;for(;y>=0&&h[y].codewords.length!==m;)y--;y++;const E=m-a.getECCodewordsPerBlock();let S=0;for(let O=0;O<E;O++)for(let M=0;M<g;M++)h[M].codewords[O]=r[S++];for(let O=y;O<g;O++)h[O].codewords[E]=r[S++];const T=h[0].codewords.length;for(let O=E;O<T;O++)for(let M=0;M<g;M++){const L=M<y?O:O+1;h[M].codewords[L]=r[S++]}return h}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Nn;(function(_){_[_.TERMINATOR=0]="TERMINATOR",_[_.NUMERIC=1]="NUMERIC",_[_.ALPHANUMERIC=2]="ALPHANUMERIC",_[_.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",_[_.BYTE=4]="BYTE",_[_.ECI=5]="ECI",_[_.KANJI=6]="KANJI",_[_.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",_[_.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",_[_.HANZI=9]="HANZI"})(Nn||(Nn={}));class he{constructor(r,i,o,a){this.value=r,this.stringValue=i,this.characterCountBitsForVersions=o,this.bits=a,he.FOR_BITS.set(a,this),he.FOR_VALUE.set(r,this)}static forBits(r){const i=he.FOR_BITS.get(r);if(i===void 0)throw new C;return i}getCharacterCountBits(r){const i=r.getVersionNumber();let o;return i<=9?o=0:i<=26?o=1:o=2,this.characterCountBitsForVersions[o]}getValue(){return this.value}getBits(){return this.bits}equals(r){if(!(r instanceof he))return!1;const i=r;return this.value===i.value}toString(){return this.stringValue}}he.FOR_BITS=new Map,he.FOR_VALUE=new Map,he.TERMINATOR=new he(Nn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),he.NUMERIC=new he(Nn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),he.ALPHANUMERIC=new he(Nn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),he.STRUCTURED_APPEND=new he(Nn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),he.BYTE=new he(Nn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),he.ECI=new he(Nn.ECI,"ECI",Int32Array.from([0,0,0]),7),he.KANJI=new he(Nn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),he.FNC1_FIRST_POSITION=new he(Nn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),he.FNC1_SECOND_POSITION=new he(Nn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),he.HANZI=new he(Nn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class ot{static decode(r,i,o,a){const c=new Ec(r);let f=new me;const h=new Array;let g=-1,m=-1;try{let y=null,E=!1,S;do{if(c.available()<4)S=he.TERMINATOR;else{const T=c.readBits(4);S=he.forBits(T)}switch(S){case he.TERMINATOR:break;case he.FNC1_FIRST_POSITION:case he.FNC1_SECOND_POSITION:E=!0;break;case he.STRUCTURED_APPEND:if(c.available()<16)throw new F;g=c.readBits(8),m=c.readBits(8);break;case he.ECI:const T=ot.parseECIValue(c);if(y=z.getCharacterSetECIByValue(T),y===null)throw new F;break;case he.HANZI:const O=c.readBits(4),M=c.readBits(S.getCharacterCountBits(i));O===ot.GB2312_SUBSET&&ot.decodeHanziSegment(c,f,M);break;default:const L=c.readBits(S.getCharacterCountBits(i));switch(S){case he.NUMERIC:ot.decodeNumericSegment(c,f,L);break;case he.ALPHANUMERIC:ot.decodeAlphanumericSegment(c,f,L,E);break;case he.BYTE:ot.decodeByteSegment(c,f,L,y,h,a);break;case he.KANJI:ot.decodeKanjiSegment(c,f,L);break;default:throw new F}break}}while(S!==he.TERMINATOR)}catch{throw new F}return new Fs(r,f.toString(),h.length===0?null:h,o===null?null:o.toString(),g,m)}static decodeHanziSegment(r,i,o){if(o*13>r.available())throw new F;const a=new Uint8Array(2*o);let c=0;for(;o>0;){const f=r.readBits(13);let h=f/96<<8&4294967295|f%96;h<959?h+=41377:h+=42657,a[c]=h>>8&255,a[c+1]=h&255,c+=2,o--}try{i.append(Se.decode(a,ce.GB2312))}catch(f){throw new F(f)}}static decodeKanjiSegment(r,i,o){if(o*13>r.available())throw new F;const a=new Uint8Array(2*o);let c=0;for(;o>0;){const f=r.readBits(13);let h=f/192<<8&4294967295|f%192;h<7936?h+=33088:h+=49472,a[c]=h>>8,a[c+1]=h,c+=2,o--}try{i.append(Se.decode(a,ce.SHIFT_JIS))}catch(f){throw new F(f)}}static decodeByteSegment(r,i,o,a,c,f){if(8*o>r.available())throw new F;const h=new Uint8Array(o);for(let m=0;m<o;m++)h[m]=r.readBits(8);let g;a===null?g=ce.guessEncoding(h,f):g=a.getName();try{i.append(Se.decode(h,g))}catch(m){throw new F(m)}c.push(h)}static toAlphaNumericChar(r){if(r>=ot.ALPHANUMERIC_CHARS.length)throw new F;return ot.ALPHANUMERIC_CHARS[r]}static decodeAlphanumericSegment(r,i,o,a){const c=i.length();for(;o>1;){if(r.available()<11)throw new F;const f=r.readBits(11);i.append(ot.toAlphaNumericChar(Math.floor(f/45))),i.append(ot.toAlphaNumericChar(f%45)),o-=2}if(o===1){if(r.available()<6)throw new F;i.append(ot.toAlphaNumericChar(r.readBits(6)))}if(a)for(let f=c;f<i.length();f++)i.charAt(f)==="%"&&(f<i.length()-1&&i.charAt(f+1)==="%"?i.deleteCharAt(f+1):i.setCharAt(f,""))}static decodeNumericSegment(r,i,o){for(;o>=3;){if(r.available()<10)throw new F;const a=r.readBits(10);if(a>=1e3)throw new F;i.append(ot.toAlphaNumericChar(Math.floor(a/100))),i.append(ot.toAlphaNumericChar(Math.floor(a/10)%10)),i.append(ot.toAlphaNumericChar(a%10)),o-=3}if(o===2){if(r.available()<7)throw new F;const a=r.readBits(7);if(a>=100)throw new F;i.append(ot.toAlphaNumericChar(Math.floor(a/10))),i.append(ot.toAlphaNumericChar(a%10))}else if(o===1){if(r.available()<4)throw new F;const a=r.readBits(4);if(a>=10)throw new F;i.append(ot.toAlphaNumericChar(a))}}static parseECIValue(r){const i=r.readBits(8);if(!(i&128))return i&127;if((i&192)===128){const o=r.readBits(8);return(i&63)<<8&4294967295|o}if((i&224)===192){const o=r.readBits(16);return(i&31)<<16&4294967295|o}throw new F}}ot.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",ot.GB2312_SUBSET=1;class p1{constructor(r){this.mirrored=r}isMirrored(){return this.mirrored}applyMirroredCorrection(r){if(!this.mirrored||r===null||r.length<3)return;const i=r[0];r[0]=r[2],r[2]=i}}class tx{constructor(){this.rsDecoder=new Vs(Me.QR_CODE_FIELD_256)}decodeBooleanArray(r,i){return this.decodeBitMatrix(it.parseFromBooleanArray(r),i)}decodeBitMatrix(r,i){const o=new ex(r);let a=null;try{return this.decodeBitMatrixParser(o,i)}catch(c){a=c}try{o.remask(),o.setMirror(!0),o.readVersion(),o.readFormatInformation(),o.mirror();const c=this.decodeBitMatrixParser(o,i);return c.setOther(new p1(!0)),c}catch(c){throw a!==null?a:c}}decodeBitMatrixParser(r,i){const o=r.readVersion(),a=r.readFormatInformation().getErrorCorrectionLevel(),c=r.readCodewords(),f=Cc.getDataBlocks(c,o,a);let h=0;for(const y of f)h+=y.getNumDataCodewords();const g=new Uint8Array(h);let m=0;for(const y of f){const E=y.getCodewords(),S=y.getNumDataCodewords();this.correctErrors(E,S);for(let T=0;T<S;T++)g[m++]=E[T]}return ot.decode(g,o,a,i)}correctErrors(r,i){const o=new Int32Array(r);try{this.rsDecoder.decode(o,r.length-i)}catch{throw new D}for(let a=0;a<i;a++)r[a]=o[a]}}class Ac extends le{constructor(r,i,o){super(r,i),this.estimatedModuleSize=o}aboutEquals(r,i,o){if(Math.abs(i-this.getY())<=r&&Math.abs(o-this.getX())<=r){const a=Math.abs(r-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1}combineEstimate(r,i,o){const a=(this.getX()+i)/2,c=(this.getY()+r)/2,f=(this.estimatedModuleSize+o)/2;return new Ac(a,c,f)}}class ml{constructor(r,i,o,a,c,f,h){this.image=r,this.startX=i,this.startY=o,this.width=a,this.height=c,this.moduleSize=f,this.resultPointCallback=h,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const r=this.startX,i=this.height,o=this.width,a=r+o,c=this.startY+i/2,f=new Int32Array(3),h=this.image;for(let g=0;g<i;g++){const m=c+(g&1?-Math.floor((g+1)/2):Math.floor((g+1)/2));f[0]=0,f[1]=0,f[2]=0;let y=r;for(;y<a&&!h.get(y,m);)y++;let E=0;for(;y<a;){if(h.get(y,m))if(E===1)f[1]++;else if(E===2){if(this.foundPatternCross(f)){const S=this.handlePossibleCenter(f,m,y);if(S!==null)return S}f[0]=f[2],f[1]=1,f[2]=0,E=1}else f[++E]++;else E===1&&E++,f[E]++;y++}if(this.foundPatternCross(f)){const S=this.handlePossibleCenter(f,m,a);if(S!==null)return S}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new W}static centerFromEnd(r,i){return i-r[2]-r[1]/2}foundPatternCross(r){const i=this.moduleSize,o=i/2;for(let a=0;a<3;a++)if(Math.abs(i-r[a])>=o)return!1;return!0}crossCheckVertical(r,i,o,a){const c=this.image,f=c.getHeight(),h=this.crossCheckStateCount;h[0]=0,h[1]=0,h[2]=0;let g=r;for(;g>=0&&c.get(i,g)&&h[1]<=o;)h[1]++,g--;if(g<0||h[1]>o)return NaN;for(;g>=0&&!c.get(i,g)&&h[0]<=o;)h[0]++,g--;if(h[0]>o)return NaN;for(g=r+1;g<f&&c.get(i,g)&&h[1]<=o;)h[1]++,g++;if(g===f||h[1]>o)return NaN;for(;g<f&&!c.get(i,g)&&h[2]<=o;)h[2]++,g++;if(h[2]>o)return NaN;const m=h[0]+h[1]+h[2];return 5*Math.abs(m-a)>=2*a?NaN:this.foundPatternCross(h)?ml.centerFromEnd(h,g):NaN}handlePossibleCenter(r,i,o){const a=r[0]+r[1]+r[2],c=ml.centerFromEnd(r,o),f=this.crossCheckVertical(i,c,2*r[1],a);if(!isNaN(f)){const h=(r[0]+r[1]+r[2])/3;for(const m of this.possibleCenters)if(m.aboutEquals(h,f,c))return m.combineEstimate(f,c,h);const g=new Ac(c,f,h);this.possibleCenters.push(g),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(g)}return null}}class Sc extends le{constructor(r,i,o,a){super(r,i),this.estimatedModuleSize=o,this.count=a,a===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(r,i,o){if(Math.abs(i-this.getY())<=r&&Math.abs(o-this.getX())<=r){const a=Math.abs(r-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1}combineEstimate(r,i,o){const a=this.count+1,c=(this.count*this.getX()+i)/a,f=(this.count*this.getY()+r)/a,h=(this.count*this.estimatedModuleSize+o)/a;return new Sc(c,f,h,a)}}class nx{constructor(r){this.bottomLeft=r[0],this.topLeft=r[1],this.topRight=r[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Tt{constructor(r,i){this.image=r,this.resultPointCallback=i,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=i}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(r){const i=r!=null&&r.get(G.TRY_HARDER)!==void 0,o=r!=null&&r.get(G.PURE_BARCODE)!==void 0,a=this.image,c=a.getHeight(),f=a.getWidth();let h=Math.floor(3*c/(4*Tt.MAX_MODULES));(h<Tt.MIN_SKIP||i)&&(h=Tt.MIN_SKIP);let g=!1;const m=new Int32Array(5);for(let E=h-1;E<c&&!g;E+=h){m[0]=0,m[1]=0,m[2]=0,m[3]=0,m[4]=0;let S=0;for(let T=0;T<f;T++)if(a.get(T,E))(S&1)===1&&S++,m[S]++;else if(S&1)m[S]++;else if(S===4)if(Tt.foundPatternCross(m)){if(this.handlePossibleCenter(m,E,T,o)===!0)if(h=2,this.hasSkipped===!0)g=this.haveMultiplyConfirmedCenters();else{const M=this.findRowSkip();M>m[2]&&(E+=M-m[2]-h,T=f-1)}else{m[0]=m[2],m[1]=m[3],m[2]=m[4],m[3]=1,m[4]=0,S=3;continue}S=0,m[0]=0,m[1]=0,m[2]=0,m[3]=0,m[4]=0}else m[0]=m[2],m[1]=m[3],m[2]=m[4],m[3]=1,m[4]=0,S=3;else m[++S]++;Tt.foundPatternCross(m)&&this.handlePossibleCenter(m,E,f,o)===!0&&(h=m[0],this.hasSkipped&&(g=this.haveMultiplyConfirmedCenters()))}const y=this.selectBestPatterns();return le.orderBestPatterns(y),new nx(y)}static centerFromEnd(r,i){return i-r[4]-r[3]-r[2]/2}static foundPatternCross(r){let i=0;for(let c=0;c<5;c++){const f=r[c];if(f===0)return!1;i+=f}if(i<7)return!1;const o=i/7,a=o/2;return Math.abs(o-r[0])<a&&Math.abs(o-r[1])<a&&Math.abs(3*o-r[2])<3*a&&Math.abs(o-r[3])<a&&Math.abs(o-r[4])<a}getCrossCheckStateCount(){const r=this.crossCheckStateCount;return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r}crossCheckDiagonal(r,i,o,a){const c=this.getCrossCheckStateCount();let f=0;const h=this.image;for(;r>=f&&i>=f&&h.get(i-f,r-f);)c[2]++,f++;if(r<f||i<f)return!1;for(;r>=f&&i>=f&&!h.get(i-f,r-f)&&c[1]<=o;)c[1]++,f++;if(r<f||i<f||c[1]>o)return!1;for(;r>=f&&i>=f&&h.get(i-f,r-f)&&c[0]<=o;)c[0]++,f++;if(c[0]>o)return!1;const g=h.getHeight(),m=h.getWidth();for(f=1;r+f<g&&i+f<m&&h.get(i+f,r+f);)c[2]++,f++;if(r+f>=g||i+f>=m)return!1;for(;r+f<g&&i+f<m&&!h.get(i+f,r+f)&&c[3]<o;)c[3]++,f++;if(r+f>=g||i+f>=m||c[3]>=o)return!1;for(;r+f<g&&i+f<m&&h.get(i+f,r+f)&&c[4]<o;)c[4]++,f++;if(c[4]>=o)return!1;const y=c[0]+c[1]+c[2]+c[3]+c[4];return Math.abs(y-a)<2*a&&Tt.foundPatternCross(c)}crossCheckVertical(r,i,o,a){const c=this.image,f=c.getHeight(),h=this.getCrossCheckStateCount();let g=r;for(;g>=0&&c.get(i,g);)h[2]++,g--;if(g<0)return NaN;for(;g>=0&&!c.get(i,g)&&h[1]<=o;)h[1]++,g--;if(g<0||h[1]>o)return NaN;for(;g>=0&&c.get(i,g)&&h[0]<=o;)h[0]++,g--;if(h[0]>o)return NaN;for(g=r+1;g<f&&c.get(i,g);)h[2]++,g++;if(g===f)return NaN;for(;g<f&&!c.get(i,g)&&h[3]<o;)h[3]++,g++;if(g===f||h[3]>=o)return NaN;for(;g<f&&c.get(i,g)&&h[4]<o;)h[4]++,g++;if(h[4]>=o)return NaN;const m=h[0]+h[1]+h[2]+h[3]+h[4];return 5*Math.abs(m-a)>=2*a?NaN:Tt.foundPatternCross(h)?Tt.centerFromEnd(h,g):NaN}crossCheckHorizontal(r,i,o,a){const c=this.image,f=c.getWidth(),h=this.getCrossCheckStateCount();let g=r;for(;g>=0&&c.get(g,i);)h[2]++,g--;if(g<0)return NaN;for(;g>=0&&!c.get(g,i)&&h[1]<=o;)h[1]++,g--;if(g<0||h[1]>o)return NaN;for(;g>=0&&c.get(g,i)&&h[0]<=o;)h[0]++,g--;if(h[0]>o)return NaN;for(g=r+1;g<f&&c.get(g,i);)h[2]++,g++;if(g===f)return NaN;for(;g<f&&!c.get(g,i)&&h[3]<o;)h[3]++,g++;if(g===f||h[3]>=o)return NaN;for(;g<f&&c.get(g,i)&&h[4]<o;)h[4]++,g++;if(h[4]>=o)return NaN;const m=h[0]+h[1]+h[2]+h[3]+h[4];return 5*Math.abs(m-a)>=a?NaN:Tt.foundPatternCross(h)?Tt.centerFromEnd(h,g):NaN}handlePossibleCenter(r,i,o,a){const c=r[0]+r[1]+r[2]+r[3]+r[4];let f=Tt.centerFromEnd(r,o),h=this.crossCheckVertical(i,Math.floor(f),r[2],c);if(!isNaN(h)&&(f=this.crossCheckHorizontal(Math.floor(f),Math.floor(h),r[2],c),!isNaN(f)&&(!a||this.crossCheckDiagonal(Math.floor(h),Math.floor(f),r[2],c)))){const g=c/7;let m=!1;const y=this.possibleCenters;for(let E=0,S=y.length;E<S;E++){const T=y[E];if(T.aboutEquals(g,h,f)){y[E]=T.combineEstimate(h,f,g),m=!0;break}}if(!m){const E=new Sc(f,h,g);y.push(E),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(E)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let i=null;for(const o of this.possibleCenters)if(o.getCount()>=Tt.CENTER_QUORUM)if(i==null)i=o;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-o.getX())-Math.abs(i.getY()-o.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let r=0,i=0;const o=this.possibleCenters.length;for(const f of this.possibleCenters)f.getCount()>=Tt.CENTER_QUORUM&&(r++,i+=f.getEstimatedModuleSize());if(r<3)return!1;const a=i/o;let c=0;for(const f of this.possibleCenters)c+=Math.abs(f.getEstimatedModuleSize()-a);return c<=.05*i}selectBestPatterns(){const r=this.possibleCenters.length;if(r<3)throw new W;const i=this.possibleCenters;let o;if(r>3){let a=0,c=0;for(const g of this.possibleCenters){const m=g.getEstimatedModuleSize();a+=m,c+=m*m}o=a/r;let f=Math.sqrt(c/r-o*o);i.sort((g,m)=>{const y=Math.abs(m.getEstimatedModuleSize()-o),E=Math.abs(g.getEstimatedModuleSize()-o);return y<E?-1:y>E?1:0});const h=Math.max(.2*o,f);for(let g=0;g<i.length&&i.length>3;g++){const m=i[g];Math.abs(m.getEstimatedModuleSize()-o)>h&&(i.splice(g,1),g--)}}if(i.length>3){let a=0;for(const c of i)a+=c.getEstimatedModuleSize();o=a/i.length,i.sort((c,f)=>{if(f.getCount()===c.getCount()){const h=Math.abs(f.getEstimatedModuleSize()-o),g=Math.abs(c.getEstimatedModuleSize()-o);return h<g?1:h>g?-1:0}else return f.getCount()-c.getCount()}),i.splice(3)}return[i[0],i[1],i[2]]}}Tt.CENTER_QUORUM=2,Tt.MIN_SKIP=3,Tt.MAX_MODULES=57;class Ws{constructor(r){this.image=r}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(r){this.resultPointCallback=r==null?null:r.get(G.NEED_RESULT_POINT_CALLBACK);const o=new Tt(this.image,this.resultPointCallback).find(r);return this.processFinderPatternInfo(o)}processFinderPatternInfo(r){const i=r.getTopLeft(),o=r.getTopRight(),a=r.getBottomLeft(),c=this.calculateModuleSize(i,o,a);if(c<1)throw new W("No pattern found in proccess finder.");const f=Ws.computeDimension(i,o,a,c),h=ue.getProvisionalVersionForDimension(f),g=h.getDimensionForVersion()-7;let m=null;if(h.getAlignmentPatternCenters().length>0){const T=o.getX()-i.getX()+a.getX(),O=o.getY()-i.getY()+a.getY(),M=1-3/g,L=Math.floor(i.getX()+M*(T-i.getX())),H=Math.floor(i.getY()+M*(O-i.getY()));for(let Q=4;Q<=16;Q<<=1)try{m=this.findAlignmentInRegion(c,L,H,Q);break}catch(q){if(!(q instanceof W))throw q}}const y=Ws.createTransform(i,o,a,m,f),E=Ws.sampleGrid(this.image,y,f);let S;return m===null?S=[a,i,o]:S=[a,i,o,m],new fl(E,S)}static createTransform(r,i,o,a,c){const f=c-3.5;let h,g,m,y;return a!==null?(h=a.getX(),g=a.getY(),m=f-3,y=m):(h=i.getX()-r.getX()+o.getX(),g=i.getY()-r.getY()+o.getY(),m=f,y=f),Fn.quadrilateralToQuadrilateral(3.5,3.5,f,3.5,m,y,3.5,f,r.getX(),r.getY(),i.getX(),i.getY(),h,g,o.getX(),o.getY())}static sampleGrid(r,i,o){return Nr.getInstance().sampleGridWithTransform(r,o,o,i)}static computeDimension(r,i,o,a){const c=be.round(le.distance(r,i)/a),f=be.round(le.distance(r,o)/a);let h=Math.floor((c+f)/2)+7;switch(h&3){case 0:h++;break;case 2:h--;break;case 3:throw new W("Dimensions could be not found.")}return h}calculateModuleSize(r,i,o){return(this.calculateModuleSizeOneWay(r,i)+this.calculateModuleSizeOneWay(r,o))/2}calculateModuleSizeOneWay(r,i){const o=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(i.getX()),Math.floor(i.getY())),a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(r.getX()),Math.floor(r.getY()));return isNaN(o)?a/7:isNaN(a)?o/7:(o+a)/14}sizeOfBlackWhiteBlackRunBothWays(r,i,o,a){let c=this.sizeOfBlackWhiteBlackRun(r,i,o,a),f=1,h=r-(o-r);h<0?(f=r/(r-h),h=0):h>=this.image.getWidth()&&(f=(this.image.getWidth()-1-r)/(h-r),h=this.image.getWidth()-1);let g=Math.floor(i-(a-i)*f);return f=1,g<0?(f=i/(i-g),g=0):g>=this.image.getHeight()&&(f=(this.image.getHeight()-1-i)/(g-i),g=this.image.getHeight()-1),h=Math.floor(r+(h-r)*f),c+=this.sizeOfBlackWhiteBlackRun(r,i,h,g),c-1}sizeOfBlackWhiteBlackRun(r,i,o,a){const c=Math.abs(a-i)>Math.abs(o-r);if(c){let T=r;r=i,i=T,T=o,o=a,a=T}const f=Math.abs(o-r),h=Math.abs(a-i);let g=-f/2;const m=r<o?1:-1,y=i<a?1:-1;let E=0;const S=o+m;for(let T=r,O=i;T!==S;T+=m){const M=c?O:T,L=c?T:O;if(E===1===this.image.get(M,L)){if(E===2)return be.distance(T,O,r,i);E++}if(g+=h,g>0){if(O===a)break;O+=y,g-=f}}return E===2?be.distance(o+m,a,r,i):NaN}findAlignmentInRegion(r,i,o,a){const c=Math.floor(a*r),f=Math.max(0,i-c),h=Math.min(this.image.getWidth()-1,i+c);if(h-f<r*3)throw new W("Alignment top exceeds estimated module size.");const g=Math.max(0,o-c),m=Math.min(this.image.getHeight()-1,o+c);if(m-g<r*3)throw new W("Alignment bottom exceeds estimated module size.");return new ml(this.image,f,g,h-f,m-g,r,this.resultPointCallback).find()}}class Dr{constructor(){this.decoder=new tx}getDecoder(){return this.decoder}decode(r,i){let o,a;if(i!=null&&i.get(G.PURE_BARCODE)!==void 0){const g=Dr.extractPureBits(r.getBlackMatrix());o=this.decoder.decodeBitMatrix(g,i),a=Dr.NO_POINTS}else{const g=new Ws(r.getBlackMatrix()).detect(i);o=this.decoder.decodeBitMatrix(g.getBits(),i),a=g.getPoints()}o.getOther()instanceof p1&&o.getOther().applyMirroredCorrection(a);const c=new st(o.getText(),o.getRawBytes(),void 0,a,ae.QR_CODE,void 0),f=o.getByteSegments();f!==null&&c.putMetadata(vt.BYTE_SEGMENTS,f);const h=o.getECLevel();return h!==null&&c.putMetadata(vt.ERROR_CORRECTION_LEVEL,h),o.hasStructuredAppend()&&(c.putMetadata(vt.STRUCTURED_APPEND_SEQUENCE,o.getStructuredAppendSequenceNumber()),c.putMetadata(vt.STRUCTURED_APPEND_PARITY,o.getStructuredAppendParity())),c}reset(){}static extractPureBits(r){const i=r.getTopLeftOnBit(),o=r.getBottomRightOnBit();if(i===null||o===null)throw new W;const a=this.moduleSize(i,r);let c=i[1],f=o[1],h=i[0],g=o[0];if(h>=g||c>=f)throw new W;if(f-c!==g-h&&(g=h+(f-c),g>=r.getWidth()))throw new W;const m=Math.round((g-h+1)/a),y=Math.round((f-c+1)/a);if(m<=0||y<=0)throw new W;if(y!==m)throw new W;const E=Math.floor(a/2);c+=E,h+=E;const S=h+Math.floor((m-1)*a)-g;if(S>0){if(S>E)throw new W;h-=S}const T=c+Math.floor((y-1)*a)-f;if(T>0){if(T>E)throw new W;c-=T}const O=new it(m,y);for(let M=0;M<y;M++){const L=c+Math.floor(M*a);for(let H=0;H<m;H++)r.get(h+Math.floor(H*a),L)&&O.set(H,M)}return O}static moduleSize(r,i){const o=i.getHeight(),a=i.getWidth();let c=r[0],f=r[1],h=!0,g=0;for(;c<a&&f<o;){if(h!==i.get(c,f)){if(++g===5)break;h=!h}c++,f++}if(c===a||f===o)throw new W;return(c-r[0])/7}}Dr.NO_POINTS=new Array;class pe{PDF417Common(){}static getBitCountSum(r){return be.sum(r)}static toIntArray(r){if(r==null||!r.length)return pe.EMPTY_INT_ARRAY;const i=new Int32Array(r.length);let o=0;for(const a of r)i[o++]=a;return i}static getCodeword(r){const i=N.binarySearch(pe.SYMBOL_TABLE,r&262143);return i<0?-1:(pe.CODEWORD_TABLE[i]-1)%pe.NUMBER_OF_CODEWORDS}}pe.NUMBER_OF_CODEWORDS=929,pe.MAX_CODEWORDS_IN_BARCODE=pe.NUMBER_OF_CODEWORDS-1,pe.MIN_ROWS_IN_BARCODE=3,pe.MAX_ROWS_IN_BARCODE=90,pe.MODULES_IN_CODEWORD=17,pe.MODULES_IN_STOP_PATTERN=18,pe.BARS_IN_MODULE=8,pe.EMPTY_INT_ARRAY=new Int32Array([]),pe.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),pe.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class rx{constructor(r,i){this.bits=r,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class ye{static detectMultiple(r,i,o){let a=r.getBlackMatrix(),c=ye.detect(o,a);return c.length||(a=a.clone(),a.rotate180(),c=ye.detect(o,a)),new rx(a,c)}static detect(r,i){const o=new Array;let a=0,c=0,f=!1;for(;a<i.getHeight();){const h=ye.findVertices(i,a,c);if(h[0]==null&&h[3]==null){if(!f)break;f=!1,c=0;for(const g of o)g[1]!=null&&(a=Math.trunc(Math.max(a,g[1].getY()))),g[3]!=null&&(a=Math.max(a,Math.trunc(g[3].getY())));a+=ye.ROW_STEP;continue}if(f=!0,o.push(h),!r)break;h[2]!=null?(c=Math.trunc(h[2].getX()),a=Math.trunc(h[2].getY())):(c=Math.trunc(h[4].getX()),a=Math.trunc(h[4].getY()))}return o}static findVertices(r,i,o){const a=r.getHeight(),c=r.getWidth(),f=new Array(8);return ye.copyToResult(f,ye.findRowsWithPattern(r,a,c,i,o,ye.START_PATTERN),ye.INDEXES_START_PATTERN),f[4]!=null&&(o=Math.trunc(f[4].getX()),i=Math.trunc(f[4].getY())),ye.copyToResult(f,ye.findRowsWithPattern(r,a,c,i,o,ye.STOP_PATTERN),ye.INDEXES_STOP_PATTERN),f}static copyToResult(r,i,o){for(let a=0;a<o.length;a++)r[o[a]]=i[a]}static findRowsWithPattern(r,i,o,a,c,f){const h=new Array(4);let g=!1;const m=new Int32Array(f.length);for(;a<i;a+=ye.ROW_STEP){let E=ye.findGuardPattern(r,c,a,o,!1,f,m);if(E!=null){for(;a>0;){const S=ye.findGuardPattern(r,c,--a,o,!1,f,m);if(S!=null)E=S;else{a++;break}}h[0]=new le(E[0],a),h[1]=new le(E[1],a),g=!0;break}}let y=a+1;if(g){let E=0,S=Int32Array.from([Math.trunc(h[0].getX()),Math.trunc(h[1].getX())]);for(;y<i;y++){const T=ye.findGuardPattern(r,S[0],y,o,!1,f,m);if(T!=null&&Math.abs(S[0]-T[0])<ye.MAX_PATTERN_DRIFT&&Math.abs(S[1]-T[1])<ye.MAX_PATTERN_DRIFT)S=T,E=0;else{if(E>ye.SKIPPED_ROW_COUNT_MAX)break;E++}}y-=E+1,h[2]=new le(S[0],y),h[3]=new le(S[1],y)}return y-a<ye.BARCODE_MIN_HEIGHT&&N.fill(h,null),h}static findGuardPattern(r,i,o,a,c,f,h){N.fillWithin(h,0,h.length,0);let g=i,m=0;for(;r.get(g,o)&&g>0&&m++<ye.MAX_PIXEL_DRIFT;)g--;let y=g,E=0,S=f.length;for(let T=c;y<a;y++)if(r.get(y,o)!==T)h[E]++;else{if(E===S-1){if(ye.patternMatchVariance(h,f,ye.MAX_INDIVIDUAL_VARIANCE)<ye.MAX_AVG_VARIANCE)return new Int32Array([g,y]);g+=h[0]+h[1],B.arraycopy(h,2,h,0,E-1),h[E-1]=0,h[E]=0,E--}else E++;h[E]=1,T=!T}return E===S-1&&ye.patternMatchVariance(h,f,ye.MAX_INDIVIDUAL_VARIANCE)<ye.MAX_AVG_VARIANCE?new Int32Array([g,y-1]):null}static patternMatchVariance(r,i,o){let a=r.length,c=0,f=0;for(let m=0;m<a;m++)c+=r[m],f+=i[m];if(c<f)return 1/0;let h=c/f;o*=h;let g=0;for(let m=0;m<a;m++){let y=r[m],E=i[m]*h,S=y>E?y-E:E-y;if(S>o)return 1/0;g+=S}return g/c}}ye.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),ye.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),ye.MAX_AVG_VARIANCE=.42,ye.MAX_INDIVIDUAL_VARIANCE=.8,ye.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),ye.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),ye.MAX_PIXEL_DRIFT=3,ye.MAX_PATTERN_DRIFT=5,ye.SKIPPED_ROW_COUNT_MAX=25,ye.ROW_STEP=5,ye.BARCODE_MIN_HEIGHT=10;class kt{constructor(r,i){if(i.length===0)throw new C;this.field=r;let o=i.length;if(o>1&&i[0]===0){let a=1;for(;a<o&&i[a]===0;)a++;a===o?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(o-a),B.arraycopy(i,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);if(r===1){let a=0;for(let c of this.coefficients)a=this.field.add(a,c);return a}let i=this.coefficients[0],o=this.coefficients.length;for(let a=1;a<o;a++)i=this.field.add(this.field.multiply(r,i),this.coefficients[a]);return i}add(r){if(!this.field.equals(r.field))throw new C("ModulusPolys do not have same ModulusGF field");if(this.isZero())return r;if(r.isZero())return this;let i=this.coefficients,o=r.coefficients;if(i.length>o.length){let f=i;i=o,o=f}let a=new Int32Array(o.length),c=o.length-i.length;B.arraycopy(o,0,a,0,c);for(let f=c;f<o.length;f++)a[f]=this.field.add(i[f-c],o[f]);return new kt(this.field,a)}subtract(r){if(!this.field.equals(r.field))throw new C("ModulusPolys do not have same ModulusGF field");return r.isZero()?this:this.add(r.negative())}multiply(r){return r instanceof kt?this.multiplyOther(r):this.multiplyScalar(r)}multiplyOther(r){if(!this.field.equals(r.field))throw new C("ModulusPolys do not have same ModulusGF field");if(this.isZero()||r.isZero())return new kt(this.field,new Int32Array([0]));let i=this.coefficients,o=i.length,a=r.coefficients,c=a.length,f=new Int32Array(o+c-1);for(let h=0;h<o;h++){let g=i[h];for(let m=0;m<c;m++)f[h+m]=this.field.add(f[h+m],this.field.multiply(g,a[m]))}return new kt(this.field,f)}negative(){let r=this.coefficients.length,i=new Int32Array(r);for(let o=0;o<r;o++)i[o]=this.field.subtract(0,this.coefficients[o]);return new kt(this.field,i)}multiplyScalar(r){if(r===0)return new kt(this.field,new Int32Array([0]));if(r===1)return this;let i=this.coefficients.length,o=new Int32Array(i);for(let a=0;a<i;a++)o[a]=this.field.multiply(this.coefficients[a],r);return new kt(this.field,o)}multiplyByMonomial(r,i){if(r<0)throw new C;if(i===0)return new kt(this.field,new Int32Array([0]));let o=this.coefficients.length,a=new Int32Array(o+r);for(let c=0;c<o;c++)a[c]=this.field.multiply(this.coefficients[c],i);return new kt(this.field,a)}toString(){let r=new me;for(let i=this.getDegree();i>=0;i--){let o=this.getCoefficient(i);o!==0&&(o<0?(r.append(" - "),o=-o):r.length()>0&&r.append(" + "),(i===0||o!==1)&&r.append(o),i!==0&&(i===1?r.append("x"):(r.append("x^"),r.append(i))))}return r.toString()}}class ix{add(r,i){return(r+i)%this.modulus}subtract(r,i){return(this.modulus+r-i)%this.modulus}exp(r){return this.expTable[r]}log(r){if(r===0)throw new C;return this.logTable[r]}inverse(r){if(r===0)throw new cl;return this.expTable[this.modulus-this.logTable[r]-1]}multiply(r,i){return r===0||i===0?0:this.expTable[(this.logTable[r]+this.logTable[i])%(this.modulus-1)]}getSize(){return this.modulus}equals(r){return r===this}}class vc extends ix{constructor(r,i){super(),this.modulus=r,this.expTable=new Int32Array(r),this.logTable=new Int32Array(r);let o=1;for(let a=0;a<r;a++)this.expTable[a]=o,o=o*i%r;for(let a=0;a<r-1;a++)this.logTable[this.expTable[a]]=a;this.zero=new kt(this,new Int32Array([0])),this.one=new kt(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,i){if(r<0)throw new C;if(i===0)return this.zero;let o=new Int32Array(r+1);return o[0]=i,new kt(this,o)}}vc.PDF417_GF=new vc(pe.NUMBER_OF_CODEWORDS,3);class m1{constructor(){this.field=vc.PDF417_GF}decode(r,i,o){let a=new kt(this.field,r),c=new Int32Array(i),f=!1;for(let O=i;O>0;O--){let M=a.evaluateAt(this.field.exp(O));c[i-O]=M,M!==0&&(f=!0)}if(!f)return 0;let h=this.field.getOne();if(o!=null)for(const O of o){let M=this.field.exp(r.length-1-O),L=new kt(this.field,new Int32Array([this.field.subtract(0,M),1]));h=h.multiply(L)}let g=new kt(this.field,c),m=this.runEuclideanAlgorithm(this.field.buildMonomial(i,1),g,i),y=m[0],E=m[1],S=this.findErrorLocations(y),T=this.findErrorMagnitudes(E,y,S);for(let O=0;O<S.length;O++){let M=r.length-1-this.field.log(S[O]);if(M<0)throw D.getChecksumInstance();r[M]=this.field.subtract(r[M],T[O])}return S.length}runEuclideanAlgorithm(r,i,o){if(r.getDegree()<i.getDegree()){let S=r;r=i,i=S}let a=r,c=i,f=this.field.getZero(),h=this.field.getOne();for(;c.getDegree()>=Math.round(o/2);){let S=a,T=f;if(a=c,f=h,a.isZero())throw D.getChecksumInstance();c=S;let O=this.field.getZero(),M=a.getCoefficient(a.getDegree()),L=this.field.inverse(M);for(;c.getDegree()>=a.getDegree()&&!c.isZero();){let H=c.getDegree()-a.getDegree(),Q=this.field.multiply(c.getCoefficient(c.getDegree()),L);O=O.add(this.field.buildMonomial(H,Q)),c=c.subtract(a.multiplyByMonomial(H,Q))}h=O.multiply(f).subtract(T).negative()}let g=h.getCoefficient(0);if(g===0)throw D.getChecksumInstance();let m=this.field.inverse(g),y=h.multiply(m),E=c.multiply(m);return[y,E]}findErrorLocations(r){let i=r.getDegree(),o=new Int32Array(i),a=0;for(let c=1;c<this.field.getSize()&&a<i;c++)r.evaluateAt(c)===0&&(o[a]=this.field.inverse(c),a++);if(a!==i)throw D.getChecksumInstance();return o}findErrorMagnitudes(r,i,o){let a=i.getDegree(),c=new Int32Array(a);for(let m=1;m<=a;m++)c[a-m]=this.field.multiply(m,i.getCoefficient(m));let f=new kt(this.field,c),h=o.length,g=new Int32Array(h);for(let m=0;m<h;m++){let y=this.field.inverse(o[m]),E=this.field.subtract(0,r.evaluateAt(y)),S=this.field.inverse(f.evaluateAt(y));g[m]=this.field.multiply(E,S)}return g}}class ui{constructor(r,i,o,a,c){r instanceof ui?this.constructor_2(r):this.constructor_1(r,i,o,a,c)}constructor_1(r,i,o,a,c){const f=i==null||o==null,h=a==null||c==null;if(f&&h)throw new W;f?(i=new le(0,a.getY()),o=new le(0,c.getY())):h&&(a=new le(r.getWidth()-1,i.getY()),c=new le(r.getWidth()-1,o.getY())),this.image=r,this.topLeft=i,this.bottomLeft=o,this.topRight=a,this.bottomRight=c,this.minX=Math.trunc(Math.min(i.getX(),o.getX())),this.maxX=Math.trunc(Math.max(a.getX(),c.getX())),this.minY=Math.trunc(Math.min(i.getY(),a.getY())),this.maxY=Math.trunc(Math.max(o.getY(),c.getY()))}constructor_2(r){this.image=r.image,this.topLeft=r.getTopLeft(),this.bottomLeft=r.getBottomLeft(),this.topRight=r.getTopRight(),this.bottomRight=r.getBottomRight(),this.minX=r.getMinX(),this.maxX=r.getMaxX(),this.minY=r.getMinY(),this.maxY=r.getMaxY()}static merge(r,i){return r==null?i:i==null?r:new ui(r.image,r.topLeft,r.bottomLeft,i.topRight,i.bottomRight)}addMissingRows(r,i,o){let a=this.topLeft,c=this.bottomLeft,f=this.topRight,h=this.bottomRight;if(r>0){let g=o?this.topLeft:this.topRight,m=Math.trunc(g.getY()-r);m<0&&(m=0);let y=new le(g.getX(),m);o?a=y:f=y}if(i>0){let g=o?this.bottomLeft:this.bottomRight,m=Math.trunc(g.getY()+i);m>=this.image.getHeight()&&(m=this.image.getHeight()-1);let y=new le(g.getX(),m);o?c=y:h=y}return new ui(this.image,a,c,f,h)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class sx{constructor(r,i,o,a){this.columnCount=r,this.errorCorrectionLevel=a,this.rowCountUpperPart=i,this.rowCountLowerPart=o,this.rowCount=i+o}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class zs{constructor(){this.buffer=""}static form(r,i){let o=-1;function a(f,h,g,m,y,E){if(f==="%%")return"%";if(i[++o]===void 0)return;f=m?parseInt(m.substr(1)):void 0;let S=y?parseInt(y.substr(1)):void 0,T;switch(E){case"s":T=i[o];break;case"c":T=i[o][0];break;case"f":T=parseFloat(i[o]).toFixed(f);break;case"p":T=parseFloat(i[o]).toPrecision(f);break;case"e":T=parseFloat(i[o]).toExponential(f);break;case"x":T=parseInt(i[o]).toString(S||16);break;case"d":T=parseFloat(parseInt(i[o],S||10).toPrecision(f)).toFixed(0);break}T=typeof T=="object"?JSON.stringify(T):(+T).toString(S);let O=parseInt(g),M=g&&g[0]+""=="0"?"0":" ";for(;T.length<O;)T=h!==void 0?T+M:M+T;return T}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(c,a)}format(r,...i){this.buffer+=zs.form(r,i)}toString(){return this.buffer}}class Gs{constructor(r){this.boundingBox=new ui(r),this.codewords=new Array(r.getMaxY()-r.getMinY()+1)}getCodewordNearby(r){let i=this.getCodeword(r);if(i!=null)return i;for(let o=1;o<Gs.MAX_NEARBY_DISTANCE;o++){let a=this.imageRowToCodewordIndex(r)-o;if(a>=0&&(i=this.codewords[a],i!=null)||(a=this.imageRowToCodewordIndex(r)+o,a<this.codewords.length&&(i=this.codewords[a],i!=null)))return i}return null}imageRowToCodewordIndex(r){return r-this.boundingBox.getMinY()}setCodeword(r,i){this.codewords[this.imageRowToCodewordIndex(r)]=i}getCodeword(r){return this.codewords[this.imageRowToCodewordIndex(r)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const r=new zs;let i=0;for(const o of this.codewords){if(o==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,o.getRowNumber(),o.getValue())}return r.toString()}}Gs.MAX_NEARBY_DISTANCE=5;class js{constructor(){this.values=new Map}setValue(r){r=Math.trunc(r);let i=this.values.get(r);i==null&&(i=0),i++,this.values.set(r,i)}getValue(){let r=-1,i=new Array;for(const[o,a]of this.values.entries()){const c={getKey:()=>o,getValue:()=>a};c.getValue()>r?(r=c.getValue(),i=[],i.push(c.getKey())):c.getValue()===r&&i.push(c.getKey())}return pe.toIntArray(i)}getConfidence(r){return this.values.get(r)}}class x1 extends Gs{constructor(r,i){super(r),this._isLeft=i}setRowNumbers(){for(let r of this.getCodewords())r!=null&&r.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(r){let i=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(i,r);let o=this.getBoundingBox(),a=this._isLeft?o.getTopLeft():o.getTopRight(),c=this._isLeft?o.getBottomLeft():o.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(a.getY())),h=this.imageRowToCodewordIndex(Math.trunc(c.getY())),g=-1,m=1,y=0;for(let E=f;E<h;E++){if(i[E]==null)continue;let S=i[E],T=S.getRowNumber()-g;if(T===0)y++;else if(T===1)m=Math.max(m,y),y=1,g=S.getRowNumber();else if(T<0||S.getRowNumber()>=r.getRowCount()||T>E)i[E]=null;else{let O;m>2?O=(m-2)*T:O=T;let M=O>=E;for(let L=1;L<=O&&!M;L++)M=i[E-L]!=null;M?i[E]=null:(g=S.getRowNumber(),y=1)}}}getRowHeights(){let r=this.getBarcodeMetadata();if(r==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(r);let i=new Int32Array(r.getRowCount());for(let o of this.getCodewords())if(o!=null){let a=o.getRowNumber();if(a>=i.length)continue;i[a]++}return i}adjustIncompleteIndicatorColumnRowNumbers(r){let i=this.getBoundingBox(),o=this._isLeft?i.getTopLeft():i.getTopRight(),a=this._isLeft?i.getBottomLeft():i.getBottomRight(),c=this.imageRowToCodewordIndex(Math.trunc(o.getY())),f=this.imageRowToCodewordIndex(Math.trunc(a.getY())),h=this.getCodewords(),g=-1;for(let m=c;m<f;m++){if(h[m]==null)continue;let y=h[m];y.setRowNumberAsRowIndicatorColumn();let E=y.getRowNumber()-g;E===0||(E===1?g=y.getRowNumber():y.getRowNumber()>=r.getRowCount()?h[m]=null:g=y.getRowNumber())}}getBarcodeMetadata(){let r=this.getCodewords(),i=new js,o=new js,a=new js,c=new js;for(let h of r){if(h==null)continue;h.setRowNumberAsRowIndicatorColumn();let g=h.getValue()%30,m=h.getRowNumber();switch(this._isLeft||(m+=2),m%3){case 0:o.setValue(g*3+1);break;case 1:c.setValue(g/3),a.setValue(g%3);break;case 2:i.setValue(g+1);break}}if(i.getValue().length===0||o.getValue().length===0||a.getValue().length===0||c.getValue().length===0||i.getValue()[0]<1||o.getValue()[0]+a.getValue()[0]<pe.MIN_ROWS_IN_BARCODE||o.getValue()[0]+a.getValue()[0]>pe.MAX_ROWS_IN_BARCODE)return null;let f=new sx(i.getValue()[0],o.getValue()[0],a.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(r,f),f}removeIncorrectCodewords(r,i){for(let o=0;o<r.length;o++){let a=r[o];if(r[o]==null)continue;let c=a.getValue()%30,f=a.getRowNumber();if(f>i.getRowCount()){r[o]=null;continue}switch(this._isLeft||(f+=2),f%3){case 0:c*3+1!==i.getRowCountUpperPart()&&(r[o]=null);break;case 1:(Math.trunc(c/3)!==i.getErrorCorrectionLevel()||c%3!==i.getRowCountLowerPart())&&(r[o]=null);break;case 2:c+1!==i.getColumnCount()&&(r[o]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Xs{constructor(r,i){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=r,this.barcodeColumnCount=r.getColumnCount(),this.boundingBox=i,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let r=pe.MAX_CODEWORDS_IN_BARCODE,i;do i=r,r=this.adjustRowNumbersAndGetCount();while(r>0&&r<i);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(r){r!=null&&r.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let r=this.adjustRowNumbersByRow();if(r===0)return 0;for(let i=1;i<this.barcodeColumnCount+1;i++){let o=this.detectionResultColumns[i].getCodewords();for(let a=0;a<o.length;a++)o[a]!=null&&(o[a].hasValidRowNumber()||this.adjustRowNumbers(i,a,o))}return r}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let r=this.detectionResultColumns[0].getCodewords(),i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let o=0;o<r.length;o++)if(r[o]!=null&&i[o]!=null&&r[o].getRowNumber()===i[o].getRowNumber())for(let a=1;a<=this.barcodeColumnCount;a++){let c=this.detectionResultColumns[a].getCodewords()[o];c!=null&&(c.setRowNumber(r[o].getRowNumber()),c.hasValidRowNumber()||(this.detectionResultColumns[a].getCodewords()[o]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let r=0,i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let o=0;o<i.length;o++){if(i[o]==null)continue;let a=i[o].getRowNumber(),c=0;for(let f=this.barcodeColumnCount+1;f>0&&c<this.ADJUST_ROW_NUMBER_SKIP;f--){let h=this.detectionResultColumns[f].getCodewords()[o];h!=null&&(c=Xs.adjustRowNumberIfValid(a,c,h),h.hasValidRowNumber()||r++)}}return r}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let r=0,i=this.detectionResultColumns[0].getCodewords();for(let o=0;o<i.length;o++){if(i[o]==null)continue;let a=i[o].getRowNumber(),c=0;for(let f=1;f<this.barcodeColumnCount+1&&c<this.ADJUST_ROW_NUMBER_SKIP;f++){let h=this.detectionResultColumns[f].getCodewords()[o];h!=null&&(c=Xs.adjustRowNumberIfValid(a,c,h),h.hasValidRowNumber()||r++)}}return r}static adjustRowNumberIfValid(r,i,o){return o==null||o.hasValidRowNumber()||(o.isValidRowNumber(r)?(o.setRowNumber(r),i=0):++i),i}adjustRowNumbers(r,i,o){if(!this.detectionResultColumns[r-1])return;let a=o[i],c=this.detectionResultColumns[r-1].getCodewords(),f=c;this.detectionResultColumns[r+1]!=null&&(f=this.detectionResultColumns[r+1].getCodewords());let h=new Array(14);h[2]=c[i],h[3]=f[i],i>0&&(h[0]=o[i-1],h[4]=c[i-1],h[5]=f[i-1]),i>1&&(h[8]=o[i-2],h[10]=c[i-2],h[11]=f[i-2]),i<o.length-1&&(h[1]=o[i+1],h[6]=c[i+1],h[7]=f[i+1]),i<o.length-2&&(h[9]=o[i+2],h[12]=c[i+2],h[13]=f[i+2]);for(let g of h)if(Xs.adjustRowNumber(a,g))return}static adjustRowNumber(r,i){return i==null?!1:i.hasValidRowNumber()&&i.getBucket()===r.getBucket()?(r.setRowNumber(i.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(r){this.boundingBox=r}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(r,i){this.detectionResultColumns[r]=i}getDetectionResultColumn(r){return this.detectionResultColumns[r]}toString(){let r=this.detectionResultColumns[0];r==null&&(r=this.detectionResultColumns[this.barcodeColumnCount+1]);let i=new zs;for(let o=0;o<r.getCodewords().length;o++){i.format("CW %3d:",o);for(let a=0;a<this.barcodeColumnCount+2;a++){if(this.detectionResultColumns[a]==null){i.format("    |   ");continue}let c=this.detectionResultColumns[a].getCodewords()[o];if(c==null){i.format("    |   ");continue}i.format(" %3d|%3d",c.getRowNumber(),c.getValue())}i.format("%n")}return i.toString()}}class Ys{constructor(r,i,o,a){this.rowNumber=Ys.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(r),this.endX=Math.trunc(i),this.bucket=Math.trunc(o),this.value=Math.trunc(a)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(r){return r!==Ys.BARCODE_ROW_UNKNOWN&&this.bucket===r%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(r){this.rowNumber=r}toString(){return this.rowNumber+"|"+this.value}}Ys.BARCODE_ROW_UNKNOWN=-1;class on{static initialize(){for(let r=0;r<pe.SYMBOL_TABLE.length;r++){let i=pe.SYMBOL_TABLE[r],o=i&1;for(let a=0;a<pe.BARS_IN_MODULE;a++){let c=0;for(;(i&1)===o;)c+=1,i>>=1;o=i&1,on.RATIOS_TABLE[r]||(on.RATIOS_TABLE[r]=new Array(pe.BARS_IN_MODULE)),on.RATIOS_TABLE[r][pe.BARS_IN_MODULE-a-1]=Math.fround(c/pe.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(r){let i=on.getDecodedCodewordValue(on.sampleBitCounts(r));return i!==-1?i:on.getClosestDecodedValue(r)}static sampleBitCounts(r){let i=be.sum(r),o=new Int32Array(pe.BARS_IN_MODULE),a=0,c=0;for(let f=0;f<pe.MODULES_IN_CODEWORD;f++){let h=i/(2*pe.MODULES_IN_CODEWORD)+f*i/pe.MODULES_IN_CODEWORD;c+r[a]<=h&&(c+=r[a],a++),o[a]++}return o}static getDecodedCodewordValue(r){let i=on.getBitValue(r);return pe.getCodeword(i)===-1?-1:i}static getBitValue(r){let i=0;for(let o=0;o<r.length;o++)for(let a=0;a<r[o];a++)i=i<<1|(o%2===0?1:0);return Math.trunc(i)}static getClosestDecodedValue(r){let i=be.sum(r),o=new Array(pe.BARS_IN_MODULE);if(i>1)for(let f=0;f<o.length;f++)o[f]=Math.fround(r[f]/i);let a=ul.MAX_VALUE,c=-1;this.bSymbolTableReady||on.initialize();for(let f=0;f<on.RATIOS_TABLE.length;f++){let h=0,g=on.RATIOS_TABLE[f];for(let m=0;m<pe.BARS_IN_MODULE;m++){let y=Math.fround(g[m]-o[m]);if(h+=Math.fround(y*y),h>=a)break}h<a&&(a=h,c=pe.SYMBOL_TABLE[f])}return c}}on.bSymbolTableReady=!1,on.RATIOS_TABLE=new Array(pe.SYMBOL_TABLE.length).map(_=>new Array(pe.BARS_IN_MODULE));class w1{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(r){this.segmentIndex=r}getFileId(){return this.fileId}setFileId(r){this.fileId=r}getOptionalData(){return this.optionalData}setOptionalData(r){this.optionalData=r}isLastSegment(){return this.lastSegment}setLastSegment(r){this.lastSegment=r}getSegmentCount(){return this.segmentCount}setSegmentCount(r){this.segmentCount=r}getSender(){return this.sender||null}setSender(r){this.sender=r}getAddressee(){return this.addressee||null}setAddressee(r){this.addressee=r}getFileName(){return this.fileName}setFileName(r){this.fileName=r}getFileSize(){return this.fileSize}setFileSize(r){this.fileSize=r}getChecksum(){return this.checksum}setChecksum(r){this.checksum=r}getTimestamp(){return this.timestamp}setTimestamp(r){this.timestamp=r}}class y1{static parseLong(r,i=void 0){return parseInt(r,i)}}class _1 extends w{}_1.kind="NullPointerException";class ox{writeBytes(r){this.writeBytesOffset(r,0,r.length)}writeBytesOffset(r,i,o){if(r==null)throw new _1;if(i<0||i>r.length||o<0||i+o>r.length||i+o<0)throw new ee;if(o===0)return;for(let a=0;a<o;a++)this.write(r[i+a])}flush(){}close(){}}class lx extends w{}class ax extends ox{constructor(r=32){if(super(),this.count=0,r<0)throw new C("Negative initial size: "+r);this.buf=new Uint8Array(r)}ensureCapacity(r){r-this.buf.length>0&&this.grow(r)}grow(r){let o=this.buf.length<<1;if(o-r<0&&(o=r),o<0){if(r<0)throw new lx;o=R.MAX_VALUE}this.buf=N.copyOfUint8Array(this.buf,o)}write(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1}writeBytesOffset(r,i,o){if(i<0||i>r.length||o<0||i+o-r.length>0)throw new ee;this.ensureCapacity(this.count+o),B.arraycopy(r,i,this.buf,this.count,o),this.count+=o}writeTo(r){r.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return N.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(r){return new String(this.buf).toString()}toString_number(r){return new String(this.buf).toString()}close(){}}var Ue;(function(_){_[_.ALPHA=0]="ALPHA",_[_.LOWER=1]="LOWER",_[_.MIXED=2]="MIXED",_[_.PUNCT=3]="PUNCT",_[_.ALPHA_SHIFT=4]="ALPHA_SHIFT",_[_.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Ue||(Ue={}));function E1(){if(typeof window<"u")return window.BigInt||null;if(typeof Qs<"u")return Qs.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let xl;function Mr(_){if(typeof xl>"u"&&(xl=E1()),xl===null)throw new Error("BigInt is not supported!");return xl(_)}function cx(){let _=[];_[0]=Mr(1);let r=Mr(900);_[1]=r;for(let i=2;i<16;i++)_[i]=_[i-1]*r;return _}class V{static decode(r,i){let o=new me(""),a=z.ISO8859_1;o.enableDecoding(a);let c=1,f=r[c++],h=new w1;for(;c<r[0];){switch(f){case V.TEXT_COMPACTION_MODE_LATCH:c=V.textCompaction(r,c,o);break;case V.BYTE_COMPACTION_MODE_LATCH:case V.BYTE_COMPACTION_MODE_LATCH_6:c=V.byteCompaction(f,r,a,c,o);break;case V.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[c++]);break;case V.NUMERIC_COMPACTION_MODE_LATCH:c=V.numericCompaction(r,c,o);break;case V.ECI_CHARSET:z.getCharacterSetECIByValue(r[c++]);break;case V.ECI_GENERAL_PURPOSE:c+=2;break;case V.ECI_USER_DEFINED:c++;break;case V.BEGIN_MACRO_PDF417_CONTROL_BLOCK:c=V.decodeMacroBlock(r,c,h);break;case V.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case V.MACRO_PDF417_TERMINATOR:throw new F;default:c--,c=V.textCompaction(r,c,o);break}if(c<r.length)f=r[c++];else throw F.getFormatInstance()}if(o.length()===0)throw F.getFormatInstance();let g=new Fs(null,o.toString(),null,i);return g.setOther(h),g}static decodeMacroBlock(r,i,o){if(i+V.NUMBER_OF_SEQUENCE_CODEWORDS>r[0])throw F.getFormatInstance();let a=new Int32Array(V.NUMBER_OF_SEQUENCE_CODEWORDS);for(let h=0;h<V.NUMBER_OF_SEQUENCE_CODEWORDS;h++,i++)a[h]=r[i];o.setSegmentIndex(R.parseInt(V.decodeBase900toBase10(a,V.NUMBER_OF_SEQUENCE_CODEWORDS)));let c=new me;i=V.textCompaction(r,i,c),o.setFileId(c.toString());let f=-1;for(r[i]===V.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(f=i+1);i<r[0];)switch(r[i]){case V.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(i++,r[i]){case V.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let h=new me;i=V.textCompaction(r,i+1,h),o.setFileName(h.toString());break;case V.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let g=new me;i=V.textCompaction(r,i+1,g),o.setSender(g.toString());break;case V.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let m=new me;i=V.textCompaction(r,i+1,m),o.setAddressee(m.toString());break;case V.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let y=new me;i=V.numericCompaction(r,i+1,y),o.setSegmentCount(R.parseInt(y.toString()));break;case V.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let E=new me;i=V.numericCompaction(r,i+1,E),o.setTimestamp(y1.parseLong(E.toString()));break;case V.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let S=new me;i=V.numericCompaction(r,i+1,S),o.setChecksum(R.parseInt(S.toString()));break;case V.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let T=new me;i=V.numericCompaction(r,i+1,T),o.setFileSize(y1.parseLong(T.toString()));break;default:throw F.getFormatInstance()}break;case V.MACRO_PDF417_TERMINATOR:i++,o.setLastSegment(!0);break;default:throw F.getFormatInstance()}if(f!==-1){let h=i-f;o.isLastSegment()&&h--,o.setOptionalData(N.copyOfRange(r,f,f+h))}return i}static textCompaction(r,i,o){let a=new Int32Array((r[0]-i)*2),c=new Int32Array((r[0]-i)*2),f=0,h=!1;for(;i<r[0]&&!h;){let g=r[i++];if(g<V.TEXT_COMPACTION_MODE_LATCH)a[f]=g/30,a[f+1]=g%30,f+=2;else switch(g){case V.TEXT_COMPACTION_MODE_LATCH:a[f++]=V.TEXT_COMPACTION_MODE_LATCH;break;case V.BYTE_COMPACTION_MODE_LATCH:case V.BYTE_COMPACTION_MODE_LATCH_6:case V.NUMERIC_COMPACTION_MODE_LATCH:case V.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case V.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case V.MACRO_PDF417_TERMINATOR:i--,h=!0;break;case V.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a[f]=V.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,g=r[i++],c[f]=g,f++;break}}return V.decodeTextCompaction(a,c,f,o),i}static decodeTextCompaction(r,i,o,a){let c=Ue.ALPHA,f=Ue.ALPHA,h=0;for(;h<o;){let g=r[h],m="";switch(c){case Ue.ALPHA:if(g<26)m=String.fromCharCode(65+g);else switch(g){case 26:m=" ";break;case V.LL:c=Ue.LOWER;break;case V.ML:c=Ue.MIXED;break;case V.PS:f=c,c=Ue.PUNCT_SHIFT;break;case V.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(i[h]);break;case V.TEXT_COMPACTION_MODE_LATCH:c=Ue.ALPHA;break}break;case Ue.LOWER:if(g<26)m=String.fromCharCode(97+g);else switch(g){case 26:m=" ";break;case V.AS:f=c,c=Ue.ALPHA_SHIFT;break;case V.ML:c=Ue.MIXED;break;case V.PS:f=c,c=Ue.PUNCT_SHIFT;break;case V.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(i[h]);break;case V.TEXT_COMPACTION_MODE_LATCH:c=Ue.ALPHA;break}break;case Ue.MIXED:if(g<V.PL)m=V.MIXED_CHARS[g];else switch(g){case V.PL:c=Ue.PUNCT;break;case 26:m=" ";break;case V.LL:c=Ue.LOWER;break;case V.AL:c=Ue.ALPHA;break;case V.PS:f=c,c=Ue.PUNCT_SHIFT;break;case V.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(i[h]);break;case V.TEXT_COMPACTION_MODE_LATCH:c=Ue.ALPHA;break}break;case Ue.PUNCT:if(g<V.PAL)m=V.PUNCT_CHARS[g];else switch(g){case V.PAL:c=Ue.ALPHA;break;case V.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(i[h]);break;case V.TEXT_COMPACTION_MODE_LATCH:c=Ue.ALPHA;break}break;case Ue.ALPHA_SHIFT:if(c=f,g<26)m=String.fromCharCode(65+g);else switch(g){case 26:m=" ";break;case V.TEXT_COMPACTION_MODE_LATCH:c=Ue.ALPHA;break}break;case Ue.PUNCT_SHIFT:if(c=f,g<V.PAL)m=V.PUNCT_CHARS[g];else switch(g){case V.PAL:c=Ue.ALPHA;break;case V.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(i[h]);break;case V.TEXT_COMPACTION_MODE_LATCH:c=Ue.ALPHA;break}break}m!==""&&a.append(m),h++}}static byteCompaction(r,i,o,a,c){let f=new ax,h=0,g=0,m=!1;switch(r){case V.BYTE_COMPACTION_MODE_LATCH:let y=new Int32Array(6),E=i[a++];for(;a<i[0]&&!m;)switch(y[h++]=E,g=900*g+E,E=i[a++],E){case V.TEXT_COMPACTION_MODE_LATCH:case V.BYTE_COMPACTION_MODE_LATCH:case V.NUMERIC_COMPACTION_MODE_LATCH:case V.BYTE_COMPACTION_MODE_LATCH_6:case V.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case V.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case V.MACRO_PDF417_TERMINATOR:a--,m=!0;break;default:if(h%5===0&&h>0){for(let S=0;S<6;++S)f.write(Number(Mr(g)>>Mr(8*(5-S))));g=0,h=0}break}a===i[0]&&E<V.TEXT_COMPACTION_MODE_LATCH&&(y[h++]=E);for(let S=0;S<h;S++)f.write(y[S]);break;case V.BYTE_COMPACTION_MODE_LATCH_6:for(;a<i[0]&&!m;){let S=i[a++];if(S<V.TEXT_COMPACTION_MODE_LATCH)h++,g=900*g+S;else switch(S){case V.TEXT_COMPACTION_MODE_LATCH:case V.BYTE_COMPACTION_MODE_LATCH:case V.NUMERIC_COMPACTION_MODE_LATCH:case V.BYTE_COMPACTION_MODE_LATCH_6:case V.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case V.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case V.MACRO_PDF417_TERMINATOR:a--,m=!0;break}if(h%5===0&&h>0){for(let T=0;T<6;++T)f.write(Number(Mr(g)>>Mr(8*(5-T))));g=0,h=0}}break}return c.append(Se.decode(f.toByteArray(),o)),a}static numericCompaction(r,i,o){let a=0,c=!1,f=new Int32Array(V.MAX_NUMERIC_CODEWORDS);for(;i<r[0]&&!c;){let h=r[i++];if(i===r[0]&&(c=!0),h<V.TEXT_COMPACTION_MODE_LATCH)f[a]=h,a++;else switch(h){case V.TEXT_COMPACTION_MODE_LATCH:case V.BYTE_COMPACTION_MODE_LATCH:case V.BYTE_COMPACTION_MODE_LATCH_6:case V.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case V.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case V.MACRO_PDF417_TERMINATOR:i--,c=!0;break}(a%V.MAX_NUMERIC_CODEWORDS===0||h===V.NUMERIC_COMPACTION_MODE_LATCH||c)&&a>0&&(o.append(V.decodeBase900toBase10(f,a)),a=0)}return i}static decodeBase900toBase10(r,i){let o=Mr(0);for(let c=0;c<i;c++)o+=V.EXP900[i-c-1]*Mr(r[c]);let a=o.toString();if(a.charAt(0)!=="1")throw new F;return a.substring(1)}}V.TEXT_COMPACTION_MODE_LATCH=900,V.BYTE_COMPACTION_MODE_LATCH=901,V.NUMERIC_COMPACTION_MODE_LATCH=902,V.BYTE_COMPACTION_MODE_LATCH_6=924,V.ECI_USER_DEFINED=925,V.ECI_GENERAL_PURPOSE=926,V.ECI_CHARSET=927,V.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,V.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,V.MACRO_PDF417_TERMINATOR=922,V.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,V.MAX_NUMERIC_CODEWORDS=15,V.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,V.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,V.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,V.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,V.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,V.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,V.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,V.PL=25,V.LL=27,V.AS=27,V.ML=28,V.AL=28,V.PS=29,V.PAL=29,V.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,V.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",V.EXP900=E1()?cx():[],V.NUMBER_OF_SEQUENCE_CODEWORDS=2;class _e{constructor(){}static decode(r,i,o,a,c,f,h){let g=new ui(r,i,o,a,c),m=null,y=null,E;for(let O=!0;;O=!1){if(i!=null&&(m=_e.getRowIndicatorColumn(r,g,i,!0,f,h)),a!=null&&(y=_e.getRowIndicatorColumn(r,g,a,!1,f,h)),E=_e.merge(m,y),E==null)throw W.getNotFoundInstance();let M=E.getBoundingBox();if(O&&M!=null&&(M.getMinY()<g.getMinY()||M.getMaxY()>g.getMaxY()))g=M;else break}E.setBoundingBox(g);let S=E.getBarcodeColumnCount()+1;E.setDetectionResultColumn(0,m),E.setDetectionResultColumn(S,y);let T=m!=null;for(let O=1;O<=S;O++){let M=T?O:S-O;if(E.getDetectionResultColumn(M)!==void 0)continue;let L;M===0||M===S?L=new x1(g,M===0):L=new Gs(g),E.setDetectionResultColumn(M,L);let H=-1,Q=H;for(let q=g.getMinY();q<=g.getMaxY();q++){if(H=_e.getStartColumn(E,M,q,T),H<0||H>g.getMaxX()){if(Q===-1)continue;H=Q}let Y=_e.detectCodeword(r,g.getMinX(),g.getMaxX(),T,H,q,f,h);Y!=null&&(L.setCodeword(q,Y),Q=H,f=Math.min(f,Y.getWidth()),h=Math.max(h,Y.getWidth()))}}return _e.createDecoderResult(E)}static merge(r,i){if(r==null&&i==null)return null;let o=_e.getBarcodeMetadata(r,i);if(o==null)return null;let a=ui.merge(_e.adjustBoundingBox(r),_e.adjustBoundingBox(i));return new Xs(o,a)}static adjustBoundingBox(r){if(r==null)return null;let i=r.getRowHeights();if(i==null)return null;let o=_e.getMax(i),a=0;for(let h of i)if(a+=o-h,h>0)break;let c=r.getCodewords();for(let h=0;a>0&&c[h]==null;h++)a--;let f=0;for(let h=i.length-1;h>=0&&(f+=o-i[h],!(i[h]>0));h--);for(let h=c.length-1;f>0&&c[h]==null;h--)f--;return r.getBoundingBox().addMissingRows(a,f,r.isLeft())}static getMax(r){let i=-1;for(let o of r)i=Math.max(i,o);return i}static getBarcodeMetadata(r,i){let o;if(r==null||(o=r.getBarcodeMetadata())==null)return i==null?null:i.getBarcodeMetadata();let a;return i==null||(a=i.getBarcodeMetadata())==null?o:o.getColumnCount()!==a.getColumnCount()&&o.getErrorCorrectionLevel()!==a.getErrorCorrectionLevel()&&o.getRowCount()!==a.getRowCount()?null:o}static getRowIndicatorColumn(r,i,o,a,c,f){let h=new x1(i,a);for(let g=0;g<2;g++){let m=g===0?1:-1,y=Math.trunc(Math.trunc(o.getX()));for(let E=Math.trunc(Math.trunc(o.getY()));E<=i.getMaxY()&&E>=i.getMinY();E+=m){let S=_e.detectCodeword(r,0,r.getWidth(),a,y,E,c,f);S!=null&&(h.setCodeword(E,S),a?y=S.getStartX():y=S.getEndX())}}return h}static adjustCodewordCount(r,i){let o=i[0][1],a=o.getValue(),c=r.getBarcodeColumnCount()*r.getBarcodeRowCount()-_e.getNumberOfECCodeWords(r.getBarcodeECLevel());if(a.length===0){if(c<1||c>pe.MAX_CODEWORDS_IN_BARCODE)throw W.getNotFoundInstance();o.setValue(c)}else a[0]!==c&&o.setValue(c)}static createDecoderResult(r){let i=_e.createBarcodeMatrix(r);_e.adjustCodewordCount(r,i);let o=new Array,a=new Int32Array(r.getBarcodeRowCount()*r.getBarcodeColumnCount()),c=[],f=new Array;for(let g=0;g<r.getBarcodeRowCount();g++)for(let m=0;m<r.getBarcodeColumnCount();m++){let y=i[g][m+1].getValue(),E=g*r.getBarcodeColumnCount()+m;y.length===0?o.push(E):y.length===1?a[E]=y[0]:(f.push(E),c.push(y))}let h=new Array(c.length);for(let g=0;g<h.length;g++)h[g]=c[g];return _e.createDecoderResultFromAmbiguousValues(r.getBarcodeECLevel(),a,pe.toIntArray(o),pe.toIntArray(f),h)}static createDecoderResultFromAmbiguousValues(r,i,o,a,c){let f=new Int32Array(a.length),h=100;for(;h-- >0;){for(let g=0;g<f.length;g++)i[a[g]]=c[g][f[g]];try{return _e.decodeCodewords(i,r,o)}catch(g){if(!(g instanceof D))throw g}if(f.length===0)throw D.getChecksumInstance();for(let g=0;g<f.length;g++)if(f[g]<c[g].length-1){f[g]++;break}else if(f[g]=0,g===f.length-1)throw D.getChecksumInstance()}throw D.getChecksumInstance()}static createBarcodeMatrix(r){let i=Array.from({length:r.getBarcodeRowCount()},()=>new Array(r.getBarcodeColumnCount()+2));for(let a=0;a<i.length;a++)for(let c=0;c<i[a].length;c++)i[a][c]=new js;let o=0;for(let a of r.getDetectionResultColumns()){if(a!=null){for(let c of a.getCodewords())if(c!=null){let f=c.getRowNumber();if(f>=0){if(f>=i.length)continue;i[f][o].setValue(c.getValue())}}}o++}return i}static isValidBarcodeColumn(r,i){return i>=0&&i<=r.getBarcodeColumnCount()+1}static getStartColumn(r,i,o,a){let c=a?1:-1,f=null;if(_e.isValidBarcodeColumn(r,i-c)&&(f=r.getDetectionResultColumn(i-c).getCodeword(o)),f!=null)return a?f.getEndX():f.getStartX();if(f=r.getDetectionResultColumn(i).getCodewordNearby(o),f!=null)return a?f.getStartX():f.getEndX();if(_e.isValidBarcodeColumn(r,i-c)&&(f=r.getDetectionResultColumn(i-c).getCodewordNearby(o)),f!=null)return a?f.getEndX():f.getStartX();let h=0;for(;_e.isValidBarcodeColumn(r,i-c);){i-=c;for(let g of r.getDetectionResultColumn(i).getCodewords())if(g!=null)return(a?g.getEndX():g.getStartX())+c*h*(g.getEndX()-g.getStartX());h++}return a?r.getBoundingBox().getMinX():r.getBoundingBox().getMaxX()}static detectCodeword(r,i,o,a,c,f,h,g){c=_e.adjustCodewordStartColumn(r,i,o,a,c,f);let m=_e.getModuleBitCount(r,i,o,a,c,f);if(m==null)return null;let y,E=be.sum(m);if(a)y=c+E;else{for(let O=0;O<m.length/2;O++){let M=m[O];m[O]=m[m.length-1-O],m[m.length-1-O]=M}y=c,c=y-E}if(!_e.checkCodewordSkew(E,h,g))return null;let S=on.getDecodedValue(m),T=pe.getCodeword(S);return T===-1?null:new Ys(c,y,_e.getCodewordBucketNumber(S),T)}static getModuleBitCount(r,i,o,a,c,f){let h=c,g=new Int32Array(8),m=0,y=a?1:-1,E=a;for(;(a?h<o:h>=i)&&m<g.length;)r.get(h,f)===E?(g[m]++,h+=y):(m++,E=!E);return m===g.length||h===(a?o:i)&&m===g.length-1?g:null}static getNumberOfECCodeWords(r){return 2<<r}static adjustCodewordStartColumn(r,i,o,a,c,f){let h=c,g=a?-1:1;for(let m=0;m<2;m++){for(;(a?h>=i:h<o)&&a===r.get(h,f);){if(Math.abs(c-h)>_e.CODEWORD_SKEW_SIZE)return c;h+=g}g=-g,a=!a}return h}static checkCodewordSkew(r,i,o){return i-_e.CODEWORD_SKEW_SIZE<=r&&r<=o+_e.CODEWORD_SKEW_SIZE}static decodeCodewords(r,i,o){if(r.length===0)throw F.getFormatInstance();let a=1<<i+1,c=_e.correctErrors(r,o,a);_e.verifyCodewordCount(r,a);let f=V.decode(r,""+i);return f.setErrorsCorrected(c),f.setErasures(o.length),f}static correctErrors(r,i,o){if(i!=null&&i.length>o/2+_e.MAX_ERRORS||o<0||o>_e.MAX_EC_CODEWORDS)throw D.getChecksumInstance();return _e.errorCorrection.decode(r,o,i)}static verifyCodewordCount(r,i){if(r.length<4)throw F.getFormatInstance();let o=r[0];if(o>r.length)throw F.getFormatInstance();if(o===0)if(i<r.length)r[0]=r.length-i;else throw F.getFormatInstance()}static getBitCountForCodeword(r){let i=new Int32Array(8),o=0,a=i.length-1;for(;!((r&1)!==o&&(o=r&1,a--,a<0));)i[a]++,r>>=1;return i}static getCodewordBucketNumber(r){return r instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(r):this.getCodewordBucketNumber_number(r)}static getCodewordBucketNumber_number(r){return _e.getCodewordBucketNumber(_e.getBitCountForCodeword(r))}static getCodewordBucketNumber_Int32Array(r){return(r[0]-r[2]+r[4]-r[6]+9)%9}static toString(r){let i=new zs;for(let o=0;o<r.length;o++){i.format("Row %2d: ",o);for(let a=0;a<r[o].length;a++){let c=r[o][a];c.getValue().length===0?i.format("        ",null):i.format("%4d(%2d)",c.getValue()[0],c.getConfidence(c.getValue()[0]))}i.format("%n")}return i.toString()}}_e.CODEWORD_SKEW_SIZE=2,_e.MAX_ERRORS=3,_e.MAX_EC_CODEWORDS=512,_e.errorCorrection=new m1;class Pt{decode(r,i=null){let o=Pt.decode(r,i,!1);if(o==null||o.length===0||o[0]==null)throw W.getNotFoundInstance();return o[0]}decodeMultiple(r,i=null){try{return Pt.decode(r,i,!0)}catch(o){throw o instanceof F||o instanceof D?W.getNotFoundInstance():o}}static decode(r,i,o){const a=new Array,c=ye.detectMultiple(r,i,o);for(const f of c.getPoints()){const h=_e.decode(c.getBits(),f[4],f[5],f[6],f[7],Pt.getMinCodewordWidth(f),Pt.getMaxCodewordWidth(f)),g=new st(h.getText(),h.getRawBytes(),void 0,f,ae.PDF_417);g.putMetadata(vt.ERROR_CORRECTION_LEVEL,h.getECLevel());const m=h.getOther();m!=null&&g.putMetadata(vt.PDF417_EXTRA_METADATA,m),a.push(g)}return a.map(f=>f)}static getMaxWidth(r,i){return r==null||i==null?0:Math.trunc(Math.abs(r.getX()-i.getX()))}static getMinWidth(r,i){return r==null||i==null?R.MAX_VALUE:Math.trunc(Math.abs(r.getX()-i.getX()))}static getMaxCodewordWidth(r){return Math.floor(Math.max(Math.max(Pt.getMaxWidth(r[0],r[4]),Pt.getMaxWidth(r[6],r[2])*pe.MODULES_IN_CODEWORD/pe.MODULES_IN_STOP_PATTERN),Math.max(Pt.getMaxWidth(r[1],r[5]),Pt.getMaxWidth(r[7],r[3])*pe.MODULES_IN_CODEWORD/pe.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(r){return Math.floor(Math.min(Math.min(Pt.getMinWidth(r[0],r[4]),Pt.getMinWidth(r[6],r[2])*pe.MODULES_IN_CODEWORD/pe.MODULES_IN_STOP_PATTERN),Math.min(Pt.getMinWidth(r[1],r[5]),Pt.getMinWidth(r[7],r[3])*pe.MODULES_IN_CODEWORD/pe.MODULES_IN_STOP_PATTERN)))}reset(){}}class wl extends w{}wl.kind="ReaderException";class C1{constructor(r,i){this.verbose=r===!0,i&&this.setHints(i)}decode(r,i){return i&&this.setHints(i),this.decodeInternal(r)}decodeWithState(r){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(r)}setHints(r){this.hints=r;const i=!s(r)&&r.get(G.TRY_HARDER)===!0,o=s(r)?null:r.get(G.POSSIBLE_FORMATS),a=new Array;if(!s(o)){const c=o.some(f=>f===ae.UPC_A||f===ae.UPC_E||f===ae.EAN_13||f===ae.EAN_8||f===ae.CODABAR||f===ae.CODE_39||f===ae.CODE_93||f===ae.CODE_128||f===ae.ITF||f===ae.RSS_14||f===ae.RSS_EXPANDED);c&&!i&&a.push(new Ui(r,this.verbose)),o.includes(ae.QR_CODE)&&a.push(new Dr),o.includes(ae.DATA_MATRIX)&&a.push(new Or),o.includes(ae.AZTEC)&&a.push(new hl),o.includes(ae.PDF_417)&&a.push(new Pt),c&&i&&a.push(new Ui(r,this.verbose))}a.length===0&&(i||a.push(new Ui(r,this.verbose)),a.push(new Dr),a.push(new Or),a.push(new hl),a.push(new Pt),i&&a.push(new Ui(r,this.verbose))),this.readers=a}reset(){if(this.readers!==null)for(const r of this.readers)r.reset()}decodeInternal(r){if(this.readers===null)throw new wl("No readers where selected, nothing can be read.");for(const i of this.readers)try{return i.decode(r,this.hints)}catch(o){if(o instanceof wl)continue}throw new W("No MultiFormat Readers were able to detect the code.")}}class ux extends vn{constructor(r=null,i=500){const o=new C1;o.setHints(r),super(o,i)}decodeBitmap(r){return this.reader.decodeWithState(r)}}class fx extends vn{constructor(r=500){super(new Pt,r)}}class hx extends vn{constructor(r=500){super(new Dr,r)}}var Ic;(function(_){_[_.ERROR_CORRECTION=0]="ERROR_CORRECTION",_[_.CHARACTER_SET=1]="CHARACTER_SET",_[_.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",_[_.MIN_SIZE=3]="MIN_SIZE",_[_.MAX_SIZE=4]="MAX_SIZE",_[_.MARGIN=5]="MARGIN",_[_.PDF417_COMPACT=6]="PDF417_COMPACT",_[_.PDF417_COMPACTION=7]="PDF417_COMPACTION",_[_.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",_[_.AZTEC_LAYERS=9]="AZTEC_LAYERS",_[_.QR_VERSION=10]="QR_VERSION"})(Ic||(Ic={}));var Ct=Ic;class Tc{constructor(r){this.field=r,this.cachedGenerators=[],this.cachedGenerators.push(new nn(r,Int32Array.from([1])))}buildGenerator(r){const i=this.cachedGenerators;if(r>=i.length){let o=i[i.length-1];const a=this.field;for(let c=i.length;c<=r;c++){const f=o.multiply(new nn(a,Int32Array.from([1,a.exp(c-1+a.getGeneratorBase())])));i.push(f),o=f}}return i[r]}encode(r,i){if(i===0)throw new C("No error correction bytes");const o=r.length-i;if(o<=0)throw new C("No data bytes provided");const a=this.buildGenerator(i),c=new Int32Array(o);B.arraycopy(r,0,c,0,o);let f=new nn(this.field,c);f=f.multiplyByMonomial(i,1);const g=f.divide(a)[1].getCoefficients(),m=i-g.length;for(let y=0;y<m;y++)r[o+y]=0;B.arraycopy(g,0,r,o+m,g.length)}}class dt{constructor(){}static applyMaskPenaltyRule1(r){return dt.applyMaskPenaltyRule1Internal(r,!0)+dt.applyMaskPenaltyRule1Internal(r,!1)}static applyMaskPenaltyRule2(r){let i=0;const o=r.getArray(),a=r.getWidth(),c=r.getHeight();for(let f=0;f<c-1;f++){const h=o[f];for(let g=0;g<a-1;g++){const m=h[g];m===h[g+1]&&m===o[f+1][g]&&m===o[f+1][g+1]&&i++}}return dt.N2*i}static applyMaskPenaltyRule3(r){let i=0;const o=r.getArray(),a=r.getWidth(),c=r.getHeight();for(let f=0;f<c;f++)for(let h=0;h<a;h++){const g=o[f];h+6<a&&g[h]===1&&g[h+1]===0&&g[h+2]===1&&g[h+3]===1&&g[h+4]===1&&g[h+5]===0&&g[h+6]===1&&(dt.isWhiteHorizontal(g,h-4,h)||dt.isWhiteHorizontal(g,h+7,h+11))&&i++,f+6<c&&o[f][h]===1&&o[f+1][h]===0&&o[f+2][h]===1&&o[f+3][h]===1&&o[f+4][h]===1&&o[f+5][h]===0&&o[f+6][h]===1&&(dt.isWhiteVertical(o,h,f-4,f)||dt.isWhiteVertical(o,h,f+7,f+11))&&i++}return i*dt.N3}static isWhiteHorizontal(r,i,o){i=Math.max(i,0),o=Math.min(o,r.length);for(let a=i;a<o;a++)if(r[a]===1)return!1;return!0}static isWhiteVertical(r,i,o,a){o=Math.max(o,0),a=Math.min(a,r.length);for(let c=o;c<a;c++)if(r[c][i]===1)return!1;return!0}static applyMaskPenaltyRule4(r){let i=0;const o=r.getArray(),a=r.getWidth(),c=r.getHeight();for(let g=0;g<c;g++){const m=o[g];for(let y=0;y<a;y++)m[y]===1&&i++}const f=r.getHeight()*r.getWidth();return Math.floor(Math.abs(i*2-f)*10/f)*dt.N4}static getDataMaskBit(r,i,o){let a,c;switch(r){case 0:a=o+i&1;break;case 1:a=o&1;break;case 2:a=i%3;break;case 3:a=(o+i)%3;break;case 4:a=Math.floor(o/2)+Math.floor(i/3)&1;break;case 5:c=o*i,a=(c&1)+c%3;break;case 6:c=o*i,a=(c&1)+c%3&1;break;case 7:c=o*i,a=c%3+(o+i&1)&1;break;default:throw new C("Invalid mask pattern: "+r)}return a===0}static applyMaskPenaltyRule1Internal(r,i){let o=0;const a=i?r.getHeight():r.getWidth(),c=i?r.getWidth():r.getHeight(),f=r.getArray();for(let h=0;h<a;h++){let g=0,m=-1;for(let y=0;y<c;y++){const E=i?f[h][y]:f[y][h];E===m?g++:(g>=5&&(o+=dt.N1+(g-5)),g=1,m=E)}g>=5&&(o+=dt.N1+(g-5))}return o}}dt.N1=3,dt.N2=3,dt.N3=40,dt.N4=10;class yl{constructor(r,i){this.width=r,this.height=i;const o=new Array(i);for(let a=0;a!==i;a++)o[a]=new Uint8Array(r);this.bytes=o}getHeight(){return this.height}getWidth(){return this.width}get(r,i){return this.bytes[i][r]}getArray(){return this.bytes}setNumber(r,i,o){this.bytes[i][r]=o}setBoolean(r,i,o){this.bytes[i][r]=o?1:0}clear(r){for(const i of this.bytes)N.fill(i,r)}equals(r){if(!(r instanceof yl))return!1;const i=r;if(this.width!==i.width||this.height!==i.height)return!1;for(let o=0,a=this.height;o<a;++o){const c=this.bytes[o],f=i.bytes[o];for(let h=0,g=this.width;h<g;++h)if(c[h]!==f[h])return!1}return!0}toString(){const r=new me;for(let i=0,o=this.height;i<o;++i){const a=this.bytes[i];for(let c=0,f=this.width;c<f;++c)switch(a[c]){case 0:r.append(" 0");break;case 1:r.append(" 1");break;default:r.append("  ");break}r.append(`
`)}return r.toString()}}class fi{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const r=new me;return r.append(`<<
`),r.append(" mode: "),r.append(this.mode?this.mode.toString():"null"),r.append(`
 ecLevel: `),r.append(this.ecLevel?this.ecLevel.toString():"null"),r.append(`
 version: `),r.append(this.version?this.version.toString():"null"),r.append(`
 maskPattern: `),r.append(this.maskPattern.toString()),this.matrix?(r.append(`
 matrix:
`),r.append(this.matrix.toString())):r.append(`
 matrix: null
`),r.append(`>>
`),r.toString()}setMode(r){this.mode=r}setECLevel(r){this.ecLevel=r}setVersion(r){this.version=r}setMaskPattern(r){this.maskPattern=r}setMatrix(r){this.matrix=r}static isValidMaskPattern(r){return r>=0&&r<fi.NUM_MASK_PATTERNS}}fi.NUM_MASK_PATTERNS=8;class ze extends w{}ze.kind="WriterException";class ge{constructor(){}static clearMatrix(r){r.clear(255)}static buildMatrix(r,i,o,a,c){ge.clearMatrix(c),ge.embedBasicPatterns(o,c),ge.embedTypeInfo(i,a,c),ge.maybeEmbedVersionInfo(o,c),ge.embedDataBits(r,a,c)}static embedBasicPatterns(r,i){ge.embedPositionDetectionPatternsAndSeparators(i),ge.embedDarkDotAtLeftBottomCorner(i),ge.maybeEmbedPositionAdjustmentPatterns(r,i),ge.embedTimingPatterns(i)}static embedTypeInfo(r,i,o){const a=new P;ge.makeTypeInfoBits(r,i,a);for(let c=0,f=a.getSize();c<f;++c){const h=a.get(a.getSize()-1-c),g=ge.TYPE_INFO_COORDINATES[c],m=g[0],y=g[1];if(o.setBoolean(m,y,h),c<8){const E=o.getWidth()-c-1;o.setBoolean(E,8,h)}else{const S=o.getHeight()-7+(c-8);o.setBoolean(8,S,h)}}}static maybeEmbedVersionInfo(r,i){if(r.getVersionNumber()<7)return;const o=new P;ge.makeVersionInfoBits(r,o);let a=6*3-1;for(let c=0;c<6;++c)for(let f=0;f<3;++f){const h=o.get(a);a--,i.setBoolean(c,i.getHeight()-11+f,h),i.setBoolean(i.getHeight()-11+f,c,h)}}static embedDataBits(r,i,o){let a=0,c=-1,f=o.getWidth()-1,h=o.getHeight()-1;for(;f>0;){for(f===6&&(f-=1);h>=0&&h<o.getHeight();){for(let g=0;g<2;++g){const m=f-g;if(!ge.isEmpty(o.get(m,h)))continue;let y;a<r.getSize()?(y=r.get(a),++a):y=!1,i!==255&&dt.getDataMaskBit(i,m,h)&&(y=!y),o.setBoolean(m,h,y)}h+=c}c=-c,h+=c,f-=2}if(a!==r.getSize())throw new ze("Not all bits consumed: "+a+"/"+r.getSize())}static findMSBSet(r){return 32-R.numberOfLeadingZeros(r)}static calculateBCHCode(r,i){if(i===0)throw new C("0 polynomial");const o=ge.findMSBSet(i);for(r<<=o-1;ge.findMSBSet(r)>=o;)r^=i<<ge.findMSBSet(r)-o;return r}static makeTypeInfoBits(r,i,o){if(!fi.isValidMaskPattern(i))throw new ze("Invalid mask pattern");const a=r.getBits()<<3|i;o.appendBits(a,5);const c=ge.calculateBCHCode(a,ge.TYPE_INFO_POLY);o.appendBits(c,10);const f=new P;if(f.appendBits(ge.TYPE_INFO_MASK_PATTERN,15),o.xor(f),o.getSize()!==15)throw new ze("should not happen but we got: "+o.getSize())}static makeVersionInfoBits(r,i){i.appendBits(r.getVersionNumber(),6);const o=ge.calculateBCHCode(r.getVersionNumber(),ge.VERSION_INFO_POLY);if(i.appendBits(o,12),i.getSize()!==18)throw new ze("should not happen but we got: "+i.getSize())}static isEmpty(r){return r===255}static embedTimingPatterns(r){for(let i=8;i<r.getWidth()-8;++i){const o=(i+1)%2;ge.isEmpty(r.get(i,6))&&r.setNumber(i,6,o),ge.isEmpty(r.get(6,i))&&r.setNumber(6,i,o)}}static embedDarkDotAtLeftBottomCorner(r){if(r.get(8,r.getHeight()-8)===0)throw new ze;r.setNumber(8,r.getHeight()-8,1)}static embedHorizontalSeparationPattern(r,i,o){for(let a=0;a<8;++a){if(!ge.isEmpty(o.get(r+a,i)))throw new ze;o.setNumber(r+a,i,0)}}static embedVerticalSeparationPattern(r,i,o){for(let a=0;a<7;++a){if(!ge.isEmpty(o.get(r,i+a)))throw new ze;o.setNumber(r,i+a,0)}}static embedPositionAdjustmentPattern(r,i,o){for(let a=0;a<5;++a){const c=ge.POSITION_ADJUSTMENT_PATTERN[a];for(let f=0;f<5;++f)o.setNumber(r+f,i+a,c[f])}}static embedPositionDetectionPattern(r,i,o){for(let a=0;a<7;++a){const c=ge.POSITION_DETECTION_PATTERN[a];for(let f=0;f<7;++f)o.setNumber(r+f,i+a,c[f])}}static embedPositionDetectionPatternsAndSeparators(r){const i=ge.POSITION_DETECTION_PATTERN[0].length;ge.embedPositionDetectionPattern(0,0,r),ge.embedPositionDetectionPattern(r.getWidth()-i,0,r),ge.embedPositionDetectionPattern(0,r.getWidth()-i,r);const o=8;ge.embedHorizontalSeparationPattern(0,o-1,r),ge.embedHorizontalSeparationPattern(r.getWidth()-o,o-1,r),ge.embedHorizontalSeparationPattern(0,r.getWidth()-o,r);const a=7;ge.embedVerticalSeparationPattern(a,0,r),ge.embedVerticalSeparationPattern(r.getHeight()-a-1,0,r),ge.embedVerticalSeparationPattern(a,r.getHeight()-a,r)}static maybeEmbedPositionAdjustmentPatterns(r,i){if(r.getVersionNumber()<2)return;const o=r.getVersionNumber()-1,a=ge.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[o];for(let c=0,f=a.length;c!==f;c++){const h=a[c];if(h>=0)for(let g=0;g!==f;g++){const m=a[g];m>=0&&ge.isEmpty(i.get(m,h))&&ge.embedPositionAdjustmentPattern(m-2,h-2,i)}}}}ge.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),ge.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),ge.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),ge.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),ge.VERSION_INFO_POLY=7973,ge.TYPE_INFO_POLY=1335,ge.TYPE_INFO_MASK_PATTERN=21522;class dx{constructor(r,i){this.dataBytes=r,this.errorCorrectionBytes=i}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Qe{constructor(){}static calculateMaskPenalty(r){return dt.applyMaskPenaltyRule1(r)+dt.applyMaskPenaltyRule2(r)+dt.applyMaskPenaltyRule3(r)+dt.applyMaskPenaltyRule4(r)}static encode(r,i,o=null){let a=Qe.DEFAULT_BYTE_MODE_ENCODING;const c=o!==null&&o.get(Ct.CHARACTER_SET)!==void 0;c&&(a=o.get(Ct.CHARACTER_SET).toString());const f=this.chooseMode(r,a),h=new P;if(f===he.BYTE&&(c||Qe.DEFAULT_BYTE_MODE_ENCODING!==a)){const q=z.getCharacterSetECIByName(a);q!==void 0&&this.appendECI(q,h)}this.appendModeInfo(f,h);const g=new P;this.appendBytes(r,f,g,a);let m;if(o!==null&&o.get(Ct.QR_VERSION)!==void 0){const q=Number.parseInt(o.get(Ct.QR_VERSION).toString(),10);m=ue.getVersionForNumber(q);const Y=this.calculateBitsNeeded(f,h,g,m);if(!this.willFit(Y,m,i))throw new ze("Data too big for requested version")}else m=this.recommendVersion(i,f,h,g);const y=new P;y.appendBitArray(h);const E=f===he.BYTE?g.getSizeInBytes():r.length;this.appendLengthInfo(E,m,f,y),y.appendBitArray(g);const S=m.getECBlocksForLevel(i),T=m.getTotalCodewords()-S.getTotalECCodewords();this.terminateBits(T,y);const O=this.interleaveWithECBytes(y,m.getTotalCodewords(),T,S.getNumBlocks()),M=new fi;M.setECLevel(i),M.setMode(f),M.setVersion(m);const L=m.getDimensionForVersion(),H=new yl(L,L),Q=this.chooseMaskPattern(O,i,m,H);return M.setMaskPattern(Q),ge.buildMatrix(O,i,m,Q,H),M.setMatrix(H),M}static recommendVersion(r,i,o,a){const c=this.calculateBitsNeeded(i,o,a,ue.getVersionForNumber(1)),f=this.chooseVersion(c,r),h=this.calculateBitsNeeded(i,o,a,f);return this.chooseVersion(h,r)}static calculateBitsNeeded(r,i,o,a){return i.getSize()+r.getCharacterCountBits(a)+o.getSize()}static getAlphanumericCode(r){return r<Qe.ALPHANUMERIC_TABLE.length?Qe.ALPHANUMERIC_TABLE[r]:-1}static chooseMode(r,i=null){if(z.SJIS.getName()===i&&this.isOnlyDoubleByteKanji(r))return he.KANJI;let o=!1,a=!1;for(let c=0,f=r.length;c<f;++c){const h=r.charAt(c);if(Qe.isDigit(h))o=!0;else if(this.getAlphanumericCode(h.charCodeAt(0))!==-1)a=!0;else return he.BYTE}return a?he.ALPHANUMERIC:o?he.NUMERIC:he.BYTE}static isOnlyDoubleByteKanji(r){let i;try{i=Se.encode(r,z.SJIS)}catch{return!1}const o=i.length;if(o%2!==0)return!1;for(let a=0;a<o;a+=2){const c=i[a]&255;if((c<129||c>159)&&(c<224||c>235))return!1}return!0}static chooseMaskPattern(r,i,o,a){let c=Number.MAX_SAFE_INTEGER,f=-1;for(let h=0;h<fi.NUM_MASK_PATTERNS;h++){ge.buildMatrix(r,i,o,h,a);let g=this.calculateMaskPenalty(a);g<c&&(c=g,f=h)}return f}static chooseVersion(r,i){for(let o=1;o<=40;o++){const a=ue.getVersionForNumber(o);if(Qe.willFit(r,a,i))return a}throw new ze("Data too big")}static willFit(r,i,o){const a=i.getTotalCodewords(),f=i.getECBlocksForLevel(o).getTotalECCodewords(),h=a-f,g=(r+7)/8;return h>=g}static terminateBits(r,i){const o=r*8;if(i.getSize()>o)throw new ze("data bits cannot fit in the QR Code"+i.getSize()+" > "+o);for(let f=0;f<4&&i.getSize()<o;++f)i.appendBit(!1);const a=i.getSize()&7;if(a>0)for(let f=a;f<8;f++)i.appendBit(!1);const c=r-i.getSizeInBytes();for(let f=0;f<c;++f)i.appendBits(f&1?17:236,8);if(i.getSize()!==o)throw new ze("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(r,i,o,a,c,f){if(a>=o)throw new ze("Block ID too large");const h=r%o,g=o-h,m=Math.floor(r/o),y=m+1,E=Math.floor(i/o),S=E+1,T=m-E,O=y-S;if(T!==O)throw new ze("EC bytes mismatch");if(o!==g+h)throw new ze("RS blocks mismatch");if(r!==(E+T)*g+(S+O)*h)throw new ze("Total bytes mismatch");a<g?(c[0]=E,f[0]=T):(c[0]=S,f[0]=O)}static interleaveWithECBytes(r,i,o,a){if(r.getSizeInBytes()!==o)throw new ze("Number of bits and data bytes does not match");let c=0,f=0,h=0;const g=new Array;for(let y=0;y<a;++y){const E=new Int32Array(1),S=new Int32Array(1);Qe.getNumDataBytesAndNumECBytesForBlockID(i,o,a,y,E,S);const T=E[0],O=new Uint8Array(T);r.toBytes(8*c,O,0,T);const M=Qe.generateECBytes(O,S[0]);g.push(new dx(O,M)),f=Math.max(f,T),h=Math.max(h,M.length),c+=E[0]}if(o!==c)throw new ze("Data bytes does not match offset");const m=new P;for(let y=0;y<f;++y)for(const E of g){const S=E.getDataBytes();y<S.length&&m.appendBits(S[y],8)}for(let y=0;y<h;++y)for(const E of g){const S=E.getErrorCorrectionBytes();y<S.length&&m.appendBits(S[y],8)}if(i!==m.getSizeInBytes())throw new ze("Interleaving error: "+i+" and "+m.getSizeInBytes()+" differ.");return m}static generateECBytes(r,i){const o=r.length,a=new Int32Array(o+i);for(let f=0;f<o;f++)a[f]=r[f]&255;new Tc(Me.QR_CODE_FIELD_256).encode(a,i);const c=new Uint8Array(i);for(let f=0;f<i;f++)c[f]=a[o+f];return c}static appendModeInfo(r,i){i.appendBits(r.getBits(),4)}static appendLengthInfo(r,i,o,a){const c=o.getCharacterCountBits(i);if(r>=1<<c)throw new ze(r+" is bigger than "+((1<<c)-1));a.appendBits(r,c)}static appendBytes(r,i,o,a){switch(i){case he.NUMERIC:Qe.appendNumericBytes(r,o);break;case he.ALPHANUMERIC:Qe.appendAlphanumericBytes(r,o);break;case he.BYTE:Qe.append8BitBytes(r,o,a);break;case he.KANJI:Qe.appendKanjiBytes(r,o);break;default:throw new ze("Invalid mode: "+i)}}static getDigit(r){return r.charCodeAt(0)-48}static isDigit(r){const i=Qe.getDigit(r);return i>=0&&i<=9}static appendNumericBytes(r,i){const o=r.length;let a=0;for(;a<o;){const c=Qe.getDigit(r.charAt(a));if(a+2<o){const f=Qe.getDigit(r.charAt(a+1)),h=Qe.getDigit(r.charAt(a+2));i.appendBits(c*100+f*10+h,10),a+=3}else if(a+1<o){const f=Qe.getDigit(r.charAt(a+1));i.appendBits(c*10+f,7),a+=2}else i.appendBits(c,4),a++}}static appendAlphanumericBytes(r,i){const o=r.length;let a=0;for(;a<o;){const c=Qe.getAlphanumericCode(r.charCodeAt(a));if(c===-1)throw new ze;if(a+1<o){const f=Qe.getAlphanumericCode(r.charCodeAt(a+1));if(f===-1)throw new ze;i.appendBits(c*45+f,11),a+=2}else i.appendBits(c,6),a++}}static append8BitBytes(r,i,o){let a;try{a=Se.encode(r,o)}catch(c){throw new ze(c)}for(let c=0,f=a.length;c!==f;c++){const h=a[c];i.appendBits(h,8)}}static appendKanjiBytes(r,i){let o;try{o=Se.encode(r,z.SJIS)}catch(c){throw new ze(c)}const a=o.length;for(let c=0;c<a;c+=2){const f=o[c]&255,h=o[c+1]&255,g=f<<8&4294967295|h;let m=-1;if(g>=33088&&g<=40956?m=g-33088:g>=57408&&g<=60351&&(m=g-49472),m===-1)throw new ze("Invalid byte sequence");const y=(m>>8)*192+(m&255);i.appendBits(y,13)}}static appendECI(r,i){i.appendBits(he.ECI.getBits(),4),i.appendBits(r.getValue(),8)}}Qe.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Qe.DEFAULT_BYTE_MODE_ENCODING=z.UTF8.getName();class hi{write(r,i,o,a=null){if(r.length===0)throw new C("Found empty contents");if(i<0||o<0)throw new C("Requested dimensions are too small: "+i+"x"+o);let c=Ye.L,f=hi.QUIET_ZONE_SIZE;a!==null&&(a.get(Ct.ERROR_CORRECTION)!==void 0&&(c=Ye.fromString(a.get(Ct.ERROR_CORRECTION).toString())),a.get(Ct.MARGIN)!==void 0&&(f=Number.parseInt(a.get(Ct.MARGIN).toString(),10)));const h=Qe.encode(r,c,a);return this.renderResult(h,i,o,f)}writeToDom(r,i,o,a,c=null){typeof r=="string"&&(r=document.querySelector(r));const f=this.write(i,o,a,c);r&&r.appendChild(f)}renderResult(r,i,o,a){const c=r.getMatrix();if(c===null)throw new qn;const f=c.getWidth(),h=c.getHeight(),g=f+a*2,m=h+a*2,y=Math.max(i,g),E=Math.max(o,m),S=Math.min(Math.floor(y/g),Math.floor(E/m)),T=Math.floor((y-f*S)/2),O=Math.floor((E-h*S)/2),M=this.createSVGElement(y,E);for(let L=0,H=O;L<h;L++,H+=S)for(let Q=0,q=T;Q<f;Q++,q+=S)if(c.get(Q,L)===1){const Y=this.createSvgRectElement(q,H,S,S);M.appendChild(Y)}return M}createSVGElement(r,i){const o=document.createElementNS(hi.SVG_NS,"svg");return o.setAttributeNS(null,"height",r.toString()),o.setAttributeNS(null,"width",i.toString()),o}createSvgRectElement(r,i,o,a){const c=document.createElementNS(hi.SVG_NS,"rect");return c.setAttributeNS(null,"x",r.toString()),c.setAttributeNS(null,"y",i.toString()),c.setAttributeNS(null,"height",o.toString()),c.setAttributeNS(null,"width",a.toString()),c.setAttributeNS(null,"fill","#000000"),c}}hi.QUIET_ZONE_SIZE=4,hi.SVG_NS="http://www.w3.org/2000/svg";class Hi{encode(r,i,o,a,c){if(r.length===0)throw new C("Found empty contents");if(i!==ae.QR_CODE)throw new C("Can only encode QR_CODE, but got "+i);if(o<0||a<0)throw new C(`Requested dimensions are too small: ${o}x${a}`);let f=Ye.L,h=Hi.QUIET_ZONE_SIZE;c!==null&&(c.get(Ct.ERROR_CORRECTION)!==void 0&&(f=Ye.fromString(c.get(Ct.ERROR_CORRECTION).toString())),c.get(Ct.MARGIN)!==void 0&&(h=Number.parseInt(c.get(Ct.MARGIN).toString(),10)));const g=Qe.encode(r,f,c);return Hi.renderResult(g,o,a,h)}static renderResult(r,i,o,a){const c=r.getMatrix();if(c===null)throw new qn;const f=c.getWidth(),h=c.getHeight(),g=f+a*2,m=h+a*2,y=Math.max(i,g),E=Math.max(o,m),S=Math.min(Math.floor(y/g),Math.floor(E/m)),T=Math.floor((y-f*S)/2),O=Math.floor((E-h*S)/2),M=new it(y,E);for(let L=0,H=O;L<h;L++,H+=S)for(let Q=0,q=T;Q<f;Q++,q+=S)c.get(Q,L)===1&&M.setRegion(q,H,S,S);return M}}Hi.QUIET_ZONE_SIZE=4;class gx{encode(r,i,o,a,c){let f;switch(i){case ae.QR_CODE:f=new Hi;break;default:throw new C("No encoder available for format "+i)}return f.encode(r,i,o,a,c)}}class tr extends ne{constructor(r,i,o,a,c,f,h,g){if(super(f,h),this.yuvData=r,this.dataWidth=i,this.dataHeight=o,this.left=a,this.top=c,a+f>i||c+h>o)throw new C("Crop rectangle does not fit within image data.");g&&this.reverseHorizontal(f,h)}getRow(r,i){if(r<0||r>=this.getHeight())throw new C("Requested row is outside the image: "+r);const o=this.getWidth();(i==null||i.length<o)&&(i=new Uint8ClampedArray(o));const a=(r+this.top)*this.dataWidth+this.left;return B.arraycopy(this.yuvData,a,i,0,o),i}getMatrix(){const r=this.getWidth(),i=this.getHeight();if(r===this.dataWidth&&i===this.dataHeight)return this.yuvData;const o=r*i,a=new Uint8ClampedArray(o);let c=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return B.arraycopy(this.yuvData,c,a,0,o),a;for(let f=0;f<i;f++){const h=f*r;B.arraycopy(this.yuvData,c,a,h,r),c+=this.dataWidth}return a}isCropSupported(){return!0}crop(r,i,o,a){return new tr(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+i,o,a,!1)}renderThumbnail(){const r=this.getWidth()/tr.THUMBNAIL_SCALE_FACTOR,i=this.getHeight()/tr.THUMBNAIL_SCALE_FACTOR,o=new Int32Array(r*i),a=this.yuvData;let c=this.top*this.dataWidth+this.left;for(let f=0;f<i;f++){const h=f*r;for(let g=0;g<r;g++){const m=a[c+g*tr.THUMBNAIL_SCALE_FACTOR]&255;o[h+g]=4278190080|m*65793}c+=this.dataWidth*tr.THUMBNAIL_SCALE_FACTOR}return o}getThumbnailWidth(){return this.getWidth()/tr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/tr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(r,i){const o=this.yuvData;for(let a=0,c=this.top*this.dataWidth+this.left;a<i;a++,c+=this.dataWidth){const f=c+r/2;for(let h=c,g=c+r-1;h<f;h++,g--){const m=o[h];o[h]=o[g],o[g]=m}}}invert(){return new de(this)}}tr.THUMBNAIL_SCALE_FACTOR=2;class Nc extends ne{constructor(r,i,o,a,c,f,h){if(super(i,o),this.dataWidth=a,this.dataHeight=c,this.left=f,this.top=h,r.BYTES_PER_ELEMENT===4){const g=i*o,m=new Uint8ClampedArray(g);for(let y=0;y<g;y++){const E=r[y],S=E>>16&255,T=E>>7&510,O=E&255;m[y]=(S+T+O)/4&255}this.luminances=m}else this.luminances=r;if(a===void 0&&(this.dataWidth=i),c===void 0&&(this.dataHeight=o),f===void 0&&(this.left=0),h===void 0&&(this.top=0),this.left+i>this.dataWidth||this.top+o>this.dataHeight)throw new C("Crop rectangle does not fit within image data.")}getRow(r,i){if(r<0||r>=this.getHeight())throw new C("Requested row is outside the image: "+r);const o=this.getWidth();(i==null||i.length<o)&&(i=new Uint8ClampedArray(o));const a=(r+this.top)*this.dataWidth+this.left;return B.arraycopy(this.luminances,a,i,0,o),i}getMatrix(){const r=this.getWidth(),i=this.getHeight();if(r===this.dataWidth&&i===this.dataHeight)return this.luminances;const o=r*i,a=new Uint8ClampedArray(o);let c=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return B.arraycopy(this.luminances,c,a,0,o),a;for(let f=0;f<i;f++){const h=f*r;B.arraycopy(this.luminances,c,a,h,r),c+=this.dataWidth}return a}isCropSupported(){return!0}crop(r,i,o,a){return new Nc(this.luminances,o,a,this.dataWidth,this.dataHeight,this.left+r,this.top+i)}invert(){return new de(this)}}class A1 extends z{static forName(r){return this.getCharacterSetECIByName(r)}}class Rc{}Rc.ISO_8859_1=z.ISO8859_1;class S1{isCompact(){return this.compact}setCompact(r){this.compact=r}getSize(){return this.size}setSize(r){this.size=r}getLayers(){return this.layers}setLayers(r){this.layers=r}getCodeWords(){return this.codeWords}setCodeWords(r){this.codeWords=r}getMatrix(){return this.matrix}setMatrix(r){this.matrix=r}}class v1{static singletonList(r){return[r]}static min(r,i){return r.sort(i)[0]}}class px{constructor(r){this.previous=r}getPrevious(){return this.previous}}class Wi extends px{constructor(r,i,o){super(r),this.value=i,this.bitCount=o}appendTo(r,i){r.appendBits(this.value,this.bitCount)}add(r,i){return new Wi(this,r,i)}addBinaryShift(r,i){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Wi(this,r,i)}toString(){let r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+R.toBinaryString(r|1<<this.bitCount).substring(1)+">"}}class bc extends Wi{constructor(r,i,o){super(r,0,0),this.binaryShiftStart=i,this.binaryShiftByteCount=o}appendTo(r,i){for(let o=0;o<this.binaryShiftByteCount;o++)(o===0||o===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):o===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(i[this.binaryShiftStart+o],8)}addBinaryShift(r,i){return new bc(this,r,i)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function mx(_,r,i){return new bc(_,r,i)}function Ks(_,r,i){return new Wi(_,r,i)}const xx=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],kr=0,_l=1,Rn=2,I1=3,nr=4,wx=new Wi(null,0,0),Oc=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function yx(_){for(let r of _)N.fill(r,-1);return _[kr][nr]=0,_[_l][nr]=0,_[_l][kr]=28,_[I1][nr]=0,_[Rn][nr]=0,_[Rn][kr]=15,_}const T1=yx(N.createInt32Array(6,6));class rr{constructor(r,i,o,a){this.token=r,this.mode=i,this.binaryShiftByteCount=o,this.bitCount=a}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(r,i){let o=this.bitCount,a=this.token;if(r!==this.mode){let f=Oc[this.mode][r];a=Ks(a,f&65535,f>>16),o+=f>>16}let c=r===Rn?4:5;return a=Ks(a,i,c),new rr(a,r,0,o+c)}shiftAndAppend(r,i){let o=this.token,a=this.mode===Rn?4:5;return o=Ks(o,T1[this.mode][r],a),o=Ks(o,i,5),new rr(o,this.mode,0,this.bitCount+a+5)}addBinaryShiftChar(r){let i=this.token,o=this.mode,a=this.bitCount;if(this.mode===nr||this.mode===Rn){let h=Oc[o][kr];i=Ks(i,h&65535,h>>16),a+=h>>16,o=kr}let c=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,f=new rr(i,o,this.binaryShiftByteCount+1,a+c);return f.binaryShiftByteCount===2078&&(f=f.endBinaryShift(r+1)),f}endBinaryShift(r){if(this.binaryShiftByteCount===0)return this;let i=this.token;return i=mx(i,r-this.binaryShiftByteCount,this.binaryShiftByteCount),new rr(i,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(r){let i=this.bitCount+(Oc[this.mode][r.mode]>>16);return this.binaryShiftByteCount<r.binaryShiftByteCount?i+=rr.calculateBinaryShiftCost(r)-rr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>r.binaryShiftByteCount&&r.binaryShiftByteCount>0&&(i+=10),i<=r.bitCount}toBitArray(r){let i=[];for(let a=this.endBinaryShift(r.length).token;a!==null;a=a.getPrevious())i.unshift(a);let o=new P;for(const a of i)a.appendTo(o,r);return o}toString(){return ce.format("%s bits=%d bytes=%d",xx[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(r){return r.binaryShiftByteCount>62?21:r.binaryShiftByteCount>31?20:r.binaryShiftByteCount>0?10:0}}rr.INITIAL_STATE=new rr(wx,kr,0,0);function _x(_){const r=ce.getCharCode(" "),i=ce.getCharCode("."),o=ce.getCharCode(",");_[kr][r]=1;const a=ce.getCharCode("Z"),c=ce.getCharCode("A");for(let S=c;S<=a;S++)_[kr][S]=S-c+2;_[_l][r]=1;const f=ce.getCharCode("z"),h=ce.getCharCode("a");for(let S=h;S<=f;S++)_[_l][S]=S-h+2;_[Rn][r]=1;const g=ce.getCharCode("9"),m=ce.getCharCode("0");for(let S=m;S<=g;S++)_[Rn][S]=S-m+2;_[Rn][o]=12,_[Rn][i]=13;const y=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let S=0;S<y.length;S++)_[I1][ce.getCharCode(y[S])]=S;const E=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let S=0;S<E.length;S++)ce.getCharCode(E[S])>0&&(_[nr][ce.getCharCode(E[S])]=S);return _}const Dc=_x(N.createInt32Array(5,256));class Zs{constructor(r){this.text=r}encode(){const r=ce.getCharCode(" "),i=ce.getCharCode(`
`);let o=v1.singletonList(rr.INITIAL_STATE);for(let c=0;c<this.text.length;c++){let f,h=c+1<this.text.length?this.text[c+1]:0;switch(this.text[c]){case ce.getCharCode("\r"):f=h===i?2:0;break;case ce.getCharCode("."):f=h===r?3:0;break;case ce.getCharCode(","):f=h===r?4:0;break;case ce.getCharCode(":"):f=h===r?5:0;break;default:f=0}f>0?(o=Zs.updateStateListForPair(o,c,f),c++):o=this.updateStateListForChar(o,c)}return v1.min(o,(c,f)=>c.getBitCount()-f.getBitCount()).toBitArray(this.text)}updateStateListForChar(r,i){const o=[];for(let a of r)this.updateStateForChar(a,i,o);return Zs.simplifyStates(o)}updateStateForChar(r,i,o){let a=this.text[i]&255,c=Dc[r.getMode()][a]>0,f=null;for(let h=0;h<=nr;h++){let g=Dc[h][a];if(g>0){if(f==null&&(f=r.endBinaryShift(i)),!c||h===r.getMode()||h===Rn){const m=f.latchAndAppend(h,g);o.push(m)}if(!c&&T1[r.getMode()][h]>=0){const m=f.shiftAndAppend(h,g);o.push(m)}}}if(r.getBinaryShiftByteCount()>0||Dc[r.getMode()][a]===0){let h=r.addBinaryShiftChar(i);o.push(h)}}static updateStateListForPair(r,i,o){const a=[];for(let c of r)this.updateStateForPair(c,i,o,a);return this.simplifyStates(a)}static updateStateForPair(r,i,o,a){let c=r.endBinaryShift(i);if(a.push(c.latchAndAppend(nr,o)),r.getMode()!==nr&&a.push(c.shiftAndAppend(nr,o)),o===3||o===4){let f=c.latchAndAppend(Rn,16-o).latchAndAppend(Rn,1);a.push(f)}if(r.getBinaryShiftByteCount()>0){let f=r.addBinaryShiftChar(i).addBinaryShiftChar(i+1);a.push(f)}}static simplifyStates(r){let i=[];for(const o of r){let a=!0;for(const c of i){if(c.isBetterThanOrEqualTo(o)){a=!1;break}o.isBetterThanOrEqualTo(c)&&(i=i.filter(f=>f!==c))}a&&i.push(o)}return i}}class Oe{constructor(){}static encodeBytes(r){return Oe.encode(r,Oe.DEFAULT_EC_PERCENT,Oe.DEFAULT_AZTEC_LAYERS)}static encode(r,i,o){let a=new Zs(r).encode(),c=R.truncDivision(a.getSize()*i,100)+11,f=a.getSize()+c,h,g,m,y,E;if(o!==Oe.DEFAULT_AZTEC_LAYERS){if(h=o<0,g=Math.abs(o),g>(h?Oe.MAX_NB_BITS_COMPACT:Oe.MAX_NB_BITS))throw new C(ce.format("Illegal value %s for layers",o));m=Oe.totalBitsInLayer(g,h),y=Oe.WORD_SIZE[g];let Y=m-m%y;if(E=Oe.stuffBits(a,y),E.getSize()+c>Y)throw new C("Data to large for user specified layer");if(h&&E.getSize()>y*64)throw new C("Data to large for user specified layer")}else{y=0,E=null;for(let Y=0;;Y++){if(Y>Oe.MAX_NB_BITS)throw new C("Data too large for an Aztec code");if(h=Y<=3,g=h?Y+1:Y,m=Oe.totalBitsInLayer(g,h),f>m)continue;(E==null||y!==Oe.WORD_SIZE[g])&&(y=Oe.WORD_SIZE[g],E=Oe.stuffBits(a,y));let Ae=m-m%y;if(!(h&&E.getSize()>y*64)&&E.getSize()+c<=Ae)break}}let S=Oe.generateCheckWords(E,m,y),T=E.getSize()/y,O=Oe.generateModeMessage(h,g,T),M=(h?11:14)+g*4,L=new Int32Array(M),H;if(h){H=M;for(let Y=0;Y<L.length;Y++)L[Y]=Y}else{H=M+1+2*R.truncDivision(R.truncDivision(M,2)-1,15);let Y=R.truncDivision(M,2),Ae=R.truncDivision(H,2);for(let we=0;we<Y;we++){let ln=we+R.truncDivision(we,15);L[Y-we-1]=Ae-ln-1,L[Y+we]=Ae+ln+1}}let Q=new it(H);for(let Y=0,Ae=0;Y<g;Y++){let we=(g-Y)*4+(h?9:12);for(let ln=0;ln<we;ln++){let Vn=ln*2;for(let an=0;an<2;an++)S.get(Ae+Vn+an)&&Q.set(L[Y*2+an],L[Y*2+ln]),S.get(Ae+we*2+Vn+an)&&Q.set(L[Y*2+ln],L[M-1-Y*2-an]),S.get(Ae+we*4+Vn+an)&&Q.set(L[M-1-Y*2-an],L[M-1-Y*2-ln]),S.get(Ae+we*6+Vn+an)&&Q.set(L[M-1-Y*2-ln],L[Y*2+an])}Ae+=we*8}if(Oe.drawModeMessage(Q,h,H,O),h)Oe.drawBullsEye(Q,R.truncDivision(H,2),5);else{Oe.drawBullsEye(Q,R.truncDivision(H,2),7);for(let Y=0,Ae=0;Y<R.truncDivision(M,2)-1;Y+=15,Ae+=16)for(let we=R.truncDivision(H,2)&1;we<H;we+=2)Q.set(R.truncDivision(H,2)-Ae,we),Q.set(R.truncDivision(H,2)+Ae,we),Q.set(we,R.truncDivision(H,2)-Ae),Q.set(we,R.truncDivision(H,2)+Ae)}let q=new S1;return q.setCompact(h),q.setSize(H),q.setLayers(g),q.setCodeWords(T),q.setMatrix(Q),q}static drawBullsEye(r,i,o){for(let a=0;a<o;a+=2)for(let c=i-a;c<=i+a;c++)r.set(c,i-a),r.set(c,i+a),r.set(i-a,c),r.set(i+a,c);r.set(i-o,i-o),r.set(i-o+1,i-o),r.set(i-o,i-o+1),r.set(i+o,i-o),r.set(i+o,i-o+1),r.set(i+o,i+o-1)}static generateModeMessage(r,i,o){let a=new P;return r?(a.appendBits(i-1,2),a.appendBits(o-1,6),a=Oe.generateCheckWords(a,28,4)):(a.appendBits(i-1,5),a.appendBits(o-1,11),a=Oe.generateCheckWords(a,40,4)),a}static drawModeMessage(r,i,o,a){let c=R.truncDivision(o,2);if(i)for(let f=0;f<7;f++){let h=c-3+f;a.get(f)&&r.set(h,c-5),a.get(f+7)&&r.set(c+5,h),a.get(20-f)&&r.set(h,c+5),a.get(27-f)&&r.set(c-5,h)}else for(let f=0;f<10;f++){let h=c-5+f+R.truncDivision(f,5);a.get(f)&&r.set(h,c-7),a.get(f+10)&&r.set(c+7,h),a.get(29-f)&&r.set(h,c+7),a.get(39-f)&&r.set(c-7,h)}}static generateCheckWords(r,i,o){let a=r.getSize()/o,c=new Tc(Oe.getGF(o)),f=R.truncDivision(i,o),h=Oe.bitsToWords(r,o,f);c.encode(h,f-a);let g=i%o,m=new P;m.appendBits(0,g);for(const y of Array.from(h))m.appendBits(y,o);return m}static bitsToWords(r,i,o){let a=new Int32Array(o),c,f;for(c=0,f=r.getSize()/i;c<f;c++){let h=0;for(let g=0;g<i;g++)h|=r.get(c*i+g)?1<<i-g-1:0;a[c]=h}return a}static getGF(r){switch(r){case 4:return Me.AZTEC_PARAM;case 6:return Me.AZTEC_DATA_6;case 8:return Me.AZTEC_DATA_8;case 10:return Me.AZTEC_DATA_10;case 12:return Me.AZTEC_DATA_12;default:throw new C("Unsupported word size "+r)}}static stuffBits(r,i){let o=new P,a=r.getSize(),c=(1<<i)-2;for(let f=0;f<a;f+=i){let h=0;for(let g=0;g<i;g++)(f+g>=a||r.get(f+g))&&(h|=1<<i-1-g);(h&c)===c?(o.appendBits(h&c,i),f--):h&c?o.appendBits(h,i):(o.appendBits(h|1,i),f--)}return o}static totalBitsInLayer(r,i){return((i?88:112)+16*r)*r}}Oe.DEFAULT_EC_PERCENT=33,Oe.DEFAULT_AZTEC_LAYERS=0,Oe.MAX_NB_BITS=32,Oe.MAX_NB_BITS_COMPACT=4,Oe.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class El{encode(r,i,o,a){return this.encodeWithHints(r,i,o,a,null)}encodeWithHints(r,i,o,a,c){let f=Rc.ISO_8859_1,h=Oe.DEFAULT_EC_PERCENT,g=Oe.DEFAULT_AZTEC_LAYERS;return c!=null&&(c.has(Ct.CHARACTER_SET)&&(f=A1.forName(c.get(Ct.CHARACTER_SET).toString())),c.has(Ct.ERROR_CORRECTION)&&(h=R.parseInt(c.get(Ct.ERROR_CORRECTION).toString())),c.has(Ct.AZTEC_LAYERS)&&(g=R.parseInt(c.get(Ct.AZTEC_LAYERS).toString()))),El.encodeLayers(r,i,o,a,f,h,g)}static encodeLayers(r,i,o,a,c,f,h){if(i!==ae.AZTEC)throw new C("Can only encode AZTEC, but got "+i);let g=Oe.encode(ce.getBytes(r,c),f,h);return El.renderResult(g,o,a)}static renderResult(r,i,o){let a=r.getMatrix();if(a==null)throw new qn;let c=a.getWidth(),f=a.getHeight(),h=Math.max(i,c),g=Math.max(o,f),m=Math.min(h/c,g/f),y=(h-c*m)/2,E=(g-f*m)/2,S=new it(h,g);for(let T=0,O=E;T<f;T++,O+=m)for(let M=0,L=y;M<c;M++,L+=m)a.get(M,T)&&S.setRegion(L,O,m,m);return S}}n.AbstractExpandedDecoder=xc,n.ArgumentException=A,n.ArithmeticException=cl,n.AztecCode=S1,n.AztecCodeReader=hl,n.AztecCodeWriter=El,n.AztecDecoder=Xe,n.AztecDetector=u1,n.AztecDetectorResult=a1,n.AztecEncoder=Oe,n.AztecHighLevelEncoder=Zs,n.AztecPoint=Qt,n.BarcodeFormat=ae,n.Binarizer=k,n.BinaryBitmap=I,n.BitArray=P,n.BitMatrix=it,n.BitSource=Ec,n.BrowserAztecCodeReader=Xm,n.BrowserBarcodeReader=qm,n.BrowserCodeReader=vn,n.BrowserDatamatrixCodeReader=$m,n.BrowserMultiFormatReader=ux,n.BrowserPDF417Reader=fx,n.BrowserQRCodeReader=hx,n.BrowserQRCodeSvgWriter=hi,n.CharacterSetECI=z,n.ChecksumException=D,n.Code128Reader=$,n.Code39Reader=_t,n.DataMatrixDecodedBitStreamParser=br,n.DataMatrixReader=Or,n.DecodeHintType=G,n.DecoderResult=Fs,n.DefaultGridSampler=c1,n.DetectorResult=fl,n.EAN13Reader=li,n.EncodeHintType=Ct,n.Exception=w,n.FormatException=F,n.GenericGF=Me,n.GenericGFPoly=nn,n.GlobalHistogramBinarizer=je,n.GridSampler=dc,n.GridSamplerInstance=Nr,n.HTMLCanvasElementLuminanceSource=re,n.HybridBinarizer=xe,n.ITFReader=We,n.IllegalArgumentException=C,n.IllegalStateException=qn,n.InvertedLuminanceSource=de,n.LuminanceSource=ne,n.MathUtils=be,n.MultiFormatOneDReader=Ui,n.MultiFormatReader=C1,n.MultiFormatWriter=gx,n.NotFoundException=W,n.OneDReader=wt,n.PDF417DecodedBitStreamParser=V,n.PDF417DecoderErrorCorrection=m1,n.PDF417Reader=Pt,n.PDF417ResultMetadata=w1,n.PerspectiveTransform=Fn,n.PlanarYUVLuminanceSource=tr,n.QRCodeByteMatrix=yl,n.QRCodeDataMask=Tn,n.QRCodeDecodedBitStreamParser=ot,n.QRCodeDecoderErrorCorrectionLevel=Ye,n.QRCodeDecoderFormatInformation=Wt,n.QRCodeEncoder=Qe,n.QRCodeEncoderQRCode=fi,n.QRCodeMaskUtil=dt,n.QRCodeMatrixUtil=ge,n.QRCodeMode=he,n.QRCodeReader=Dr,n.QRCodeVersion=ue,n.QRCodeWriter=Hi,n.RGBLuminanceSource=Nc,n.RSS14Reader=ht,n.RSSExpandedReader=j,n.ReaderException=wl,n.ReedSolomonDecoder=Vs,n.ReedSolomonEncoder=Tc,n.ReedSolomonException=Pi,n.Result=st,n.ResultMetadataType=vt,n.ResultPoint=le,n.StringUtils=ce,n.UnsupportedOperationException=fe,n.VideoInputDevice=Re,n.WhiteRectangleDetector=fr,n.WriterException=ze,n.ZXingArrays=N,n.ZXingCharset=A1,n.ZXingInteger=R,n.ZXingStandardCharsets=Rc,n.ZXingStringBuilder=me,n.ZXingStringEncoding=Se,n.ZXingSystem=B,n.createAbstractExpandedDecoder=g1,Object.defineProperty(n,"__esModule",{value:!0})})})(Ef,Ef.exports);var lt=Ef.exports;const V_=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));var zd=function(){function t(e,n,s){if(this.formatMap=new Map([[se.QR_CODE,lt.BarcodeFormat.QR_CODE],[se.AZTEC,lt.BarcodeFormat.AZTEC],[se.CODABAR,lt.BarcodeFormat.CODABAR],[se.CODE_39,lt.BarcodeFormat.CODE_39],[se.CODE_93,lt.BarcodeFormat.CODE_93],[se.CODE_128,lt.BarcodeFormat.CODE_128],[se.DATA_MATRIX,lt.BarcodeFormat.DATA_MATRIX],[se.MAXICODE,lt.BarcodeFormat.MAXICODE],[se.ITF,lt.BarcodeFormat.ITF],[se.EAN_13,lt.BarcodeFormat.EAN_13],[se.EAN_8,lt.BarcodeFormat.EAN_8],[se.PDF_417,lt.BarcodeFormat.PDF_417],[se.RSS_14,lt.BarcodeFormat.RSS_14],[se.RSS_EXPANDED,lt.BarcodeFormat.RSS_EXPANDED],[se.UPC_A,lt.BarcodeFormat.UPC_A],[se.UPC_E,lt.BarcodeFormat.UPC_E],[se.UPC_EAN_EXTENSION,lt.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!V_)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=s;var l=this.createZXingFormats(e),u=new Map;u.set(lt.DecodeHintType.POSSIBLE_FORMATS,l),u.set(lt.DecodeHintType.TRY_HARDER,!1),this.hints=u}return t.prototype.decodeAsync=function(e){var n=this;return new Promise(function(s,l){try{s(n.decode(e))}catch(u){l(u)}})},t.prototype.decode=function(e){var n=new lt.MultiFormatReader(this.verbose,this.hints),s=new lt.HTMLCanvasElementLuminanceSource(e),l=new lt.BinaryBitmap(new lt.HybridBinarizer(s)),u=n.decode(l);return{text:u.text,format:w2.create(this.toHtml5QrcodeSupportedFormats(u.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,s,l){e.set(n,s)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var n=[],s=0,l=e;s<l.length;s++){var u=l[s];this.formatMap.has(u)?n.push(this.formatMap.get(u)):this.logger.logError("".concat(u," is not supported by")+"ZXingHtml5QrcodeShim")}return n},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),H_=function(t,e,n,s){function l(u){return u instanceof n?u:new n(function(d){d(u)})}return new(n||(n=Promise))(function(u,d){function p(A){try{w(s.next(A))}catch(C){d(C)}}function x(A){try{w(s.throw(A))}catch(C){d(C)}}function w(A){A.done?u(A.value):l(A.value).then(p,x)}w((s=s.apply(t,e||[])).next())})},W_=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},s,l,u,d;return d={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function p(w){return function(A){return x([w,A])}}function x(w){if(s)throw new TypeError("Generator is already executing.");for(;d&&(d=0,w[0]&&(n=0)),n;)try{if(s=1,l&&(u=w[0]&2?l.return:w[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,w[1])).done)return u;switch(l=0,u&&(w=[w[0]&2,u.value]),w[0]){case 0:case 1:u=w;break;case 4:return n.label++,{value:w[1],done:!1};case 5:n.label++,l=w[1],w=[0];continue;case 7:w=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(w[0]===6||w[0]===2)){n=0;continue}if(w[0]===3&&(!u||w[1]>u[0]&&w[1]<u[3])){n.label=w[1];break}if(w[0]===6&&n.label<u[1]){n.label=u[1],u=w;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(w);break}u[2]&&n.ops.pop(),n.trys.pop();continue}w=e.call(t,n)}catch(A){w=[6,A],l=0}finally{s=u=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},Gd=function(){function t(e,n,s){if(this.formatMap=new Map([[se.QR_CODE,"qr_code"],[se.AZTEC,"aztec"],[se.CODABAR,"codabar"],[se.CODE_39,"code_39"],[se.CODE_93,"code_93"],[se.CODE_128,"code_128"],[se.DATA_MATRIX,"data_matrix"],[se.ITF,"itf"],[se.EAN_13,"ean_13"],[se.EAN_8,"ean_8"],[se.PDF_417,"pdf417"],[se.UPC_A,"upc_a"],[se.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=s;var l=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(l),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return H_(this,void 0,void 0,function(){var n,s;return W_(this,function(l){switch(l.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=l.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return s=this.selectLargestBarcode(n),[2,{text:s.rawValue,format:w2.create(this.toHtml5QrcodeSupportedFormats(s.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var n=null,s=0,l=0,u=e;l<u.length;l++){var d=u[l],p=d.boundingBox.width*d.boundingBox.height;p>s&&(s=p,n=d)}if(!n)throw"No largest barcode found";return n},t.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],s=0,l=e;s<l.length;s++){var u=l[s];this.formatMap.has(u)?n.push(this.formatMap.get(u)):this.logger.warn("".concat(u," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,s,l){e.set(n,s)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),jd=function(t,e,n,s){function l(u){return u instanceof n?u:new n(function(d){d(u)})}return new(n||(n=Promise))(function(u,d){function p(A){try{w(s.next(A))}catch(C){d(C)}}function x(A){try{w(s.throw(A))}catch(C){d(C)}}function w(A){A.done?u(A.value):l(A.value).then(p,x)}w((s=s.apply(t,e||[])).next())})},Xd=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},s,l,u,d;return d={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function p(w){return function(A){return x([w,A])}}function x(w){if(s)throw new TypeError("Generator is already executing.");for(;d&&(d=0,w[0]&&(n=0)),n;)try{if(s=1,l&&(u=w[0]&2?l.return:w[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,w[1])).done)return u;switch(l=0,u&&(w=[w[0]&2,u.value]),w[0]){case 0:case 1:u=w;break;case 4:return n.label++,{value:w[1],done:!1};case 5:n.label++,l=w[1],w=[0];continue;case 7:w=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(w[0]===6||w[0]===2)){n=0;continue}if(w[0]===3&&(!u||w[1]>u[0]&&w[1]<u[3])){n.label=w[1];break}if(w[0]===6&&n.label<u[1]){n.label=u[1],u=w;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(w);break}u[2]&&n.ops.pop(),n.trys.pop();continue}w=e.call(t,n)}catch(A){w=[6,A],l=0}finally{s=u=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},z_=function(){function t(e,n,s,l){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=s,n&&Gd.isSupported()?(this.primaryDecoder=new Gd(e,s,l),this.secondaryDecoder=new zd(e,s,l)):this.primaryDecoder=new zd(e,s,l)}return t.prototype.decodeAsync=function(e){return jd(this,void 0,void 0,function(){var n;return Xd(this,function(s){switch(s.label){case 0:n=performance.now(),s.label=1;case 1:return s.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,s.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return jd(this,void 0,void 0,function(){var n,s;return Xd(this,function(l){switch(l.label){case 0:n=performance.now(),l.label=1;case 1:return l.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,l.sent()];case 3:if(s=l.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw s;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,s=this.executionResults;n<s.length;n++){var l=s[n];e+=l}var u=e/this.executionResults.length;console.log("".concat(u," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),Bh=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(s[u]=l[u])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function s(){this.constructor=e}e.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}}(),Na=function(t,e,n,s){function l(u){return u instanceof n?u:new n(function(d){d(u)})}return new(n||(n=Promise))(function(u,d){function p(A){try{w(s.next(A))}catch(C){d(C)}}function x(A){try{w(s.throw(A))}catch(C){d(C)}}function w(A){A.done?u(A.value):l(A.value).then(p,x)}w((s=s.apply(t,e||[])).next())})},Ra=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},s,l,u,d;return d={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function p(w){return function(A){return x([w,A])}}function x(w){if(s)throw new TypeError("Generator is already executing.");for(;d&&(d=0,w[0]&&(n=0)),n;)try{if(s=1,l&&(u=w[0]&2?l.return:w[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,w[1])).done)return u;switch(l=0,u&&(w=[w[0]&2,u.value]),w[0]){case 0:case 1:u=w;break;case 4:return n.label++,{value:w[1],done:!1};case 5:n.label++,l=w[1],w=[0];continue;case 7:w=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(w[0]===6||w[0]===2)){n=0;continue}if(w[0]===3&&(!u||w[1]>u[0]&&w[1]<u[3])){n.label=w[1];break}if(w[0]===6&&n.label<u[1]){n.label=u[1],u=w;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(w);break}u[2]&&n.ops.pop(),n.trys.pop();continue}w=e.call(t,n)}catch(A){w=[6,A],l=0}finally{s=u=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},_2=function(){function t(e,n){this.name=e,this.track=n}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var n={};n[this.name]=e;var s={advanced:[n]};return this.track.applyConstraints(s)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},t}(),G_=function(t){Bh(e,t);function e(n,s){return t.call(this,n,s)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var s={};s[this.name]=n;var l={advanced:[s]};return this.track.applyConstraints(l)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),s=n[this.name];return{min:s.min,max:s.max,step:s.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(_2),j_=function(t){Bh(e,t);function e(n){return t.call(this,"zoom",n)||this}return e}(G_),X_=function(t){Bh(e,t);function e(n){return t.call(this,"torch",n)||this}return e}(_2),Y_=function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new j_(this.track)},t.prototype.torchFeature=function(){return new X_(this.track)},t}(),K_=function(){function t(e,n,s){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=s,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var s=e.surface.clientWidth,l=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(s,l),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,n,s,l){return Na(this,void 0,void 0,function(){var u,d;return Ra(this,function(p){switch(p.label){case 0:return u=new t(e,n,l),s.aspectRatio?(d={aspectRatio:s.aspectRatio},[4,u.getFirstTrackOrFail().applyConstraints(d)]):[3,2];case 1:p.sent(),p.label=2;case 2:return u.setupSurface(),[2,u]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var n=this,s=function(){setTimeout(e,200),n.surface.removeEventListener("playing",s)};this.surface.addEventListener("playing",s),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return Na(this,void 0,void 0,function(){return Ra(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,s){var l=e.mediaStream.getVideoTracks(),u=l.length,d=0;e.mediaStream.getVideoTracks().forEach(function(p){e.mediaStream.removeTrack(p),p.stop(),++d,d>=u&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},t.prototype.getCapabilities=function(){return new Y_(this.getFirstTrackOrFail())},t}(),Z_=function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,n,s){return Na(this,void 0,void 0,function(){return Ra(this,function(l){return[2,K_.create(e,this.mediaStream,n,s)]})})},t.create=function(e){return Na(this,void 0,void 0,function(){var n,s;return Ra(this,function(l){switch(l.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return s=l.sent(),[2,new t(s)]}})})},t}(),Yd=function(t,e,n,s){function l(u){return u instanceof n?u:new n(function(d){d(u)})}return new(n||(n=Promise))(function(u,d){function p(A){try{w(s.next(A))}catch(C){d(C)}}function x(A){try{w(s.throw(A))}catch(C){d(C)}}function w(A){A.done?u(A.value):l(A.value).then(p,x)}w((s=s.apply(t,e||[])).next())})},Kd=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},s,l,u,d;return d={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function p(w){return function(A){return x([w,A])}}function x(w){if(s)throw new TypeError("Generator is already executing.");for(;d&&(d=0,w[0]&&(n=0)),n;)try{if(s=1,l&&(u=w[0]&2?l.return:w[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,w[1])).done)return u;switch(l=0,u&&(w=[w[0]&2,u.value]),w[0]){case 0:case 1:u=w;break;case 4:return n.label++,{value:w[1],done:!1};case 5:n.label++,l=w[1],w=[0];continue;case 7:w=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(w[0]===6||w[0]===2)){n=0;continue}if(w[0]===3&&(!u||w[1]>u[0]&&w[1]<u[3])){n.label=w[1];break}if(w[0]===6&&n.label<u[1]){n.label=u[1],u=w;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(w);break}u[2]&&n.ops.pop(),n.trys.pop();continue}w=e.call(t,n)}catch(A){w=[6,A],l=0}finally{s=u=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},Q_=function(){function t(){}return t.failIfNotSupported=function(){return Yd(this,void 0,void 0,function(){return Kd(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return Yd(this,void 0,void 0,function(){return Kd(this,function(n){return[2,Z_.create(e)]})})},t}(),q_=function(t,e,n,s){function l(u){return u instanceof n?u:new n(function(d){d(u)})}return new(n||(n=Promise))(function(u,d){function p(A){try{w(s.next(A))}catch(C){d(C)}}function x(A){try{w(s.throw(A))}catch(C){d(C)}}function w(A){A.done?u(A.value):l(A.value).then(p,x)}w((s=s.apply(t,e||[])).next())})},J_=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},s,l,u,d;return d={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function p(w){return function(A){return x([w,A])}}function x(w){if(s)throw new TypeError("Generator is already executing.");for(;d&&(d=0,w[0]&&(n=0)),n;)try{if(s=1,l&&(u=w[0]&2?l.return:w[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,w[1])).done)return u;switch(l=0,u&&(w=[w[0]&2,u.value]),w[0]){case 0:case 1:u=w;break;case 4:return n.label++,{value:w[1],done:!1};case 5:n.label++,l=w[1],w=[0];continue;case 7:w=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(w[0]===6||w[0]===2)){n=0;continue}if(w[0]===3&&(!u||w[1]>u[0]&&w[1]<u[3])){n.label=w[1];break}if(w[0]===6&&n.label<u[1]){n.label=u[1],u=w;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(w);break}u[2]&&n.ops.pop(),n.trys.pop();continue}w=e.call(t,n)}catch(A){w=[6,A],l=0}finally{s=u=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},$_=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=ss.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=ss.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return q_(this,void 0,void 0,function(){var e,n,s,l,u,d,p;return J_(this,function(x){switch(x.label){case 0:return e=function(w){for(var A=w.getVideoTracks(),C=0,I=A;C<I.length;C++){var D=I[C];D.enabled=!1,D.stop(),w.removeTrack(D)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=x.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(s=x.sent(),l=[],u=0,d=s;u<d.length;u++)p=d[u],p.kind==="videoinput"&&l.push({id:p.deviceId,label:p.label});return e(n),[2,l]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var s=function(u){for(var d=[],p=0,x=u;p<x.length;p++){var w=x[p];w.kind==="video"&&d.push({id:w.id,label:w.label})}e(d)},l=MediaStreamTrack;l.getSources(s)})},t}(),gt;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(gt||(gt={}));var eE=function(){function t(){this.state=gt.NOT_STARTED,this.onGoingTransactionNewState=gt.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===gt.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=gt.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===gt.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=gt.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==gt.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case gt.UNKNOWN:throw"Transition from unknown is not allowed";case gt.NOT_STARTED:this.failIfNewStateIs(e,[gt.PAUSED]);break;case gt.SCANNING:break;case gt.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,n){for(var s=0,l=n;s<l.length;s++){var u=l[s];if(e===u)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t}(),tE=function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===gt.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==gt.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===gt.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===gt.PAUSED},t}(),nE=function(){function t(){}return t.create=function(){return new tE(new eE)},t}(),rE=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(s[u]=l[u])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function s(){this.constructor=e}e.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}}(),mn=function(t){rE(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(L_),iE=function(){function t(e,n){this.logger=n,this.fps=mn.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=mn.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?y2.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!hr(this.qrbox)},t.create=function(e,n){return new t(e,n)},t}(),sE=function(){function t(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var s;typeof n=="boolean"?this.verbose=n===!0:n&&(s=n,this.verbose=s.verbose===!0,s.experimentalFeatures),this.logger=new U_(this.verbose),this.qrcode=new z_(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(s),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=nE.create()}return t.prototype.start=function(e,n,s,l){var u=this;if(!e)throw"cameraIdOrConfig is required";if(!s||typeof s!="function")throw"qrCodeSuccessCallback is required and should be a function.";var d;l?d=l:d=this.verbose?this.logger.log:function(){};var p=iE.create(n,this.logger);this.clearElement();var x=!1;p.videoConstraints&&(p.isMediaStreamConstraintsValid()?x=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var w=x,A=document.getElementById(this.elementId);A.clientWidth?A.clientWidth:mn.DEFAULT_WIDTH,A.style.position="relative",this.shouldScan=!0,this.element=A;var C=this,I=this.stateManagerProxy.startTransition(gt.SCANNING);return new Promise(function(D,k){var B=w?p.videoConstraints:C.createVideoConstraints(e);if(!B){I.cancel(),k("videoConstraints should be defined");return}var ee={};(!w||p.aspectRatio)&&(ee.aspectRatio=p.aspectRatio);var b={onRenderSurfaceReady:function(N,R){C.setupUi(N,R,p),C.isScanning=!0,C.foreverScan(p,s,d)}};Q_.failIfNotSupported().then(function(N){N.create(B).then(function(R){return R.render(u.element,ee,b).then(function(P){C.renderedCamera=P,I.execute(),D(null)}).catch(function(P){I.cancel(),k(P)})}).catch(function(R){I.cancel(),k(ss.errorGettingUserMedia(R))})}).catch(function(N){I.cancel(),k(ss.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(gt.PAUSED),this.showPausedState(),(hr(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(gt.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(gt.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var s=function(){if(e.element){var u=document.getElementById(mn.SHADED_REGION_ELEMENT_ID);u&&e.element.removeChild(u)}},l=this;return this.renderedCamera.close().then(function(){return l.renderedCamera=null,l.element&&(l.element.removeChild(l.canvasElement),l.canvasElement=null),s(),l.qrRegion&&(l.qrRegion=null),l.context&&(l.context=null),n.execute(),l.hidePausedState(),l.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(s){return s.decodedText})},t.prototype.scanFileV2=function(e,n){var s=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(hr(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(l,u){s.possiblyCloseLastScanImageFile(),s.clearElement(),s.lastScanImageFile=URL.createObjectURL(e);var d=new Image;d.onload=function(){var p=d.width,x=d.height,w=document.getElementById(s.elementId),A=w.clientWidth?w.clientWidth:mn.DEFAULT_WIDTH,C=Math.max(w.clientHeight?w.clientHeight:x,mn.FILE_SCAN_MIN_HEIGHT),I=s.computeCanvasDrawConfig(p,x,A,C);if(n){var D=s.createCanvasElement(A,C,"qr-canvas-visible");D.style.display="inline-block",w.appendChild(D);var k=D.getContext("2d");if(!k)throw"Unable to get 2d context from canvas";k.canvas.width=A,k.canvas.height=C,k.drawImage(d,0,0,p,x,I.x,I.y,I.width,I.height)}var B=mn.FILE_SCAN_HIDDEN_CANVAS_PADDING,ee=Math.max(d.width,I.width),b=Math.max(d.height,I.height),N=ee+2*B,R=b+2*B,P=s.createCanvasElement(N,R);w.appendChild(P);var X=P.getContext("2d");if(!X)throw"Unable to get 2d context from canvas";X.canvas.width=N,X.canvas.height=R,X.drawImage(d,0,0,p,x,B,B,ee,b);try{s.qrcode.decodeRobustlyAsync(P).then(function(G){l(Wd.createFromQrcodeResult(G))}).catch(u)}catch(G){u("QR code parse error, error = ".concat(G))}},d.onerror=u,d.onabort=u,d.onstalled=u,d.onsuspend=u,d.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return $_.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!y2.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var n=[se.QR_CODE,se.AZTEC,se.CODABAR,se.CODE_39,se.CODE_93,se.CODE_128,se.DATA_MATRIX,se.MAXICODE,se.ITF,se.EAN_13,se.EAN_8,se.PDF_417,se.RSS_14,se.RSS_EXPANDED,se.UPC_A,se.UPC_E,se.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var s=[],l=0,u=e.formatsToSupport;l<u.length;l++){var d=u[l];B_(d)?s.push(d):this.logger.warn("Invalid format: ".concat(d," passed in config, ignoring."))}if(s.length===0)throw"None of formatsToSupport match supported values.";return s},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(hr(e))return!0;if(!hr(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(hr(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return hr(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,n,s){var l=this,u=s.qrbox;this.validateQrboxConfig(u);var d=this.toQrdimensions(e,n,u),p=function(w){if(w<mn.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(mn.MIN_QR_BOX_SIZE,"px.")},x=function(w){return w>e&&(l.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),w=e),w};p(d.width),p(d.height),d.width=x(d.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,n,s){if(typeof s=="number")return{width:s,height:s};if(typeof s=="function")try{return s(e,n)}catch(l){throw new Error("qrbox config was passed as a function but it failed with unknown error"+l)}return s},t.prototype.setupUi=function(e,n,s){s.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,s);var l=hr(s.qrbox)?{width:e,height:n}:s.qrbox;this.validateQrboxConfig(l);var u=this.toQrdimensions(e,n,l);u.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var d=s.isShadedBoxEnabled()&&u.height<=n,p={x:0,y:0,width:e,height:n},x=d?this.getShadedRegionBounds(e,n,u):p,w=this.createCanvasElement(x.width,x.height),A={willReadFrequently:!0},C=w.getContext("2d",A);C.canvas.width=x.width,C.canvas.height=x.height,this.element.append(w),d&&this.possiblyInsertShadingElement(this.element,e,n,u),this.createScannerPausedUiElement(this.element),this.qrRegion=x,this.context=C,this.canvasElement=w},t.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=ss.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},t.prototype.scanContext=function(e,n){var s=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(l){return e(l.text,Wd.createFromQrcodeResult(l)),s.possiblyUpdateShaders(!0),!0}).catch(function(l){s.possiblyUpdateShaders(!1);var u=ss.codeParseError(l);return n(u,F_.createFrom(u)),!1})},t.prototype.foreverScan=function(e,n,s){var l=this;if(this.shouldScan&&this.renderedCamera){var u=this.renderedCamera.getSurface(),d=u.videoWidth/u.clientWidth,p=u.videoHeight/u.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var x=this.qrRegion.width*d,w=this.qrRegion.height*p,A=this.qrRegion.x*d,C=this.qrRegion.y*p;this.context.drawImage(u,A,C,x,w,0,0,this.qrRegion.width,this.qrRegion.height);var I=function(){l.foreverScanTimeout=setTimeout(function(){l.foreverScan(e,n,s)},l.getTimeoutFps(e.fps))};this.scanContext(n,s).then(function(D){!D&&e.disableFlip!==!0?(l.context.translate(l.context.canvas.width,0),l.context.scale(-1,1),l.scanContext(n,s).finally(function(){I()})):I()}).catch(function(D){l.logger.logError("Error happend while scanning context",D),I()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",s="deviceId",l={user:!0,environment:!0},u="exact",d=function(k){if(k in l)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(k,"'")},p=Object.keys(e);if(p.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(p.length," keys");var x=Object.keys(e)[0];if(x!==n&&x!==s)throw"Only '".concat(n,"' and '").concat(s,"' ")+" are supported for 'cameraIdOrConfig'";if(x===n){var w=e.facingMode;if(typeof w=="string"){if(d(w))return{facingMode:w}}else if(typeof w=="object")if(u in w){if(d(w["".concat(u)]))return{facingMode:{exact:w["".concat(u)]}}}else throw"'facingMode' should be string or object with"+" ".concat(u," as key.");else{var A=typeof w;throw"Invalid type of 'facingMode' = ".concat(A)}}else{var C=e.deviceId;if(typeof C=="string")return{deviceId:C};if(typeof C=="object"){if(u in C)return{deviceId:{exact:C["".concat(u)]}};throw"'deviceId' should be string or object with"+" ".concat(u," as key.")}else{var I=typeof C;throw"Invalid type of 'deviceId' = ".concat(I)}}}var D=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(D)},t.prototype.computeCanvasDrawConfig=function(e,n,s,l){if(e<=s&&n<=l){var u=(s-e)/2,d=(l-n)/2;return{x:u,y:d,width:e,height:n}}else{var p=e,x=n;return e>s&&(n=s/e*n,e=s),n>l&&(e=l/n*e,n=l),this.logger.log("Image downsampled from "+"".concat(p,"X").concat(x)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,s,l)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?mn.BORDER_SHADER_MATCH_COLOR:mn.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,n,s){var l=e,u=n,d=document.createElement("canvas");return d.style.width="".concat(l,"px"),d.style.height="".concat(u,"px"),d.style.display="none",d.id=hr(s)?"qr-canvas":s,d},t.prototype.getShadedRegionBounds=function(e,n,s){if(s.width>e||s.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-s.width)/2,y:(n-s.height)/2,width:s.width,height:s.height}},t.prototype.possiblyInsertShadingElement=function(e,n,s,l){if(!(n-l.width<1||s-l.height<1)){var u=document.createElement("div");u.style.position="absolute";var d=(n-l.width)/2,p=(s-l.height)/2;if(u.style.borderLeft="".concat(d,"px solid rgba(0, 0, 0, 0.48)"),u.style.borderRight="".concat(d,"px solid rgba(0, 0, 0, 0.48)"),u.style.borderTop="".concat(p,"px solid rgba(0, 0, 0, 0.48)"),u.style.borderBottom="".concat(p,"px solid rgba(0, 0, 0, 0.48)"),u.style.boxSizing="border-box",u.style.top="0px",u.style.bottom="0px",u.style.left="0px",u.style.right="0px",u.id="".concat(mn.SHADED_REGION_ELEMENT_ID),n-l.width<11||s-l.height<11)this.hasBorderShaders=!1;else{var x=5,w=40;this.insertShaderBorders(u,w,x,-x,null,0,!0),this.insertShaderBorders(u,w,x,-x,null,0,!1),this.insertShaderBorders(u,w,x,null,-x,0,!0),this.insertShaderBorders(u,w,x,null,-x,0,!1),this.insertShaderBorders(u,x,w+x,-x,null,-x,!0),this.insertShaderBorders(u,x,w+x,null,-x,-x,!0),this.insertShaderBorders(u,x,w+x,-x,null,-x,!1),this.insertShaderBorders(u,x,w+x,null,-x,-x,!1),this.hasBorderShaders=!0}e.append(u)}},t.prototype.insertShaderBorders=function(e,n,s,l,u,d,p){var x=document.createElement("div");x.style.position="absolute",x.style.backgroundColor=mn.BORDER_SHADER_DEFAULT_COLOR,x.style.width="".concat(n,"px"),x.style.height="".concat(s,"px"),l!==null&&(x.style.top="".concat(l,"px")),u!==null&&(x.style.bottom="".concat(u,"px")),p?x.style.left="".concat(d,"px"):x.style.right="".concat(d,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(x),e.appendChild(x)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t}(),Zd;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Zd||(Zd={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te=function(t,e){if(!t)throw ks(e)},ks=function(t){return new Error("Firebase Database ("+E2.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let l=t.charCodeAt(s);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},oE=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const l=t[n++];if(l<128)e[s++]=String.fromCharCode(l);else if(l>191&&l<224){const u=t[n++];e[s++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=t[n++],d=t[n++],p=t[n++],x=((l&7)<<18|(u&63)<<12|(d&63)<<6|p&63)-65536;e[s++]=String.fromCharCode(55296+(x>>10)),e[s++]=String.fromCharCode(56320+(x&1023))}else{const u=t[n++],d=t[n++];e[s++]=String.fromCharCode((l&15)<<12|(u&63)<<6|d&63)}}return e.join("")},Lh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<t.length;l+=3){const u=t[l],d=l+1<t.length,p=d?t[l+1]:0,x=l+2<t.length,w=x?t[l+2]:0,A=u>>2,C=(u&3)<<4|p>>4;let I=(p&15)<<2|w>>6,D=w&63;x||(D=64,d||(I=64)),s.push(n[A],n[C],n[I],n[D])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(C2(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):oE(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<t.length;){const u=n[t.charAt(l++)],p=l<t.length?n[t.charAt(l)]:0;++l;const w=l<t.length?n[t.charAt(l)]:64;++l;const C=l<t.length?n[t.charAt(l)]:64;if(++l,u==null||p==null||w==null||C==null)throw new lE;const I=u<<2|p>>4;if(s.push(I),w!==64){const D=p<<4&240|w>>2;if(s.push(D),C!==64){const k=w<<6&192|C;s.push(k)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class lE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const A2=function(t){const e=C2(t);return Lh.encodeByteArray(e,!0)},S2=function(t){return A2(t).replace(/\./g,"")},Qd=function(t){try{return Lh.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aE(t){return v2(void 0,t)}function v2(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!cE(n)||(t[n]=v2(t[n],e[n]));return t}function cE(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uE(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function T2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(uE())}function fE(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function hE(){return E2.NODE_ADMIN===!0}function dE(){try{return typeof indexedDB=="object"}catch{return!1}}function gE(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{var u;e(((u=l.error)==null?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE="FirebaseError";class rl extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=pE,Object.setPrototypeOf(this,rl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,N2.prototype.create)}}class N2{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},l=`${this.service}/${e}`,u=this.errors[e],d=u?mE(u,s):"Error",p=`${this.serviceName}: ${d} (${l}).`;return new rl(l,p,s)}}function mE(t,e){return t.replace(xE,(n,s)=>{const l=e[s];return l!=null?String(l):`<${s}?>`})}const xE=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xo(t){return JSON.parse(t)}function Ft(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2=function(t){let e={},n={},s={},l="";try{const u=t.split(".");e=Xo(Qd(u[0])||""),n=Xo(Qd(u[1])||""),l=u[2],s=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:s,signature:l}},wE=function(t){const e=R2(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},yE=function(t){const e=R2(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ns(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function qd(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ba(t,e,n){const s={};for(const l in t)Object.prototype.hasOwnProperty.call(t,l)&&(s[l]=e.call(n,t[l],l,t));return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _E(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const s=this.W_;if(typeof e=="string")for(let C=0;C<16;C++)s[C]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let C=0;C<16;C++)s[C]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let C=16;C<80;C++){const I=s[C-3]^s[C-8]^s[C-14]^s[C-16];s[C]=(I<<1|I>>>31)&4294967295}let l=this.chain_[0],u=this.chain_[1],d=this.chain_[2],p=this.chain_[3],x=this.chain_[4],w,A;for(let C=0;C<80;C++){C<40?C<20?(w=p^u&(d^p),A=1518500249):(w=u^d^p,A=1859775393):C<60?(w=u&d|p&(u|d),A=2400959708):(w=u^d^p,A=3395469782);const I=(l<<5|l>>>27)+w+x+A+s[C]&4294967295;x=p,p=d,d=(u<<30|u>>>2)&4294967295,u=l,l=I}this.chain_[0]=this.chain_[0]+l&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+d&4294967295,this.chain_[3]=this.chain_[3]+p&4294967295,this.chain_[4]=this.chain_[4]+x&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const s=n-this.blockSize;let l=0;const u=this.buf_;let d=this.inbuf_;for(;l<n;){if(d===0)for(;l<=s;)this.compress_(e,l),l+=this.blockSize;if(typeof e=="string"){for(;l<n;)if(u[d]=e.charCodeAt(l),++d,++l,d===this.blockSize){this.compress_(u),d=0;break}}else for(;l<n;)if(u[d]=e[l],++d,++l,d===this.blockSize){this.compress_(u),d=0;break}}this.inbuf_=d,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let l=this.blockSize-1;l>=56;l--)this.buf_[l]=n&255,n/=256;this.compress_(this.buf_);let s=0;for(let l=0;l<5;l++)for(let u=24;u>=0;u-=8)e[s]=this.chain_[l]>>u&255,++s;return e}}function CE(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let l=t.charCodeAt(s);if(l>=55296&&l<=56319){const u=l-55296;s++,te(s<t.length,"Surrogate pair missing trail surrogate.");const d=t.charCodeAt(s)-56320;l=65536+(u<<10)+d}l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):l<65536?(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},lc=function(t){let e=0;for(let n=0;n<t.length;n++){const s=t.charCodeAt(n);s<128?e++:s<2048?e+=2:s>=55296&&s<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SE(t){return t&&t._delegate?t._delegate:t}class Oa{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ke;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ke||(Ke={}));const vE={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT},IE=Ke.INFO,TE={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"},NE=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),l=TE[e];if(l)console[l](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class b2{constructor(e){this.name=e,this._logLevel=IE,this._logHandler=NE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...e),this._logHandler(this,Ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...e),this._logHandler(this,Ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...e),this._logHandler(this,Ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...e),this._logHandler(this,Ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...e),this._logHandler(this,Ke.ERROR,...e)}}const RE=(t,e)=>e.some(n=>t instanceof n);let Jd,$d;function bE(){return Jd||(Jd=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function OE(){return $d||($d=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const O2=new WeakMap,Cf=new WeakMap,D2=new WeakMap,uu=new WeakMap,Fh=new WeakMap;function DE(t){const e=new Promise((n,s)=>{const l=()=>{t.removeEventListener("success",u),t.removeEventListener("error",d)},u=()=>{n(qr(t.result)),l()},d=()=>{s(t.error),l()};t.addEventListener("success",u),t.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&O2.set(n,t)}).catch(()=>{}),Fh.set(e,t),e}function ME(t){if(Cf.has(t))return;const e=new Promise((n,s)=>{const l=()=>{t.removeEventListener("complete",u),t.removeEventListener("error",d),t.removeEventListener("abort",d)},u=()=>{n(),l()},d=()=>{s(t.error||new DOMException("AbortError","AbortError")),l()};t.addEventListener("complete",u),t.addEventListener("error",d),t.addEventListener("abort",d)});Cf.set(t,e)}let Af={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Cf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||D2.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return qr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function kE(t){Af=t(Af)}function PE(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(fu(this),e,...n);return D2.set(s,e.sort?e.sort():[e]),qr(s)}:OE().includes(t)?function(...e){return t.apply(fu(this),e),qr(O2.get(this))}:function(...e){return qr(t.apply(fu(this),e))}}function BE(t){return typeof t=="function"?PE(t):(t instanceof IDBTransaction&&ME(t),RE(t,bE())?new Proxy(t,Af):t)}function qr(t){if(t instanceof IDBRequest)return DE(t);if(uu.has(t))return uu.get(t);const e=BE(t);return e!==t&&(uu.set(t,e),Fh.set(e,t)),e}const fu=t=>Fh.get(t);function LE(t,e,{blocked:n,upgrade:s,blocking:l,terminated:u}={}){const d=indexedDB.open(t,e),p=qr(d);return s&&d.addEventListener("upgradeneeded",x=>{s(qr(d.result),x.oldVersion,x.newVersion,qr(d.transaction),x)}),n&&d.addEventListener("blocked",x=>n(x.oldVersion,x.newVersion,x)),p.then(x=>{u&&x.addEventListener("close",()=>u()),l&&x.addEventListener("versionchange",w=>l(w.oldVersion,w.newVersion,w))}).catch(()=>{}),p}const FE=["get","getKey","getAll","getAllKeys","count"],UE=["put","add","delete","clear"],hu=new Map;function e0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(hu.get(e))return hu.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,l=UE.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(l||FE.includes(n)))return;const u=async function(d,...p){const x=this.transaction(d,l?"readwrite":"readonly");let w=x.store;return s&&(w=w.index(p.shift())),(await Promise.all([w[n](...p),l&&x.done]))[0]};return hu.set(e,u),u}kE(t=>({...t,get:(e,n,s)=>e0(e,n)||t.get(e,n,s),has:(e,n)=>!!e0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(HE(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function HE(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Sf="@firebase/app",t0="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sr=new b2("@firebase/app"),WE="@firebase/app-compat",zE="@firebase/analytics-compat",GE="@firebase/analytics",jE="@firebase/app-check-compat",XE="@firebase/app-check",YE="@firebase/auth",KE="@firebase/auth-compat",ZE="@firebase/database",QE="@firebase/data-connect",qE="@firebase/database-compat",JE="@firebase/functions",$E="@firebase/functions-compat",e3="@firebase/installations",t3="@firebase/installations-compat",n3="@firebase/messaging",r3="@firebase/messaging-compat",i3="@firebase/performance",s3="@firebase/performance-compat",o3="@firebase/remote-config",l3="@firebase/remote-config-compat",a3="@firebase/storage",c3="@firebase/storage-compat",u3="@firebase/firestore",f3="@firebase/ai",h3="@firebase/firestore-compat",d3="firebase",g3="12.9.0",p3={[Sf]:"fire-core",[WE]:"fire-core-compat",[GE]:"fire-analytics",[zE]:"fire-analytics-compat",[XE]:"fire-app-check",[jE]:"fire-app-check-compat",[YE]:"fire-auth",[KE]:"fire-auth-compat",[ZE]:"fire-rtdb",[QE]:"fire-data-connect",[qE]:"fire-rtdb-compat",[JE]:"fire-fn",[$E]:"fire-fn-compat",[e3]:"fire-iid",[t3]:"fire-iid-compat",[n3]:"fire-fcm",[r3]:"fire-fcm-compat",[i3]:"fire-perf",[s3]:"fire-perf-compat",[o3]:"fire-rc",[l3]:"fire-rc-compat",[a3]:"fire-gcs",[c3]:"fire-gcs-compat",[u3]:"fire-fst",[h3]:"fire-fst-compat",[f3]:"fire-vertex","fire-js":"fire-js",[d3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m3=new Map,x3=new Map,n0=new Map;function r0(t,e){try{t.container.addComponent(e)}catch(n){Sr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Da(t){const e=t.name;if(n0.has(e))return Sr.debug(`There were multiple attempts to register component ${e}.`),!1;n0.set(e,t);for(const n of m3.values())r0(n,t);for(const n of x3.values())r0(n,t);return!0}function w3(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Uh=new N2("app","Firebase",y3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _3=g3;function gs(t,e,n){let s=p3[t]??t;n&&(s+=`-${n}`);const l=s.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const d=[`Unable to register library "${s}" with version "${e}":`];l&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Sr.warn(d.join(" "));return}Da(new Oa(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E3="firebase-heartbeat-database",C3=1,Yo="firebase-heartbeat-store";let du=null;function M2(){return du||(du=LE(E3,C3,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Yo)}catch(n){console.warn(n)}}}}).catch(t=>{throw Uh.create("idb-open",{originalErrorMessage:t.message})})),du}async function A3(t){try{const n=(await M2()).transaction(Yo),s=await n.objectStore(Yo).get(k2(t));return await n.done,s}catch(e){if(e instanceof rl)Sr.warn(e.message);else{const n=Uh.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Sr.warn(n.message)}}}async function i0(t,e){try{const s=(await M2()).transaction(Yo,"readwrite");await s.objectStore(Yo).put(e,k2(t)),await s.done}catch(n){if(n instanceof rl)Sr.warn(n.message);else{const s=Uh.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Sr.warn(s.message)}}}function k2(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S3=1024,v3=30;class I3{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new N3(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=s0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(d=>d.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:l}),this._heartbeatsCache.heartbeats.length>v3){const d=R3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Sr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=s0(),{heartbeatsToSend:s,unsentEntries:l}=T3(this._heartbeatsCache.heartbeats),u=S2(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return Sr.warn(n),""}}}function s0(){return new Date().toISOString().substring(0,10)}function T3(t,e=S3){const n=[];let s=t.slice();for(const l of t){const u=n.find(d=>d.agent===l.agent);if(u){if(u.dates.push(l.date),o0(n)>e){u.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),o0(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class N3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dE()?gE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await A3(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return i0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return i0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function o0(t){return S2(JSON.stringify({version:2,heartbeats:t})).length}function R3(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b3(t){Da(new Oa("platform-logger",e=>new VE(e),"PRIVATE")),Da(new Oa("heartbeat",e=>new I3(e),"PRIVATE")),gs(Sf,t0,t),gs(Sf,t0,"esm2020"),gs("fire-js","")}b3("");var O3="firebase",D3="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gs(O3,D3,"app");var l0={};const a0="@firebase/database",c0="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let P2="";function M3(t){P2=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Ft(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Xo(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Ir(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new k3(e)}}catch{}return new P3},yi=B2("localStorage"),B3=B2("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps=new b2("@firebase/database"),L3=function(){let t=1;return function(){return t++}}(),L2=function(t){const e=AE(t),n=new EE;n.update(e);const s=n.digest();return Lh.encodeByteArray(s)},il=function(...t){let e="";for(let n=0;n<t.length;n++){const s=t[n];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?e+=il.apply(null,s):typeof s=="object"?e+=Ft(s):e+=s,e+=" "}return e};let So=null,u0=!0;const F3=function(t,e){te(!0,"Can't turn on custom loggers persistently."),ps.logLevel=Ke.VERBOSE,So=ps.log.bind(ps)},Xt=function(...t){if(u0===!0&&(u0=!1,So===null&&B3.get("logging_enabled")===!0&&F3()),So){const e=il.apply(null,t);So(e)}},sl=function(t){return function(...e){Xt(t,...e)}},vf=function(...t){const e="FIREBASE INTERNAL ERROR: "+il(...t);ps.error(e)},Ti=function(...t){const e=`FIREBASE FATAL ERROR: ${il(...t)}`;throw ps.error(e),new Error(e)},_n=function(...t){const e="FIREBASE WARNING: "+il(...t);ps.warn(e)},U3=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&_n("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},F2=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},V3=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Rs="[MIN_NAME]",Ni="[MAX_NAME]",Ps=function(t,e){if(t===e)return 0;if(t===Rs||e===Ni)return-1;if(e===Rs||t===Ni)return 1;{const n=f0(t),s=f0(e);return n!==null?s!==null?n-s===0?t.length-e.length:n-s:-1:s!==null?1:t<e?-1:1}},H3=function(t,e){return t===e?0:t<e?-1:1},so=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Ft(e))},Vh=function(t){if(typeof t!="object"||t===null)return Ft(t);const e=[];for(const s in t)e.push(s);e.sort();let n="{";for(let s=0;s<e.length;s++)s!==0&&(n+=","),n+=Ft(e[s]),n+=":",n+=Vh(t[e[s]]);return n+="}",n},U2=function(t,e){const n=t.length;if(n<=e)return[t];const s=[];for(let l=0;l<n;l+=e)l+e>n?s.push(t.substring(l,n)):s.push(t.substring(l,l+e));return s};function Ln(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const V2=function(t){te(!F2(t),"Invalid JSON number");const e=11,n=52,s=(1<<e-1)-1;let l,u,d,p,x;t===0?(u=0,d=0,l=1/t===-1/0?1:0):(l=t<0,t=Math.abs(t),t>=Math.pow(2,1-s)?(p=Math.min(Math.floor(Math.log(t)/Math.LN2),s),u=p+s,d=Math.round(t*Math.pow(2,n-p)-Math.pow(2,n))):(u=0,d=Math.round(t/Math.pow(2,1-s-n))));const w=[];for(x=n;x;x-=1)w.push(d%2?1:0),d=Math.floor(d/2);for(x=e;x;x-=1)w.push(u%2?1:0),u=Math.floor(u/2);w.push(l?1:0),w.reverse();const A=w.join("");let C="";for(x=0;x<64;x+=8){let I=parseInt(A.substr(x,8),2).toString(16);I.length===1&&(I="0"+I),C=C+I}return C.toLowerCase()},W3=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},z3=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},G3=new RegExp("^-?(0*)\\d{1,10}$"),j3=-2147483648,X3=2147483647,f0=function(t){if(G3.test(t)){const e=Number(t);if(e>=j3&&e<=X3)return e}return null},ol=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw _n("Exception was thrown by user callback.",n),e},Math.floor(0))}},Y3=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},vo=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,w3(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(s=>this.appCheck=s)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,s)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)==null||n.get().then(s=>s.addTokenListener(e))}notifyForInvalidToken(){_n(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3{constructor(e,n,s){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(l=>this.auth_=l)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Xt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,s)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',_n(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hh="5",H2="v",W2="s",z2="r",G2="f",j2=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,X2="ls",Y2="p",If="ac",K2="websocket",Z2="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(e,n,s,l,u=!1,d="",p=!1,x=!1,w=null){this.secure=n,this.namespace=s,this.webSocketOnly=l,this.nodeAdmin=u,this.persistenceKey=d,this.includeNamespaceInQueryParams=p,this.isUsingEmulator=x,this.emulatorOptions=w,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=yi.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&yi.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function q3(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Q2(t,e,n){te(typeof e=="string","typeof type must == string"),te(typeof n=="object","typeof params must == object");let s;if(e===K2)s=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Z2)s=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);q3(t)&&(n.ns=t.namespace);const l=[];return Ln(n,(u,d)=>{l.push(u+"="+d)}),s+l.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J3{constructor(){this.counters_={}}incrementCounter(e,n=1){Ir(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return aE(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gu={},pu={};function Wh(t){const e=t.toString();return gu[e]||(gu[e]=new J3),gu[e]}function $3(t,e){const n=t.toString();return pu[n]||(pu[n]=e()),pu[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let l=0;l<s.length;++l)s[l]&&ol(()=>{this.onMessage_(s[l])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0="start",tC="close",nC="pLPCommand",rC="pRTLPCB",q2="id",J2="pw",$2="ser",iC="cb",sC="seg",oC="ts",lC="d",aC="dframe",em=1870,tm=30,cC=em-tm,uC=25e3,fC=3e4;class os{constructor(e,n,s,l,u,d,p){this.connId=e,this.repoInfo=n,this.applicationId=s,this.appCheckToken=l,this.authToken=u,this.transportSessionId=d,this.lastSessionId=p,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=sl(e),this.stats_=Wh(n),this.urlFn=x=>(this.appCheckToken&&(x[If]=this.appCheckToken),Q2(n,Z2,x))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new eC(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(fC)),V3(()=>{if(this.isClosed_)return;this.scriptTagHolder=new zh((...u)=>{const[d,p,x,w,A]=u;if(this.incrementIncomingBytes_(u),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,d===h0)this.id=p,this.password=x;else if(d===tC)p?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(p,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+d)},(...u)=>{const[d,p]=u;this.incrementIncomingBytes_(u),this.myPacketOrderer.handleResponse(d,p)},()=>{this.onClosed_()},this.urlFn);const s={};s[h0]="t",s[$2]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[iC]=this.scriptTagHolder.uniqueCallbackIdentifier),s[H2]=Hh,this.transportSessionId&&(s[W2]=this.transportSessionId),this.lastSessionId&&(s[X2]=this.lastSessionId),this.applicationId&&(s[Y2]=this.applicationId),this.appCheckToken&&(s[If]=this.appCheckToken),typeof location<"u"&&location.hostname&&j2.test(location.hostname)&&(s[z2]=G2);const l=this.urlFn(s);this.log_("Connecting via long-poll to "+l),this.scriptTagHolder.addTag(l,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){os.forceAllow_=!0}static forceDisallow(){os.forceDisallow_=!0}static isAvailable(){return os.forceAllow_?!0:!os.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!W3()&&!z3()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Ft(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=A2(n),l=U2(s,cC);for(let u=0;u<l.length;u++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,l.length,l[u]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const s={};s[aC]="t",s[q2]=e,s[J2]=n,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Ft(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class zh{constructor(e,n,s,l){this.onDisconnect=s,this.urlFn=l,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=L3(),window[nC+this.uniqueCallbackIdentifier]=e,window[rC+this.uniqueCallbackIdentifier]=n,this.myIFrame=zh.createIFrame_();let u="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(u='<script>document.domain="'+document.domain+'";<\/script>');const d="<html><body>"+u+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(d),this.myIFrame.doc.close()}catch(p){Xt("frame writing exception"),p.stack&&Xt(p.stack),Xt(p)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Xt("No IE domain setting required")}catch{const s=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[q2]=this.myID,e[J2]=this.myPW,e[$2]=this.currentSerial;let n=this.urlFn(e),s="",l=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+tm+s.length<=em;){const d=this.pendingSegs.shift();s=s+"&"+sC+l+"="+d.seg+"&"+oC+l+"="+d.ts+"&"+lC+l+"="+d.d,l++}return n=n+s,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,s){this.pendingSegs.push({seg:e,ts:n,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const s=()=>{this.outstandingRequests.delete(n),this.newRequest_()},l=setTimeout(s,Math.floor(uC)),u=()=>{clearTimeout(l),s()};this.addTag(e,u)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=e,s.onload=s.onreadystatechange=function(){const l=s.readyState;(!l||l==="loaded"||l==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),n())},s.onerror=()=>{Xt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC=16384,dC=45e3;let Ma=null;typeof MozWebSocket<"u"?Ma=MozWebSocket:typeof WebSocket<"u"&&(Ma=WebSocket);class jn{constructor(e,n,s,l,u,d,p){this.connId=e,this.applicationId=s,this.appCheckToken=l,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=sl(this.connId),this.stats_=Wh(n),this.connURL=jn.connectionURL_(n,d,p,l,s),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,s,l,u){const d={};return d[H2]=Hh,typeof location<"u"&&location.hostname&&j2.test(location.hostname)&&(d[z2]=G2),n&&(d[W2]=n),s&&(d[X2]=s),l&&(d[If]=l),u&&(d[Y2]=u),Q2(e,K2,d)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,yi.set("previous_websocket_failure",!0);try{let s;hE(),this.mySock=new Ma(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const l=s.message||s.data;l&&this.log_(l),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const l=s.message||s.data;l&&this.log_(l),this.onClosed_()}}start(){}static forceDisallow(){jn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(n);s&&s.length>1&&parseFloat(s[1])<4.4&&(e=!0)}return!e&&Ma!==null&&!jn.forceDisallow_}static previouslyFailed(){return yi.isInMemoryStorage||yi.get("previous_websocket_failure")===!0}markConnectionHealthy(){yi.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const s=Xo(n);this.onMessage(s)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(te(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const s=this.extractFrameCount_(n);s!==null&&this.appendFrame_(s)}}send(e){this.resetKeepAlive();const n=Ft(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=U2(n,hC);s.length>1&&this.sendString_(String(s.length));for(let l=0;l<s.length;l++)this.sendString_(s[l])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(dC))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}jn.responsesRequiredToBeHealthy=2;jn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{static get ALL_TRANSPORTS(){return[os,jn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=jn&&jn.isAvailable();let s=n&&!jn.previouslyFailed();if(e.webSocketOnly&&(n||_n("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[jn];else{const l=this.transports_=[];for(const u of Ko.ALL_TRANSPORTS)u&&u.isAvailable()&&l.push(u);Ko.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Ko.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC=6e4,pC=5e3,mC=10*1024,xC=100*1024,mu="t",d0="d",wC="s",g0="r",yC="e",p0="o",m0="a",x0="n",w0="p",_C="h";class EC{constructor(e,n,s,l,u,d,p,x,w,A){this.id=e,this.repoInfo_=n,this.applicationId_=s,this.appCheckToken_=l,this.authToken_=u,this.onMessage_=d,this.onReady_=p,this.onDisconnect_=x,this.onKill_=w,this.lastSessionId=A,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=sl("c:"+this.id+":"),this.transportManager_=new Ko(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,s)},Math.floor(0));const l=e.healthyTimeout||0;l>0&&(this.healthyTimeout_=vo(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>xC?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>mC?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(l)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(mu in e){const n=e[mu];n===m0?this.upgradeIfSecondaryHealthy_():n===g0?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===p0&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=so("t",e),s=so("d",e);if(n==="c")this.onSecondaryControl_(s);else if(n==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:w0,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:m0,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:x0,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=so("t",e),s=so("d",e);n==="c"?this.onControl_(s):n==="d"&&this.onDataMessage_(s)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=so(mu,e);if(d0 in e){const s=e[d0];if(n===_C){const l={...s};this.repoInfo_.isUsingEmulator&&(l.h=this.repoInfo_.host),this.onHandshake_(l)}else if(n===x0){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let l=0;l<this.pendingDataMessages.length;++l)this.onDataMessage_(this.pendingDataMessages[l]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===wC?this.onConnectionShutdown_(s):n===g0?this.onReset_(s):n===yC?vf("Server Error: "+s):n===p0?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):vf("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,s=e.v,l=e.h;this.sessionId=e.s,this.repoInfo_.host=l,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Hh!==s&&_n("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,s),vo(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(gC))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):vo(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(pC))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:w0,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(yi.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{put(e,n,s,l){}merge(e,n,s,l){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,s){}onDisconnectMerge(e,n,s){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(e){this.allowedEvents_=e,this.listeners_={},te(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const s=[...this.listeners_[e]];for(let l=0;l<s.length;l++)s[l].callback.apply(s[l].context,n)}}on(e,n,s){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:s});const l=this.getInitialEvent(e);l&&n.apply(s,l)}off(e,n,s){this.validateEventType_(e);const l=this.listeners_[e]||[];for(let u=0;u<l.length;u++)if(l[u].callback===n&&(!s||s===l[u].context)){l.splice(u,1);return}}validateEventType_(e){te(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka extends rm{static getInstance(){return new ka}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!T2()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return te(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y0=32,_0=768;class tt{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let s=0;for(let l=0;l<this.pieces_.length;l++)this.pieces_[l].length>0&&(this.pieces_[s]=this.pieces_[l],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function He(){return new tt("")}function Te(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function ti(t){return t.pieces_.length-t.pieceNum_}function $e(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new tt(t.pieces_,e)}function im(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function CC(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function sm(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function om(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new tt(e,0)}function Ot(t,e){const n=[];for(let s=t.pieceNum_;s<t.pieces_.length;s++)n.push(t.pieces_[s]);if(e instanceof tt)for(let s=e.pieceNum_;s<e.pieces_.length;s++)n.push(e.pieces_[s]);else{const s=e.split("/");for(let l=0;l<s.length;l++)s[l].length>0&&n.push(s[l])}return new tt(n,0)}function Ie(t){return t.pieceNum_>=t.pieces_.length}function Mn(t,e){const n=Te(t),s=Te(e);if(n===null)return e;if(n===s)return Mn($e(t),$e(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function lm(t,e){if(ti(t)!==ti(e))return!1;for(let n=t.pieceNum_,s=e.pieceNum_;n<=t.pieces_.length;n++,s++)if(t.pieces_[n]!==e.pieces_[s])return!1;return!0}function Xn(t,e){let n=t.pieceNum_,s=e.pieceNum_;if(ti(t)>ti(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[s])return!1;++n,++s}return!0}class AC{constructor(e,n){this.errorPrefix_=n,this.parts_=sm(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=lc(this.parts_[s]);am(this)}}function SC(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=lc(e),am(t)}function vC(t){const e=t.parts_.pop();t.byteLength_-=lc(e),t.parts_.length>0&&(t.byteLength_-=1)}function am(t){if(t.byteLength_>_0)throw new Error(t.errorPrefix_+"has a key path longer than "+_0+" bytes ("+t.byteLength_+").");if(t.parts_.length>y0)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+y0+") or object contains a cycle "+pi(t))}function pi(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh extends rm{static getInstance(){return new Gh}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const s=!document[e];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}getInitialEvent(e){return te(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo=1e3,IC=60*5*1e3,E0=30*1e3,TC=1.3,NC=3e4,RC="server_kill",C0=3;class yr extends nm{constructor(e,n,s,l,u,d,p,x){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=s,this.onConnectStatus_=l,this.onServerInfoUpdate_=u,this.authTokenProvider_=d,this.appCheckTokenProvider_=p,this.authOverride_=x,this.id=yr.nextPersistentConnectionId_++,this.log_=sl("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=oo,this.maxReconnectDelay_=IC,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,x)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Gh.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&ka.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,s){const l=++this.requestNumber_,u={r:l,a:e,b:n};this.log_(Ft(u)),te(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),s&&(this.requestCBHash_[l]=s)}get(e){this.initConnection_();const n=new I2,l={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:d=>{const p=d.d;d.s==="ok"?n.resolve(p):n.reject(p)}};this.outstandingGets_.push(l),this.outstandingGetCount_++;const u=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(u),n.promise}listen(e,n,s,l){this.initConnection_();const u=e._queryIdentifier,d=e._path.toString();this.log_("Listen called for "+d+" "+u),this.listens.has(d)||this.listens.set(d,new Map),te(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),te(!this.listens.get(d).has(u),"listen() called twice for same path/queryId.");const p={onComplete:l,hashFn:n,query:e,tag:s};this.listens.get(d).set(u,p),this.connected_&&this.sendListen_(p)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,s=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(s)})}sendListen_(e){const n=e.query,s=n._path.toString(),l=n._queryIdentifier;this.log_("Listen on "+s+" for "+l);const u={p:s},d="q";e.tag&&(u.q=n._queryObject,u.t=e.tag),u.h=e.hashFn(),this.sendRequest(d,u,p=>{const x=p.d,w=p.s;yr.warnOnListenWarnings_(x,n),(this.listens.get(s)&&this.listens.get(s).get(l))===e&&(this.log_("listen response",p),w!=="ok"&&this.removeListen_(s,l),e.onComplete&&e.onComplete(w,x))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Ir(e,"w")){const s=Ns(e,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const l='".indexOn": "'+n._queryParams.getIndex().toString()+'"',u=n._path.toString();_n(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${l} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||yE(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=E0)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=wE(e)?"auth":"gauth",s={cred:e};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(n,s,l=>{const u=l.s,d=l.d||"error";this.authToken_===e&&(u==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,s=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,s)})}unlisten(e,n){const s=e._path.toString(),l=e._queryIdentifier;this.log_("Unlisten called for "+s+" "+l),te(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,l)&&this.connected_&&this.sendUnlisten_(s,l,e._queryObject,n)}sendUnlisten_(e,n,s,l){this.log_("Unlisten on "+e+" for "+n);const u={p:e},d="n";l&&(u.q=s,u.t=l),this.sendRequest(d,u)}onDisconnectPut(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:s})}onDisconnectMerge(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:s})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,s,l){const u={p:n,d:s};this.log_("onDisconnect "+e,u),this.sendRequest(e,u,d=>{l&&setTimeout(()=>{l(d.s,d.d)},Math.floor(0))})}put(e,n,s,l){this.putInternal("p",e,n,s,l)}merge(e,n,s,l){this.putInternal("m",e,n,s,l)}putInternal(e,n,s,l,u){this.initConnection_();const d={p:n,d:s};u!==void 0&&(d.h=u),this.outstandingPuts_.push({action:e,request:d,onComplete:l}),this.outstandingPutCount_++;const p=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(p):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,s=this.outstandingPuts_[e].request,l=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,s,u=>{this.log_(n+" response",u),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),l&&l(u.s,u.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,s=>{if(s.s!=="ok"){const u=s.d;this.log_("reportStats","Error sending stats: "+u)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Ft(e));const n=e.r,s=this.requestCBHash_[n];s&&(delete this.requestCBHash_[n],s(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):vf("Unrecognized action received from server: "+Ft(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){te(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=oo,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=oo,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>NC&&(this.reconnectDelay_=oo),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*TC)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),l=this.id+":"+yr.nextConnectionId_++,u=this.lastSessionId;let d=!1,p=null;const x=function(){p?p.close():(d=!0,s())},w=function(C){te(p,"sendRequest call when we're not connected not allowed."),p.sendRequest(C)};this.realtime_={close:x,sendRequest:w};const A=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[C,I]=await Promise.all([this.authTokenProvider_.getToken(A),this.appCheckTokenProvider_.getToken(A)]);d?Xt("getToken() completed but was canceled"):(Xt("getToken() completed. Creating connection."),this.authToken_=C&&C.accessToken,this.appCheckToken_=I&&I.token,p=new EC(l,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,s,D=>{_n(D+" ("+this.repoInfo_.toString()+")"),this.interrupt(RC)},u))}catch(C){this.log_("Failed to get token: "+C),d||(this.repoInfo_.nodeAdmin&&_n(C),x())}}}interrupt(e){Xt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Xt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],qd(this.interruptReasons_)&&(this.reconnectDelay_=oo,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let s;n?s=n.map(u=>Vh(u)).join("$"):s="default";const l=this.removeListen_(e,s);l&&l.onComplete&&l.onComplete("permission_denied")}removeListen_(e,n){const s=new tt(e).toString();let l;if(this.listens.has(s)){const u=this.listens.get(s);l=u.get(n),u.delete(n),u.size===0&&this.listens.delete(s)}else l=void 0;return l}onAuthRevoked_(e,n){Xt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=C0&&(this.reconnectDelay_=E0,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Xt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=C0&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+P2.replace(/\./g,"-")]=1,T2()?e["framework.cordova"]=1:fE()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=ka.getInstance().currentlyOnline();return qd(this.interruptReasons_)&&e}}yr.nextPersistentConnectionId_=0;yr.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Ne(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const s=new Ne(Rs,e),l=new Ne(Rs,n);return this.compare(s,l)!==0}minPost(){return Ne.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hl;class cm extends ac{static get __EMPTY_NODE(){return Hl}static set __EMPTY_NODE(e){Hl=e}compare(e,n){return Ps(e.name,n.name)}isDefinedOn(e){throw ks("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Ne.MIN}maxPost(){return new Ne(Ni,Hl)}makePost(e,n){return te(typeof e=="string","KeyIndex indexValue must always be a string."),new Ne(e,Hl)}toString(){return".key"}}const ms=new cm;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e,n,s,l,u=null){this.isReverse_=l,this.resultGenerator_=u,this.nodeStack_=[];let d=1;for(;!e.isEmpty();)if(e=e,d=n?s(e.key,n):1,l&&(d*=-1),d<0)this.isReverse_?e=e.left:e=e.right;else if(d===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class bt{constructor(e,n,s,l,u){this.key=e,this.value=n,this.color=s??bt.RED,this.left=l??fn.EMPTY_NODE,this.right=u??fn.EMPTY_NODE}copy(e,n,s,l,u){return new bt(e??this.key,n??this.value,s??this.color,l??this.left,u??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let l=this;const u=s(e,l.key);return u<0?l=l.copy(null,null,null,l.left.insert(e,n,s),null):u===0?l=l.copy(null,n,null,null,null):l=l.copy(null,null,null,null,l.right.insert(e,n,s)),l.fixUp_()}removeMin_(){if(this.left.isEmpty())return fn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let s,l;if(s=this,n(e,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),n(e,s.key)===0){if(s.right.isEmpty())return fn.EMPTY_NODE;l=s.right.min_(),s=s.copy(l.key,l.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}bt.RED=!0;bt.BLACK=!1;class bC{copy(e,n,s,l,u){return this}insert(e,n,s){return new bt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class fn{constructor(e,n=fn.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new fn(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,bt.BLACK,null,null))}remove(e){return new fn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,bt.BLACK,null,null))}get(e){let n,s=this.root_;for(;!s.isEmpty();){if(n=this.comparator_(e,s.key),n===0)return s.value;n<0?s=s.left:n>0&&(s=s.right)}return null}getPredecessorKey(e){let n,s=this.root_,l=null;for(;!s.isEmpty();)if(n=this.comparator_(e,s.key),n===0){if(s.left.isEmpty())return l?l.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else n<0?s=s.left:n>0&&(l=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Wl(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Wl(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Wl(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Wl(this.root_,null,this.comparator_,!0,e)}}fn.EMPTY_NODE=new bC;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OC(t,e){return Ps(t.name,e.name)}function jh(t,e){return Ps(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tf;function DC(t){Tf=t}const um=function(t){return typeof t=="number"?"number:"+V2(t):"string:"+t},fm=function(t){if(t.isLeafNode()){const e=t.val();te(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Ir(e,".sv"),"Priority must be a string or number.")}else te(t===Tf||t.isEmpty(),"priority of unexpected type.");te(t===Tf||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let A0;class Nt{static set __childrenNodeConstructor(e){A0=e}static get __childrenNodeConstructor(){return A0}constructor(e,n=Nt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,te(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),fm(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Nt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Nt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Ie(e)?this:Te(e)===".priority"?this.priorityNode_:Nt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Nt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const s=Te(e);return s===null?n:n.isEmpty()&&s!==".priority"?this:(te(s!==".priority"||ti(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,Nt.__childrenNodeConstructor.EMPTY_NODE.updateChild($e(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+um(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=V2(this.value_):e+=this.value_,this.lazyHash_=L2(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Nt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Nt.__childrenNodeConstructor?-1:(te(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,s=typeof this.value_,l=Nt.VALUE_TYPE_ORDER.indexOf(n),u=Nt.VALUE_TYPE_ORDER.indexOf(s);return te(l>=0,"Unknown leaf type: "+n),te(u>=0,"Unknown leaf type: "+s),l===u?s==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:u-l}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Nt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hm,dm;function MC(t){hm=t}function kC(t){dm=t}class PC extends ac{compare(e,n){const s=e.node.getPriority(),l=n.node.getPriority(),u=s.compareTo(l);return u===0?Ps(e.name,n.name):u}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Ne.MIN}maxPost(){return new Ne(Ni,new Nt("[PRIORITY-POST]",dm))}makePost(e,n){const s=hm(e);return new Ne(n,new Nt("[PRIORITY-POST]",s))}toString(){return".priority"}}const Kt=new PC;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC=Math.log(2);class LC{constructor(e){const n=u=>parseInt(Math.log(u)/BC,10),s=u=>parseInt(Array(u+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const l=s(this.count);this.bits_=e+1&l}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Pa=function(t,e,n,s){t.sort(e);const l=function(x,w){const A=w-x;let C,I;if(A===0)return null;if(A===1)return C=t[x],I=n?n(C):C,new bt(I,C.node,bt.BLACK,null,null);{const D=parseInt(A/2,10)+x,k=l(x,D),B=l(D+1,w);return C=t[D],I=n?n(C):C,new bt(I,C.node,bt.BLACK,k,B)}},u=function(x){let w=null,A=null,C=t.length;const I=function(k,B){const ee=C-k,b=C;C-=k;const N=l(ee+1,b),R=t[ee],P=n?n(R):R;D(new bt(P,R.node,B,null,N))},D=function(k){w?(w.left=k,w=k):(A=k,w=k)};for(let k=0;k<x.count;++k){const B=x.nextBitIsOne(),ee=Math.pow(2,x.count-(k+1));B?I(ee,bt.BLACK):(I(ee,bt.BLACK),I(ee,bt.RED))}return A},d=new LC(t.length),p=u(d);return new fn(s||e,p)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xu;const Xi={};class xr{static get Default(){return te(Xi&&Kt,"ChildrenNode.ts has not been loaded"),xu=xu||new xr({".priority":Xi},{".priority":Kt}),xu}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=Ns(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof fn?n:null}hasIndex(e){return Ir(this.indexSet_,e.toString())}addIndex(e,n){te(e!==ms,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let l=!1;const u=n.getIterator(Ne.Wrap);let d=u.getNext();for(;d;)l=l||e.isDefinedOn(d.node),s.push(d),d=u.getNext();let p;l?p=Pa(s,e.getCompare()):p=Xi;const x=e.toString(),w={...this.indexSet_};w[x]=e;const A={...this.indexes_};return A[x]=p,new xr(A,w)}addToIndexes(e,n){const s=ba(this.indexes_,(l,u)=>{const d=Ns(this.indexSet_,u);if(te(d,"Missing index implementation for "+u),l===Xi)if(d.isDefinedOn(e.node)){const p=[],x=n.getIterator(Ne.Wrap);let w=x.getNext();for(;w;)w.name!==e.name&&p.push(w),w=x.getNext();return p.push(e),Pa(p,d.getCompare())}else return Xi;else{const p=n.get(e.name);let x=l;return p&&(x=x.remove(new Ne(e.name,p))),x.insert(e,e.node)}});return new xr(s,this.indexSet_)}removeFromIndexes(e,n){const s=ba(this.indexes_,l=>{if(l===Xi)return l;{const u=n.get(e.name);return u?l.remove(new Ne(e.name,u)):l}});return new xr(s,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lo;class Le{static get EMPTY_NODE(){return lo||(lo=new Le(new fn(jh),null,xr.Default))}constructor(e,n,s){this.children_=e,this.priorityNode_=n,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&fm(this.priorityNode_),this.children_.isEmpty()&&te(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||lo}updatePriority(e){return this.children_.isEmpty()?this:new Le(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?lo:n}}getChild(e){const n=Te(e);return n===null?this:this.getImmediateChild(n).getChild($e(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(te(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const s=new Ne(e,n);let l,u;n.isEmpty()?(l=this.children_.remove(e),u=this.indexMap_.removeFromIndexes(s,this.children_)):(l=this.children_.insert(e,n),u=this.indexMap_.addToIndexes(s,this.children_));const d=l.isEmpty()?lo:this.priorityNode_;return new Le(l,d,u)}}updateChild(e,n){const s=Te(e);if(s===null)return n;{te(Te(e)!==".priority"||ti(e)===1,".priority must be the last token in a path");const l=this.getImmediateChild(s).updateChild($e(e),n);return this.updateImmediateChild(s,l)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let s=0,l=0,u=!0;if(this.forEachChild(Kt,(d,p)=>{n[d]=p.val(e),s++,u&&Le.INTEGER_REGEXP_.test(d)?l=Math.max(l,Number(d)):u=!1}),!e&&u&&l<2*s){const d=[];for(const p in n)d[p]=n[p];return d}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+um(this.getPriority().val())+":"),this.forEachChild(Kt,(n,s)=>{const l=s.hash();l!==""&&(e+=":"+n+":"+l)}),this.lazyHash_=e===""?"":L2(e)}return this.lazyHash_}getPredecessorChildName(e,n,s){const l=this.resolveIndex_(s);if(l){const u=l.getPredecessorKey(new Ne(e,n));return u?u.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Ne(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Ne(n,this.children_.get(n)):null}forEachChild(e,n){const s=this.resolveIndex_(e);return s?s.inorderTraversal(l=>n(l.name,l.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getIteratorFrom(e,l=>l);{const l=this.children_.getIteratorFrom(e.name,Ne.Wrap);let u=l.peek();for(;u!=null&&n.compare(u,e)<0;)l.getNext(),u=l.peek();return l}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getReverseIteratorFrom(e,l=>l);{const l=this.children_.getReverseIteratorFrom(e.name,Ne.Wrap);let u=l.peek();for(;u!=null&&n.compare(u,e)>0;)l.getNext(),u=l.peek();return l}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ll?-1:0}withIndex(e){if(e===ms||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Le(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===ms||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const s=this.getIterator(Kt),l=n.getIterator(Kt);let u=s.getNext(),d=l.getNext();for(;u&&d;){if(u.name!==d.name||!u.node.equals(d.node))return!1;u=s.getNext(),d=l.getNext()}return u===null&&d===null}else return!1;else return!1}}resolveIndex_(e){return e===ms?null:this.indexMap_.get(e.toString())}}Le.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class FC extends Le{constructor(){super(new fn(jh),Le.EMPTY_NODE,xr.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Le.EMPTY_NODE}isEmpty(){return!1}}const ll=new FC;Object.defineProperties(Ne,{MIN:{value:new Ne(Rs,Le.EMPTY_NODE)},MAX:{value:new Ne(Ni,ll)}});cm.__EMPTY_NODE=Le.EMPTY_NODE;Nt.__childrenNodeConstructor=Le;DC(ll);kC(ll);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC=!0;function Yt(t,e=null){if(t===null)return Le.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),te(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Nt(n,Yt(e))}if(!(t instanceof Array)&&UC){const n=[];let s=!1;if(Ln(t,(d,p)=>{if(d.substring(0,1)!=="."){const x=Yt(p);x.isEmpty()||(s=s||!x.getPriority().isEmpty(),n.push(new Ne(d,x)))}}),n.length===0)return Le.EMPTY_NODE;const u=Pa(n,OC,d=>d.name,jh);if(s){const d=Pa(n,Kt.getCompare());return new Le(u,Yt(e),new xr({".priority":d},{".priority":Kt}))}else return new Le(u,Yt(e),xr.Default)}else{let n=Le.EMPTY_NODE;return Ln(t,(s,l)=>{if(Ir(t,s)&&s.substring(0,1)!=="."){const u=Yt(l);(u.isLeafNode()||!u.isEmpty())&&(n=n.updateImmediateChild(s,u))}}),n.updatePriority(Yt(e))}}MC(Yt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC extends ac{constructor(e){super(),this.indexPath_=e,te(!Ie(e)&&Te(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const s=this.extractChild(e.node),l=this.extractChild(n.node),u=s.compareTo(l);return u===0?Ps(e.name,n.name):u}makePost(e,n){const s=Yt(e),l=Le.EMPTY_NODE.updateChild(this.indexPath_,s);return new Ne(n,l)}maxPost(){const e=Le.EMPTY_NODE.updateChild(this.indexPath_,ll);return new Ne(Ni,e)}toString(){return sm(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC extends ac{compare(e,n){const s=e.node.compareTo(n.node);return s===0?Ps(e.name,n.name):s}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Ne.MIN}maxPost(){return Ne.MAX}makePost(e,n){const s=Yt(e);return new Ne(n,s)}toString(){return".value"}}const WC=new HC;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zC(t){return{type:"value",snapshotNode:t}}function GC(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function jC(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function S0(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function XC(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Kt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return te(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return te(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Rs}hasEnd(){return this.endSet_}getIndexEndValue(){return te(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return te(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ni}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return te(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Kt}copy(){const e=new Xh;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function v0(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Kt?n="$priority":t.index_===WC?n="$value":t.index_===ms?n="$key":(te(t.index_ instanceof VC,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Ft(n),t.startSet_){const s=t.startAfterSet_?"startAfter":"startAt";e[s]=Ft(t.indexStartValue_),t.startNameSet_&&(e[s]+=","+Ft(t.indexStartName_))}if(t.endSet_){const s=t.endBeforeSet_?"endBefore":"endAt";e[s]=Ft(t.indexEndValue_),t.endNameSet_&&(e[s]+=","+Ft(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function I0(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Kt&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba extends nm{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(te(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,s,l){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=s,this.appCheckTokenProvider_=l,this.log_=sl("p:rest:"),this.listens_={}}listen(e,n,s,l){const u=e._path.toString();this.log_("Listen called for "+u+" "+e._queryIdentifier);const d=Ba.getListenId_(e,s),p={};this.listens_[d]=p;const x=v0(e._queryParams);this.restRequest_(u+".json",x,(w,A)=>{let C=A;if(w===404&&(C=null,w=null),w===null&&this.onDataUpdate_(u,C,!1,s),Ns(this.listens_,d)===p){let I;w?w===401?I="permission_denied":I="rest_error:"+w:I="ok",l(I,null)}})}unlisten(e,n){const s=Ba.getListenId_(e,n);delete this.listens_[s]}get(e){const n=v0(e._queryParams),s=e._path.toString(),l=new I2;return this.restRequest_(s+".json",n,(u,d)=>{let p=d;u===404&&(p=null,u=null),u===null?(this.onDataUpdate_(s,p,!1,null),l.resolve(p)):l.reject(new Error(p))}),l.promise}refreshAuthToken(e){}restRequest_(e,n={},s){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([l,u])=>{l&&l.accessToken&&(n.auth=l.accessToken),u&&u.token&&(n.ac=u.token);const d=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+_E(n);this.log_("Sending REST request for "+d);const p=new XMLHttpRequest;p.onreadystatechange=()=>{if(s&&p.readyState===4){this.log_("REST Response for "+d+" received. status:",p.status,"response:",p.responseText);let x=null;if(p.status>=200&&p.status<300){try{x=Xo(p.responseText)}catch{_n("Failed to parse JSON response for "+d+": "+p.responseText)}s(null,x)}else p.status!==401&&p.status!==404&&_n("Got unsuccessful REST response for "+d+" Status: "+p.status),s(p.status);s=null}},p.open("GET",d,!0),p.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(){this.rootNode_=Le.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function La(){return{value:null,children:new Map}}function gm(t,e,n){if(Ie(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const s=Te(e);t.children.has(s)||t.children.set(s,La());const l=t.children.get(s);e=$e(e),gm(l,e,n)}}function Nf(t,e,n){t.value!==null?n(e,t.value):KC(t,(s,l)=>{const u=new tt(e.toString()+"/"+s);Nf(l,u,n)})}function KC(t,e){t.children.forEach((n,s)=>{e(s,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&Ln(this.last_,(s,l)=>{n[s]=n[s]-l}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0=10*1e3,QC=30*1e3,qC=5*60*1e3;class JC{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new ZC(e);const s=T0+(QC-T0)*Math.random();vo(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const e=this.statsListener_.get(),n={};let s=!1;Ln(e,(l,u)=>{u>0&&Ir(this.statsToReport_,l)&&(n[l]=u,s=!0)}),s&&this.server_.reportStats(n),vo(this.reportStats_.bind(this),Math.floor(Math.random()*2*qC))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lr;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(lr||(lr={}));function pm(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function mm(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function xm(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e,n,s){this.path=e,this.affectedTree=n,this.revert=s,this.type=lr.ACK_USER_WRITE,this.source=pm()}operationForChild(e){if(Ie(this.path)){if(this.affectedTree.value!=null)return te(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new tt(e));return new Fa(He(),n,this.revert)}}else return te(Te(this.path)===e,"operationForChild called for unrelated child."),new Fa($e(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e,n,s){this.source=e,this.path=n,this.snap=s,this.type=lr.OVERWRITE}operationForChild(e){return Ie(this.path)?new Ri(this.source,He(),this.snap.getImmediateChild(e)):new Ri(this.source,$e(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e,n,s){this.source=e,this.path=n,this.children=s,this.type=lr.MERGE}operationForChild(e){if(Ie(this.path)){const n=this.children.subtree(new tt(e));return n.isEmpty()?null:n.value?new Ri(this.source,He(),n.value):new Zo(this.source,He(),n)}else return te(Te(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Zo(this.source,$e(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,n,s){this.node_=e,this.fullyInitialized_=n,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ie(e))return this.isFullyInitialized()&&!this.filtered_;const n=Te(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function $C(t,e,n,s){const l=[],u=[];return e.forEach(d=>{d.type==="child_changed"&&t.index_.indexedValueChanged(d.oldSnap,d.snapshotNode)&&u.push(XC(d.childName,d.snapshotNode))}),ao(t,l,"child_removed",e,s,n),ao(t,l,"child_added",e,s,n),ao(t,l,"child_moved",u,s,n),ao(t,l,"child_changed",e,s,n),ao(t,l,"value",e,s,n),l}function ao(t,e,n,s,l,u){const d=s.filter(p=>p.type===n);d.sort((p,x)=>tA(t,p,x)),d.forEach(p=>{const x=eA(t,p,u);l.forEach(w=>{w.respondsTo(p.type)&&e.push(w.createEvent(x,t.query_))})})}function eA(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function tA(t,e,n){if(e.childName==null||n.childName==null)throw ks("Should only compare child_ events.");const s=new Ne(e.childName,e.snapshotNode),l=new Ne(n.childName,n.snapshotNode);return t.index_.compare(s,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wm(t,e){return{eventCache:t,serverCache:e}}function Io(t,e,n,s){return wm(new Yh(e,n,s),t.serverCache)}function ym(t,e,n,s){return wm(t.eventCache,new Yh(e,n,s))}function Rf(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function bi(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wu;const nA=()=>(wu||(wu=new fn(H3)),wu);class Je{static fromObject(e){let n=new Je(null);return Ln(e,(s,l)=>{n=n.set(new tt(s),l)}),n}constructor(e,n=nA()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:He(),value:this.value};if(Ie(e))return null;{const s=Te(e),l=this.children.get(s);if(l!==null){const u=l.findRootMostMatchingPathAndValue($e(e),n);return u!=null?{path:Ot(new tt(s),u.path),value:u.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ie(e))return this;{const n=Te(e),s=this.children.get(n);return s!==null?s.subtree($e(e)):new Je(null)}}set(e,n){if(Ie(e))return new Je(n,this.children);{const s=Te(e),u=(this.children.get(s)||new Je(null)).set($e(e),n),d=this.children.insert(s,u);return new Je(this.value,d)}}remove(e){if(Ie(e))return this.children.isEmpty()?new Je(null):new Je(null,this.children);{const n=Te(e),s=this.children.get(n);if(s){const l=s.remove($e(e));let u;return l.isEmpty()?u=this.children.remove(n):u=this.children.insert(n,l),this.value===null&&u.isEmpty()?new Je(null):new Je(this.value,u)}else return this}}get(e){if(Ie(e))return this.value;{const n=Te(e),s=this.children.get(n);return s?s.get($e(e)):null}}setTree(e,n){if(Ie(e))return n;{const s=Te(e),u=(this.children.get(s)||new Je(null)).setTree($e(e),n);let d;return u.isEmpty()?d=this.children.remove(s):d=this.children.insert(s,u),new Je(this.value,d)}}fold(e){return this.fold_(He(),e)}fold_(e,n){const s={};return this.children.inorderTraversal((l,u)=>{s[l]=u.fold_(Ot(e,l),n)}),n(e,this.value,s)}findOnPath(e,n){return this.findOnPath_(e,He(),n)}findOnPath_(e,n,s){const l=this.value?s(n,this.value):!1;if(l)return l;if(Ie(e))return null;{const u=Te(e),d=this.children.get(u);return d?d.findOnPath_($e(e),Ot(n,u),s):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,He(),n)}foreachOnPath_(e,n,s){if(Ie(e))return this;{this.value&&s(n,this.value);const l=Te(e),u=this.children.get(l);return u?u.foreachOnPath_($e(e),Ot(n,l),s):new Je(null)}}foreach(e){this.foreach_(He(),e)}foreach_(e,n){this.children.inorderTraversal((s,l)=>{l.foreach_(Ot(e,s),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,s)=>{s.value&&e(n,s.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this.writeTree_=e}static empty(){return new Zn(new Je(null))}}function To(t,e,n){if(Ie(e))return new Zn(new Je(n));{const s=t.writeTree_.findRootMostValueAndPath(e);if(s!=null){const l=s.path;let u=s.value;const d=Mn(l,e);return u=u.updateChild(d,n),new Zn(t.writeTree_.set(l,u))}else{const l=new Je(n),u=t.writeTree_.setTree(e,l);return new Zn(u)}}}function N0(t,e,n){let s=t;return Ln(n,(l,u)=>{s=To(s,Ot(e,l),u)}),s}function R0(t,e){if(Ie(e))return Zn.empty();{const n=t.writeTree_.setTree(e,new Je(null));return new Zn(n)}}function bf(t,e){return Mi(t,e)!=null}function Mi(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Mn(n.path,e)):null}function b0(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Kt,(s,l)=>{e.push(new Ne(s,l))}):t.writeTree_.children.inorderTraversal((s,l)=>{l.value!=null&&e.push(new Ne(s,l.value))}),e}function Jr(t,e){if(Ie(e))return t;{const n=Mi(t,e);return n!=null?new Zn(new Je(n)):new Zn(t.writeTree_.subtree(e))}}function Of(t){return t.writeTree_.isEmpty()}function bs(t,e){return _m(He(),t.writeTree_,e)}function _m(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let s=null;return e.children.inorderTraversal((l,u)=>{l===".priority"?(te(u.value!==null,"Priority writes must always be leaf nodes"),s=u.value):n=_m(Ot(t,l),u,n)}),!n.getChild(t).isEmpty()&&s!==null&&(n=n.updateChild(Ot(t,".priority"),s)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(t,e){return Im(e,t)}function rA(t,e,n,s,l){te(s>t.lastWriteId,"Stacking an older write on top of newer ones"),l===void 0&&(l=!0),t.allWrites.push({path:e,snap:n,writeId:s,visible:l}),l&&(t.visibleWrites=To(t.visibleWrites,e,n)),t.lastWriteId=s}function iA(t,e){for(let n=0;n<t.allWrites.length;n++){const s=t.allWrites[n];if(s.writeId===e)return s}return null}function sA(t,e){const n=t.allWrites.findIndex(p=>p.writeId===e);te(n>=0,"removeWrite called with nonexistent writeId.");const s=t.allWrites[n];t.allWrites.splice(n,1);let l=s.visible,u=!1,d=t.allWrites.length-1;for(;l&&d>=0;){const p=t.allWrites[d];p.visible&&(d>=n&&oA(p,s.path)?l=!1:Xn(s.path,p.path)&&(u=!0)),d--}if(l){if(u)return lA(t),!0;if(s.snap)t.visibleWrites=R0(t.visibleWrites,s.path);else{const p=s.children;Ln(p,x=>{t.visibleWrites=R0(t.visibleWrites,Ot(s.path,x))})}return!0}else return!1}function oA(t,e){if(t.snap)return Xn(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Xn(Ot(t.path,n),e))return!0;return!1}function lA(t){t.visibleWrites=Cm(t.allWrites,aA,He()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function aA(t){return t.visible}function Cm(t,e,n){let s=Zn.empty();for(let l=0;l<t.length;++l){const u=t[l];if(e(u)){const d=u.path;let p;if(u.snap)Xn(n,d)?(p=Mn(n,d),s=To(s,p,u.snap)):Xn(d,n)&&(p=Mn(d,n),s=To(s,He(),u.snap.getChild(p)));else if(u.children){if(Xn(n,d))p=Mn(n,d),s=N0(s,p,u.children);else if(Xn(d,n))if(p=Mn(d,n),Ie(p))s=N0(s,He(),u.children);else{const x=Ns(u.children,Te(p));if(x){const w=x.getChild($e(p));s=To(s,He(),w)}}}else throw ks("WriteRecord should have .snap or .children")}}return s}function Am(t,e,n,s,l){if(!s&&!l){const u=Mi(t.visibleWrites,e);if(u!=null)return u;{const d=Jr(t.visibleWrites,e);if(Of(d))return n;if(n==null&&!bf(d,He()))return null;{const p=n||Le.EMPTY_NODE;return bs(d,p)}}}else{const u=Jr(t.visibleWrites,e);if(!l&&Of(u))return n;if(!l&&n==null&&!bf(u,He()))return null;{const d=function(w){return(w.visible||l)&&(!s||!~s.indexOf(w.writeId))&&(Xn(w.path,e)||Xn(e,w.path))},p=Cm(t.allWrites,d,e),x=n||Le.EMPTY_NODE;return bs(p,x)}}}function cA(t,e,n){let s=Le.EMPTY_NODE;const l=Mi(t.visibleWrites,e);if(l)return l.isLeafNode()||l.forEachChild(Kt,(u,d)=>{s=s.updateImmediateChild(u,d)}),s;if(n){const u=Jr(t.visibleWrites,e);return n.forEachChild(Kt,(d,p)=>{const x=bs(Jr(u,new tt(d)),p);s=s.updateImmediateChild(d,x)}),b0(u).forEach(d=>{s=s.updateImmediateChild(d.name,d.node)}),s}else{const u=Jr(t.visibleWrites,e);return b0(u).forEach(d=>{s=s.updateImmediateChild(d.name,d.node)}),s}}function uA(t,e,n,s,l){te(s||l,"Either existingEventSnap or existingServerSnap must exist");const u=Ot(e,n);if(bf(t.visibleWrites,u))return null;{const d=Jr(t.visibleWrites,u);return Of(d)?l.getChild(n):bs(d,l.getChild(n))}}function fA(t,e,n,s){const l=Ot(e,n),u=Mi(t.visibleWrites,l);if(u!=null)return u;if(s.isCompleteForChild(n)){const d=Jr(t.visibleWrites,l);return bs(d,s.getNode().getImmediateChild(n))}else return null}function hA(t,e){return Mi(t.visibleWrites,e)}function dA(t,e,n,s,l,u,d){let p;const x=Jr(t.visibleWrites,e),w=Mi(x,He());if(w!=null)p=w;else if(n!=null)p=bs(x,n);else return[];if(p=p.withIndex(d),!p.isEmpty()&&!p.isLeafNode()){const A=[],C=d.getCompare(),I=u?p.getReverseIteratorFrom(s,d):p.getIteratorFrom(s,d);let D=I.getNext();for(;D&&A.length<l;)C(D,s)!==0&&A.push(D),D=I.getNext();return A}else return[]}function gA(){return{visibleWrites:Zn.empty(),allWrites:[],lastWriteId:-1}}function Df(t,e,n,s){return Am(t.writeTree,t.treePath,e,n,s)}function Sm(t,e){return cA(t.writeTree,t.treePath,e)}function O0(t,e,n,s){return uA(t.writeTree,t.treePath,e,n,s)}function Ua(t,e){return hA(t.writeTree,Ot(t.treePath,e))}function pA(t,e,n,s,l,u){return dA(t.writeTree,t.treePath,e,n,s,l,u)}function Kh(t,e,n){return fA(t.writeTree,t.treePath,e,n)}function vm(t,e){return Im(Ot(t.treePath,e),t.writeTree)}function Im(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,s=e.childName;te(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),te(s!==".priority","Only non-priority child changes can be tracked.");const l=this.changeMap.get(s);if(l){const u=l.type;if(n==="child_added"&&u==="child_removed")this.changeMap.set(s,S0(s,e.snapshotNode,l.snapshotNode));else if(n==="child_removed"&&u==="child_added")this.changeMap.delete(s);else if(n==="child_removed"&&u==="child_changed")this.changeMap.set(s,jC(s,l.oldSnap));else if(n==="child_changed"&&u==="child_added")this.changeMap.set(s,GC(s,e.snapshotNode));else if(n==="child_changed"&&u==="child_changed")this.changeMap.set(s,S0(s,e.snapshotNode,l.oldSnap));else throw ks("Illegal combination of changes: "+e+" occurred after "+l)}else this.changeMap.set(s,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{getCompleteChild(e){return null}getChildAfterChild(e,n,s){return null}}const Tm=new xA;class Zh{constructor(e,n,s=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=s}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const s=this.optCompleteServerCache_!=null?new Yh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Kh(this.writes_,e,s)}}getChildAfterChild(e,n,s){const l=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:bi(this.viewCache_),u=pA(this.writes_,l,n,1,s,e);return u.length===0?null:u[0]}}function wA(t,e){te(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),te(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function yA(t,e,n,s,l){const u=new mA;let d,p;if(n.type===lr.OVERWRITE){const w=n;w.source.fromUser?d=Mf(t,e,w.path,w.snap,s,l,u):(te(w.source.fromServer,"Unknown source."),p=w.source.tagged||e.serverCache.isFiltered()&&!Ie(w.path),d=Va(t,e,w.path,w.snap,s,l,p,u))}else if(n.type===lr.MERGE){const w=n;w.source.fromUser?d=EA(t,e,w.path,w.children,s,l,u):(te(w.source.fromServer,"Unknown source."),p=w.source.tagged||e.serverCache.isFiltered(),d=kf(t,e,w.path,w.children,s,l,p,u))}else if(n.type===lr.ACK_USER_WRITE){const w=n;w.revert?d=SA(t,e,w.path,s,l,u):d=CA(t,e,w.path,w.affectedTree,s,l,u)}else if(n.type===lr.LISTEN_COMPLETE)d=AA(t,e,n.path,s,u);else throw ks("Unknown operation type: "+n.type);const x=u.getChanges();return _A(e,d,x),{viewCache:d,changes:x}}function _A(t,e,n){const s=e.eventCache;if(s.isFullyInitialized()){const l=s.getNode().isLeafNode()||s.getNode().isEmpty(),u=Rf(t);(n.length>0||!t.eventCache.isFullyInitialized()||l&&!s.getNode().equals(u)||!s.getNode().getPriority().equals(u.getPriority()))&&n.push(zC(Rf(e)))}}function Nm(t,e,n,s,l,u){const d=e.eventCache;if(Ua(s,n)!=null)return e;{let p,x;if(Ie(n))if(te(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const w=bi(e),A=w instanceof Le?w:Le.EMPTY_NODE,C=Sm(s,A);p=t.filter.updateFullNode(e.eventCache.getNode(),C,u)}else{const w=Df(s,bi(e));p=t.filter.updateFullNode(e.eventCache.getNode(),w,u)}else{const w=Te(n);if(w===".priority"){te(ti(n)===1,"Can't have a priority with additional path components");const A=d.getNode();x=e.serverCache.getNode();const C=O0(s,n,A,x);C!=null?p=t.filter.updatePriority(A,C):p=d.getNode()}else{const A=$e(n);let C;if(d.isCompleteForChild(w)){x=e.serverCache.getNode();const I=O0(s,n,d.getNode(),x);I!=null?C=d.getNode().getImmediateChild(w).updateChild(A,I):C=d.getNode().getImmediateChild(w)}else C=Kh(s,w,e.serverCache);C!=null?p=t.filter.updateChild(d.getNode(),w,C,A,l,u):p=d.getNode()}}return Io(e,p,d.isFullyInitialized()||Ie(n),t.filter.filtersNodes())}}function Va(t,e,n,s,l,u,d,p){const x=e.serverCache;let w;const A=d?t.filter:t.filter.getIndexedFilter();if(Ie(n))w=A.updateFullNode(x.getNode(),s,null);else if(A.filtersNodes()&&!x.isFiltered()){const D=x.getNode().updateChild(n,s);w=A.updateFullNode(x.getNode(),D,null)}else{const D=Te(n);if(!x.isCompleteForPath(n)&&ti(n)>1)return e;const k=$e(n),ee=x.getNode().getImmediateChild(D).updateChild(k,s);D===".priority"?w=A.updatePriority(x.getNode(),ee):w=A.updateChild(x.getNode(),D,ee,k,Tm,null)}const C=ym(e,w,x.isFullyInitialized()||Ie(n),A.filtersNodes()),I=new Zh(l,C,u);return Nm(t,C,n,l,I,p)}function Mf(t,e,n,s,l,u,d){const p=e.eventCache;let x,w;const A=new Zh(l,e,u);if(Ie(n))w=t.filter.updateFullNode(e.eventCache.getNode(),s,d),x=Io(e,w,!0,t.filter.filtersNodes());else{const C=Te(n);if(C===".priority")w=t.filter.updatePriority(e.eventCache.getNode(),s),x=Io(e,w,p.isFullyInitialized(),p.isFiltered());else{const I=$e(n),D=p.getNode().getImmediateChild(C);let k;if(Ie(I))k=s;else{const B=A.getCompleteChild(C);B!=null?im(I)===".priority"&&B.getChild(om(I)).isEmpty()?k=B:k=B.updateChild(I,s):k=Le.EMPTY_NODE}if(D.equals(k))x=e;else{const B=t.filter.updateChild(p.getNode(),C,k,I,A,d);x=Io(e,B,p.isFullyInitialized(),t.filter.filtersNodes())}}}return x}function D0(t,e){return t.eventCache.isCompleteForChild(e)}function EA(t,e,n,s,l,u,d){let p=e;return s.foreach((x,w)=>{const A=Ot(n,x);D0(e,Te(A))&&(p=Mf(t,p,A,w,l,u,d))}),s.foreach((x,w)=>{const A=Ot(n,x);D0(e,Te(A))||(p=Mf(t,p,A,w,l,u,d))}),p}function M0(t,e,n){return n.foreach((s,l)=>{e=e.updateChild(s,l)}),e}function kf(t,e,n,s,l,u,d,p){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let x=e,w;Ie(n)?w=s:w=new Je(null).setTree(n,s);const A=e.serverCache.getNode();return w.children.inorderTraversal((C,I)=>{if(A.hasChild(C)){const D=e.serverCache.getNode().getImmediateChild(C),k=M0(t,D,I);x=Va(t,x,new tt(C),k,l,u,d,p)}}),w.children.inorderTraversal((C,I)=>{const D=!e.serverCache.isCompleteForChild(C)&&I.value===null;if(!A.hasChild(C)&&!D){const k=e.serverCache.getNode().getImmediateChild(C),B=M0(t,k,I);x=Va(t,x,new tt(C),B,l,u,d,p)}}),x}function CA(t,e,n,s,l,u,d){if(Ua(l,n)!=null)return e;const p=e.serverCache.isFiltered(),x=e.serverCache;if(s.value!=null){if(Ie(n)&&x.isFullyInitialized()||x.isCompleteForPath(n))return Va(t,e,n,x.getNode().getChild(n),l,u,p,d);if(Ie(n)){let w=new Je(null);return x.getNode().forEachChild(ms,(A,C)=>{w=w.set(new tt(A),C)}),kf(t,e,n,w,l,u,p,d)}else return e}else{let w=new Je(null);return s.foreach((A,C)=>{const I=Ot(n,A);x.isCompleteForPath(I)&&(w=w.set(A,x.getNode().getChild(I)))}),kf(t,e,n,w,l,u,p,d)}}function AA(t,e,n,s,l){const u=e.serverCache,d=ym(e,u.getNode(),u.isFullyInitialized()||Ie(n),u.isFiltered());return Nm(t,d,n,s,Tm,l)}function SA(t,e,n,s,l,u){let d;if(Ua(s,n)!=null)return e;{const p=new Zh(s,e,l),x=e.eventCache.getNode();let w;if(Ie(n)||Te(n)===".priority"){let A;if(e.serverCache.isFullyInitialized())A=Df(s,bi(e));else{const C=e.serverCache.getNode();te(C instanceof Le,"serverChildren would be complete if leaf node"),A=Sm(s,C)}A=A,w=t.filter.updateFullNode(x,A,u)}else{const A=Te(n);let C=Kh(s,A,e.serverCache);C==null&&e.serverCache.isCompleteForChild(A)&&(C=x.getImmediateChild(A)),C!=null?w=t.filter.updateChild(x,A,C,$e(n),p,u):e.eventCache.getNode().hasChild(A)?w=t.filter.updateChild(x,A,Le.EMPTY_NODE,$e(n),p,u):w=x,w.isEmpty()&&e.serverCache.isFullyInitialized()&&(d=Df(s,bi(e)),d.isLeafNode()&&(w=t.filter.updateFullNode(w,d,u)))}return d=e.serverCache.isFullyInitialized()||Ua(s,He())!=null,Io(e,w,d,t.filter.filtersNodes())}}function vA(t,e){const n=bi(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Ie(e)&&!n.getImmediateChild(Te(e)).isEmpty())?n.getChild(e):null}function k0(t,e,n,s){e.type===lr.MERGE&&e.source.queryId!==null&&(te(bi(t.viewCache_),"We should always have a full cache before handling merges"),te(Rf(t.viewCache_),"Missing event cache, even though we have a server cache"));const l=t.viewCache_,u=yA(t.processor_,l,e,n,s);return wA(t.processor_,u.viewCache),te(u.viewCache.serverCache.isFullyInitialized()||!l.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=u.viewCache,IA(t,u.changes,u.viewCache.eventCache.getNode())}function IA(t,e,n,s){const l=t.eventRegistrations_;return $C(t.eventGenerator_,e,n,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let P0;function TA(t){te(!P0,"__referenceConstructor has already been defined"),P0=t}function Qh(t,e,n,s){const l=e.source.queryId;if(l!==null){const u=t.views.get(l);return te(u!=null,"SyncTree gave us an op for an invalid query."),k0(u,e,n,s)}else{let u=[];for(const d of t.views.values())u=u.concat(k0(d,e,n,s));return u}}function qh(t,e){let n=null;for(const s of t.views.values())n=n||vA(s,e);return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let B0;function NA(t){te(!B0,"__referenceConstructor has already been defined"),B0=t}class L0{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Je(null),this.pendingWriteTree_=gA(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function RA(t,e,n,s,l){return rA(t.pendingWriteTree_,e,n,s,l),l?uc(t,new Ri(pm(),e,n)):[]}function ls(t,e,n=!1){const s=iA(t.pendingWriteTree_,e);if(sA(t.pendingWriteTree_,e)){let u=new Je(null);return s.snap!=null?u=u.set(He(),!0):Ln(s.children,d=>{u=u.set(new tt(d),!0)}),uc(t,new Fa(s.path,u,n))}else return[]}function cc(t,e,n){return uc(t,new Ri(mm(),e,n))}function bA(t,e,n){const s=Je.fromObject(n);return uc(t,new Zo(mm(),e,s))}function OA(t,e,n,s){const l=Dm(t,s);if(l!=null){const u=Mm(l),d=u.path,p=u.queryId,x=Mn(d,e),w=new Ri(xm(p),x,n);return km(t,d,w)}else return[]}function DA(t,e,n,s){const l=Dm(t,s);if(l){const u=Mm(l),d=u.path,p=u.queryId,x=Mn(d,e),w=Je.fromObject(n),A=new Zo(xm(p),x,w);return km(t,d,A)}else return[]}function Rm(t,e,n){const l=t.pendingWriteTree_,u=t.syncPointTree_.findOnPath(e,(d,p)=>{const x=Mn(d,e),w=qh(p,x);if(w)return w});return Am(l,e,u,n,!0)}function uc(t,e){return bm(e,t.syncPointTree_,null,Em(t.pendingWriteTree_,He()))}function bm(t,e,n,s){if(Ie(t.path))return Om(t,e,n,s);{const l=e.get(He());n==null&&l!=null&&(n=qh(l,He()));let u=[];const d=Te(t.path),p=t.operationForChild(d),x=e.children.get(d);if(x&&p){const w=n?n.getImmediateChild(d):null,A=vm(s,d);u=u.concat(bm(p,x,w,A))}return l&&(u=u.concat(Qh(l,t,s,n))),u}}function Om(t,e,n,s){const l=e.get(He());n==null&&l!=null&&(n=qh(l,He()));let u=[];return e.children.inorderTraversal((d,p)=>{const x=n?n.getImmediateChild(d):null,w=vm(s,d),A=t.operationForChild(d);A&&(u=u.concat(Om(A,p,x,w)))}),l&&(u=u.concat(Qh(l,t,s,n))),u}function Dm(t,e){return t.tagToQueryMap.get(e)}function Mm(t){const e=t.indexOf("$");return te(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new tt(t.substr(0,e))}}function km(t,e,n){const s=t.syncPointTree_.get(e);te(s,"Missing sync point for query tag that we're tracking");const l=Em(t.pendingWriteTree_,e);return Qh(s,n,l,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Jh(n)}node(){return this.node_}}class $h{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Ot(this.path_,e);return new $h(this.syncTree_,n)}node(){return Rm(this.syncTree_,this.path_)}}const MA=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},F0=function(t,e,n){if(!t||typeof t!="object")return t;if(te(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return kA(t[".sv"],e,n);if(typeof t[".sv"]=="object")return PA(t[".sv"],e);te(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},kA=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:te(!1,"Unexpected server value: "+t)}},PA=function(t,e,n){t.hasOwnProperty("increment")||te(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const s=t.increment;typeof s!="number"&&te(!1,"Unexpected increment value: "+s);const l=e.node();if(te(l!==null&&typeof l<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!l.isLeafNode())return s;const d=l.getValue();return typeof d!="number"?s:d+s},BA=function(t,e,n,s){return e1(e,new $h(n,t),s)},LA=function(t,e,n){return e1(t,new Jh(e),n)};function e1(t,e,n){const s=t.getPriority().val(),l=F0(s,e.getImmediateChild(".priority"),n);let u;if(t.isLeafNode()){const d=t,p=F0(d.getValue(),e,n);return p!==d.getValue()||l!==d.getPriority().val()?new Nt(p,Yt(l)):t}else{const d=t;return u=d,l!==d.getPriority().val()&&(u=u.updatePriority(new Nt(l))),d.forEachChild(Kt,(p,x)=>{const w=e1(x,e.getImmediateChild(p),n);w!==x&&(u=u.updateImmediateChild(p,w))}),u}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e="",n=null,s={children:{},childCount:0}){this.name=e,this.parent=n,this.node=s}}function n1(t,e){let n=e instanceof tt?e:new tt(e),s=t,l=Te(n);for(;l!==null;){const u=Ns(s.node.children,l)||{children:{},childCount:0};s=new t1(l,s,u),n=$e(n),l=Te(n)}return s}function Bs(t){return t.node.value}function Pm(t,e){t.node.value=e,Pf(t)}function Bm(t){return t.node.childCount>0}function FA(t){return Bs(t)===void 0&&!Bm(t)}function fc(t,e){Ln(t.node.children,(n,s)=>{e(new t1(n,t,s))})}function Lm(t,e,n,s){n&&e(t),fc(t,l=>{Lm(l,e,!0)})}function UA(t,e,n){let s=t.parent;for(;s!==null;){if(e(s))return!0;s=s.parent}return!1}function al(t){return new tt(t.parent===null?t.name:al(t.parent)+"/"+t.name)}function Pf(t){t.parent!==null&&VA(t.parent,t.name,t)}function VA(t,e,n){const s=FA(n),l=Ir(t.node.children,e);s&&l?(delete t.node.children[e],t.node.childCount--,Pf(t)):!s&&!l&&(t.node.children[e]=n.node,t.node.childCount++,Pf(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA=/[\[\].#$\/\u0000-\u001F\u007F]/,WA=/[\[\].#$\u0000-\u001F\u007F]/,yu=10*1024*1024,Fm=function(t){return typeof t=="string"&&t.length!==0&&!HA.test(t)},zA=function(t){return typeof t=="string"&&t.length!==0&&!WA.test(t)},GA=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),zA(t)},Um=function(t,e,n){const s=n instanceof tt?new AC(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+pi(s));if(typeof e=="function")throw new Error(t+"contains a function "+pi(s)+" with contents = "+e.toString());if(F2(e))throw new Error(t+"contains "+e.toString()+" "+pi(s));if(typeof e=="string"&&e.length>yu/3&&lc(e)>yu)throw new Error(t+"contains a string greater than "+yu+" utf8 bytes "+pi(s)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let l=!1,u=!1;if(Ln(e,(d,p)=>{if(d===".value")l=!0;else if(d!==".priority"&&d!==".sv"&&(u=!0,!Fm(d)))throw new Error(t+" contains an invalid key ("+d+") "+pi(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);SC(s,d),Um(t,p,s),vC(s)}),l&&u)throw new Error(t+' contains ".value" child '+pi(s)+" in addition to actual children.")}},jA=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Fm(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!GA(n))throw new Error(CE(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function YA(t,e){let n=null;for(let s=0;s<e.length;s++){const l=e[s],u=l.getPath();n!==null&&!lm(u,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:u}),n.events.push(l)}n&&t.eventLists_.push(n)}function ki(t,e,n){YA(t,n),KA(t,s=>Xn(s,e)||Xn(e,s))}function KA(t,e){t.recursionDepth_++;let n=!0;for(let s=0;s<t.eventLists_.length;s++){const l=t.eventLists_[s];if(l){const u=l.path;e(u)?(ZA(t.eventLists_[s]),t.eventLists_[s]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function ZA(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const s=n.getEventRunner();So&&Xt("event: "+n.toString()),ol(s)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA="repo_interrupt",qA=25;class JA{constructor(e,n,s,l){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=s,this.appCheckProvider_=l,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new XA,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=La(),this.transactionQueueTree_=new t1,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function $A(t,e,n){if(t.stats_=Wh(t.repoInfo_),t.forceRestClient_||Y3())t.server_=new Ba(t.repoInfo_,(s,l,u,d)=>{U0(t,s,l,u,d)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>V0(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ft(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new yr(t.repoInfo_,e,(s,l,u,d)=>{U0(t,s,l,u,d)},s=>{V0(t,s)},s=>{t8(t,s)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(s=>{t.server_.refreshAuthToken(s)}),t.appCheckProvider_.addTokenChangeListener(s=>{t.server_.refreshAppCheckToken(s.token)}),t.statsReporter_=$3(t.repoInfo_,()=>new JC(t.stats_,t.server_)),t.infoData_=new YC,t.infoSyncTree_=new L0({startListening:(s,l,u,d)=>{let p=[];const x=t.infoData_.getNode(s._path);return x.isEmpty()||(p=cc(t.infoSyncTree_,s._path,x),setTimeout(()=>{d("ok")},0)),p},stopListening:()=>{}}),r1(t,"connected",!1),t.serverSyncTree_=new L0({startListening:(s,l,u,d)=>(t.server_.listen(s,u,l,(p,x)=>{const w=d(p,x);ki(t.eventQueue_,s._path,w)}),[]),stopListening:(s,l)=>{t.server_.unlisten(s,l)}})}function e8(t){const n=t.infoData_.getNode(new tt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Vm(t){return MA({timestamp:e8(t)})}function U0(t,e,n,s,l){t.dataUpdateCount++;const u=new tt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let d=[];if(l)if(s){const x=ba(n,w=>Yt(w));d=DA(t.serverSyncTree_,u,x,l)}else{const x=Yt(n);d=OA(t.serverSyncTree_,u,x,l)}else if(s){const x=ba(n,w=>Yt(w));d=bA(t.serverSyncTree_,u,x)}else{const x=Yt(n);d=cc(t.serverSyncTree_,u,x)}let p=u;d.length>0&&(p=s1(t,u)),ki(t.eventQueue_,p,d)}function V0(t,e){r1(t,"connected",e),e===!1&&r8(t)}function t8(t,e){Ln(e,(n,s)=>{r1(t,n,s)})}function r1(t,e,n){const s=new tt("/.info/"+e),l=Yt(n);t.infoData_.updateSnapshot(s,l);const u=cc(t.infoSyncTree_,s,l);ki(t.eventQueue_,s,u)}function n8(t){return t.nextWriteId_++}function r8(t){Hm(t,"onDisconnectEvents");const e=Vm(t),n=La();Nf(t.onDisconnect_,He(),(l,u)=>{const d=BA(l,u,t.serverSyncTree_,e);gm(n,l,d)});let s=[];Nf(n,He(),(l,u)=>{s=s.concat(cc(t.serverSyncTree_,l,u));const d=l8(t,l);s1(t,d)}),t.onDisconnect_=La(),ki(t.eventQueue_,He(),s)}function i8(t){t.persistentConnection_&&t.persistentConnection_.interrupt(QA)}function Hm(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Xt(n,...e)}function Wm(t,e,n){return Rm(t.serverSyncTree_,e,n)||Le.EMPTY_NODE}function i1(t,e=t.transactionQueueTree_){if(e||hc(t,e),Bs(e)){const n=Gm(t,e);te(n.length>0,"Sending zero length transaction queue"),n.every(l=>l.status===0)&&s8(t,al(e),n)}else Bm(e)&&fc(e,n=>{i1(t,n)})}function s8(t,e,n){const s=n.map(w=>w.currentWriteId),l=Wm(t,e,s);let u=l;const d=l.hash();for(let w=0;w<n.length;w++){const A=n[w];te(A.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),A.status=1,A.retryCount++;const C=Mn(e,A.path);u=u.updateChild(C,A.currentOutputSnapshotRaw)}const p=u.val(!0),x=e;t.server_.put(x.toString(),p,w=>{Hm(t,"transaction put response",{path:x.toString(),status:w});let A=[];if(w==="ok"){const C=[];for(let I=0;I<n.length;I++)n[I].status=2,A=A.concat(ls(t.serverSyncTree_,n[I].currentWriteId)),n[I].onComplete&&C.push(()=>n[I].onComplete(null,!0,n[I].currentOutputSnapshotResolved)),n[I].unwatcher();hc(t,n1(t.transactionQueueTree_,e)),i1(t,t.transactionQueueTree_),ki(t.eventQueue_,e,A);for(let I=0;I<C.length;I++)ol(C[I])}else{if(w==="datastale")for(let C=0;C<n.length;C++)n[C].status===3?n[C].status=4:n[C].status=0;else{_n("transaction at "+x.toString()+" failed: "+w);for(let C=0;C<n.length;C++)n[C].status=4,n[C].abortReason=w}s1(t,e)}},d)}function s1(t,e){const n=zm(t,e),s=al(n),l=Gm(t,n);return o8(t,l,s),s}function o8(t,e,n){if(e.length===0)return;const s=[];let l=[];const d=e.filter(p=>p.status===0).map(p=>p.currentWriteId);for(let p=0;p<e.length;p++){const x=e[p],w=Mn(n,x.path);let A=!1,C;if(te(w!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),x.status===4)A=!0,C=x.abortReason,l=l.concat(ls(t.serverSyncTree_,x.currentWriteId,!0));else if(x.status===0)if(x.retryCount>=qA)A=!0,C="maxretry",l=l.concat(ls(t.serverSyncTree_,x.currentWriteId,!0));else{const I=Wm(t,x.path,d);x.currentInputSnapshot=I;const D=e[p].update(I.val());if(D!==void 0){Um("transaction failed: Data returned ",D,x.path);let k=Yt(D);typeof D=="object"&&D!=null&&Ir(D,".priority")||(k=k.updatePriority(I.getPriority()));const ee=x.currentWriteId,b=Vm(t),N=LA(k,I,b);x.currentOutputSnapshotRaw=k,x.currentOutputSnapshotResolved=N,x.currentWriteId=n8(t),d.splice(d.indexOf(ee),1),l=l.concat(RA(t.serverSyncTree_,x.path,N,x.currentWriteId,x.applyLocally)),l=l.concat(ls(t.serverSyncTree_,ee,!0))}else A=!0,C="nodata",l=l.concat(ls(t.serverSyncTree_,x.currentWriteId,!0))}ki(t.eventQueue_,n,l),l=[],A&&(e[p].status=2,function(I){setTimeout(I,Math.floor(0))}(e[p].unwatcher),e[p].onComplete&&(C==="nodata"?s.push(()=>e[p].onComplete(null,!1,e[p].currentInputSnapshot)):s.push(()=>e[p].onComplete(new Error(C),!1,null))))}hc(t,t.transactionQueueTree_);for(let p=0;p<s.length;p++)ol(s[p]);i1(t,t.transactionQueueTree_)}function zm(t,e){let n,s=t.transactionQueueTree_;for(n=Te(e);n!==null&&Bs(s)===void 0;)s=n1(s,n),e=$e(e),n=Te(e);return s}function Gm(t,e){const n=[];return jm(t,e,n),n.sort((s,l)=>s.order-l.order),n}function jm(t,e,n){const s=Bs(e);if(s)for(let l=0;l<s.length;l++)n.push(s[l]);fc(e,l=>{jm(t,l,n)})}function hc(t,e){const n=Bs(e);if(n){let s=0;for(let l=0;l<n.length;l++)n[l].status!==2&&(n[s]=n[l],s++);n.length=s,Pm(e,n.length>0?n:void 0)}fc(e,s=>{hc(t,s)})}function l8(t,e){const n=al(zm(t,e)),s=n1(t.transactionQueueTree_,e);return UA(s,l=>{_u(t,l)}),_u(t,s),Lm(s,l=>{_u(t,l)}),n}function _u(t,e){const n=Bs(e);if(n){const s=[];let l=[],u=-1;for(let d=0;d<n.length;d++)n[d].status===3||(n[d].status===1?(te(u===d-1,"All SENT items should be at beginning of queue."),u=d,n[d].status=3,n[d].abortReason="set"):(te(n[d].status===0,"Unexpected transaction status in abort"),n[d].unwatcher(),l=l.concat(ls(t.serverSyncTree_,n[d].currentWriteId,!0)),n[d].onComplete&&s.push(n[d].onComplete.bind(null,new Error("set"),!1,null))));u===-1?Pm(e,void 0):n.length=u+1,ki(t.eventQueue_,al(e),l);for(let d=0;d<s.length;d++)ol(s[d])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a8(t){let e="";const n=t.split("/");for(let s=0;s<n.length;s++)if(n[s].length>0){let l=n[s];try{l=decodeURIComponent(l.replace(/\+/g," "))}catch{}e+="/"+l}return e}function c8(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const s=n.split("=");s.length===2?e[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):_n(`Invalid query segment '${n}' in query '${t}'`)}return e}const H0=function(t,e){const n=u8(t),s=n.namespace;n.domain==="firebase.com"&&Ti(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&n.domain!=="localhost"&&Ti("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||U3();const l=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Q3(n.host,n.secure,s,l,e,"",s!==n.subdomain),path:new tt(n.pathString)}},u8=function(t){let e="",n="",s="",l="",u="",d=!0,p="https",x=443;if(typeof t=="string"){let w=t.indexOf("//");w>=0&&(p=t.substring(0,w-1),t=t.substring(w+2));let A=t.indexOf("/");A===-1&&(A=t.length);let C=t.indexOf("?");C===-1&&(C=t.length),e=t.substring(0,Math.min(A,C)),A<C&&(l=a8(t.substring(A,C)));const I=c8(t.substring(Math.min(t.length,C)));w=e.indexOf(":"),w>=0?(d=p==="https"||p==="wss",x=parseInt(e.substring(w+1),10)):w=e.length;const D=e.slice(0,w);if(D.toLowerCase()==="localhost")n="localhost";else if(D.split(".").length<=2)n=D;else{const k=e.indexOf(".");s=e.substring(0,k).toLowerCase(),n=e.substring(k+1),u=s}"ns"in I&&(u=I.ns)}return{host:e,port:x,domain:n,subdomain:s,secure:d,scheme:p,pathString:l,namespace:u}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e,n,s,l){this._repo=e,this._path=n,this._queryParams=s,this._orderByCalled=l}get key(){return Ie(this._path)?null:im(this._path)}get ref(){return new Ls(this._repo,this._path)}get _queryIdentifier(){const e=I0(this._queryParams),n=Vh(e);return n==="{}"?"default":n}get _queryObject(){return I0(this._queryParams)}isEqual(e){if(e=SE(e),!(e instanceof o1))return!1;const n=this._repo===e._repo,s=lm(this._path,e._path),l=this._queryIdentifier===e._queryIdentifier;return n&&s&&l}toJSON(){return this.toString()}toString(){return this._repo.toString()+CC(this._path)}}class Ls extends o1{constructor(e,n){super(e,n,new Xh,!1)}get parent(){const e=om(this._path);return e===null?null:new Ls(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}TA(Ls);NA(Ls);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f8="FIREBASE_DATABASE_EMULATOR_HOST",Bf={};let h8=!1;function d8(t,e,n,s,l){let u=s||t.options.databaseURL;u===void 0&&(t.options.projectId||Ti("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Xt("Using default host for project ",t.options.projectId),u=`${t.options.projectId}-default-rtdb.firebaseio.com`);let d=H0(u,l),p=d.repoInfo,x;typeof process<"u"&&l0&&(x=l0[f8]),x?(u=`http://${x}?ns=${p.namespace}`,d=H0(u,l),p=d.repoInfo):d.repoInfo.secure;const w=new Z3(t.name,t.options,e);jA("Invalid Firebase Database URL",d),Ie(d.path)||Ti("Database URL must point to the root of a Firebase Database (not including a child path).");const A=p8(p,t,w,new K3(t,n));return new m8(A,t)}function g8(t,e){const n=Bf[e];(!n||n[t.key]!==t)&&Ti(`Database ${e}(${t.repoInfo_}) has already been deleted.`),i8(t),delete n[t.key]}function p8(t,e,n,s){let l=Bf[e.name];l||(l={},Bf[e.name]=l);let u=l[t.toURLString()];return u&&Ti("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),u=new JA(t,h8,n,s),l[t.toURLString()]=u,u}class m8{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||($A(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ls(this._repo,He())),this._rootInternal}_delete(){return this._rootInternal!==null&&(g8(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Ti("Cannot call "+e+" on a deleted database.")}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x8(t){M3(_3),Da(new Oa("database",(e,{instanceIdentifier:n})=>{const s=e.getProvider("app").getImmediate(),l=e.getProvider("auth-internal"),u=e.getProvider("app-check-internal");return d8(s,l,u,n)},"PUBLIC").setMultipleInstances(!0)),gs(a0,c0,t),gs(a0,c0,"esm2020")}yr.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};yr.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};x8();function w8(t,e){return()=>{}}const Eu="badminton-current-match-id";function l1(t){return`badminton-match-${t}`}function y8(t){try{const e=localStorage.getItem(l1(t));if(e){const n=JSON.parse(e),s=n.serverAtStart===2?2:1,l=n.currentServer===2?2:1;return{name1:n.name1??"",name2:n.name2??"",score1:Number(n.score1)||0,score2:Number(n.score2)||0,set1:Number(n.set1)||0,set2:Number(n.set2)||0,serverAtStart:s,currentServer:typeof n.currentServer=="number"?l:s}}}catch{}return null}function _8(t,e){localStorage.setItem(l1(t),JSON.stringify(e))}const E8={name1:"",name2:"",score1:0,score2:0,set1:0,set2:0,serverAtStart:1,currentServer:1};function C8(t,e,n,s,l,u,d){const x=new Date().toLocaleDateString("sv-SE",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),w=t.trim()||"Spelare 1",A=e.trim()||"Spelare 2",C=l>u?w:u>l?A:null,I=n>s?w:s>n?A:null,D=d===1?w:A;let k=` BADMINTON MATCH
`;return k+=`${"".repeat(40)}

`,k+=`Datum: ${x}

`,k+=`Set:   ${w}  ${l}  ${u}  ${A}
`,k+=`Pong: ${w}  ${n}  ${s}  ${A}
`,k+=`Servar frn start: ${D}

`,C&&(k+=`Matchvinnare (set): ${C}
`),I&&I!==C&&(k+=`Senaste set (pong): ${I}
`),!C&&!I&&(k+=`Oavgjort.
`),k+=`
${"".repeat(40)}
`,k}function A8(t){const e=new Blob([t],{type:"text/plain;charset=utf-8"}),s=`badminton_${new Date().toISOString().slice(0,10)}_${Date.now().toString(36)}.txt`,l=document.createElement("a");l.href=URL.createObjectURL(e),l.download=s,l.click(),URL.revokeObjectURL(l.href)}function W0({label:t,name:e,onNameChange:n,score:s,onScoreChange:l,set:u,onSetChange:d}){return J.jsxs("div",{className:"side",children:[J.jsx("span",{className:"side-label",children:t}),J.jsx("input",{type:"text",className:"name-input",value:e,onChange:p=>n(p.target.value),placeholder:t,maxLength:20}),J.jsx("span",{className:"score-display",children:s}),J.jsxs("div",{className:"score-controls",children:[J.jsx("button",{type:"button",className:"btn-score",onClick:()=>l(-1),disabled:s<=0,"aria-label":"Minska pong",children:""}),J.jsx("button",{type:"button",className:"btn-score",onClick:()=>l(1),"aria-label":"ka pong",children:"+"})]}),J.jsx("span",{className:"row-label",children:"Set"}),J.jsx("span",{className:"score-display set-display",children:u}),J.jsxs("div",{className:"score-controls",children:[J.jsx("button",{type:"button",className:"btn-score",onClick:()=>d(-1),disabled:u<=0,"aria-label":"Minska set",children:""}),J.jsx("button",{type:"button",className:"btn-score",onClick:()=>d(1),"aria-label":"ka set",children:"+"})]})]})}function S8({open:t,summary:e,onClose:n,onCopy:s,onDownload:l,copyLabel:u,downloadLabel:d}){return t?J.jsx("div",{className:"modal-overlay",onClick:p=>p.target===p.currentTarget&&n(),role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:J.jsxs("div",{className:"modal",children:[J.jsx("h2",{id:"modal-title",children:"Matchresultat"}),J.jsx("pre",{children:e}),J.jsxs("div",{className:"modal-buttons",children:[J.jsx("button",{type:"button",className:"btn-copy",onClick:s,children:u}),J.jsx("button",{type:"button",className:"btn-save",onClick:l,children:d}),J.jsx("button",{type:"button",className:"btn-close",onClick:n,children:"Stng"})]})]})}):null}function v8({matchId:t}){const[e,n]=Ve.useState(()=>y8(t)??E8),[s,l]=Ve.useState(!1),u=l1(t);Ve.useEffect(()=>{const N=R=>{if(R.key===u&&R.newValue)try{n(JSON.parse(R.newValue))}catch{}};return window.addEventListener("storage",N),()=>window.removeEventListener("storage",N)},[u]),Ve.useEffect(()=>w8(),[t]);const d=e.name1.trim()||"Spelare 1",p=e.name2.trim()||"Spelare 2",x=s?p:d,w=s?d:p,A=s?e.score2:e.score1,C=s?e.score1:e.score2,I=s?e.set2:e.set1,D=s?e.set1:e.set2,B=(e.currentServer===2?2:1)===(s?2:1),ee=e.name1===""&&e.name2===""&&e.score1===0&&e.score2===0&&e.set1===0&&e.set2===0,b=B?x:w;return J.jsxs("div",{className:"scoreboard-tavla",children:[ee&&J.jsx("p",{className:"scoreboard-waiting",children:"Vntar p matchdata. ppna lnken p samma enhet som pongrknaren, eller aktivera Firebase fr synk mellan enheter."}),J.jsxs("div",{className:"scoreboard-board",children:[J.jsxs("div",{className:"tavla-side tavla-left",children:[J.jsx("span",{className:"tavla-name",children:x}),J.jsx("span",{className:"tavla-score",children:A}),J.jsxs("span",{className:"tavla-sets",children:["Set: ",I]})]}),J.jsx("span",{className:"tavla-divider","aria-hidden":!0,children:""}),J.jsxs("div",{className:"tavla-side tavla-right",children:[J.jsx("span",{className:"tavla-name",children:w}),J.jsx("span",{className:"tavla-score",children:C}),J.jsxs("span",{className:"tavla-sets",children:["Set: ",D]})]})]}),J.jsxs("div",{className:"tavla-serve",children:[J.jsx("span",{className:"tavla-serve-label",children:"Servar"}),J.jsxs("span",{className:"tavla-serve-name",children:[" ",b]})]}),J.jsx("button",{type:"button",className:"tavla-mirror",onClick:()=>l(N=>!N),"aria-pressed":s,title:s?"Sl av spegling":"Spegla tavlan",children:""})]})}function I8(){var t;return((t=crypto.randomUUID)==null?void 0:t.call(crypto))??`match-${Date.now()}-${Math.random().toString(36).slice(2,11)}`}function T8(){const[t,e]=Ve.useState(()=>{try{return localStorage.getItem(Eu)}catch{return null}}),[n,s]=Ve.useState(""),[l,u]=Ve.useState(""),[d,p]=Ve.useState(0),[x,w]=Ve.useState(0),[A,C]=Ve.useState(0),[I,D]=Ve.useState(0),[k,B]=Ve.useState(1),[ee,b]=Ve.useState(1),[N,R]=Ve.useState(!1),[P,X]=Ve.useState(!1),[G,F]=Ve.useState(null),[K,z]=Ve.useState(null),[fe,Se]=Ve.useState("Kopiera"),[ce,me]=Ve.useState("Ladda ner fil"),it={name1:n,name2:l,score1:d,score2:x,set1:A,set2:I,serverAtStart:k,currentServer:ee};Ve.useEffect(()=>{t&&(localStorage.setItem(Eu,t),_8(t,it))},[t,n,l,d,x,A,I,k,ee]);const W=typeof window<"u"&&(G??t)?`${window.location.origin}${window.location.pathname||"/"}?display=1&match=${encodeURIComponent(G??t??"")}`:"";Ve.useEffect(()=>{if(!P||!(G??t))return;const re=`${window.location.origin}${window.location.pathname||"/"}?display=1&match=${encodeURIComponent(G??t??"")}`;tl.toDataURL(re,{width:260,margin:2}).then(z).catch(()=>z(null))},[P,G,t]);const je=C8(n,l,d,x,A,I,k),xe=()=>{const re=n;s(l),u(re),p(0),w(0),C(I),D(A),B(Ee=>Ee===1?2:1),b(Ee=>Ee===1?2:1)},ne=()=>{navigator.clipboard.writeText(je).then(()=>{Se("Kopierat!"),setTimeout(()=>Se("Kopiera"),1500)})},de=()=>{A8(je),me("Nedladdad!"),setTimeout(()=>me("Ladda ner fil"),1500)};return J.jsxs(J.Fragment,{children:[J.jsx("h1",{children:" Badminton Pongrknare"}),J.jsxs("div",{className:"court",children:[J.jsx(W0,{label:"Spelare 1",name:n,onNameChange:s,score:d,onScoreChange:re=>{p(Re=>Math.max(0,Re+re)),re>0?b(1):re<0&&b(2)},set:A,onSetChange:re=>C(Re=>Math.max(0,Re+re))}),J.jsxs("div",{className:"court-center",children:[J.jsx("span",{className:"vs",children:"VS"}),J.jsx("button",{type:"button",className:"btn-swap",onClick:xe,"aria-label":"Byt sida",children:" Byt sida"}),J.jsxs("div",{className:"server-choice",children:[J.jsx("span",{className:"server-choice-label",children:"Servar frn start"}),J.jsxs("div",{className:"server-choice-buttons",children:[J.jsx("button",{type:"button",className:`btn-server ${ee===1?"active":""}`,onClick:()=>{b(1),d+x===0&&B(1)},"aria-pressed":ee===1,children:"1"}),J.jsx("button",{type:"button",className:`btn-server ${ee===2?"active":""}`,onClick:()=>{b(2),d+x===0&&B(2)},"aria-pressed":ee===2,children:"2"})]}),J.jsx("span",{className:"server-choice-name","aria-live":"polite",children:ee===1?n.trim()||"Spelare 1":l.trim()||"Spelare 2"}),d+x>0&&J.jsxs("span",{className:"server-choice-locked",children:["Brjade serva: ",k===1?n.trim()||"Spelare 1":l.trim()||"Spelare 2"]})]})]}),J.jsx(W0,{label:"Spelare 2",name:l,onNameChange:u,score:x,onScoreChange:re=>{w(Re=>Math.max(0,Re+re)),re>0?b(2):re<0&&b(1)},set:I,onSetChange:re=>D(Re=>Math.max(0,Re+re))})]}),J.jsxs("div",{className:"actions",children:[J.jsx("button",{type:"button",className:"btn-swap",onClick:()=>{const re=t||I8();t||e(re),F(re),z(null),X(!0)},children:" Visa QR fr pongvisare"}),J.jsx("button",{type:"button",className:"btn-save",onClick:()=>R(!0),children:"Spara match"}),J.jsx("span",{className:"save-info",children:"Ladda ner en fil med matchresultat eller kopiera till urklipp"}),J.jsx("button",{type:"button",className:"btn-swap save-info-link",onClick:()=>{e(null),F(null),z(null),s(""),u(""),p(0),w(0),C(0),D(0),B(1),b(1),X(!1);try{localStorage.removeItem(Eu)}catch{}},children:"Starta ny match"})]}),P&&J.jsx("div",{className:"modal-overlay",onClick:re=>{re.target===re.currentTarget&&(X(!1),F(null),z(null))},role:"dialog","aria-modal":"true","aria-labelledby":"qr-modal-title",children:J.jsxs("div",{className:"modal qr-modal",children:[J.jsx("h2",{id:"qr-modal-title",children:"Pongvisare  koppla enhet till denna match"}),J.jsx("p",{className:"qr-modal-text",children:"Skanna QR-koden med den enhet som ska visa pongen. Den enheten r d kopplad till denna match."}),J.jsx("div",{className:"qr-modal-image-wrap",children:K?J.jsx("img",{src:K,alt:"QR-kod fr pongvisare",className:"qr-modal-image"}):J.jsx("span",{className:"qr-modal-loading",children:"Laddar QR-kod"})}),J.jsxs("div",{className:"qr-modal-url-wrap",children:[J.jsx("input",{type:"text",readOnly:!0,className:"qr-modal-url",value:W||"","aria-label":"Lnk till pongvisare"}),J.jsx("button",{type:"button",className:"btn-copy",onClick:()=>{W&&navigator.clipboard.writeText(W)},children:"Kopiera lnk"})]}),J.jsx("button",{type:"button",className:"btn-close",onClick:()=>{X(!1),F(null),z(null)},children:"Stng"})]})}),J.jsx(S8,{open:N,summary:je,onClose:()=>R(!1),onCopy:ne,onDownload:de,copyLabel:fe,downloadLabel:ce})]})}const Cu="badminton-qr-reader";function N8(t){try{return new URL(t).searchParams.get("match")}catch{return null}}function R8(){const[t,e]=Ve.useState(!1),[n,s]=Ve.useState(null),l=Ve.useRef(null);Ve.useEffect(()=>{if(!t||(s(null),!document.getElementById(Cu)))return;const p=new sE(Cu);return l.current=p,p.start({facingMode:"environment"},{fps:10,qrbox:{width:220,height:220}},x=>{const w=N8(x);w&&p.stop().then(()=>{l.current=null,e(!1);const A=`${window.location.origin}${window.location.pathname||"/"}`;window.location.href=`${A}?display=1&match=${encodeURIComponent(w)}`}).catch(()=>{e(!1),window.location.href=`${window.location.pathname||"/"}?display=1&match=${encodeURIComponent(w)}`})},()=>{}).catch(x=>{s((x==null?void 0:x.message)??"Kunde inte starta kameran"),e(!1),l.current=null}),()=>{l.current=null,p.stop().catch(()=>{})}},[t]);const u=()=>{l.current&&(l.current.stop().catch(()=>{}),l.current=null),e(!1),s(null)};return J.jsxs("div",{className:"scoreboard-display scoreboard-connect",children:[J.jsx("h1",{className:"scoreboard-title",children:" Pongvisare"}),J.jsx("p",{className:"scoreboard-error-text",children:"Koppla denna enhet till en match genom att skanna QR-koden som visas i pongrknaren."}),t?J.jsxs("div",{className:"scan-area",children:[J.jsx("div",{id:Cu,className:"qr-reader-container"}),n&&J.jsx("p",{className:"scoreboard-error-text scan-error",children:n}),J.jsx("button",{type:"button",className:"btn-close scan-cancel-btn",onClick:u,children:"Avbryt"})]}):J.jsx("button",{type:"button",className:"btn-save scan-connect-btn",onClick:()=>e(!0),children:" Skanna QR fr att koppla till match"})]})}function b8(){if(typeof window>"u")return null;const t=new URLSearchParams(window.location.search),e=t.get("display")==="1",n=t.get("match")??"";return e?n?J.jsx(v8,{matchId:n}):J.jsx(R8,{}):J.jsx(T8,{})}t2(document.getElementById("root")).render(J.jsx(Ve.StrictMode,{children:J.jsx(b8,{})}));

(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))u(d);new MutationObserver(d=>{for(const p of d)if(p.type==="childList")for(const w of p.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&u(w)}).observe(document,{childList:!0,subtree:!0});function i(d){const p={};return d.integrity&&(p.integrity=d.integrity),d.referrerPolicy&&(p.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?p.credentials="include":d.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function u(d){if(d.ep)return;d.ep=!0;const p=i(d);fetch(d.href,p)}})();var tc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cm(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var of={exports:{}},yl={},lf={exports:{}},st={};var X1;function um(){if(X1)return st;X1=1;var l=Symbol.for("react.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),w=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),E=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),b=Symbol.iterator;function k(H){return H===null||typeof H!="object"?null:(H=b&&H[b]||H["@@iterator"],typeof H=="function"?H:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},J=Object.assign,$={};function xe(H,ee,Ge){this.props=H,this.context=ee,this.refs=$,this.updater=Ge||V}xe.prototype.isReactComponent={},xe.prototype.setState=function(H,ee){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,ee,"setState")},xe.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function Ee(){}Ee.prototype=xe.prototype;function pe(H,ee,Ge){this.props=H,this.context=ee,this.refs=$,this.updater=Ge||V}var te=pe.prototype=new Ee;te.constructor=pe,J(te,xe.prototype),te.isPureReactComponent=!0;var oe=Array.isArray,Qe=Object.prototype.hasOwnProperty,ie={current:null},Y={key:!0,ref:!0,__self:!0,__source:!0};function de(H,ee,Ge){var Ve,tt={},we=null,nt=null;if(ee!=null)for(Ve in ee.ref!==void 0&&(nt=ee.ref),ee.key!==void 0&&(we=""+ee.key),ee)Qe.call(ee,Ve)&&!Y.hasOwnProperty(Ve)&&(tt[Ve]=ee[Ve]);var Be=arguments.length-2;if(Be===1)tt.children=Ge;else if(1<Be){for(var at=Array(Be),Wt=0;Wt<Be;Wt++)at[Wt]=arguments[Wt+2];tt.children=at}if(H&&H.defaultProps)for(Ve in Be=H.defaultProps,Be)tt[Ve]===void 0&&(tt[Ve]=Be[Ve]);return{$$typeof:l,type:H,key:we,ref:nt,props:tt,_owner:ie.current}}function j(H,ee){return{$$typeof:l,type:H.type,key:ee,ref:H.ref,props:H.props,_owner:H._owner}}function Me(H){return typeof H=="object"&&H!==null&&H.$$typeof===l}function ve(H){var ee={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(Ge){return ee[Ge]})}var re=/\/+/g;function fe(H,ee){return typeof H=="object"&&H!==null&&H.key!=null?ve(""+H.key):ee.toString(36)}function Se(H,ee,Ge,Ve,tt){var we=typeof H;(we==="undefined"||we==="boolean")&&(H=null);var nt=!1;if(H===null)nt=!0;else switch(we){case"string":case"number":nt=!0;break;case"object":switch(H.$$typeof){case l:case t:nt=!0}}if(nt)return nt=H,tt=tt(nt),H=Ve===""?"."+fe(nt,0):Ve,oe(tt)?(Ge="",H!=null&&(Ge=H.replace(re,"$&/")+"/"),Se(tt,ee,Ge,"",function(Wt){return Wt})):tt!=null&&(Me(tt)&&(tt=j(tt,Ge+(!tt.key||nt&&nt.key===tt.key?"":(""+tt.key).replace(re,"$&/")+"/")+H)),ee.push(tt)),1;if(nt=0,Ve=Ve===""?".":Ve+":",oe(H))for(var Be=0;Be<H.length;Be++){we=H[Be];var at=Ve+fe(we,Be);nt+=Se(we,ee,Ge,at,tt)}else if(at=k(H),typeof at=="function")for(H=at.call(H),Be=0;!(we=H.next()).done;)we=we.value,at=Ve+fe(we,Be++),nt+=Se(we,ee,Ge,at,tt);else if(we==="object")throw ee=String(H),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.");return nt}function K(H,ee,Ge){if(H==null)return H;var Ve=[],tt=0;return Se(H,Ve,"","",function(we){return ee.call(Ge,we,tt++)}),Ve}function Je(H){if(H._status===-1){var ee=H._result;ee=ee(),ee.then(function(Ge){(H._status===0||H._status===-1)&&(H._status=1,H._result=Ge)},function(Ge){(H._status===0||H._status===-1)&&(H._status=2,H._result=Ge)}),H._status===-1&&(H._status=0,H._result=ee)}if(H._status===1)return H._result.default;throw H._result}var Re={current:null},ye={transition:null},ke={ReactCurrentDispatcher:Re,ReactCurrentBatchConfig:ye,ReactCurrentOwner:ie};function ce(){throw Error("act(...) is not supported in production builds of React.")}return st.Children={map:K,forEach:function(H,ee,Ge){K(H,function(){ee.apply(this,arguments)},Ge)},count:function(H){var ee=0;return K(H,function(){ee++}),ee},toArray:function(H){return K(H,function(ee){return ee})||[]},only:function(H){if(!Me(H))throw Error("React.Children.only expected to receive a single React element child.");return H}},st.Component=xe,st.Fragment=i,st.Profiler=d,st.PureComponent=pe,st.StrictMode=u,st.Suspense=S,st.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ke,st.act=ce,st.cloneElement=function(H,ee,Ge){if(H==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+H+".");var Ve=J({},H.props),tt=H.key,we=H.ref,nt=H._owner;if(ee!=null){if(ee.ref!==void 0&&(we=ee.ref,nt=ie.current),ee.key!==void 0&&(tt=""+ee.key),H.type&&H.type.defaultProps)var Be=H.type.defaultProps;for(at in ee)Qe.call(ee,at)&&!Y.hasOwnProperty(at)&&(Ve[at]=ee[at]===void 0&&Be!==void 0?Be[at]:ee[at])}var at=arguments.length-2;if(at===1)Ve.children=Ge;else if(1<at){Be=Array(at);for(var Wt=0;Wt<at;Wt++)Be[Wt]=arguments[Wt+2];Ve.children=Be}return{$$typeof:l,type:H.type,key:tt,ref:we,props:Ve,_owner:nt}},st.createContext=function(H){return H={$$typeof:w,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},H.Provider={$$typeof:p,_context:H},H.Consumer=H},st.createElement=de,st.createFactory=function(H){var ee=de.bind(null,H);return ee.type=H,ee},st.createRef=function(){return{current:null}},st.forwardRef=function(H){return{$$typeof:A,render:H}},st.isValidElement=Me,st.lazy=function(H){return{$$typeof:O,_payload:{_status:-1,_result:H},_init:Je}},st.memo=function(H,ee){return{$$typeof:E,type:H,compare:ee===void 0?null:ee}},st.startTransition=function(H){var ee=ye.transition;ye.transition={};try{H()}finally{ye.transition=ee}},st.unstable_act=ce,st.useCallback=function(H,ee){return Re.current.useCallback(H,ee)},st.useContext=function(H){return Re.current.useContext(H)},st.useDebugValue=function(){},st.useDeferredValue=function(H){return Re.current.useDeferredValue(H)},st.useEffect=function(H,ee){return Re.current.useEffect(H,ee)},st.useId=function(){return Re.current.useId()},st.useImperativeHandle=function(H,ee,Ge){return Re.current.useImperativeHandle(H,ee,Ge)},st.useInsertionEffect=function(H,ee){return Re.current.useInsertionEffect(H,ee)},st.useLayoutEffect=function(H,ee){return Re.current.useLayoutEffect(H,ee)},st.useMemo=function(H,ee){return Re.current.useMemo(H,ee)},st.useReducer=function(H,ee,Ge){return Re.current.useReducer(H,ee,Ge)},st.useRef=function(H){return Re.current.useRef(H)},st.useState=function(H){return Re.current.useState(H)},st.useSyncExternalStore=function(H,ee,Ge){return Re.current.useSyncExternalStore(H,ee,Ge)},st.useTransition=function(){return Re.current.useTransition()},st.version="18.3.1",st}var Y1;function dh(){return Y1||(Y1=1,lf.exports=um()),lf.exports}var K1;function fm(){if(K1)return yl;K1=1;var l=dh(),t=Symbol.for("react.element"),i=Symbol.for("react.fragment"),u=Object.prototype.hasOwnProperty,d=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};function w(A,S,E){var O,b={},k=null,V=null;E!==void 0&&(k=""+E),S.key!==void 0&&(k=""+S.key),S.ref!==void 0&&(V=S.ref);for(O in S)u.call(S,O)&&!p.hasOwnProperty(O)&&(b[O]=S[O]);if(A&&A.defaultProps)for(O in S=A.defaultProps,S)b[O]===void 0&&(b[O]=S[O]);return{$$typeof:t,type:A,key:k,ref:V,props:b,_owner:d.current}}return yl.Fragment=i,yl.jsx=w,yl.jsxs=w,yl}var q1;function hm(){return q1||(q1=1,of.exports=fm()),of.exports}var Ae=hm(),kt=dh(),nc={},af={exports:{}},er={},cf={exports:{}},uf={};var Z1;function dm(){return Z1||(Z1=1,(function(l){function t(ye,ke){var ce=ye.length;ye.push(ke);e:for(;0<ce;){var H=ce-1>>>1,ee=ye[H];if(0<d(ee,ke))ye[H]=ke,ye[ce]=ee,ce=H;else break e}}function i(ye){return ye.length===0?null:ye[0]}function u(ye){if(ye.length===0)return null;var ke=ye[0],ce=ye.pop();if(ce!==ke){ye[0]=ce;e:for(var H=0,ee=ye.length,Ge=ee>>>1;H<Ge;){var Ve=2*(H+1)-1,tt=ye[Ve],we=Ve+1,nt=ye[we];if(0>d(tt,ce))we<ee&&0>d(nt,tt)?(ye[H]=nt,ye[we]=ce,H=we):(ye[H]=tt,ye[Ve]=ce,H=Ve);else if(we<ee&&0>d(nt,ce))ye[H]=nt,ye[we]=ce,H=we;else break e}}return ke}function d(ye,ke){var ce=ye.sortIndex-ke.sortIndex;return ce!==0?ce:ye.id-ke.id}if(typeof performance=="object"&&typeof performance.now=="function"){var p=performance;l.unstable_now=function(){return p.now()}}else{var w=Date,A=w.now();l.unstable_now=function(){return w.now()-A}}var S=[],E=[],O=1,b=null,k=3,V=!1,J=!1,$=!1,xe=typeof setTimeout=="function"?setTimeout:null,Ee=typeof clearTimeout=="function"?clearTimeout:null,pe=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function te(ye){for(var ke=i(E);ke!==null;){if(ke.callback===null)u(E);else if(ke.startTime<=ye)u(E),ke.sortIndex=ke.expirationTime,t(S,ke);else break;ke=i(E)}}function oe(ye){if($=!1,te(ye),!J)if(i(S)!==null)J=!0,Je(Qe);else{var ke=i(E);ke!==null&&Re(oe,ke.startTime-ye)}}function Qe(ye,ke){J=!1,$&&($=!1,Ee(de),de=-1),V=!0;var ce=k;try{for(te(ke),b=i(S);b!==null&&(!(b.expirationTime>ke)||ye&&!ve());){var H=b.callback;if(typeof H=="function"){b.callback=null,k=b.priorityLevel;var ee=H(b.expirationTime<=ke);ke=l.unstable_now(),typeof ee=="function"?b.callback=ee:b===i(S)&&u(S),te(ke)}else u(S);b=i(S)}if(b!==null)var Ge=!0;else{var Ve=i(E);Ve!==null&&Re(oe,Ve.startTime-ke),Ge=!1}return Ge}finally{b=null,k=ce,V=!1}}var ie=!1,Y=null,de=-1,j=5,Me=-1;function ve(){return!(l.unstable_now()-Me<j)}function re(){if(Y!==null){var ye=l.unstable_now();Me=ye;var ke=!0;try{ke=Y(!0,ye)}finally{ke?fe():(ie=!1,Y=null)}}else ie=!1}var fe;if(typeof pe=="function")fe=function(){pe(re)};else if(typeof MessageChannel<"u"){var Se=new MessageChannel,K=Se.port2;Se.port1.onmessage=re,fe=function(){K.postMessage(null)}}else fe=function(){xe(re,0)};function Je(ye){Y=ye,ie||(ie=!0,fe())}function Re(ye,ke){de=xe(function(){ye(l.unstable_now())},ke)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(ye){ye.callback=null},l.unstable_continueExecution=function(){J||V||(J=!0,Je(Qe))},l.unstable_forceFrameRate=function(ye){0>ye||125<ye?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<ye?Math.floor(1e3/ye):5},l.unstable_getCurrentPriorityLevel=function(){return k},l.unstable_getFirstCallbackNode=function(){return i(S)},l.unstable_next=function(ye){switch(k){case 1:case 2:case 3:var ke=3;break;default:ke=k}var ce=k;k=ke;try{return ye()}finally{k=ce}},l.unstable_pauseExecution=function(){},l.unstable_requestPaint=function(){},l.unstable_runWithPriority=function(ye,ke){switch(ye){case 1:case 2:case 3:case 4:case 5:break;default:ye=3}var ce=k;k=ye;try{return ke()}finally{k=ce}},l.unstable_scheduleCallback=function(ye,ke,ce){var H=l.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?H+ce:H):ce=H,ye){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=ce+ee,ye={id:O++,callback:ke,priorityLevel:ye,startTime:ce,expirationTime:ee,sortIndex:-1},ce>H?(ye.sortIndex=ce,t(E,ye),i(S)===null&&ye===i(E)&&($?(Ee(de),de=-1):$=!0,Re(oe,ce-H))):(ye.sortIndex=ee,t(S,ye),J||V||(J=!0,Je(Qe))),ye},l.unstable_shouldYield=ve,l.unstable_wrapCallback=function(ye){var ke=k;return function(){var ce=k;k=ke;try{return ye.apply(this,arguments)}finally{k=ce}}}})(uf)),uf}var Q1;function gm(){return Q1||(Q1=1,cf.exports=dm()),cf.exports}var J1;function pm(){if(J1)return er;J1=1;var l=dh(),t=gm();function i(n){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+n,h=1;h<arguments.length;h++)o+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+n+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var u=new Set,d={};function p(n,o){w(n,o),w(n+"Capture",o)}function w(n,o){for(d[n]=o,n=0;n<o.length;n++)u.add(o[n])}var A=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),S=Object.prototype.hasOwnProperty,E=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,O={},b={};function k(n){return S.call(b,n)?!0:S.call(O,n)?!1:E.test(n)?b[n]=!0:(O[n]=!0,!1)}function V(n,o,h,m){if(h!==null&&h.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return m?!1:h!==null?!h.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function J(n,o,h,m){if(o===null||typeof o>"u"||V(n,o,h,m))return!0;if(m)return!1;if(h!==null)switch(h.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function $(n,o,h,m,y,C,N){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=m,this.attributeNamespace=y,this.mustUseProperty=h,this.propertyName=n,this.type=o,this.sanitizeURL=C,this.removeEmptyString=N}var xe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){xe[n]=new $(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var o=n[0];xe[o]=new $(o,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){xe[n]=new $(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){xe[n]=new $(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){xe[n]=new $(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){xe[n]=new $(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){xe[n]=new $(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){xe[n]=new $(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){xe[n]=new $(n,5,!1,n.toLowerCase(),null,!1,!1)});var Ee=/[\-:]([a-z])/g;function pe(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var o=n.replace(Ee,pe);xe[o]=new $(o,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var o=n.replace(Ee,pe);xe[o]=new $(o,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var o=n.replace(Ee,pe);xe[o]=new $(o,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){xe[n]=new $(n,1,!1,n.toLowerCase(),null,!1,!1)}),xe.xlinkHref=new $("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){xe[n]=new $(n,1,!1,n.toLowerCase(),null,!0,!0)});function te(n,o,h,m){var y=xe.hasOwnProperty(o)?xe[o]:null;(y!==null?y.type!==0:m||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(J(o,h,y,m)&&(h=null),m||y===null?k(o)&&(h===null?n.removeAttribute(o):n.setAttribute(o,""+h)):y.mustUseProperty?n[y.propertyName]=h===null?y.type===3?!1:"":h:(o=y.attributeName,m=y.attributeNamespace,h===null?n.removeAttribute(o):(y=y.type,h=y===3||y===4&&h===!0?"":""+h,m?n.setAttributeNS(m,o,h):n.setAttribute(o,h))))}var oe=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Qe=Symbol.for("react.element"),ie=Symbol.for("react.portal"),Y=Symbol.for("react.fragment"),de=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),Me=Symbol.for("react.provider"),ve=Symbol.for("react.context"),re=Symbol.for("react.forward_ref"),fe=Symbol.for("react.suspense"),Se=Symbol.for("react.suspense_list"),K=Symbol.for("react.memo"),Je=Symbol.for("react.lazy"),Re=Symbol.for("react.offscreen"),ye=Symbol.iterator;function ke(n){return n===null||typeof n!="object"?null:(n=ye&&n[ye]||n["@@iterator"],typeof n=="function"?n:null)}var ce=Object.assign,H;function ee(n){if(H===void 0)try{throw Error()}catch(h){var o=h.stack.trim().match(/\n( *(at )?)/);H=o&&o[1]||""}return`
`+H+n}var Ge=!1;function Ve(n,o){if(!n||Ge)return"";Ge=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(Q){var m=Q}Reflect.construct(n,[],o)}else{try{o.call()}catch(Q){m=Q}n.call(o.prototype)}else{try{throw Error()}catch(Q){m=Q}n()}}catch(Q){if(Q&&m&&typeof Q.stack=="string"){for(var y=Q.stack.split(`
`),C=m.stack.split(`
`),N=y.length-1,P=C.length-1;1<=N&&0<=P&&y[N]!==C[P];)P--;for(;1<=N&&0<=P;N--,P--)if(y[N]!==C[P]){if(N!==1||P!==1)do if(N--,P--,0>P||y[N]!==C[P]){var B=`
`+y[N].replace(" at new "," at ");return n.displayName&&B.includes("<anonymous>")&&(B=B.replace("<anonymous>",n.displayName)),B}while(1<=N&&0<=P);break}}}finally{Ge=!1,Error.prepareStackTrace=h}return(n=n?n.displayName||n.name:"")?ee(n):""}function tt(n){switch(n.tag){case 5:return ee(n.type);case 16:return ee("Lazy");case 13:return ee("Suspense");case 19:return ee("SuspenseList");case 0:case 2:case 15:return n=Ve(n.type,!1),n;case 11:return n=Ve(n.type.render,!1),n;case 1:return n=Ve(n.type,!0),n;default:return""}}function we(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Y:return"Fragment";case ie:return"Portal";case j:return"Profiler";case de:return"StrictMode";case fe:return"Suspense";case Se:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case ve:return(n.displayName||"Context")+".Consumer";case Me:return(n._context.displayName||"Context")+".Provider";case re:var o=n.render;return n=n.displayName,n||(n=o.displayName||o.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case K:return o=n.displayName||null,o!==null?o:we(n.type)||"Memo";case Je:o=n._payload,n=n._init;try{return we(n(o))}catch{}}return null}function nt(n){var o=n.type;switch(n.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=o.render,n=n.displayName||n.name||"",o.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return we(o);case 8:return o===de?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Be(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function at(n){var o=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Wt(n){var o=at(n)?"checked":"value",h=Object.getOwnPropertyDescriptor(n.constructor.prototype,o),m=""+n[o];if(!n.hasOwnProperty(o)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var y=h.get,C=h.set;return Object.defineProperty(n,o,{configurable:!0,get:function(){return y.call(this)},set:function(N){m=""+N,C.call(this,N)}}),Object.defineProperty(n,o,{enumerable:h.enumerable}),{getValue:function(){return m},setValue:function(N){m=""+N},stopTracking:function(){n._valueTracker=null,delete n[o]}}}}function an(n){n._valueTracker||(n._valueTracker=Wt(n))}function rs(n){if(!n)return!1;var o=n._valueTracker;if(!o)return!0;var h=o.getValue(),m="";return n&&(m=at(n)?n.checked?"true":"false":n.value),n=m,n!==h?(o.setValue(n),!0):!1}function ht(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function zr(n,o){var h=o.checked;return ce({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??n._wrapperState.initialChecked})}function sr(n,o){var h=o.defaultValue==null?"":o.defaultValue,m=o.checked!=null?o.checked:o.defaultChecked;h=Be(o.value!=null?o.value:h),n._wrapperState={initialChecked:m,initialValue:h,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Ei(n,o){o=o.checked,o!=null&&te(n,"checked",o,!1)}function $t(n,o){Ei(n,o);var h=Be(o.value),m=o.type;if(h!=null)m==="number"?(h===0&&n.value===""||n.value!=h)&&(n.value=""+h):n.value!==""+h&&(n.value=""+h);else if(m==="submit"||m==="reset"){n.removeAttribute("value");return}o.hasOwnProperty("value")?ct(n,o.type,h):o.hasOwnProperty("defaultValue")&&ct(n,o.type,Be(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(n.defaultChecked=!!o.defaultChecked)}function At(n,o,h){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var m=o.type;if(!(m!=="submit"&&m!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+n._wrapperState.initialValue,h||o===n.value||(n.value=o),n.defaultValue=o}h=n.name,h!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,h!==""&&(n.name=h)}function ct(n,o,h){(o!=="number"||ht(n.ownerDocument)!==n)&&(h==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+h&&(n.defaultValue=""+h))}var Gr=Array.isArray;function Ne(n,o,h,m){if(n=n.options,o){o={};for(var y=0;y<h.length;y++)o["$"+h[y]]=!0;for(h=0;h<n.length;h++)y=o.hasOwnProperty("$"+n[h].value),n[h].selected!==y&&(n[h].selected=y),y&&m&&(n[h].defaultSelected=!0)}else{for(h=""+Be(h),o=null,y=0;y<n.length;y++){if(n[y].value===h){n[y].selected=!0,m&&(n[y].defaultSelected=!0);return}o!==null||n[y].disabled||(o=n[y])}o!==null&&(o.selected=!0)}}function Ai(n,o){if(o.dangerouslySetInnerHTML!=null)throw Error(i(91));return ce({},o,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Mo(n,o){var h=o.value;if(h==null){if(h=o.children,o=o.defaultValue,h!=null){if(o!=null)throw Error(i(92));if(Gr(h)){if(1<h.length)throw Error(i(93));h=h[0]}o=h}o==null&&(o=""),h=o}n._wrapperState={initialValue:Be(h)}}function wr(n,o){var h=Be(o.value),m=Be(o.defaultValue);h!=null&&(h=""+h,h!==n.value&&(n.value=h),o.defaultValue==null&&n.defaultValue!==h&&(n.defaultValue=h)),m!=null&&(n.defaultValue=""+m)}function Hs(n){var o=n.textContent;o===n._wrapperState.initialValue&&o!==""&&o!==null&&(n.value=o)}function jn(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ws(n,o){return n==null||n==="http://www.w3.org/1999/xhtml"?jn(o):n==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var or,xn=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,h,m,y){MSApp.execUnsafeLocalFunction(function(){return n(o,h,m,y)})}:n})(function(n,o){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=o;else{for(or=or||document.createElement("div"),or.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=or.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;o.firstChild;)n.appendChild(o.firstChild)}});function vi(n,o){if(o){var h=n.firstChild;if(h&&h===n.lastChild&&h.nodeType===3){h.nodeValue=o;return}}n.textContent=o}var jr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Fc=["Webkit","ms","Moz","O"];Object.keys(jr).forEach(function(n){Fc.forEach(function(o){o=o+n.charAt(0).toUpperCase()+n.substring(1),jr[o]=jr[n]})});function zt(n,o,h){return o==null||typeof o=="boolean"||o===""?"":h||typeof o!="number"||o===0||jr.hasOwnProperty(n)&&jr[n]?(""+o).trim():o+"px"}function Ce(n,o){n=n.style;for(var h in o)if(o.hasOwnProperty(h)){var m=h.indexOf("--")===0,y=zt(h,o[h],m);h==="float"&&(h="cssFloat"),m?n.setProperty(h,y):n[h]=y}}var en=ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wt(n,o){if(o){if(en[n]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(i(137,n));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(i(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(i(61))}if(o.style!=null&&typeof o.style!="object")throw Error(i(62))}}function Rt(n,o){if(n.indexOf("-")===-1)return typeof o.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ti=null;function is(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var zs=null,it=null,Xn=null;function ko(n){if(n=sl(n)){if(typeof zs!="function")throw Error(i(280));var o=n.stateNode;o&&(o=ma(o),zs(n.stateNode,n.type,o))}}function Po(n){it?Xn?Xn.push(n):Xn=[n]:it=n}function Yn(){if(it){var n=it,o=Xn;if(Xn=it=null,ko(n),o)for(n=0;n<o.length;n++)ko(o[n])}}function Gs(n,o){return n(o)}function cn(){}var Xr=!1;function ss(n,o,h){if(Xr)return n(o,h);Xr=!0;try{return Gs(n,o,h)}finally{Xr=!1,(it!==null||Xn!==null)&&(cn(),Yn())}}function Mn(n,o){var h=n.stateNode;if(h===null)return null;var m=ma(h);if(m===null)return null;h=m[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(n=n.type,m=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!m;break e;default:n=!1}if(n)return null;if(h&&typeof h!="function")throw Error(i(231,o,typeof h));return h}var Lo=!1;if(A)try{var lr={};Object.defineProperty(lr,"passive",{get:function(){Lo=!0}}),window.addEventListener("test",lr,lr),window.removeEventListener("test",lr,lr)}catch{Lo=!1}function Bo(n,o,h,m,y,C,N,P,B){var Q=Array.prototype.slice.call(arguments,3);try{o.apply(h,Q)}catch(ae){this.onError(ae)}}var on=!1,_r=null,In=!1,Ie=null,Si={onError:function(n){on=!0,_r=n}};function Fo(n,o,h,m,y,C,N,P,B){on=!1,_r=null,Bo.apply(Si,arguments)}function kn(n,o,h,m,y,C,N,P,B){if(Fo.apply(this,arguments),on){if(on){var Q=_r;on=!1,_r=null}else throw Error(i(198));In||(In=!0,Ie=Q)}}function Kn(n){var o=n,h=n;if(n.alternate)for(;o.return;)o=o.return;else{n=o;do o=n,(o.flags&4098)!==0&&(h=o.return),n=o.return;while(n)}return o.tag===3?h:null}function os(n){if(n.tag===13){var o=n.memoizedState;if(o===null&&(n=n.alternate,n!==null&&(o=n.memoizedState)),o!==null)return o.dehydrated}return null}function ls(n){if(Kn(n)!==n)throw Error(i(188))}function yr(n){var o=n.alternate;if(!o){if(o=Kn(n),o===null)throw Error(i(188));return o!==n?null:n}for(var h=n,m=o;;){var y=h.return;if(y===null)break;var C=y.alternate;if(C===null){if(m=y.return,m!==null){h=m;continue}break}if(y.child===C.child){for(C=y.child;C;){if(C===h)return ls(y),n;if(C===m)return ls(y),o;C=C.sibling}throw Error(i(188))}if(h.return!==m.return)h=y,m=C;else{for(var N=!1,P=y.child;P;){if(P===h){N=!0,h=y,m=C;break}if(P===m){N=!0,m=y,h=C;break}P=P.sibling}if(!N){for(P=C.child;P;){if(P===h){N=!0,h=C,m=y;break}if(P===m){N=!0,m=C,h=y;break}P=P.sibling}if(!N)throw Error(i(189))}}if(h.alternate!==m)throw Error(i(190))}if(h.tag!==3)throw Error(i(188));return h.stateNode.current===h?n:o}function ql(n){return n=yr(n),n!==null?Zl(n):null}function Zl(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var o=Zl(n);if(o!==null)return o;n=n.sibling}return null}var ar=t.unstable_scheduleCallback,wn=t.unstable_cancelCallback,bt=t.unstable_shouldYield,Ql=t.unstable_requestPaint,Ct=t.unstable_now,Uo=t.unstable_getCurrentPriorityLevel,ne=t.unstable_ImmediatePriority,Jl=t.unstable_UserBlockingPriority,It=t.unstable_NormalPriority,Ii=t.unstable_LowPriority,$l=t.unstable_IdlePriority,gt=null,$e=null;function ut(n){if($e&&typeof $e.onCommitFiberRoot=="function")try{$e.onCommitFiberRoot(gt,n,void 0,(n.current.flags&128)===128)}catch{}}var Wn=Math.clz32?Math.clz32:tn,Vo=Math.log,Ho=Math.LN2;function tn(n){return n>>>=0,n===0?32:31-(Vo(n)/Ho|0)|0}var cr=64,js=4194304;function Tt(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function ur(n,o){var h=n.pendingLanes;if(h===0)return 0;var m=0,y=n.suspendedLanes,C=n.pingedLanes,N=h&268435455;if(N!==0){var P=N&~y;P!==0?m=Tt(P):(C&=N,C!==0&&(m=Tt(C)))}else N=h&~y,N!==0?m=Tt(N):C!==0&&(m=Tt(C));if(m===0)return 0;if(o!==0&&o!==m&&(o&y)===0&&(y=m&-m,C=o&-o,y>=C||y===16&&(C&4194240)!==0))return o;if((m&4)!==0&&(m|=h&16),o=n.entangledLanes,o!==0)for(n=n.entanglements,o&=m;0<o;)h=31-Wn(o),y=1<<h,m|=n[h],o&=~y;return m}function Uc(n,o){switch(n){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ti(n,o){for(var h=n.suspendedLanes,m=n.pingedLanes,y=n.expirationTimes,C=n.pendingLanes;0<C;){var N=31-Wn(C),P=1<<N,B=y[N];B===-1?((P&h)===0||(P&m)!==0)&&(y[N]=Uc(P,o)):B<=o&&(n.expiredLanes|=P),C&=~P}}function Et(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function un(){var n=cr;return cr<<=1,(cr&4194240)===0&&(cr=64),n}function z(n){for(var o=[],h=0;31>h;h++)o.push(n);return o}function D(n,o,h){n.pendingLanes|=o,o!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,o=31-Wn(o),n[o]=h}function Fe(n,o){var h=n.pendingLanes&~o;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=o,n.mutableReadLanes&=o,n.entangledLanes&=o,o=n.entanglements;var m=n.eventTimes;for(n=n.expirationTimes;0<h;){var y=31-Wn(h),C=1<<y;o[y]=0,m[y]=-1,n[y]=-1,h&=~C}}function Kt(n,o){var h=n.entangledLanes|=o;for(n=n.entanglements;h;){var m=31-Wn(h),y=1<<m;y&o|n[m]&o&&(n[m]|=o),h&=~y}}var et=0;function ea(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Xs,Pn,Ue,Ot,Wo,zo=!1,Ni=[],fr=null,Cr=null,Yr=null,Vt=new Map,br=new Map,Tn=[],je="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ta(n,o){switch(n){case"focusin":case"focusout":fr=null;break;case"dragenter":case"dragleave":Cr=null;break;case"mouseover":case"mouseout":Yr=null;break;case"pointerover":case"pointerout":Vt.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":br.delete(o.pointerId)}}function Ke(n,o,h,m,y,C){return n===null||n.nativeEvent!==C?(n={blockedOn:o,domEventName:h,eventSystemFlags:m,nativeEvent:C,targetContainers:[y]},o!==null&&(o=sl(o),o!==null&&Pn(o)),n):(n.eventSystemFlags|=m,o=n.targetContainers,y!==null&&o.indexOf(y)===-1&&o.push(y),n)}function fn(n,o,h,m,y){switch(o){case"focusin":return fr=Ke(fr,n,o,h,m,y),!0;case"dragenter":return Cr=Ke(Cr,n,o,h,m,y),!0;case"mouseover":return Yr=Ke(Yr,n,o,h,m,y),!0;case"pointerover":var C=y.pointerId;return Vt.set(C,Ke(Vt.get(C)||null,n,o,h,m,y)),!0;case"gotpointercapture":return C=y.pointerId,br.set(C,Ke(br.get(C)||null,n,o,h,m,y)),!0}return!1}function na(n){var o=xs(n.target);if(o!==null){var h=Kn(o);if(h!==null){if(o=h.tag,o===13){if(o=os(h),o!==null){n.blockedOn=o,Wo(n.priority,function(){Ue(h)});return}}else if(o===3&&h.stateNode.current.memoizedState.isDehydrated){n.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ri(n){if(n.blockedOn!==null)return!1;for(var o=n.targetContainers;0<o.length;){var h=Ys(n.domEventName,n.eventSystemFlags,o[0],n.nativeEvent);if(h===null){h=n.nativeEvent;var m=new h.constructor(h.type,h);ti=m,h.target.dispatchEvent(m),ti=null}else return o=sl(h),o!==null&&Pn(o),n.blockedOn=h,!1;o.shift()}return!0}function Go(n,o,h){Ri(n)&&h.delete(o)}function ni(){zo=!1,fr!==null&&Ri(fr)&&(fr=null),Cr!==null&&Ri(Cr)&&(Cr=null),Yr!==null&&Ri(Yr)&&(Yr=null),Vt.forEach(Go),br.forEach(Go)}function as(n,o){n.blockedOn===o&&(n.blockedOn=null,zo||(zo=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,ni)))}function Or(n){function o(y){return as(y,n)}if(0<Ni.length){as(Ni[0],n);for(var h=1;h<Ni.length;h++){var m=Ni[h];m.blockedOn===n&&(m.blockedOn=null)}}for(fr!==null&&as(fr,n),Cr!==null&&as(Cr,n),Yr!==null&&as(Yr,n),Vt.forEach(o),br.forEach(o),h=0;h<Tn.length;h++)m=Tn[h],m.blockedOn===n&&(m.blockedOn=null);for(;0<Tn.length&&(h=Tn[0],h.blockedOn===null);)na(h),h.blockedOn===null&&Tn.shift()}var Er=oe.ReactCurrentBatchConfig,Kr=!0;function ra(n,o,h,m){var y=et,C=Er.transition;Er.transition=null;try{et=1,ri(n,o,h,m)}finally{et=y,Er.transition=C}}function cs(n,o,h,m){var y=et,C=Er.transition;Er.transition=null;try{et=4,ri(n,o,h,m)}finally{et=y,Er.transition=C}}function ri(n,o,h,m){if(Kr){var y=Ys(n,o,h,m);if(y===null)qc(n,o,m,hn,h),ta(n,m);else if(fn(y,n,o,h,m))m.stopPropagation();else if(ta(n,m),o&4&&-1<je.indexOf(n)){for(;y!==null;){var C=sl(y);if(C!==null&&Xs(C),C=Ys(n,o,h,m),C===null&&qc(n,o,m,hn,h),C===y)break;y=C}y!==null&&m.stopPropagation()}else qc(n,o,m,null,h)}}var hn=null;function Ys(n,o,h,m){if(hn=null,n=is(m),n=xs(n),n!==null)if(o=Kn(n),o===null)n=null;else if(h=o.tag,h===13){if(n=os(o),n!==null)return n;n=null}else if(h===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;n=null}else o!==n&&(n=null);return hn=n,null}function jo(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Uo()){case ne:return 1;case Jl:return 4;case It:case Ii:return 16;case $l:return 536870912;default:return 16}default:return 16}}var Dr=null,Xo=null,Ks=null;function ia(){if(Ks)return Ks;var n,o=Xo,h=o.length,m,y="value"in Dr?Dr.value:Dr.textContent,C=y.length;for(n=0;n<h&&o[n]===y[n];n++);var N=h-n;for(m=1;m<=N&&o[h-m]===y[C-m];m++);return Ks=y.slice(n,1<m?1-m:void 0)}function pt(n){var o=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&o===13&&(n=13)):n=o,n===10&&(n=13),32<=n||n===13?n:0}function us(){return!0}function fs(){return!1}function qt(n){function o(h,m,y,C,N){this._reactName=h,this._targetInst=y,this.type=m,this.nativeEvent=C,this.target=N,this.currentTarget=null;for(var P in n)n.hasOwnProperty(P)&&(h=n[P],this[P]=h?h(C):C[P]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?us:fs,this.isPropagationStopped=fs,this}return ce(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=us)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=us)},persist:function(){},isPersistent:us}),o}var bi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Z=qt(bi),Ze=ce({},bi,{view:0,detail:0}),dn=qt(Ze),Oi,qs,hs,Zs=ce({},Ze,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ds,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==hs&&(hs&&n.type==="mousemove"?(Oi=n.screenX-hs.screenX,qs=n.screenY-hs.screenY):qs=Oi=0,hs=n),Oi)},movementY:function(n){return"movementY"in n?n.movementY:qs}}),sa=qt(Zs),Yo=ce({},Zs,{dataTransfer:0}),nn=qt(Yo),Ko=ce({},Ze,{relatedTarget:0}),Dt=qt(Ko),Qs=ce({},bi,{animationName:0,elapsedTime:0,pseudoElement:0}),ii=qt(Qs),vt=ce({},bi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),He=qt(vt),Vc=ce({},bi,{data:0}),St=qt(Vc),si={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Di={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ar(n){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(n):(n=Hc[n])?!!o[n]:!1}function ds(){return Ar}var oa=ce({},Ze,{key:function(n){if(n.key){var o=si[n.key]||n.key;if(o!=="Unidentified")return o}return n.type==="keypress"?(n=pt(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Di[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ds,charCode:function(n){return n.type==="keypress"?pt(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?pt(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),qo=qt(oa),la=ce({},Zs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zo=qt(la),Wc=ce({},Ze,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ds}),Mi=qt(Wc),Qo=ce({},bi,{propertyName:0,elapsedTime:0,pseudoElement:0}),zc=qt(Qo),gs=ce({},Zs,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Gc=qt(gs),qr=[9,13,27,32],ki=A&&"CompositionEvent"in window,_n=null;A&&"documentMode"in document&&(_n=document.documentMode);var aa=A&&"TextEvent"in window&&!_n,hr=A&&(!ki||_n&&8<_n&&11>=_n),ca=" ",Js=!1;function ua(n,o){switch(n){case"keyup":return qr.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jo(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Nn=!1;function jc(n,o){switch(n){case"compositionend":return Jo(o);case"keypress":return o.which!==32?null:(Js=!0,ca);case"textInput":return n=o.data,n===ca&&Js?null:n;default:return null}}function $o(n,o){if(Nn)return n==="compositionend"||!ki&&ua(n,o)?(n=ia(),Ks=Xo=Dr=null,Nn=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return hr&&o.locale!=="ko"?null:o.data;default:return null}}var ps={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dt(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o==="input"?!!ps[n.type]:o==="textarea"}function ms(n,o,h,m){Po(m),o=da(o,"onChange"),0<o.length&&(h=new Z("onChange","change",null,h,m),n.push({event:h,listeners:o}))}var I=null,e=null;function r(n){ad(n,0)}function s(n){var o=to(n);if(rs(o))return n}function a(n,o){if(n==="change")return o}var c=!1;if(A){var f;if(A){var g="oninput"in document;if(!g){var x=document.createElement("div");x.setAttribute("oninput","return;"),g=typeof x.oninput=="function"}f=g}else f=!1;c=f&&(!document.documentMode||9<document.documentMode)}function _(){I&&(I.detachEvent("onpropertychange",v),e=I=null)}function v(n){if(n.propertyName==="value"&&s(e)){var o=[];ms(o,e,n,is(n)),ss(r,o)}}function T(n,o,h){n==="focusin"?(_(),I=o,e=h,I.attachEvent("onpropertychange",v)):n==="focusout"&&_()}function R(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return s(e)}function M(n,o){if(n==="click")return s(o)}function L(n,o){if(n==="input"||n==="change")return s(o)}function F(n,o){return n===o&&(n!==0||1/n===1/o)||n!==n&&o!==o}var W=typeof Object.is=="function"?Object.is:F;function q(n,o){if(W(n,o))return!0;if(typeof n!="object"||n===null||typeof o!="object"||o===null)return!1;var h=Object.keys(n),m=Object.keys(o);if(h.length!==m.length)return!1;for(m=0;m<h.length;m++){var y=h[m];if(!S.call(o,y)||!W(n[y],o[y]))return!1}return!0}function he(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function ge(n,o){var h=he(n);n=0;for(var m;h;){if(h.nodeType===3){if(m=n+h.textContent.length,n<=o&&m>=o)return{node:h,offset:o-n};n=m}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=he(h)}}function le(n,o){return n&&o?n===o?!0:n&&n.nodeType===3?!1:o&&o.nodeType===3?le(n,o.parentNode):"contains"in n?n.contains(o):n.compareDocumentPosition?!!(n.compareDocumentPosition(o)&16):!1:!1}function rt(){for(var n=window,o=ht();o instanceof n.HTMLIFrameElement;){try{var h=typeof o.contentWindow.location.href=="string"}catch{h=!1}if(h)n=o.contentWindow;else break;o=ht(n.document)}return o}function qe(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o&&(o==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||o==="textarea"||n.contentEditable==="true")}function Ln(n){var o=rt(),h=n.focusedElem,m=n.selectionRange;if(o!==h&&h&&h.ownerDocument&&le(h.ownerDocument.documentElement,h)){if(m!==null&&qe(h)){if(o=m.start,n=m.end,n===void 0&&(n=o),"selectionStart"in h)h.selectionStart=o,h.selectionEnd=Math.min(n,h.value.length);else if(n=(o=h.ownerDocument||document)&&o.defaultView||window,n.getSelection){n=n.getSelection();var y=h.textContent.length,C=Math.min(m.start,y);m=m.end===void 0?C:Math.min(m.end,y),!n.extend&&C>m&&(y=m,m=C,C=y),y=ge(h,C);var N=ge(h,m);y&&N&&(n.rangeCount!==1||n.anchorNode!==y.node||n.anchorOffset!==y.offset||n.focusNode!==N.node||n.focusOffset!==N.offset)&&(o=o.createRange(),o.setStart(y.node,y.offset),n.removeAllRanges(),C>m?(n.addRange(o),n.extend(N.node,N.offset)):(o.setEnd(N.node,N.offset),n.addRange(o)))}}for(o=[],n=h;n=n.parentNode;)n.nodeType===1&&o.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<o.length;h++)n=o[h],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var dr=A&&"documentMode"in document&&11>=document.documentMode,rn=null,_t=null,Gt=null,Rn=!1;function oi(n,o,h){var m=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Rn||rn==null||rn!==ht(m)||(m=rn,"selectionStart"in m&&qe(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Gt&&q(Gt,m)||(Gt=m,m=da(_t,"onSelect"),0<m.length&&(o=new Z("onSelect","select",null,o,h),n.push({event:o,listeners:m}),o.target=rn)))}function Mr(n,o){var h={};return h[n.toLowerCase()]=o.toLowerCase(),h["Webkit"+n]="webkit"+o,h["Moz"+n]="moz"+o,h}var Pi={animationend:Mr("Animation","AnimationEnd"),animationiteration:Mr("Animation","AnimationIteration"),animationstart:Mr("Animation","AnimationStart"),transitionend:Mr("Transition","TransitionEnd")},el={},ed={};A&&(ed=document.createElement("div").style,"AnimationEvent"in window||(delete Pi.animationend.animation,delete Pi.animationiteration.animation,delete Pi.animationstart.animation),"TransitionEvent"in window||delete Pi.transitionend.transition);function fa(n){if(el[n])return el[n];if(!Pi[n])return n;var o=Pi[n],h;for(h in o)if(o.hasOwnProperty(h)&&h in ed)return el[n]=o[h];return n}var td=fa("animationend"),nd=fa("animationiteration"),rd=fa("animationstart"),id=fa("transitionend"),sd=new Map,od="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Li(n,o){sd.set(n,o),p(o,[n])}for(var Xc=0;Xc<od.length;Xc++){var Yc=od[Xc],w2=Yc.toLowerCase(),_2=Yc[0].toUpperCase()+Yc.slice(1);Li(w2,"on"+_2)}Li(td,"onAnimationEnd"),Li(nd,"onAnimationIteration"),Li(rd,"onAnimationStart"),Li("dblclick","onDoubleClick"),Li("focusin","onFocus"),Li("focusout","onBlur"),Li(id,"onTransitionEnd"),w("onMouseEnter",["mouseout","mouseover"]),w("onMouseLeave",["mouseout","mouseover"]),w("onPointerEnter",["pointerout","pointerover"]),w("onPointerLeave",["pointerout","pointerover"]),p("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),p("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),p("onBeforeInput",["compositionend","keypress","textInput","paste"]),p("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),p("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),p("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),y2=new Set("cancel close invalid load scroll toggle".split(" ").concat(tl));function ld(n,o,h){var m=n.type||"unknown-event";n.currentTarget=h,kn(m,o,void 0,n),n.currentTarget=null}function ad(n,o){o=(o&4)!==0;for(var h=0;h<n.length;h++){var m=n[h],y=m.event;m=m.listeners;e:{var C=void 0;if(o)for(var N=m.length-1;0<=N;N--){var P=m[N],B=P.instance,Q=P.currentTarget;if(P=P.listener,B!==C&&y.isPropagationStopped())break e;ld(y,P,Q),C=B}else for(N=0;N<m.length;N++){if(P=m[N],B=P.instance,Q=P.currentTarget,P=P.listener,B!==C&&y.isPropagationStopped())break e;ld(y,P,Q),C=B}}}if(In)throw n=Ie,In=!1,Ie=null,n}function Bt(n,o){var h=o[tu];h===void 0&&(h=o[tu]=new Set);var m=n+"__bubble";h.has(m)||(cd(o,n,2,!1),h.add(m))}function Kc(n,o,h){var m=0;o&&(m|=4),cd(h,n,m,o)}var ha="_reactListening"+Math.random().toString(36).slice(2);function nl(n){if(!n[ha]){n[ha]=!0,u.forEach(function(h){h!=="selectionchange"&&(y2.has(h)||Kc(h,!1,n),Kc(h,!0,n))});var o=n.nodeType===9?n:n.ownerDocument;o===null||o[ha]||(o[ha]=!0,Kc("selectionchange",!1,o))}}function cd(n,o,h,m){switch(jo(o)){case 1:var y=ra;break;case 4:y=cs;break;default:y=ri}h=y.bind(null,o,h,n),y=void 0,!Lo||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(y=!0),m?y!==void 0?n.addEventListener(o,h,{capture:!0,passive:y}):n.addEventListener(o,h,!0):y!==void 0?n.addEventListener(o,h,{passive:y}):n.addEventListener(o,h,!1)}function qc(n,o,h,m,y){var C=m;if((o&1)===0&&(o&2)===0&&m!==null)e:for(;;){if(m===null)return;var N=m.tag;if(N===3||N===4){var P=m.stateNode.containerInfo;if(P===y||P.nodeType===8&&P.parentNode===y)break;if(N===4)for(N=m.return;N!==null;){var B=N.tag;if((B===3||B===4)&&(B=N.stateNode.containerInfo,B===y||B.nodeType===8&&B.parentNode===y))return;N=N.return}for(;P!==null;){if(N=xs(P),N===null)return;if(B=N.tag,B===5||B===6){m=C=N;continue e}P=P.parentNode}}m=m.return}ss(function(){var Q=C,ae=is(h),ue=[];e:{var se=sd.get(n);if(se!==void 0){var Te=Z,De=n;switch(n){case"keypress":if(pt(h)===0)break e;case"keydown":case"keyup":Te=qo;break;case"focusin":De="focus",Te=Dt;break;case"focusout":De="blur",Te=Dt;break;case"beforeblur":case"afterblur":Te=Dt;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Te=sa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Te=nn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Te=Mi;break;case td:case nd:case rd:Te=ii;break;case id:Te=zc;break;case"scroll":Te=dn;break;case"wheel":Te=Gc;break;case"copy":case"cut":case"paste":Te=He;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Te=Zo}var Pe=(o&4)!==0,sn=!Pe&&n==="scroll",G=Pe?se!==null?se+"Capture":null:se;Pe=[];for(var U=Q,X;U!==null;){X=U;var me=X.stateNode;if(X.tag===5&&me!==null&&(X=me,G!==null&&(me=Mn(U,G),me!=null&&Pe.push(rl(U,me,X)))),sn)break;U=U.return}0<Pe.length&&(se=new Te(se,De,null,h,ae),ue.push({event:se,listeners:Pe}))}}if((o&7)===0){e:{if(se=n==="mouseover"||n==="pointerover",Te=n==="mouseout"||n==="pointerout",se&&h!==ti&&(De=h.relatedTarget||h.fromElement)&&(xs(De)||De[li]))break e;if((Te||se)&&(se=ae.window===ae?ae:(se=ae.ownerDocument)?se.defaultView||se.parentWindow:window,Te?(De=h.relatedTarget||h.toElement,Te=Q,De=De?xs(De):null,De!==null&&(sn=Kn(De),De!==sn||De.tag!==5&&De.tag!==6)&&(De=null)):(Te=null,De=Q),Te!==De)){if(Pe=sa,me="onMouseLeave",G="onMouseEnter",U="mouse",(n==="pointerout"||n==="pointerover")&&(Pe=Zo,me="onPointerLeave",G="onPointerEnter",U="pointer"),sn=Te==null?se:to(Te),X=De==null?se:to(De),se=new Pe(me,U+"leave",Te,h,ae),se.target=sn,se.relatedTarget=X,me=null,xs(ae)===Q&&(Pe=new Pe(G,U+"enter",De,h,ae),Pe.target=X,Pe.relatedTarget=sn,me=Pe),sn=me,Te&&De)t:{for(Pe=Te,G=De,U=0,X=Pe;X;X=$s(X))U++;for(X=0,me=G;me;me=$s(me))X++;for(;0<U-X;)Pe=$s(Pe),U--;for(;0<X-U;)G=$s(G),X--;for(;U--;){if(Pe===G||G!==null&&Pe===G.alternate)break t;Pe=$s(Pe),G=$s(G)}Pe=null}else Pe=null;Te!==null&&ud(ue,se,Te,Pe,!1),De!==null&&sn!==null&&ud(ue,sn,De,Pe,!0)}}e:{if(se=Q?to(Q):window,Te=se.nodeName&&se.nodeName.toLowerCase(),Te==="select"||Te==="input"&&se.type==="file")var Le=a;else if(dt(se))if(c)Le=L;else{Le=R;var We=T}else(Te=se.nodeName)&&Te.toLowerCase()==="input"&&(se.type==="checkbox"||se.type==="radio")&&(Le=M);if(Le&&(Le=Le(n,Q))){ms(ue,Le,h,ae);break e}We&&We(n,se,Q),n==="focusout"&&(We=se._wrapperState)&&We.controlled&&se.type==="number"&&ct(se,"number",se.value)}switch(We=Q?to(Q):window,n){case"focusin":(dt(We)||We.contentEditable==="true")&&(rn=We,_t=Q,Gt=null);break;case"focusout":Gt=_t=rn=null;break;case"mousedown":Rn=!0;break;case"contextmenu":case"mouseup":case"dragend":Rn=!1,oi(ue,h,ae);break;case"selectionchange":if(dr)break;case"keydown":case"keyup":oi(ue,h,ae)}var ze;if(ki)e:{switch(n){case"compositionstart":var Ye="onCompositionStart";break e;case"compositionend":Ye="onCompositionEnd";break e;case"compositionupdate":Ye="onCompositionUpdate";break e}Ye=void 0}else Nn?ua(n,h)&&(Ye="onCompositionEnd"):n==="keydown"&&h.keyCode===229&&(Ye="onCompositionStart");Ye&&(hr&&h.locale!=="ko"&&(Nn||Ye!=="onCompositionStart"?Ye==="onCompositionEnd"&&Nn&&(ze=ia()):(Dr=ae,Xo="value"in Dr?Dr.value:Dr.textContent,Nn=!0)),We=da(Q,Ye),0<We.length&&(Ye=new St(Ye,n,null,h,ae),ue.push({event:Ye,listeners:We}),ze?Ye.data=ze:(ze=Jo(h),ze!==null&&(Ye.data=ze)))),(ze=aa?jc(n,h):$o(n,h))&&(Q=da(Q,"onBeforeInput"),0<Q.length&&(ae=new St("onBeforeInput","beforeinput",null,h,ae),ue.push({event:ae,listeners:Q}),ae.data=ze))}ad(ue,o)})}function rl(n,o,h){return{instance:n,listener:o,currentTarget:h}}function da(n,o){for(var h=o+"Capture",m=[];n!==null;){var y=n,C=y.stateNode;y.tag===5&&C!==null&&(y=C,C=Mn(n,h),C!=null&&m.unshift(rl(n,C,y)),C=Mn(n,o),C!=null&&m.push(rl(n,C,y))),n=n.return}return m}function $s(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function ud(n,o,h,m,y){for(var C=o._reactName,N=[];h!==null&&h!==m;){var P=h,B=P.alternate,Q=P.stateNode;if(B!==null&&B===m)break;P.tag===5&&Q!==null&&(P=Q,y?(B=Mn(h,C),B!=null&&N.unshift(rl(h,B,P))):y||(B=Mn(h,C),B!=null&&N.push(rl(h,B,P)))),h=h.return}N.length!==0&&n.push({event:o,listeners:N})}var C2=/\r\n?/g,E2=/\u0000|\uFFFD/g;function fd(n){return(typeof n=="string"?n:""+n).replace(C2,`
`).replace(E2,"")}function ga(n,o,h){if(o=fd(o),fd(n)!==o&&h)throw Error(i(425))}function pa(){}var Zc=null,Qc=null;function Jc(n,o){return n==="textarea"||n==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var $c=typeof setTimeout=="function"?setTimeout:void 0,A2=typeof clearTimeout=="function"?clearTimeout:void 0,hd=typeof Promise=="function"?Promise:void 0,v2=typeof queueMicrotask=="function"?queueMicrotask:typeof hd<"u"?function(n){return hd.resolve(null).then(n).catch(S2)}:$c;function S2(n){setTimeout(function(){throw n})}function eu(n,o){var h=o,m=0;do{var y=h.nextSibling;if(n.removeChild(h),y&&y.nodeType===8)if(h=y.data,h==="/$"){if(m===0){n.removeChild(y),Or(o);return}m--}else h!=="$"&&h!=="$?"&&h!=="$!"||m++;h=y}while(h);Or(o)}function Bi(n){for(;n!=null;n=n.nextSibling){var o=n.nodeType;if(o===1||o===3)break;if(o===8){if(o=n.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return n}function dd(n){n=n.previousSibling;for(var o=0;n;){if(n.nodeType===8){var h=n.data;if(h==="$"||h==="$!"||h==="$?"){if(o===0)return n;o--}else h==="/$"&&o++}n=n.previousSibling}return null}var eo=Math.random().toString(36).slice(2),Zr="__reactFiber$"+eo,il="__reactProps$"+eo,li="__reactContainer$"+eo,tu="__reactEvents$"+eo,I2="__reactListeners$"+eo,T2="__reactHandles$"+eo;function xs(n){var o=n[Zr];if(o)return o;for(var h=n.parentNode;h;){if(o=h[li]||h[Zr]){if(h=o.alternate,o.child!==null||h!==null&&h.child!==null)for(n=dd(n);n!==null;){if(h=n[Zr])return h;n=dd(n)}return o}n=h,h=n.parentNode}return null}function sl(n){return n=n[Zr]||n[li],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function to(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(i(33))}function ma(n){return n[il]||null}var nu=[],no=-1;function Fi(n){return{current:n}}function Ft(n){0>no||(n.current=nu[no],nu[no]=null,no--)}function Mt(n,o){no++,nu[no]=n.current,n.current=o}var Ui={},Bn=Fi(Ui),qn=Fi(!1),ws=Ui;function ro(n,o){var h=n.type.contextTypes;if(!h)return Ui;var m=n.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===o)return m.__reactInternalMemoizedMaskedChildContext;var y={},C;for(C in h)y[C]=o[C];return m&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=o,n.__reactInternalMemoizedMaskedChildContext=y),y}function Zn(n){return n=n.childContextTypes,n!=null}function xa(){Ft(qn),Ft(Bn)}function gd(n,o,h){if(Bn.current!==Ui)throw Error(i(168));Mt(Bn,o),Mt(qn,h)}function pd(n,o,h){var m=n.stateNode;if(o=o.childContextTypes,typeof m.getChildContext!="function")return h;m=m.getChildContext();for(var y in m)if(!(y in o))throw Error(i(108,nt(n)||"Unknown",y));return ce({},h,m)}function wa(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Ui,ws=Bn.current,Mt(Bn,n),Mt(qn,qn.current),!0}function md(n,o,h){var m=n.stateNode;if(!m)throw Error(i(169));h?(n=pd(n,o,ws),m.__reactInternalMemoizedMergedChildContext=n,Ft(qn),Ft(Bn),Mt(Bn,n)):Ft(qn),Mt(qn,h)}var ai=null,_a=!1,ru=!1;function xd(n){ai===null?ai=[n]:ai.push(n)}function N2(n){_a=!0,xd(n)}function Vi(){if(!ru&&ai!==null){ru=!0;var n=0,o=et;try{var h=ai;for(et=1;n<h.length;n++){var m=h[n];do m=m(!0);while(m!==null)}ai=null,_a=!1}catch(y){throw ai!==null&&(ai=ai.slice(n+1)),ar(ne,Vi),y}finally{et=o,ru=!1}}return null}var io=[],so=0,ya=null,Ca=0,vr=[],Sr=0,_s=null,ci=1,ui="";function ys(n,o){io[so++]=Ca,io[so++]=ya,ya=n,Ca=o}function wd(n,o,h){vr[Sr++]=ci,vr[Sr++]=ui,vr[Sr++]=_s,_s=n;var m=ci;n=ui;var y=32-Wn(m)-1;m&=~(1<<y),h+=1;var C=32-Wn(o)+y;if(30<C){var N=y-y%5;C=(m&(1<<N)-1).toString(32),m>>=N,y-=N,ci=1<<32-Wn(o)+y|h<<y|m,ui=C+n}else ci=1<<C|h<<y|m,ui=n}function iu(n){n.return!==null&&(ys(n,1),wd(n,1,0))}function su(n){for(;n===ya;)ya=io[--so],io[so]=null,Ca=io[--so],io[so]=null;for(;n===_s;)_s=vr[--Sr],vr[Sr]=null,ui=vr[--Sr],vr[Sr]=null,ci=vr[--Sr],vr[Sr]=null}var gr=null,pr=null,Ht=!1,kr=null;function _d(n,o){var h=Rr(5,null,null,0);h.elementType="DELETED",h.stateNode=o,h.return=n,o=n.deletions,o===null?(n.deletions=[h],n.flags|=16):o.push(h)}function yd(n,o){switch(n.tag){case 5:var h=n.type;return o=o.nodeType!==1||h.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(n.stateNode=o,gr=n,pr=Bi(o.firstChild),!0):!1;case 6:return o=n.pendingProps===""||o.nodeType!==3?null:o,o!==null?(n.stateNode=o,gr=n,pr=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(h=_s!==null?{id:ci,overflow:ui}:null,n.memoizedState={dehydrated:o,treeContext:h,retryLane:1073741824},h=Rr(18,null,null,0),h.stateNode=o,h.return=n,n.child=h,gr=n,pr=null,!0):!1;default:return!1}}function ou(n){return(n.mode&1)!==0&&(n.flags&128)===0}function lu(n){if(Ht){var o=pr;if(o){var h=o;if(!yd(n,o)){if(ou(n))throw Error(i(418));o=Bi(h.nextSibling);var m=gr;o&&yd(n,o)?_d(m,h):(n.flags=n.flags&-4097|2,Ht=!1,gr=n)}}else{if(ou(n))throw Error(i(418));n.flags=n.flags&-4097|2,Ht=!1,gr=n}}}function Cd(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;gr=n}function Ea(n){if(n!==gr)return!1;if(!Ht)return Cd(n),Ht=!0,!1;var o;if((o=n.tag!==3)&&!(o=n.tag!==5)&&(o=n.type,o=o!=="head"&&o!=="body"&&!Jc(n.type,n.memoizedProps)),o&&(o=pr)){if(ou(n))throw Ed(),Error(i(418));for(;o;)_d(n,o),o=Bi(o.nextSibling)}if(Cd(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));e:{for(n=n.nextSibling,o=0;n;){if(n.nodeType===8){var h=n.data;if(h==="/$"){if(o===0){pr=Bi(n.nextSibling);break e}o--}else h!=="$"&&h!=="$!"&&h!=="$?"||o++}n=n.nextSibling}pr=null}}else pr=gr?Bi(n.stateNode.nextSibling):null;return!0}function Ed(){for(var n=pr;n;)n=Bi(n.nextSibling)}function oo(){pr=gr=null,Ht=!1}function au(n){kr===null?kr=[n]:kr.push(n)}var R2=oe.ReactCurrentBatchConfig;function ol(n,o,h){if(n=h.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(i(309));var m=h.stateNode}if(!m)throw Error(i(147,n));var y=m,C=""+n;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===C?o.ref:(o=function(N){var P=y.refs;N===null?delete P[C]:P[C]=N},o._stringRef=C,o)}if(typeof n!="string")throw Error(i(284));if(!h._owner)throw Error(i(290,n))}return n}function Aa(n,o){throw n=Object.prototype.toString.call(o),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":n))}function Ad(n){var o=n._init;return o(n._payload)}function vd(n){function o(G,U){if(n){var X=G.deletions;X===null?(G.deletions=[U],G.flags|=16):X.push(U)}}function h(G,U){if(!n)return null;for(;U!==null;)o(G,U),U=U.sibling;return null}function m(G,U){for(G=new Map;U!==null;)U.key!==null?G.set(U.key,U):G.set(U.index,U),U=U.sibling;return G}function y(G,U){return G=Ki(G,U),G.index=0,G.sibling=null,G}function C(G,U,X){return G.index=X,n?(X=G.alternate,X!==null?(X=X.index,X<U?(G.flags|=2,U):X):(G.flags|=2,U)):(G.flags|=1048576,U)}function N(G){return n&&G.alternate===null&&(G.flags|=2),G}function P(G,U,X,me){return U===null||U.tag!==6?(U=$u(X,G.mode,me),U.return=G,U):(U=y(U,X),U.return=G,U)}function B(G,U,X,me){var Le=X.type;return Le===Y?ae(G,U,X.props.children,me,X.key):U!==null&&(U.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===Je&&Ad(Le)===U.type)?(me=y(U,X.props),me.ref=ol(G,U,X),me.return=G,me):(me=Ya(X.type,X.key,X.props,null,G.mode,me),me.ref=ol(G,U,X),me.return=G,me)}function Q(G,U,X,me){return U===null||U.tag!==4||U.stateNode.containerInfo!==X.containerInfo||U.stateNode.implementation!==X.implementation?(U=ef(X,G.mode,me),U.return=G,U):(U=y(U,X.children||[]),U.return=G,U)}function ae(G,U,X,me,Le){return U===null||U.tag!==7?(U=Ns(X,G.mode,me,Le),U.return=G,U):(U=y(U,X),U.return=G,U)}function ue(G,U,X){if(typeof U=="string"&&U!==""||typeof U=="number")return U=$u(""+U,G.mode,X),U.return=G,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case Qe:return X=Ya(U.type,U.key,U.props,null,G.mode,X),X.ref=ol(G,null,U),X.return=G,X;case ie:return U=ef(U,G.mode,X),U.return=G,U;case Je:var me=U._init;return ue(G,me(U._payload),X)}if(Gr(U)||ke(U))return U=Ns(U,G.mode,X,null),U.return=G,U;Aa(G,U)}return null}function se(G,U,X,me){var Le=U!==null?U.key:null;if(typeof X=="string"&&X!==""||typeof X=="number")return Le!==null?null:P(G,U,""+X,me);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case Qe:return X.key===Le?B(G,U,X,me):null;case ie:return X.key===Le?Q(G,U,X,me):null;case Je:return Le=X._init,se(G,U,Le(X._payload),me)}if(Gr(X)||ke(X))return Le!==null?null:ae(G,U,X,me,null);Aa(G,X)}return null}function Te(G,U,X,me,Le){if(typeof me=="string"&&me!==""||typeof me=="number")return G=G.get(X)||null,P(U,G,""+me,Le);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case Qe:return G=G.get(me.key===null?X:me.key)||null,B(U,G,me,Le);case ie:return G=G.get(me.key===null?X:me.key)||null,Q(U,G,me,Le);case Je:var We=me._init;return Te(G,U,X,We(me._payload),Le)}if(Gr(me)||ke(me))return G=G.get(X)||null,ae(U,G,me,Le,null);Aa(U,me)}return null}function De(G,U,X,me){for(var Le=null,We=null,ze=U,Ye=U=0,En=null;ze!==null&&Ye<X.length;Ye++){ze.index>Ye?(En=ze,ze=null):En=ze.sibling;var xt=se(G,ze,X[Ye],me);if(xt===null){ze===null&&(ze=En);break}n&&ze&&xt.alternate===null&&o(G,ze),U=C(xt,U,Ye),We===null?Le=xt:We.sibling=xt,We=xt,ze=En}if(Ye===X.length)return h(G,ze),Ht&&ys(G,Ye),Le;if(ze===null){for(;Ye<X.length;Ye++)ze=ue(G,X[Ye],me),ze!==null&&(U=C(ze,U,Ye),We===null?Le=ze:We.sibling=ze,We=ze);return Ht&&ys(G,Ye),Le}for(ze=m(G,ze);Ye<X.length;Ye++)En=Te(ze,G,Ye,X[Ye],me),En!==null&&(n&&En.alternate!==null&&ze.delete(En.key===null?Ye:En.key),U=C(En,U,Ye),We===null?Le=En:We.sibling=En,We=En);return n&&ze.forEach(function(qi){return o(G,qi)}),Ht&&ys(G,Ye),Le}function Pe(G,U,X,me){var Le=ke(X);if(typeof Le!="function")throw Error(i(150));if(X=Le.call(X),X==null)throw Error(i(151));for(var We=Le=null,ze=U,Ye=U=0,En=null,xt=X.next();ze!==null&&!xt.done;Ye++,xt=X.next()){ze.index>Ye?(En=ze,ze=null):En=ze.sibling;var qi=se(G,ze,xt.value,me);if(qi===null){ze===null&&(ze=En);break}n&&ze&&qi.alternate===null&&o(G,ze),U=C(qi,U,Ye),We===null?Le=qi:We.sibling=qi,We=qi,ze=En}if(xt.done)return h(G,ze),Ht&&ys(G,Ye),Le;if(ze===null){for(;!xt.done;Ye++,xt=X.next())xt=ue(G,xt.value,me),xt!==null&&(U=C(xt,U,Ye),We===null?Le=xt:We.sibling=xt,We=xt);return Ht&&ys(G,Ye),Le}for(ze=m(G,ze);!xt.done;Ye++,xt=X.next())xt=Te(ze,G,Ye,xt.value,me),xt!==null&&(n&&xt.alternate!==null&&ze.delete(xt.key===null?Ye:xt.key),U=C(xt,U,Ye),We===null?Le=xt:We.sibling=xt,We=xt);return n&&ze.forEach(function(am){return o(G,am)}),Ht&&ys(G,Ye),Le}function sn(G,U,X,me){if(typeof X=="object"&&X!==null&&X.type===Y&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case Qe:e:{for(var Le=X.key,We=U;We!==null;){if(We.key===Le){if(Le=X.type,Le===Y){if(We.tag===7){h(G,We.sibling),U=y(We,X.props.children),U.return=G,G=U;break e}}else if(We.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===Je&&Ad(Le)===We.type){h(G,We.sibling),U=y(We,X.props),U.ref=ol(G,We,X),U.return=G,G=U;break e}h(G,We);break}else o(G,We);We=We.sibling}X.type===Y?(U=Ns(X.props.children,G.mode,me,X.key),U.return=G,G=U):(me=Ya(X.type,X.key,X.props,null,G.mode,me),me.ref=ol(G,U,X),me.return=G,G=me)}return N(G);case ie:e:{for(We=X.key;U!==null;){if(U.key===We)if(U.tag===4&&U.stateNode.containerInfo===X.containerInfo&&U.stateNode.implementation===X.implementation){h(G,U.sibling),U=y(U,X.children||[]),U.return=G,G=U;break e}else{h(G,U);break}else o(G,U);U=U.sibling}U=ef(X,G.mode,me),U.return=G,G=U}return N(G);case Je:return We=X._init,sn(G,U,We(X._payload),me)}if(Gr(X))return De(G,U,X,me);if(ke(X))return Pe(G,U,X,me);Aa(G,X)}return typeof X=="string"&&X!==""||typeof X=="number"?(X=""+X,U!==null&&U.tag===6?(h(G,U.sibling),U=y(U,X),U.return=G,G=U):(h(G,U),U=$u(X,G.mode,me),U.return=G,G=U),N(G)):h(G,U)}return sn}var lo=vd(!0),Sd=vd(!1),va=Fi(null),Sa=null,ao=null,cu=null;function uu(){cu=ao=Sa=null}function fu(n){var o=va.current;Ft(va),n._currentValue=o}function hu(n,o,h){for(;n!==null;){var m=n.alternate;if((n.childLanes&o)!==o?(n.childLanes|=o,m!==null&&(m.childLanes|=o)):m!==null&&(m.childLanes&o)!==o&&(m.childLanes|=o),n===h)break;n=n.return}}function co(n,o){Sa=n,cu=ao=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&o)!==0&&(Qn=!0),n.firstContext=null)}function Ir(n){var o=n._currentValue;if(cu!==n)if(n={context:n,memoizedValue:o,next:null},ao===null){if(Sa===null)throw Error(i(308));ao=n,Sa.dependencies={lanes:0,firstContext:n}}else ao=ao.next=n;return o}var Cs=null;function du(n){Cs===null?Cs=[n]:Cs.push(n)}function Id(n,o,h,m){var y=o.interleaved;return y===null?(h.next=h,du(o)):(h.next=y.next,y.next=h),o.interleaved=h,fi(n,m)}function fi(n,o){n.lanes|=o;var h=n.alternate;for(h!==null&&(h.lanes|=o),h=n,n=n.return;n!==null;)n.childLanes|=o,h=n.alternate,h!==null&&(h.childLanes|=o),h=n,n=n.return;return h.tag===3?h.stateNode:null}var Hi=!1;function gu(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Td(n,o){n=n.updateQueue,o.updateQueue===n&&(o.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function hi(n,o){return{eventTime:n,lane:o,tag:0,payload:null,callback:null,next:null}}function Wi(n,o,h){var m=n.updateQueue;if(m===null)return null;if(m=m.shared,(mt&2)!==0){var y=m.pending;return y===null?o.next=o:(o.next=y.next,y.next=o),m.pending=o,fi(n,h)}return y=m.interleaved,y===null?(o.next=o,du(m)):(o.next=y.next,y.next=o),m.interleaved=o,fi(n,h)}function Ia(n,o,h){if(o=o.updateQueue,o!==null&&(o=o.shared,(h&4194240)!==0)){var m=o.lanes;m&=n.pendingLanes,h|=m,o.lanes=h,Kt(n,h)}}function Nd(n,o){var h=n.updateQueue,m=n.alternate;if(m!==null&&(m=m.updateQueue,h===m)){var y=null,C=null;if(h=h.firstBaseUpdate,h!==null){do{var N={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};C===null?y=C=N:C=C.next=N,h=h.next}while(h!==null);C===null?y=C=o:C=C.next=o}else y=C=o;h={baseState:m.baseState,firstBaseUpdate:y,lastBaseUpdate:C,shared:m.shared,effects:m.effects},n.updateQueue=h;return}n=h.lastBaseUpdate,n===null?h.firstBaseUpdate=o:n.next=o,h.lastBaseUpdate=o}function Ta(n,o,h,m){var y=n.updateQueue;Hi=!1;var C=y.firstBaseUpdate,N=y.lastBaseUpdate,P=y.shared.pending;if(P!==null){y.shared.pending=null;var B=P,Q=B.next;B.next=null,N===null?C=Q:N.next=Q,N=B;var ae=n.alternate;ae!==null&&(ae=ae.updateQueue,P=ae.lastBaseUpdate,P!==N&&(P===null?ae.firstBaseUpdate=Q:P.next=Q,ae.lastBaseUpdate=B))}if(C!==null){var ue=y.baseState;N=0,ae=Q=B=null,P=C;do{var se=P.lane,Te=P.eventTime;if((m&se)===se){ae!==null&&(ae=ae.next={eventTime:Te,lane:0,tag:P.tag,payload:P.payload,callback:P.callback,next:null});e:{var De=n,Pe=P;switch(se=o,Te=h,Pe.tag){case 1:if(De=Pe.payload,typeof De=="function"){ue=De.call(Te,ue,se);break e}ue=De;break e;case 3:De.flags=De.flags&-65537|128;case 0:if(De=Pe.payload,se=typeof De=="function"?De.call(Te,ue,se):De,se==null)break e;ue=ce({},ue,se);break e;case 2:Hi=!0}}P.callback!==null&&P.lane!==0&&(n.flags|=64,se=y.effects,se===null?y.effects=[P]:se.push(P))}else Te={eventTime:Te,lane:se,tag:P.tag,payload:P.payload,callback:P.callback,next:null},ae===null?(Q=ae=Te,B=ue):ae=ae.next=Te,N|=se;if(P=P.next,P===null){if(P=y.shared.pending,P===null)break;se=P,P=se.next,se.next=null,y.lastBaseUpdate=se,y.shared.pending=null}}while(!0);if(ae===null&&(B=ue),y.baseState=B,y.firstBaseUpdate=Q,y.lastBaseUpdate=ae,o=y.shared.interleaved,o!==null){y=o;do N|=y.lane,y=y.next;while(y!==o)}else C===null&&(y.shared.lanes=0);vs|=N,n.lanes=N,n.memoizedState=ue}}function Rd(n,o,h){if(n=o.effects,o.effects=null,n!==null)for(o=0;o<n.length;o++){var m=n[o],y=m.callback;if(y!==null){if(m.callback=null,m=h,typeof y!="function")throw Error(i(191,y));y.call(m)}}}var ll={},Qr=Fi(ll),al=Fi(ll),cl=Fi(ll);function Es(n){if(n===ll)throw Error(i(174));return n}function pu(n,o){switch(Mt(cl,o),Mt(al,n),Mt(Qr,ll),n=o.nodeType,n){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Ws(null,"");break;default:n=n===8?o.parentNode:o,o=n.namespaceURI||null,n=n.tagName,o=Ws(o,n)}Ft(Qr),Mt(Qr,o)}function uo(){Ft(Qr),Ft(al),Ft(cl)}function bd(n){Es(cl.current);var o=Es(Qr.current),h=Ws(o,n.type);o!==h&&(Mt(al,n),Mt(Qr,h))}function mu(n){al.current===n&&(Ft(Qr),Ft(al))}var jt=Fi(0);function Na(n){for(var o=n;o!==null;){if(o.tag===13){var h=o.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var xu=[];function wu(){for(var n=0;n<xu.length;n++)xu[n]._workInProgressVersionPrimary=null;xu.length=0}var Ra=oe.ReactCurrentDispatcher,_u=oe.ReactCurrentBatchConfig,As=0,Xt=null,gn=null,yn=null,ba=!1,ul=!1,fl=0,b2=0;function Fn(){throw Error(i(321))}function yu(n,o){if(o===null)return!1;for(var h=0;h<o.length&&h<n.length;h++)if(!W(n[h],o[h]))return!1;return!0}function Cu(n,o,h,m,y,C){if(As=C,Xt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Ra.current=n===null||n.memoizedState===null?k2:P2,n=h(m,y),ul){C=0;do{if(ul=!1,fl=0,25<=C)throw Error(i(301));C+=1,yn=gn=null,o.updateQueue=null,Ra.current=L2,n=h(m,y)}while(ul)}if(Ra.current=Ma,o=gn!==null&&gn.next!==null,As=0,yn=gn=Xt=null,ba=!1,o)throw Error(i(300));return n}function Eu(){var n=fl!==0;return fl=0,n}function Jr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yn===null?Xt.memoizedState=yn=n:yn=yn.next=n,yn}function Tr(){if(gn===null){var n=Xt.alternate;n=n!==null?n.memoizedState:null}else n=gn.next;var o=yn===null?Xt.memoizedState:yn.next;if(o!==null)yn=o,gn=n;else{if(n===null)throw Error(i(310));gn=n,n={memoizedState:gn.memoizedState,baseState:gn.baseState,baseQueue:gn.baseQueue,queue:gn.queue,next:null},yn===null?Xt.memoizedState=yn=n:yn=yn.next=n}return yn}function hl(n,o){return typeof o=="function"?o(n):o}function Au(n){var o=Tr(),h=o.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=n;var m=gn,y=m.baseQueue,C=h.pending;if(C!==null){if(y!==null){var N=y.next;y.next=C.next,C.next=N}m.baseQueue=y=C,h.pending=null}if(y!==null){C=y.next,m=m.baseState;var P=N=null,B=null,Q=C;do{var ae=Q.lane;if((As&ae)===ae)B!==null&&(B=B.next={lane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),m=Q.hasEagerState?Q.eagerState:n(m,Q.action);else{var ue={lane:ae,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null};B===null?(P=B=ue,N=m):B=B.next=ue,Xt.lanes|=ae,vs|=ae}Q=Q.next}while(Q!==null&&Q!==C);B===null?N=m:B.next=P,W(m,o.memoizedState)||(Qn=!0),o.memoizedState=m,o.baseState=N,o.baseQueue=B,h.lastRenderedState=m}if(n=h.interleaved,n!==null){y=n;do C=y.lane,Xt.lanes|=C,vs|=C,y=y.next;while(y!==n)}else y===null&&(h.lanes=0);return[o.memoizedState,h.dispatch]}function vu(n){var o=Tr(),h=o.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=n;var m=h.dispatch,y=h.pending,C=o.memoizedState;if(y!==null){h.pending=null;var N=y=y.next;do C=n(C,N.action),N=N.next;while(N!==y);W(C,o.memoizedState)||(Qn=!0),o.memoizedState=C,o.baseQueue===null&&(o.baseState=C),h.lastRenderedState=C}return[C,m]}function Od(){}function Dd(n,o){var h=Xt,m=Tr(),y=o(),C=!W(m.memoizedState,y);if(C&&(m.memoizedState=y,Qn=!0),m=m.queue,Su(Pd.bind(null,h,m,n),[n]),m.getSnapshot!==o||C||yn!==null&&yn.memoizedState.tag&1){if(h.flags|=2048,dl(9,kd.bind(null,h,m,y,o),void 0,null),Cn===null)throw Error(i(349));(As&30)!==0||Md(h,o,y)}return y}function Md(n,o,h){n.flags|=16384,n={getSnapshot:o,value:h},o=Xt.updateQueue,o===null?(o={lastEffect:null,stores:null},Xt.updateQueue=o,o.stores=[n]):(h=o.stores,h===null?o.stores=[n]:h.push(n))}function kd(n,o,h,m){o.value=h,o.getSnapshot=m,Ld(o)&&Bd(n)}function Pd(n,o,h){return h(function(){Ld(o)&&Bd(n)})}function Ld(n){var o=n.getSnapshot;n=n.value;try{var h=o();return!W(n,h)}catch{return!0}}function Bd(n){var o=fi(n,1);o!==null&&Fr(o,n,1,-1)}function Fd(n){var o=Jr();return typeof n=="function"&&(n=n()),o.memoizedState=o.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hl,lastRenderedState:n},o.queue=n,n=n.dispatch=M2.bind(null,Xt,n),[o.memoizedState,n]}function dl(n,o,h,m){return n={tag:n,create:o,destroy:h,deps:m,next:null},o=Xt.updateQueue,o===null?(o={lastEffect:null,stores:null},Xt.updateQueue=o,o.lastEffect=n.next=n):(h=o.lastEffect,h===null?o.lastEffect=n.next=n:(m=h.next,h.next=n,n.next=m,o.lastEffect=n)),n}function Ud(){return Tr().memoizedState}function Oa(n,o,h,m){var y=Jr();Xt.flags|=n,y.memoizedState=dl(1|o,h,void 0,m===void 0?null:m)}function Da(n,o,h,m){var y=Tr();m=m===void 0?null:m;var C=void 0;if(gn!==null){var N=gn.memoizedState;if(C=N.destroy,m!==null&&yu(m,N.deps)){y.memoizedState=dl(o,h,C,m);return}}Xt.flags|=n,y.memoizedState=dl(1|o,h,C,m)}function Vd(n,o){return Oa(8390656,8,n,o)}function Su(n,o){return Da(2048,8,n,o)}function Hd(n,o){return Da(4,2,n,o)}function Wd(n,o){return Da(4,4,n,o)}function zd(n,o){if(typeof o=="function")return n=n(),o(n),function(){o(null)};if(o!=null)return n=n(),o.current=n,function(){o.current=null}}function Gd(n,o,h){return h=h!=null?h.concat([n]):null,Da(4,4,zd.bind(null,o,n),h)}function Iu(){}function jd(n,o){var h=Tr();o=o===void 0?null:o;var m=h.memoizedState;return m!==null&&o!==null&&yu(o,m[1])?m[0]:(h.memoizedState=[n,o],n)}function Xd(n,o){var h=Tr();o=o===void 0?null:o;var m=h.memoizedState;return m!==null&&o!==null&&yu(o,m[1])?m[0]:(n=n(),h.memoizedState=[n,o],n)}function Yd(n,o,h){return(As&21)===0?(n.baseState&&(n.baseState=!1,Qn=!0),n.memoizedState=h):(W(h,o)||(h=un(),Xt.lanes|=h,vs|=h,n.baseState=!0),o)}function O2(n,o){var h=et;et=h!==0&&4>h?h:4,n(!0);var m=_u.transition;_u.transition={};try{n(!1),o()}finally{et=h,_u.transition=m}}function Kd(){return Tr().memoizedState}function D2(n,o,h){var m=Xi(n);if(h={lane:m,action:h,hasEagerState:!1,eagerState:null,next:null},qd(n))Zd(o,h);else if(h=Id(n,o,h,m),h!==null){var y=Gn();Fr(h,n,m,y),Qd(h,o,m)}}function M2(n,o,h){var m=Xi(n),y={lane:m,action:h,hasEagerState:!1,eagerState:null,next:null};if(qd(n))Zd(o,y);else{var C=n.alternate;if(n.lanes===0&&(C===null||C.lanes===0)&&(C=o.lastRenderedReducer,C!==null))try{var N=o.lastRenderedState,P=C(N,h);if(y.hasEagerState=!0,y.eagerState=P,W(P,N)){var B=o.interleaved;B===null?(y.next=y,du(o)):(y.next=B.next,B.next=y),o.interleaved=y;return}}catch{}h=Id(n,o,y,m),h!==null&&(y=Gn(),Fr(h,n,m,y),Qd(h,o,m))}}function qd(n){var o=n.alternate;return n===Xt||o!==null&&o===Xt}function Zd(n,o){ul=ba=!0;var h=n.pending;h===null?o.next=o:(o.next=h.next,h.next=o),n.pending=o}function Qd(n,o,h){if((h&4194240)!==0){var m=o.lanes;m&=n.pendingLanes,h|=m,o.lanes=h,Kt(n,h)}}var Ma={readContext:Ir,useCallback:Fn,useContext:Fn,useEffect:Fn,useImperativeHandle:Fn,useInsertionEffect:Fn,useLayoutEffect:Fn,useMemo:Fn,useReducer:Fn,useRef:Fn,useState:Fn,useDebugValue:Fn,useDeferredValue:Fn,useTransition:Fn,useMutableSource:Fn,useSyncExternalStore:Fn,useId:Fn,unstable_isNewReconciler:!1},k2={readContext:Ir,useCallback:function(n,o){return Jr().memoizedState=[n,o===void 0?null:o],n},useContext:Ir,useEffect:Vd,useImperativeHandle:function(n,o,h){return h=h!=null?h.concat([n]):null,Oa(4194308,4,zd.bind(null,o,n),h)},useLayoutEffect:function(n,o){return Oa(4194308,4,n,o)},useInsertionEffect:function(n,o){return Oa(4,2,n,o)},useMemo:function(n,o){var h=Jr();return o=o===void 0?null:o,n=n(),h.memoizedState=[n,o],n},useReducer:function(n,o,h){var m=Jr();return o=h!==void 0?h(o):o,m.memoizedState=m.baseState=o,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:o},m.queue=n,n=n.dispatch=D2.bind(null,Xt,n),[m.memoizedState,n]},useRef:function(n){var o=Jr();return n={current:n},o.memoizedState=n},useState:Fd,useDebugValue:Iu,useDeferredValue:function(n){return Jr().memoizedState=n},useTransition:function(){var n=Fd(!1),o=n[0];return n=O2.bind(null,n[1]),Jr().memoizedState=n,[o,n]},useMutableSource:function(){},useSyncExternalStore:function(n,o,h){var m=Xt,y=Jr();if(Ht){if(h===void 0)throw Error(i(407));h=h()}else{if(h=o(),Cn===null)throw Error(i(349));(As&30)!==0||Md(m,o,h)}y.memoizedState=h;var C={value:h,getSnapshot:o};return y.queue=C,Vd(Pd.bind(null,m,C,n),[n]),m.flags|=2048,dl(9,kd.bind(null,m,C,h,o),void 0,null),h},useId:function(){var n=Jr(),o=Cn.identifierPrefix;if(Ht){var h=ui,m=ci;h=(m&~(1<<32-Wn(m)-1)).toString(32)+h,o=":"+o+"R"+h,h=fl++,0<h&&(o+="H"+h.toString(32)),o+=":"}else h=b2++,o=":"+o+"r"+h.toString(32)+":";return n.memoizedState=o},unstable_isNewReconciler:!1},P2={readContext:Ir,useCallback:jd,useContext:Ir,useEffect:Su,useImperativeHandle:Gd,useInsertionEffect:Hd,useLayoutEffect:Wd,useMemo:Xd,useReducer:Au,useRef:Ud,useState:function(){return Au(hl)},useDebugValue:Iu,useDeferredValue:function(n){var o=Tr();return Yd(o,gn.memoizedState,n)},useTransition:function(){var n=Au(hl)[0],o=Tr().memoizedState;return[n,o]},useMutableSource:Od,useSyncExternalStore:Dd,useId:Kd,unstable_isNewReconciler:!1},L2={readContext:Ir,useCallback:jd,useContext:Ir,useEffect:Su,useImperativeHandle:Gd,useInsertionEffect:Hd,useLayoutEffect:Wd,useMemo:Xd,useReducer:vu,useRef:Ud,useState:function(){return vu(hl)},useDebugValue:Iu,useDeferredValue:function(n){var o=Tr();return gn===null?o.memoizedState=n:Yd(o,gn.memoizedState,n)},useTransition:function(){var n=vu(hl)[0],o=Tr().memoizedState;return[n,o]},useMutableSource:Od,useSyncExternalStore:Dd,useId:Kd,unstable_isNewReconciler:!1};function Pr(n,o){if(n&&n.defaultProps){o=ce({},o),n=n.defaultProps;for(var h in n)o[h]===void 0&&(o[h]=n[h]);return o}return o}function Tu(n,o,h,m){o=n.memoizedState,h=h(m,o),h=h==null?o:ce({},o,h),n.memoizedState=h,n.lanes===0&&(n.updateQueue.baseState=h)}var ka={isMounted:function(n){return(n=n._reactInternals)?Kn(n)===n:!1},enqueueSetState:function(n,o,h){n=n._reactInternals;var m=Gn(),y=Xi(n),C=hi(m,y);C.payload=o,h!=null&&(C.callback=h),o=Wi(n,C,y),o!==null&&(Fr(o,n,y,m),Ia(o,n,y))},enqueueReplaceState:function(n,o,h){n=n._reactInternals;var m=Gn(),y=Xi(n),C=hi(m,y);C.tag=1,C.payload=o,h!=null&&(C.callback=h),o=Wi(n,C,y),o!==null&&(Fr(o,n,y,m),Ia(o,n,y))},enqueueForceUpdate:function(n,o){n=n._reactInternals;var h=Gn(),m=Xi(n),y=hi(h,m);y.tag=2,o!=null&&(y.callback=o),o=Wi(n,y,m),o!==null&&(Fr(o,n,m,h),Ia(o,n,m))}};function Jd(n,o,h,m,y,C,N){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(m,C,N):o.prototype&&o.prototype.isPureReactComponent?!q(h,m)||!q(y,C):!0}function $d(n,o,h){var m=!1,y=Ui,C=o.contextType;return typeof C=="object"&&C!==null?C=Ir(C):(y=Zn(o)?ws:Bn.current,m=o.contextTypes,C=(m=m!=null)?ro(n,y):Ui),o=new o(h,C),n.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=ka,n.stateNode=o,o._reactInternals=n,m&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=y,n.__reactInternalMemoizedMaskedChildContext=C),o}function e1(n,o,h,m){n=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(h,m),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(h,m),o.state!==n&&ka.enqueueReplaceState(o,o.state,null)}function Nu(n,o,h,m){var y=n.stateNode;y.props=h,y.state=n.memoizedState,y.refs={},gu(n);var C=o.contextType;typeof C=="object"&&C!==null?y.context=Ir(C):(C=Zn(o)?ws:Bn.current,y.context=ro(n,C)),y.state=n.memoizedState,C=o.getDerivedStateFromProps,typeof C=="function"&&(Tu(n,o,C,h),y.state=n.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(o=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),o!==y.state&&ka.enqueueReplaceState(y,y.state,null),Ta(n,h,y,m),y.state=n.memoizedState),typeof y.componentDidMount=="function"&&(n.flags|=4194308)}function fo(n,o){try{var h="",m=o;do h+=tt(m),m=m.return;while(m);var y=h}catch(C){y=`
Error generating stack: `+C.message+`
`+C.stack}return{value:n,source:o,stack:y,digest:null}}function Ru(n,o,h){return{value:n,source:null,stack:h??null,digest:o??null}}function bu(n,o){try{console.error(o.value)}catch(h){setTimeout(function(){throw h})}}var B2=typeof WeakMap=="function"?WeakMap:Map;function t1(n,o,h){h=hi(-1,h),h.tag=3,h.payload={element:null};var m=o.value;return h.callback=function(){Ha||(Ha=!0,ju=m),bu(n,o)},h}function n1(n,o,h){h=hi(-1,h),h.tag=3;var m=n.type.getDerivedStateFromError;if(typeof m=="function"){var y=o.value;h.payload=function(){return m(y)},h.callback=function(){bu(n,o)}}var C=n.stateNode;return C!==null&&typeof C.componentDidCatch=="function"&&(h.callback=function(){bu(n,o),typeof m!="function"&&(Gi===null?Gi=new Set([this]):Gi.add(this));var N=o.stack;this.componentDidCatch(o.value,{componentStack:N!==null?N:""})}),h}function r1(n,o,h){var m=n.pingCache;if(m===null){m=n.pingCache=new B2;var y=new Set;m.set(o,y)}else y=m.get(o),y===void 0&&(y=new Set,m.set(o,y));y.has(h)||(y.add(h),n=Q2.bind(null,n,o,h),o.then(n,n))}function i1(n){do{var o;if((o=n.tag===13)&&(o=n.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return n;n=n.return}while(n!==null);return null}function s1(n,o,h,m,y){return(n.mode&1)===0?(n===o?n.flags|=65536:(n.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(o=hi(-1,1),o.tag=2,Wi(h,o,1))),h.lanes|=1),n):(n.flags|=65536,n.lanes=y,n)}var F2=oe.ReactCurrentOwner,Qn=!1;function zn(n,o,h,m){o.child=n===null?Sd(o,null,h,m):lo(o,n.child,h,m)}function o1(n,o,h,m,y){h=h.render;var C=o.ref;return co(o,y),m=Cu(n,o,h,m,C,y),h=Eu(),n!==null&&!Qn?(o.updateQueue=n.updateQueue,o.flags&=-2053,n.lanes&=~y,di(n,o,y)):(Ht&&h&&iu(o),o.flags|=1,zn(n,o,m,y),o.child)}function l1(n,o,h,m,y){if(n===null){var C=h.type;return typeof C=="function"&&!Ju(C)&&C.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(o.tag=15,o.type=C,a1(n,o,C,m,y)):(n=Ya(h.type,null,m,o,o.mode,y),n.ref=o.ref,n.return=o,o.child=n)}if(C=n.child,(n.lanes&y)===0){var N=C.memoizedProps;if(h=h.compare,h=h!==null?h:q,h(N,m)&&n.ref===o.ref)return di(n,o,y)}return o.flags|=1,n=Ki(C,m),n.ref=o.ref,n.return=o,o.child=n}function a1(n,o,h,m,y){if(n!==null){var C=n.memoizedProps;if(q(C,m)&&n.ref===o.ref)if(Qn=!1,o.pendingProps=m=C,(n.lanes&y)!==0)(n.flags&131072)!==0&&(Qn=!0);else return o.lanes=n.lanes,di(n,o,y)}return Ou(n,o,h,m,y)}function c1(n,o,h){var m=o.pendingProps,y=m.children,C=n!==null?n.memoizedState:null;if(m.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Mt(go,mr),mr|=h;else{if((h&1073741824)===0)return n=C!==null?C.baseLanes|h:h,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:n,cachePool:null,transitions:null},o.updateQueue=null,Mt(go,mr),mr|=n,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=C!==null?C.baseLanes:h,Mt(go,mr),mr|=m}else C!==null?(m=C.baseLanes|h,o.memoizedState=null):m=h,Mt(go,mr),mr|=m;return zn(n,o,y,h),o.child}function u1(n,o){var h=o.ref;(n===null&&h!==null||n!==null&&n.ref!==h)&&(o.flags|=512,o.flags|=2097152)}function Ou(n,o,h,m,y){var C=Zn(h)?ws:Bn.current;return C=ro(o,C),co(o,y),h=Cu(n,o,h,m,C,y),m=Eu(),n!==null&&!Qn?(o.updateQueue=n.updateQueue,o.flags&=-2053,n.lanes&=~y,di(n,o,y)):(Ht&&m&&iu(o),o.flags|=1,zn(n,o,h,y),o.child)}function f1(n,o,h,m,y){if(Zn(h)){var C=!0;wa(o)}else C=!1;if(co(o,y),o.stateNode===null)La(n,o),$d(o,h,m),Nu(o,h,m,y),m=!0;else if(n===null){var N=o.stateNode,P=o.memoizedProps;N.props=P;var B=N.context,Q=h.contextType;typeof Q=="object"&&Q!==null?Q=Ir(Q):(Q=Zn(h)?ws:Bn.current,Q=ro(o,Q));var ae=h.getDerivedStateFromProps,ue=typeof ae=="function"||typeof N.getSnapshotBeforeUpdate=="function";ue||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(P!==m||B!==Q)&&e1(o,N,m,Q),Hi=!1;var se=o.memoizedState;N.state=se,Ta(o,m,N,y),B=o.memoizedState,P!==m||se!==B||qn.current||Hi?(typeof ae=="function"&&(Tu(o,h,ae,m),B=o.memoizedState),(P=Hi||Jd(o,h,P,m,se,B,Q))?(ue||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(o.flags|=4194308)):(typeof N.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=m,o.memoizedState=B),N.props=m,N.state=B,N.context=Q,m=P):(typeof N.componentDidMount=="function"&&(o.flags|=4194308),m=!1)}else{N=o.stateNode,Td(n,o),P=o.memoizedProps,Q=o.type===o.elementType?P:Pr(o.type,P),N.props=Q,ue=o.pendingProps,se=N.context,B=h.contextType,typeof B=="object"&&B!==null?B=Ir(B):(B=Zn(h)?ws:Bn.current,B=ro(o,B));var Te=h.getDerivedStateFromProps;(ae=typeof Te=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(P!==ue||se!==B)&&e1(o,N,m,B),Hi=!1,se=o.memoizedState,N.state=se,Ta(o,m,N,y);var De=o.memoizedState;P!==ue||se!==De||qn.current||Hi?(typeof Te=="function"&&(Tu(o,h,Te,m),De=o.memoizedState),(Q=Hi||Jd(o,h,Q,m,se,De,B)||!1)?(ae||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(m,De,B),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(m,De,B)),typeof N.componentDidUpdate=="function"&&(o.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof N.componentDidUpdate!="function"||P===n.memoizedProps&&se===n.memoizedState||(o.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||P===n.memoizedProps&&se===n.memoizedState||(o.flags|=1024),o.memoizedProps=m,o.memoizedState=De),N.props=m,N.state=De,N.context=B,m=Q):(typeof N.componentDidUpdate!="function"||P===n.memoizedProps&&se===n.memoizedState||(o.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||P===n.memoizedProps&&se===n.memoizedState||(o.flags|=1024),m=!1)}return Du(n,o,h,m,C,y)}function Du(n,o,h,m,y,C){u1(n,o);var N=(o.flags&128)!==0;if(!m&&!N)return y&&md(o,h,!1),di(n,o,C);m=o.stateNode,F2.current=o;var P=N&&typeof h.getDerivedStateFromError!="function"?null:m.render();return o.flags|=1,n!==null&&N?(o.child=lo(o,n.child,null,C),o.child=lo(o,null,P,C)):zn(n,o,P,C),o.memoizedState=m.state,y&&md(o,h,!0),o.child}function h1(n){var o=n.stateNode;o.pendingContext?gd(n,o.pendingContext,o.pendingContext!==o.context):o.context&&gd(n,o.context,!1),pu(n,o.containerInfo)}function d1(n,o,h,m,y){return oo(),au(y),o.flags|=256,zn(n,o,h,m),o.child}var Mu={dehydrated:null,treeContext:null,retryLane:0};function ku(n){return{baseLanes:n,cachePool:null,transitions:null}}function g1(n,o,h){var m=o.pendingProps,y=jt.current,C=!1,N=(o.flags&128)!==0,P;if((P=N)||(P=n!==null&&n.memoizedState===null?!1:(y&2)!==0),P?(C=!0,o.flags&=-129):(n===null||n.memoizedState!==null)&&(y|=1),Mt(jt,y&1),n===null)return lu(o),n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((o.mode&1)===0?o.lanes=1:n.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(N=m.children,n=m.fallback,C?(m=o.mode,C=o.child,N={mode:"hidden",children:N},(m&1)===0&&C!==null?(C.childLanes=0,C.pendingProps=N):C=Ka(N,m,0,null),n=Ns(n,m,h,null),C.return=o,n.return=o,C.sibling=n,o.child=C,o.child.memoizedState=ku(h),o.memoizedState=Mu,n):Pu(o,N));if(y=n.memoizedState,y!==null&&(P=y.dehydrated,P!==null))return U2(n,o,N,m,P,y,h);if(C){C=m.fallback,N=o.mode,y=n.child,P=y.sibling;var B={mode:"hidden",children:m.children};return(N&1)===0&&o.child!==y?(m=o.child,m.childLanes=0,m.pendingProps=B,o.deletions=null):(m=Ki(y,B),m.subtreeFlags=y.subtreeFlags&14680064),P!==null?C=Ki(P,C):(C=Ns(C,N,h,null),C.flags|=2),C.return=o,m.return=o,m.sibling=C,o.child=m,m=C,C=o.child,N=n.child.memoizedState,N=N===null?ku(h):{baseLanes:N.baseLanes|h,cachePool:null,transitions:N.transitions},C.memoizedState=N,C.childLanes=n.childLanes&~h,o.memoizedState=Mu,m}return C=n.child,n=C.sibling,m=Ki(C,{mode:"visible",children:m.children}),(o.mode&1)===0&&(m.lanes=h),m.return=o,m.sibling=null,n!==null&&(h=o.deletions,h===null?(o.deletions=[n],o.flags|=16):h.push(n)),o.child=m,o.memoizedState=null,m}function Pu(n,o){return o=Ka({mode:"visible",children:o},n.mode,0,null),o.return=n,n.child=o}function Pa(n,o,h,m){return m!==null&&au(m),lo(o,n.child,null,h),n=Pu(o,o.pendingProps.children),n.flags|=2,o.memoizedState=null,n}function U2(n,o,h,m,y,C,N){if(h)return o.flags&256?(o.flags&=-257,m=Ru(Error(i(422))),Pa(n,o,N,m)):o.memoizedState!==null?(o.child=n.child,o.flags|=128,null):(C=m.fallback,y=o.mode,m=Ka({mode:"visible",children:m.children},y,0,null),C=Ns(C,y,N,null),C.flags|=2,m.return=o,C.return=o,m.sibling=C,o.child=m,(o.mode&1)!==0&&lo(o,n.child,null,N),o.child.memoizedState=ku(N),o.memoizedState=Mu,C);if((o.mode&1)===0)return Pa(n,o,N,null);if(y.data==="$!"){if(m=y.nextSibling&&y.nextSibling.dataset,m)var P=m.dgst;return m=P,C=Error(i(419)),m=Ru(C,m,void 0),Pa(n,o,N,m)}if(P=(N&n.childLanes)!==0,Qn||P){if(m=Cn,m!==null){switch(N&-N){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=(y&(m.suspendedLanes|N))!==0?0:y,y!==0&&y!==C.retryLane&&(C.retryLane=y,fi(n,y),Fr(m,n,y,-1))}return Qu(),m=Ru(Error(i(421))),Pa(n,o,N,m)}return y.data==="$?"?(o.flags|=128,o.child=n.child,o=J2.bind(null,n),y._reactRetry=o,null):(n=C.treeContext,pr=Bi(y.nextSibling),gr=o,Ht=!0,kr=null,n!==null&&(vr[Sr++]=ci,vr[Sr++]=ui,vr[Sr++]=_s,ci=n.id,ui=n.overflow,_s=o),o=Pu(o,m.children),o.flags|=4096,o)}function p1(n,o,h){n.lanes|=o;var m=n.alternate;m!==null&&(m.lanes|=o),hu(n.return,o,h)}function Lu(n,o,h,m,y){var C=n.memoizedState;C===null?n.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:m,tail:h,tailMode:y}:(C.isBackwards=o,C.rendering=null,C.renderingStartTime=0,C.last=m,C.tail=h,C.tailMode=y)}function m1(n,o,h){var m=o.pendingProps,y=m.revealOrder,C=m.tail;if(zn(n,o,m.children,h),m=jt.current,(m&2)!==0)m=m&1|2,o.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=o.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&p1(n,h,o);else if(n.tag===19)p1(n,h,o);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===o)break e;for(;n.sibling===null;){if(n.return===null||n.return===o)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}m&=1}if(Mt(jt,m),(o.mode&1)===0)o.memoizedState=null;else switch(y){case"forwards":for(h=o.child,y=null;h!==null;)n=h.alternate,n!==null&&Na(n)===null&&(y=h),h=h.sibling;h=y,h===null?(y=o.child,o.child=null):(y=h.sibling,h.sibling=null),Lu(o,!1,y,h,C);break;case"backwards":for(h=null,y=o.child,o.child=null;y!==null;){if(n=y.alternate,n!==null&&Na(n)===null){o.child=y;break}n=y.sibling,y.sibling=h,h=y,y=n}Lu(o,!0,h,null,C);break;case"together":Lu(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function La(n,o){(o.mode&1)===0&&n!==null&&(n.alternate=null,o.alternate=null,o.flags|=2)}function di(n,o,h){if(n!==null&&(o.dependencies=n.dependencies),vs|=o.lanes,(h&o.childLanes)===0)return null;if(n!==null&&o.child!==n.child)throw Error(i(153));if(o.child!==null){for(n=o.child,h=Ki(n,n.pendingProps),o.child=h,h.return=o;n.sibling!==null;)n=n.sibling,h=h.sibling=Ki(n,n.pendingProps),h.return=o;h.sibling=null}return o.child}function V2(n,o,h){switch(o.tag){case 3:h1(o),oo();break;case 5:bd(o);break;case 1:Zn(o.type)&&wa(o);break;case 4:pu(o,o.stateNode.containerInfo);break;case 10:var m=o.type._context,y=o.memoizedProps.value;Mt(va,m._currentValue),m._currentValue=y;break;case 13:if(m=o.memoizedState,m!==null)return m.dehydrated!==null?(Mt(jt,jt.current&1),o.flags|=128,null):(h&o.child.childLanes)!==0?g1(n,o,h):(Mt(jt,jt.current&1),n=di(n,o,h),n!==null?n.sibling:null);Mt(jt,jt.current&1);break;case 19:if(m=(h&o.childLanes)!==0,(n.flags&128)!==0){if(m)return m1(n,o,h);o.flags|=128}if(y=o.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),Mt(jt,jt.current),m)break;return null;case 22:case 23:return o.lanes=0,c1(n,o,h)}return di(n,o,h)}var x1,Bu,w1,_1;x1=function(n,o){for(var h=o.child;h!==null;){if(h.tag===5||h.tag===6)n.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===o)break;for(;h.sibling===null;){if(h.return===null||h.return===o)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},Bu=function(){},w1=function(n,o,h,m){var y=n.memoizedProps;if(y!==m){n=o.stateNode,Es(Qr.current);var C=null;switch(h){case"input":y=zr(n,y),m=zr(n,m),C=[];break;case"select":y=ce({},y,{value:void 0}),m=ce({},m,{value:void 0}),C=[];break;case"textarea":y=Ai(n,y),m=Ai(n,m),C=[];break;default:typeof y.onClick!="function"&&typeof m.onClick=="function"&&(n.onclick=pa)}wt(h,m);var N;h=null;for(Q in y)if(!m.hasOwnProperty(Q)&&y.hasOwnProperty(Q)&&y[Q]!=null)if(Q==="style"){var P=y[Q];for(N in P)P.hasOwnProperty(N)&&(h||(h={}),h[N]="")}else Q!=="dangerouslySetInnerHTML"&&Q!=="children"&&Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&Q!=="autoFocus"&&(d.hasOwnProperty(Q)?C||(C=[]):(C=C||[]).push(Q,null));for(Q in m){var B=m[Q];if(P=y?.[Q],m.hasOwnProperty(Q)&&B!==P&&(B!=null||P!=null))if(Q==="style")if(P){for(N in P)!P.hasOwnProperty(N)||B&&B.hasOwnProperty(N)||(h||(h={}),h[N]="");for(N in B)B.hasOwnProperty(N)&&P[N]!==B[N]&&(h||(h={}),h[N]=B[N])}else h||(C||(C=[]),C.push(Q,h)),h=B;else Q==="dangerouslySetInnerHTML"?(B=B?B.__html:void 0,P=P?P.__html:void 0,B!=null&&P!==B&&(C=C||[]).push(Q,B)):Q==="children"?typeof B!="string"&&typeof B!="number"||(C=C||[]).push(Q,""+B):Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&(d.hasOwnProperty(Q)?(B!=null&&Q==="onScroll"&&Bt("scroll",n),C||P===B||(C=[])):(C=C||[]).push(Q,B))}h&&(C=C||[]).push("style",h);var Q=C;(o.updateQueue=Q)&&(o.flags|=4)}},_1=function(n,o,h,m){h!==m&&(o.flags|=4)};function gl(n,o){if(!Ht)switch(n.tailMode){case"hidden":o=n.tail;for(var h=null;o!==null;)o.alternate!==null&&(h=o),o=o.sibling;h===null?n.tail=null:h.sibling=null;break;case"collapsed":h=n.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?o||n.tail===null?n.tail=null:n.tail.sibling=null:m.sibling=null}}function Un(n){var o=n.alternate!==null&&n.alternate.child===n.child,h=0,m=0;if(o)for(var y=n.child;y!==null;)h|=y.lanes|y.childLanes,m|=y.subtreeFlags&14680064,m|=y.flags&14680064,y.return=n,y=y.sibling;else for(y=n.child;y!==null;)h|=y.lanes|y.childLanes,m|=y.subtreeFlags,m|=y.flags,y.return=n,y=y.sibling;return n.subtreeFlags|=m,n.childLanes=h,o}function H2(n,o,h){var m=o.pendingProps;switch(su(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Un(o),null;case 1:return Zn(o.type)&&xa(),Un(o),null;case 3:return m=o.stateNode,uo(),Ft(qn),Ft(Bn),wu(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(n===null||n.child===null)&&(Ea(o)?o.flags|=4:n===null||n.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,kr!==null&&(Ku(kr),kr=null))),Bu(n,o),Un(o),null;case 5:mu(o);var y=Es(cl.current);if(h=o.type,n!==null&&o.stateNode!=null)w1(n,o,h,m,y),n.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!m){if(o.stateNode===null)throw Error(i(166));return Un(o),null}if(n=Es(Qr.current),Ea(o)){m=o.stateNode,h=o.type;var C=o.memoizedProps;switch(m[Zr]=o,m[il]=C,n=(o.mode&1)!==0,h){case"dialog":Bt("cancel",m),Bt("close",m);break;case"iframe":case"object":case"embed":Bt("load",m);break;case"video":case"audio":for(y=0;y<tl.length;y++)Bt(tl[y],m);break;case"source":Bt("error",m);break;case"img":case"image":case"link":Bt("error",m),Bt("load",m);break;case"details":Bt("toggle",m);break;case"input":sr(m,C),Bt("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!C.multiple},Bt("invalid",m);break;case"textarea":Mo(m,C),Bt("invalid",m)}wt(h,C),y=null;for(var N in C)if(C.hasOwnProperty(N)){var P=C[N];N==="children"?typeof P=="string"?m.textContent!==P&&(C.suppressHydrationWarning!==!0&&ga(m.textContent,P,n),y=["children",P]):typeof P=="number"&&m.textContent!==""+P&&(C.suppressHydrationWarning!==!0&&ga(m.textContent,P,n),y=["children",""+P]):d.hasOwnProperty(N)&&P!=null&&N==="onScroll"&&Bt("scroll",m)}switch(h){case"input":an(m),At(m,C,!0);break;case"textarea":an(m),Hs(m);break;case"select":case"option":break;default:typeof C.onClick=="function"&&(m.onclick=pa)}m=y,o.updateQueue=m,m!==null&&(o.flags|=4)}else{N=y.nodeType===9?y:y.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=jn(h)),n==="http://www.w3.org/1999/xhtml"?h==="script"?(n=N.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof m.is=="string"?n=N.createElement(h,{is:m.is}):(n=N.createElement(h),h==="select"&&(N=n,m.multiple?N.multiple=!0:m.size&&(N.size=m.size))):n=N.createElementNS(n,h),n[Zr]=o,n[il]=m,x1(n,o,!1,!1),o.stateNode=n;e:{switch(N=Rt(h,m),h){case"dialog":Bt("cancel",n),Bt("close",n),y=m;break;case"iframe":case"object":case"embed":Bt("load",n),y=m;break;case"video":case"audio":for(y=0;y<tl.length;y++)Bt(tl[y],n);y=m;break;case"source":Bt("error",n),y=m;break;case"img":case"image":case"link":Bt("error",n),Bt("load",n),y=m;break;case"details":Bt("toggle",n),y=m;break;case"input":sr(n,m),y=zr(n,m),Bt("invalid",n);break;case"option":y=m;break;case"select":n._wrapperState={wasMultiple:!!m.multiple},y=ce({},m,{value:void 0}),Bt("invalid",n);break;case"textarea":Mo(n,m),y=Ai(n,m),Bt("invalid",n);break;default:y=m}wt(h,y),P=y;for(C in P)if(P.hasOwnProperty(C)){var B=P[C];C==="style"?Ce(n,B):C==="dangerouslySetInnerHTML"?(B=B?B.__html:void 0,B!=null&&xn(n,B)):C==="children"?typeof B=="string"?(h!=="textarea"||B!=="")&&vi(n,B):typeof B=="number"&&vi(n,""+B):C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&C!=="autoFocus"&&(d.hasOwnProperty(C)?B!=null&&C==="onScroll"&&Bt("scroll",n):B!=null&&te(n,C,B,N))}switch(h){case"input":an(n),At(n,m,!1);break;case"textarea":an(n),Hs(n);break;case"option":m.value!=null&&n.setAttribute("value",""+Be(m.value));break;case"select":n.multiple=!!m.multiple,C=m.value,C!=null?Ne(n,!!m.multiple,C,!1):m.defaultValue!=null&&Ne(n,!!m.multiple,m.defaultValue,!0);break;default:typeof y.onClick=="function"&&(n.onclick=pa)}switch(h){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Un(o),null;case 6:if(n&&o.stateNode!=null)_1(n,o,n.memoizedProps,m);else{if(typeof m!="string"&&o.stateNode===null)throw Error(i(166));if(h=Es(cl.current),Es(Qr.current),Ea(o)){if(m=o.stateNode,h=o.memoizedProps,m[Zr]=o,(C=m.nodeValue!==h)&&(n=gr,n!==null))switch(n.tag){case 3:ga(m.nodeValue,h,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&ga(m.nodeValue,h,(n.mode&1)!==0)}C&&(o.flags|=4)}else m=(h.nodeType===9?h:h.ownerDocument).createTextNode(m),m[Zr]=o,o.stateNode=m}return Un(o),null;case 13:if(Ft(jt),m=o.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Ht&&pr!==null&&(o.mode&1)!==0&&(o.flags&128)===0)Ed(),oo(),o.flags|=98560,C=!1;else if(C=Ea(o),m!==null&&m.dehydrated!==null){if(n===null){if(!C)throw Error(i(318));if(C=o.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(i(317));C[Zr]=o}else oo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Un(o),C=!1}else kr!==null&&(Ku(kr),kr=null),C=!0;if(!C)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=h,o):(m=m!==null,m!==(n!==null&&n.memoizedState!==null)&&m&&(o.child.flags|=8192,(o.mode&1)!==0&&(n===null||(jt.current&1)!==0?pn===0&&(pn=3):Qu())),o.updateQueue!==null&&(o.flags|=4),Un(o),null);case 4:return uo(),Bu(n,o),n===null&&nl(o.stateNode.containerInfo),Un(o),null;case 10:return fu(o.type._context),Un(o),null;case 17:return Zn(o.type)&&xa(),Un(o),null;case 19:if(Ft(jt),C=o.memoizedState,C===null)return Un(o),null;if(m=(o.flags&128)!==0,N=C.rendering,N===null)if(m)gl(C,!1);else{if(pn!==0||n!==null&&(n.flags&128)!==0)for(n=o.child;n!==null;){if(N=Na(n),N!==null){for(o.flags|=128,gl(C,!1),m=N.updateQueue,m!==null&&(o.updateQueue=m,o.flags|=4),o.subtreeFlags=0,m=h,h=o.child;h!==null;)C=h,n=m,C.flags&=14680066,N=C.alternate,N===null?(C.childLanes=0,C.lanes=n,C.child=null,C.subtreeFlags=0,C.memoizedProps=null,C.memoizedState=null,C.updateQueue=null,C.dependencies=null,C.stateNode=null):(C.childLanes=N.childLanes,C.lanes=N.lanes,C.child=N.child,C.subtreeFlags=0,C.deletions=null,C.memoizedProps=N.memoizedProps,C.memoizedState=N.memoizedState,C.updateQueue=N.updateQueue,C.type=N.type,n=N.dependencies,C.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),h=h.sibling;return Mt(jt,jt.current&1|2),o.child}n=n.sibling}C.tail!==null&&Ct()>po&&(o.flags|=128,m=!0,gl(C,!1),o.lanes=4194304)}else{if(!m)if(n=Na(N),n!==null){if(o.flags|=128,m=!0,h=n.updateQueue,h!==null&&(o.updateQueue=h,o.flags|=4),gl(C,!0),C.tail===null&&C.tailMode==="hidden"&&!N.alternate&&!Ht)return Un(o),null}else 2*Ct()-C.renderingStartTime>po&&h!==1073741824&&(o.flags|=128,m=!0,gl(C,!1),o.lanes=4194304);C.isBackwards?(N.sibling=o.child,o.child=N):(h=C.last,h!==null?h.sibling=N:o.child=N,C.last=N)}return C.tail!==null?(o=C.tail,C.rendering=o,C.tail=o.sibling,C.renderingStartTime=Ct(),o.sibling=null,h=jt.current,Mt(jt,m?h&1|2:h&1),o):(Un(o),null);case 22:case 23:return Zu(),m=o.memoizedState!==null,n!==null&&n.memoizedState!==null!==m&&(o.flags|=8192),m&&(o.mode&1)!==0?(mr&1073741824)!==0&&(Un(o),o.subtreeFlags&6&&(o.flags|=8192)):Un(o),null;case 24:return null;case 25:return null}throw Error(i(156,o.tag))}function W2(n,o){switch(su(o),o.tag){case 1:return Zn(o.type)&&xa(),n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 3:return uo(),Ft(qn),Ft(Bn),wu(),n=o.flags,(n&65536)!==0&&(n&128)===0?(o.flags=n&-65537|128,o):null;case 5:return mu(o),null;case 13:if(Ft(jt),n=o.memoizedState,n!==null&&n.dehydrated!==null){if(o.alternate===null)throw Error(i(340));oo()}return n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 19:return Ft(jt),null;case 4:return uo(),null;case 10:return fu(o.type._context),null;case 22:case 23:return Zu(),null;case 24:return null;default:return null}}var Ba=!1,Vn=!1,z2=typeof WeakSet=="function"?WeakSet:Set,Oe=null;function ho(n,o){var h=n.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(m){Zt(n,o,m)}else h.current=null}function Fu(n,o,h){try{h()}catch(m){Zt(n,o,m)}}var y1=!1;function G2(n,o){if(Zc=Kr,n=rt(),qe(n)){if("selectionStart"in n)var h={start:n.selectionStart,end:n.selectionEnd};else e:{h=(h=n.ownerDocument)&&h.defaultView||window;var m=h.getSelection&&h.getSelection();if(m&&m.rangeCount!==0){h=m.anchorNode;var y=m.anchorOffset,C=m.focusNode;m=m.focusOffset;try{h.nodeType,C.nodeType}catch{h=null;break e}var N=0,P=-1,B=-1,Q=0,ae=0,ue=n,se=null;t:for(;;){for(var Te;ue!==h||y!==0&&ue.nodeType!==3||(P=N+y),ue!==C||m!==0&&ue.nodeType!==3||(B=N+m),ue.nodeType===3&&(N+=ue.nodeValue.length),(Te=ue.firstChild)!==null;)se=ue,ue=Te;for(;;){if(ue===n)break t;if(se===h&&++Q===y&&(P=N),se===C&&++ae===m&&(B=N),(Te=ue.nextSibling)!==null)break;ue=se,se=ue.parentNode}ue=Te}h=P===-1||B===-1?null:{start:P,end:B}}else h=null}h=h||{start:0,end:0}}else h=null;for(Qc={focusedElem:n,selectionRange:h},Kr=!1,Oe=o;Oe!==null;)if(o=Oe,n=o.child,(o.subtreeFlags&1028)!==0&&n!==null)n.return=o,Oe=n;else for(;Oe!==null;){o=Oe;try{var De=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(De!==null){var Pe=De.memoizedProps,sn=De.memoizedState,G=o.stateNode,U=G.getSnapshotBeforeUpdate(o.elementType===o.type?Pe:Pr(o.type,Pe),sn);G.__reactInternalSnapshotBeforeUpdate=U}break;case 3:var X=o.stateNode.containerInfo;X.nodeType===1?X.textContent="":X.nodeType===9&&X.documentElement&&X.removeChild(X.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(me){Zt(o,o.return,me)}if(n=o.sibling,n!==null){n.return=o.return,Oe=n;break}Oe=o.return}return De=y1,y1=!1,De}function pl(n,o,h){var m=o.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var y=m=m.next;do{if((y.tag&n)===n){var C=y.destroy;y.destroy=void 0,C!==void 0&&Fu(o,h,C)}y=y.next}while(y!==m)}}function Fa(n,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var h=o=o.next;do{if((h.tag&n)===n){var m=h.create;h.destroy=m()}h=h.next}while(h!==o)}}function Uu(n){var o=n.ref;if(o!==null){var h=n.stateNode;n.tag,n=h,typeof o=="function"?o(n):o.current=n}}function C1(n){var o=n.alternate;o!==null&&(n.alternate=null,C1(o)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(o=n.stateNode,o!==null&&(delete o[Zr],delete o[il],delete o[tu],delete o[I2],delete o[T2])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function E1(n){return n.tag===5||n.tag===3||n.tag===4}function A1(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||E1(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Vu(n,o,h){var m=n.tag;if(m===5||m===6)n=n.stateNode,o?h.nodeType===8?h.parentNode.insertBefore(n,o):h.insertBefore(n,o):(h.nodeType===8?(o=h.parentNode,o.insertBefore(n,h)):(o=h,o.appendChild(n)),h=h._reactRootContainer,h!=null||o.onclick!==null||(o.onclick=pa));else if(m!==4&&(n=n.child,n!==null))for(Vu(n,o,h),n=n.sibling;n!==null;)Vu(n,o,h),n=n.sibling}function Hu(n,o,h){var m=n.tag;if(m===5||m===6)n=n.stateNode,o?h.insertBefore(n,o):h.appendChild(n);else if(m!==4&&(n=n.child,n!==null))for(Hu(n,o,h),n=n.sibling;n!==null;)Hu(n,o,h),n=n.sibling}var bn=null,Lr=!1;function zi(n,o,h){for(h=h.child;h!==null;)v1(n,o,h),h=h.sibling}function v1(n,o,h){if($e&&typeof $e.onCommitFiberUnmount=="function")try{$e.onCommitFiberUnmount(gt,h)}catch{}switch(h.tag){case 5:Vn||ho(h,o);case 6:var m=bn,y=Lr;bn=null,zi(n,o,h),bn=m,Lr=y,bn!==null&&(Lr?(n=bn,h=h.stateNode,n.nodeType===8?n.parentNode.removeChild(h):n.removeChild(h)):bn.removeChild(h.stateNode));break;case 18:bn!==null&&(Lr?(n=bn,h=h.stateNode,n.nodeType===8?eu(n.parentNode,h):n.nodeType===1&&eu(n,h),Or(n)):eu(bn,h.stateNode));break;case 4:m=bn,y=Lr,bn=h.stateNode.containerInfo,Lr=!0,zi(n,o,h),bn=m,Lr=y;break;case 0:case 11:case 14:case 15:if(!Vn&&(m=h.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){y=m=m.next;do{var C=y,N=C.destroy;C=C.tag,N!==void 0&&((C&2)!==0||(C&4)!==0)&&Fu(h,o,N),y=y.next}while(y!==m)}zi(n,o,h);break;case 1:if(!Vn&&(ho(h,o),m=h.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=h.memoizedProps,m.state=h.memoizedState,m.componentWillUnmount()}catch(P){Zt(h,o,P)}zi(n,o,h);break;case 21:zi(n,o,h);break;case 22:h.mode&1?(Vn=(m=Vn)||h.memoizedState!==null,zi(n,o,h),Vn=m):zi(n,o,h);break;default:zi(n,o,h)}}function S1(n){var o=n.updateQueue;if(o!==null){n.updateQueue=null;var h=n.stateNode;h===null&&(h=n.stateNode=new z2),o.forEach(function(m){var y=$2.bind(null,n,m);h.has(m)||(h.add(m),m.then(y,y))})}}function Br(n,o){var h=o.deletions;if(h!==null)for(var m=0;m<h.length;m++){var y=h[m];try{var C=n,N=o,P=N;e:for(;P!==null;){switch(P.tag){case 5:bn=P.stateNode,Lr=!1;break e;case 3:bn=P.stateNode.containerInfo,Lr=!0;break e;case 4:bn=P.stateNode.containerInfo,Lr=!0;break e}P=P.return}if(bn===null)throw Error(i(160));v1(C,N,y),bn=null,Lr=!1;var B=y.alternate;B!==null&&(B.return=null),y.return=null}catch(Q){Zt(y,o,Q)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)I1(o,n),o=o.sibling}function I1(n,o){var h=n.alternate,m=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Br(o,n),$r(n),m&4){try{pl(3,n,n.return),Fa(3,n)}catch(Pe){Zt(n,n.return,Pe)}try{pl(5,n,n.return)}catch(Pe){Zt(n,n.return,Pe)}}break;case 1:Br(o,n),$r(n),m&512&&h!==null&&ho(h,h.return);break;case 5:if(Br(o,n),$r(n),m&512&&h!==null&&ho(h,h.return),n.flags&32){var y=n.stateNode;try{vi(y,"")}catch(Pe){Zt(n,n.return,Pe)}}if(m&4&&(y=n.stateNode,y!=null)){var C=n.memoizedProps,N=h!==null?h.memoizedProps:C,P=n.type,B=n.updateQueue;if(n.updateQueue=null,B!==null)try{P==="input"&&C.type==="radio"&&C.name!=null&&Ei(y,C),Rt(P,N);var Q=Rt(P,C);for(N=0;N<B.length;N+=2){var ae=B[N],ue=B[N+1];ae==="style"?Ce(y,ue):ae==="dangerouslySetInnerHTML"?xn(y,ue):ae==="children"?vi(y,ue):te(y,ae,ue,Q)}switch(P){case"input":$t(y,C);break;case"textarea":wr(y,C);break;case"select":var se=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!C.multiple;var Te=C.value;Te!=null?Ne(y,!!C.multiple,Te,!1):se!==!!C.multiple&&(C.defaultValue!=null?Ne(y,!!C.multiple,C.defaultValue,!0):Ne(y,!!C.multiple,C.multiple?[]:"",!1))}y[il]=C}catch(Pe){Zt(n,n.return,Pe)}}break;case 6:if(Br(o,n),$r(n),m&4){if(n.stateNode===null)throw Error(i(162));y=n.stateNode,C=n.memoizedProps;try{y.nodeValue=C}catch(Pe){Zt(n,n.return,Pe)}}break;case 3:if(Br(o,n),$r(n),m&4&&h!==null&&h.memoizedState.isDehydrated)try{Or(o.containerInfo)}catch(Pe){Zt(n,n.return,Pe)}break;case 4:Br(o,n),$r(n);break;case 13:Br(o,n),$r(n),y=n.child,y.flags&8192&&(C=y.memoizedState!==null,y.stateNode.isHidden=C,!C||y.alternate!==null&&y.alternate.memoizedState!==null||(Gu=Ct())),m&4&&S1(n);break;case 22:if(ae=h!==null&&h.memoizedState!==null,n.mode&1?(Vn=(Q=Vn)||ae,Br(o,n),Vn=Q):Br(o,n),$r(n),m&8192){if(Q=n.memoizedState!==null,(n.stateNode.isHidden=Q)&&!ae&&(n.mode&1)!==0)for(Oe=n,ae=n.child;ae!==null;){for(ue=Oe=ae;Oe!==null;){switch(se=Oe,Te=se.child,se.tag){case 0:case 11:case 14:case 15:pl(4,se,se.return);break;case 1:ho(se,se.return);var De=se.stateNode;if(typeof De.componentWillUnmount=="function"){m=se,h=se.return;try{o=m,De.props=o.memoizedProps,De.state=o.memoizedState,De.componentWillUnmount()}catch(Pe){Zt(m,h,Pe)}}break;case 5:ho(se,se.return);break;case 22:if(se.memoizedState!==null){R1(ue);continue}}Te!==null?(Te.return=se,Oe=Te):R1(ue)}ae=ae.sibling}e:for(ae=null,ue=n;;){if(ue.tag===5){if(ae===null){ae=ue;try{y=ue.stateNode,Q?(C=y.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none"):(P=ue.stateNode,B=ue.memoizedProps.style,N=B!=null&&B.hasOwnProperty("display")?B.display:null,P.style.display=zt("display",N))}catch(Pe){Zt(n,n.return,Pe)}}}else if(ue.tag===6){if(ae===null)try{ue.stateNode.nodeValue=Q?"":ue.memoizedProps}catch(Pe){Zt(n,n.return,Pe)}}else if((ue.tag!==22&&ue.tag!==23||ue.memoizedState===null||ue===n)&&ue.child!==null){ue.child.return=ue,ue=ue.child;continue}if(ue===n)break e;for(;ue.sibling===null;){if(ue.return===null||ue.return===n)break e;ae===ue&&(ae=null),ue=ue.return}ae===ue&&(ae=null),ue.sibling.return=ue.return,ue=ue.sibling}}break;case 19:Br(o,n),$r(n),m&4&&S1(n);break;case 21:break;default:Br(o,n),$r(n)}}function $r(n){var o=n.flags;if(o&2){try{e:{for(var h=n.return;h!==null;){if(E1(h)){var m=h;break e}h=h.return}throw Error(i(160))}switch(m.tag){case 5:var y=m.stateNode;m.flags&32&&(vi(y,""),m.flags&=-33);var C=A1(n);Hu(n,C,y);break;case 3:case 4:var N=m.stateNode.containerInfo,P=A1(n);Vu(n,P,N);break;default:throw Error(i(161))}}catch(B){Zt(n,n.return,B)}n.flags&=-3}o&4096&&(n.flags&=-4097)}function j2(n,o,h){Oe=n,T1(n)}function T1(n,o,h){for(var m=(n.mode&1)!==0;Oe!==null;){var y=Oe,C=y.child;if(y.tag===22&&m){var N=y.memoizedState!==null||Ba;if(!N){var P=y.alternate,B=P!==null&&P.memoizedState!==null||Vn;P=Ba;var Q=Vn;if(Ba=N,(Vn=B)&&!Q)for(Oe=y;Oe!==null;)N=Oe,B=N.child,N.tag===22&&N.memoizedState!==null?b1(y):B!==null?(B.return=N,Oe=B):b1(y);for(;C!==null;)Oe=C,T1(C),C=C.sibling;Oe=y,Ba=P,Vn=Q}N1(n)}else(y.subtreeFlags&8772)!==0&&C!==null?(C.return=y,Oe=C):N1(n)}}function N1(n){for(;Oe!==null;){var o=Oe;if((o.flags&8772)!==0){var h=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:Vn||Fa(5,o);break;case 1:var m=o.stateNode;if(o.flags&4&&!Vn)if(h===null)m.componentDidMount();else{var y=o.elementType===o.type?h.memoizedProps:Pr(o.type,h.memoizedProps);m.componentDidUpdate(y,h.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var C=o.updateQueue;C!==null&&Rd(o,C,m);break;case 3:var N=o.updateQueue;if(N!==null){if(h=null,o.child!==null)switch(o.child.tag){case 5:h=o.child.stateNode;break;case 1:h=o.child.stateNode}Rd(o,N,h)}break;case 5:var P=o.stateNode;if(h===null&&o.flags&4){h=P;var B=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":B.autoFocus&&h.focus();break;case"img":B.src&&(h.src=B.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var Q=o.alternate;if(Q!==null){var ae=Q.memoizedState;if(ae!==null){var ue=ae.dehydrated;ue!==null&&Or(ue)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}Vn||o.flags&512&&Uu(o)}catch(se){Zt(o,o.return,se)}}if(o===n){Oe=null;break}if(h=o.sibling,h!==null){h.return=o.return,Oe=h;break}Oe=o.return}}function R1(n){for(;Oe!==null;){var o=Oe;if(o===n){Oe=null;break}var h=o.sibling;if(h!==null){h.return=o.return,Oe=h;break}Oe=o.return}}function b1(n){for(;Oe!==null;){var o=Oe;try{switch(o.tag){case 0:case 11:case 15:var h=o.return;try{Fa(4,o)}catch(B){Zt(o,h,B)}break;case 1:var m=o.stateNode;if(typeof m.componentDidMount=="function"){var y=o.return;try{m.componentDidMount()}catch(B){Zt(o,y,B)}}var C=o.return;try{Uu(o)}catch(B){Zt(o,C,B)}break;case 5:var N=o.return;try{Uu(o)}catch(B){Zt(o,N,B)}}}catch(B){Zt(o,o.return,B)}if(o===n){Oe=null;break}var P=o.sibling;if(P!==null){P.return=o.return,Oe=P;break}Oe=o.return}}var X2=Math.ceil,Ua=oe.ReactCurrentDispatcher,Wu=oe.ReactCurrentOwner,Nr=oe.ReactCurrentBatchConfig,mt=0,Cn=null,ln=null,On=0,mr=0,go=Fi(0),pn=0,ml=null,vs=0,Va=0,zu=0,xl=null,Jn=null,Gu=0,po=1/0,gi=null,Ha=!1,ju=null,Gi=null,Wa=!1,ji=null,za=0,wl=0,Xu=null,Ga=-1,ja=0;function Gn(){return(mt&6)!==0?Ct():Ga!==-1?Ga:Ga=Ct()}function Xi(n){return(n.mode&1)===0?1:(mt&2)!==0&&On!==0?On&-On:R2.transition!==null?(ja===0&&(ja=un()),ja):(n=et,n!==0||(n=window.event,n=n===void 0?16:jo(n.type)),n)}function Fr(n,o,h,m){if(50<wl)throw wl=0,Xu=null,Error(i(185));D(n,h,m),((mt&2)===0||n!==Cn)&&(n===Cn&&((mt&2)===0&&(Va|=h),pn===4&&Yi(n,On)),$n(n,m),h===1&&mt===0&&(o.mode&1)===0&&(po=Ct()+500,_a&&Vi()))}function $n(n,o){var h=n.callbackNode;Ti(n,o);var m=ur(n,n===Cn?On:0);if(m===0)h!==null&&wn(h),n.callbackNode=null,n.callbackPriority=0;else if(o=m&-m,n.callbackPriority!==o){if(h!=null&&wn(h),o===1)n.tag===0?N2(D1.bind(null,n)):xd(D1.bind(null,n)),v2(function(){(mt&6)===0&&Vi()}),h=null;else{switch(ea(m)){case 1:h=ne;break;case 4:h=Jl;break;case 16:h=It;break;case 536870912:h=$l;break;default:h=It}h=V1(h,O1.bind(null,n))}n.callbackPriority=o,n.callbackNode=h}}function O1(n,o){if(Ga=-1,ja=0,(mt&6)!==0)throw Error(i(327));var h=n.callbackNode;if(mo()&&n.callbackNode!==h)return null;var m=ur(n,n===Cn?On:0);if(m===0)return null;if((m&30)!==0||(m&n.expiredLanes)!==0||o)o=Xa(n,m);else{o=m;var y=mt;mt|=2;var C=k1();(Cn!==n||On!==o)&&(gi=null,po=Ct()+500,Is(n,o));do try{q2();break}catch(P){M1(n,P)}while(!0);uu(),Ua.current=C,mt=y,ln!==null?o=0:(Cn=null,On=0,o=pn)}if(o!==0){if(o===2&&(y=Et(n),y!==0&&(m=y,o=Yu(n,y))),o===1)throw h=ml,Is(n,0),Yi(n,m),$n(n,Ct()),h;if(o===6)Yi(n,m);else{if(y=n.current.alternate,(m&30)===0&&!Y2(y)&&(o=Xa(n,m),o===2&&(C=Et(n),C!==0&&(m=C,o=Yu(n,C))),o===1))throw h=ml,Is(n,0),Yi(n,m),$n(n,Ct()),h;switch(n.finishedWork=y,n.finishedLanes=m,o){case 0:case 1:throw Error(i(345));case 2:Ts(n,Jn,gi);break;case 3:if(Yi(n,m),(m&130023424)===m&&(o=Gu+500-Ct(),10<o)){if(ur(n,0)!==0)break;if(y=n.suspendedLanes,(y&m)!==m){Gn(),n.pingedLanes|=n.suspendedLanes&y;break}n.timeoutHandle=$c(Ts.bind(null,n,Jn,gi),o);break}Ts(n,Jn,gi);break;case 4:if(Yi(n,m),(m&4194240)===m)break;for(o=n.eventTimes,y=-1;0<m;){var N=31-Wn(m);C=1<<N,N=o[N],N>y&&(y=N),m&=~C}if(m=y,m=Ct()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*X2(m/1960))-m,10<m){n.timeoutHandle=$c(Ts.bind(null,n,Jn,gi),m);break}Ts(n,Jn,gi);break;case 5:Ts(n,Jn,gi);break;default:throw Error(i(329))}}}return $n(n,Ct()),n.callbackNode===h?O1.bind(null,n):null}function Yu(n,o){var h=xl;return n.current.memoizedState.isDehydrated&&(Is(n,o).flags|=256),n=Xa(n,o),n!==2&&(o=Jn,Jn=h,o!==null&&Ku(o)),n}function Ku(n){Jn===null?Jn=n:Jn.push.apply(Jn,n)}function Y2(n){for(var o=n;;){if(o.flags&16384){var h=o.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var m=0;m<h.length;m++){var y=h[m],C=y.getSnapshot;y=y.value;try{if(!W(C(),y))return!1}catch{return!1}}}if(h=o.child,o.subtreeFlags&16384&&h!==null)h.return=o,o=h;else{if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Yi(n,o){for(o&=~zu,o&=~Va,n.suspendedLanes|=o,n.pingedLanes&=~o,n=n.expirationTimes;0<o;){var h=31-Wn(o),m=1<<h;n[h]=-1,o&=~m}}function D1(n){if((mt&6)!==0)throw Error(i(327));mo();var o=ur(n,0);if((o&1)===0)return $n(n,Ct()),null;var h=Xa(n,o);if(n.tag!==0&&h===2){var m=Et(n);m!==0&&(o=m,h=Yu(n,m))}if(h===1)throw h=ml,Is(n,0),Yi(n,o),$n(n,Ct()),h;if(h===6)throw Error(i(345));return n.finishedWork=n.current.alternate,n.finishedLanes=o,Ts(n,Jn,gi),$n(n,Ct()),null}function qu(n,o){var h=mt;mt|=1;try{return n(o)}finally{mt=h,mt===0&&(po=Ct()+500,_a&&Vi())}}function Ss(n){ji!==null&&ji.tag===0&&(mt&6)===0&&mo();var o=mt;mt|=1;var h=Nr.transition,m=et;try{if(Nr.transition=null,et=1,n)return n()}finally{et=m,Nr.transition=h,mt=o,(mt&6)===0&&Vi()}}function Zu(){mr=go.current,Ft(go)}function Is(n,o){n.finishedWork=null,n.finishedLanes=0;var h=n.timeoutHandle;if(h!==-1&&(n.timeoutHandle=-1,A2(h)),ln!==null)for(h=ln.return;h!==null;){var m=h;switch(su(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&xa();break;case 3:uo(),Ft(qn),Ft(Bn),wu();break;case 5:mu(m);break;case 4:uo();break;case 13:Ft(jt);break;case 19:Ft(jt);break;case 10:fu(m.type._context);break;case 22:case 23:Zu()}h=h.return}if(Cn=n,ln=n=Ki(n.current,null),On=mr=o,pn=0,ml=null,zu=Va=vs=0,Jn=xl=null,Cs!==null){for(o=0;o<Cs.length;o++)if(h=Cs[o],m=h.interleaved,m!==null){h.interleaved=null;var y=m.next,C=h.pending;if(C!==null){var N=C.next;C.next=y,m.next=N}h.pending=m}Cs=null}return n}function M1(n,o){do{var h=ln;try{if(uu(),Ra.current=Ma,ba){for(var m=Xt.memoizedState;m!==null;){var y=m.queue;y!==null&&(y.pending=null),m=m.next}ba=!1}if(As=0,yn=gn=Xt=null,ul=!1,fl=0,Wu.current=null,h===null||h.return===null){pn=1,ml=o,ln=null;break}e:{var C=n,N=h.return,P=h,B=o;if(o=On,P.flags|=32768,B!==null&&typeof B=="object"&&typeof B.then=="function"){var Q=B,ae=P,ue=ae.tag;if((ae.mode&1)===0&&(ue===0||ue===11||ue===15)){var se=ae.alternate;se?(ae.updateQueue=se.updateQueue,ae.memoizedState=se.memoizedState,ae.lanes=se.lanes):(ae.updateQueue=null,ae.memoizedState=null)}var Te=i1(N);if(Te!==null){Te.flags&=-257,s1(Te,N,P,C,o),Te.mode&1&&r1(C,Q,o),o=Te,B=Q;var De=o.updateQueue;if(De===null){var Pe=new Set;Pe.add(B),o.updateQueue=Pe}else De.add(B);break e}else{if((o&1)===0){r1(C,Q,o),Qu();break e}B=Error(i(426))}}else if(Ht&&P.mode&1){var sn=i1(N);if(sn!==null){(sn.flags&65536)===0&&(sn.flags|=256),s1(sn,N,P,C,o),au(fo(B,P));break e}}C=B=fo(B,P),pn!==4&&(pn=2),xl===null?xl=[C]:xl.push(C),C=N;do{switch(C.tag){case 3:C.flags|=65536,o&=-o,C.lanes|=o;var G=t1(C,B,o);Nd(C,G);break e;case 1:P=B;var U=C.type,X=C.stateNode;if((C.flags&128)===0&&(typeof U.getDerivedStateFromError=="function"||X!==null&&typeof X.componentDidCatch=="function"&&(Gi===null||!Gi.has(X)))){C.flags|=65536,o&=-o,C.lanes|=o;var me=n1(C,P,o);Nd(C,me);break e}}C=C.return}while(C!==null)}L1(h)}catch(Le){o=Le,ln===h&&h!==null&&(ln=h=h.return);continue}break}while(!0)}function k1(){var n=Ua.current;return Ua.current=Ma,n===null?Ma:n}function Qu(){(pn===0||pn===3||pn===2)&&(pn=4),Cn===null||(vs&268435455)===0&&(Va&268435455)===0||Yi(Cn,On)}function Xa(n,o){var h=mt;mt|=2;var m=k1();(Cn!==n||On!==o)&&(gi=null,Is(n,o));do try{K2();break}catch(y){M1(n,y)}while(!0);if(uu(),mt=h,Ua.current=m,ln!==null)throw Error(i(261));return Cn=null,On=0,pn}function K2(){for(;ln!==null;)P1(ln)}function q2(){for(;ln!==null&&!bt();)P1(ln)}function P1(n){var o=U1(n.alternate,n,mr);n.memoizedProps=n.pendingProps,o===null?L1(n):ln=o,Wu.current=null}function L1(n){var o=n;do{var h=o.alternate;if(n=o.return,(o.flags&32768)===0){if(h=H2(h,o,mr),h!==null){ln=h;return}}else{if(h=W2(h,o),h!==null){h.flags&=32767,ln=h;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{pn=6,ln=null;return}}if(o=o.sibling,o!==null){ln=o;return}ln=o=n}while(o!==null);pn===0&&(pn=5)}function Ts(n,o,h){var m=et,y=Nr.transition;try{Nr.transition=null,et=1,Z2(n,o,h,m)}finally{Nr.transition=y,et=m}return null}function Z2(n,o,h,m){do mo();while(ji!==null);if((mt&6)!==0)throw Error(i(327));h=n.finishedWork;var y=n.finishedLanes;if(h===null)return null;if(n.finishedWork=null,n.finishedLanes=0,h===n.current)throw Error(i(177));n.callbackNode=null,n.callbackPriority=0;var C=h.lanes|h.childLanes;if(Fe(n,C),n===Cn&&(ln=Cn=null,On=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||Wa||(Wa=!0,V1(It,function(){return mo(),null})),C=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||C){C=Nr.transition,Nr.transition=null;var N=et;et=1;var P=mt;mt|=4,Wu.current=null,G2(n,h),I1(h,n),Ln(Qc),Kr=!!Zc,Qc=Zc=null,n.current=h,j2(h),Ql(),mt=P,et=N,Nr.transition=C}else n.current=h;if(Wa&&(Wa=!1,ji=n,za=y),C=n.pendingLanes,C===0&&(Gi=null),ut(h.stateNode),$n(n,Ct()),o!==null)for(m=n.onRecoverableError,h=0;h<o.length;h++)y=o[h],m(y.value,{componentStack:y.stack,digest:y.digest});if(Ha)throw Ha=!1,n=ju,ju=null,n;return(za&1)!==0&&n.tag!==0&&mo(),C=n.pendingLanes,(C&1)!==0?n===Xu?wl++:(wl=0,Xu=n):wl=0,Vi(),null}function mo(){if(ji!==null){var n=ea(za),o=Nr.transition,h=et;try{if(Nr.transition=null,et=16>n?16:n,ji===null)var m=!1;else{if(n=ji,ji=null,za=0,(mt&6)!==0)throw Error(i(331));var y=mt;for(mt|=4,Oe=n.current;Oe!==null;){var C=Oe,N=C.child;if((Oe.flags&16)!==0){var P=C.deletions;if(P!==null){for(var B=0;B<P.length;B++){var Q=P[B];for(Oe=Q;Oe!==null;){var ae=Oe;switch(ae.tag){case 0:case 11:case 15:pl(8,ae,C)}var ue=ae.child;if(ue!==null)ue.return=ae,Oe=ue;else for(;Oe!==null;){ae=Oe;var se=ae.sibling,Te=ae.return;if(C1(ae),ae===Q){Oe=null;break}if(se!==null){se.return=Te,Oe=se;break}Oe=Te}}}var De=C.alternate;if(De!==null){var Pe=De.child;if(Pe!==null){De.child=null;do{var sn=Pe.sibling;Pe.sibling=null,Pe=sn}while(Pe!==null)}}Oe=C}}if((C.subtreeFlags&2064)!==0&&N!==null)N.return=C,Oe=N;else e:for(;Oe!==null;){if(C=Oe,(C.flags&2048)!==0)switch(C.tag){case 0:case 11:case 15:pl(9,C,C.return)}var G=C.sibling;if(G!==null){G.return=C.return,Oe=G;break e}Oe=C.return}}var U=n.current;for(Oe=U;Oe!==null;){N=Oe;var X=N.child;if((N.subtreeFlags&2064)!==0&&X!==null)X.return=N,Oe=X;else e:for(N=U;Oe!==null;){if(P=Oe,(P.flags&2048)!==0)try{switch(P.tag){case 0:case 11:case 15:Fa(9,P)}}catch(Le){Zt(P,P.return,Le)}if(P===N){Oe=null;break e}var me=P.sibling;if(me!==null){me.return=P.return,Oe=me;break e}Oe=P.return}}if(mt=y,Vi(),$e&&typeof $e.onPostCommitFiberRoot=="function")try{$e.onPostCommitFiberRoot(gt,n)}catch{}m=!0}return m}finally{et=h,Nr.transition=o}}return!1}function B1(n,o,h){o=fo(h,o),o=t1(n,o,1),n=Wi(n,o,1),o=Gn(),n!==null&&(D(n,1,o),$n(n,o))}function Zt(n,o,h){if(n.tag===3)B1(n,n,h);else for(;o!==null;){if(o.tag===3){B1(o,n,h);break}else if(o.tag===1){var m=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Gi===null||!Gi.has(m))){n=fo(h,n),n=n1(o,n,1),o=Wi(o,n,1),n=Gn(),o!==null&&(D(o,1,n),$n(o,n));break}}o=o.return}}function Q2(n,o,h){var m=n.pingCache;m!==null&&m.delete(o),o=Gn(),n.pingedLanes|=n.suspendedLanes&h,Cn===n&&(On&h)===h&&(pn===4||pn===3&&(On&130023424)===On&&500>Ct()-Gu?Is(n,0):zu|=h),$n(n,o)}function F1(n,o){o===0&&((n.mode&1)===0?o=1:(o=js,js<<=1,(js&130023424)===0&&(js=4194304)));var h=Gn();n=fi(n,o),n!==null&&(D(n,o,h),$n(n,h))}function J2(n){var o=n.memoizedState,h=0;o!==null&&(h=o.retryLane),F1(n,h)}function $2(n,o){var h=0;switch(n.tag){case 13:var m=n.stateNode,y=n.memoizedState;y!==null&&(h=y.retryLane);break;case 19:m=n.stateNode;break;default:throw Error(i(314))}m!==null&&m.delete(o),F1(n,h)}var U1;U1=function(n,o,h){if(n!==null)if(n.memoizedProps!==o.pendingProps||qn.current)Qn=!0;else{if((n.lanes&h)===0&&(o.flags&128)===0)return Qn=!1,V2(n,o,h);Qn=(n.flags&131072)!==0}else Qn=!1,Ht&&(o.flags&1048576)!==0&&wd(o,Ca,o.index);switch(o.lanes=0,o.tag){case 2:var m=o.type;La(n,o),n=o.pendingProps;var y=ro(o,Bn.current);co(o,h),y=Cu(null,o,m,n,y,h);var C=Eu();return o.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Zn(m)?(C=!0,wa(o)):C=!1,o.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,gu(o),y.updater=ka,o.stateNode=y,y._reactInternals=o,Nu(o,m,n,h),o=Du(null,o,m,!0,C,h)):(o.tag=0,Ht&&C&&iu(o),zn(null,o,y,h),o=o.child),o;case 16:m=o.elementType;e:{switch(La(n,o),n=o.pendingProps,y=m._init,m=y(m._payload),o.type=m,y=o.tag=tm(m),n=Pr(m,n),y){case 0:o=Ou(null,o,m,n,h);break e;case 1:o=f1(null,o,m,n,h);break e;case 11:o=o1(null,o,m,n,h);break e;case 14:o=l1(null,o,m,Pr(m.type,n),h);break e}throw Error(i(306,m,""))}return o;case 0:return m=o.type,y=o.pendingProps,y=o.elementType===m?y:Pr(m,y),Ou(n,o,m,y,h);case 1:return m=o.type,y=o.pendingProps,y=o.elementType===m?y:Pr(m,y),f1(n,o,m,y,h);case 3:e:{if(h1(o),n===null)throw Error(i(387));m=o.pendingProps,C=o.memoizedState,y=C.element,Td(n,o),Ta(o,m,null,h);var N=o.memoizedState;if(m=N.element,C.isDehydrated)if(C={element:m,isDehydrated:!1,cache:N.cache,pendingSuspenseBoundaries:N.pendingSuspenseBoundaries,transitions:N.transitions},o.updateQueue.baseState=C,o.memoizedState=C,o.flags&256){y=fo(Error(i(423)),o),o=d1(n,o,m,h,y);break e}else if(m!==y){y=fo(Error(i(424)),o),o=d1(n,o,m,h,y);break e}else for(pr=Bi(o.stateNode.containerInfo.firstChild),gr=o,Ht=!0,kr=null,h=Sd(o,null,m,h),o.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(oo(),m===y){o=di(n,o,h);break e}zn(n,o,m,h)}o=o.child}return o;case 5:return bd(o),n===null&&lu(o),m=o.type,y=o.pendingProps,C=n!==null?n.memoizedProps:null,N=y.children,Jc(m,y)?N=null:C!==null&&Jc(m,C)&&(o.flags|=32),u1(n,o),zn(n,o,N,h),o.child;case 6:return n===null&&lu(o),null;case 13:return g1(n,o,h);case 4:return pu(o,o.stateNode.containerInfo),m=o.pendingProps,n===null?o.child=lo(o,null,m,h):zn(n,o,m,h),o.child;case 11:return m=o.type,y=o.pendingProps,y=o.elementType===m?y:Pr(m,y),o1(n,o,m,y,h);case 7:return zn(n,o,o.pendingProps,h),o.child;case 8:return zn(n,o,o.pendingProps.children,h),o.child;case 12:return zn(n,o,o.pendingProps.children,h),o.child;case 10:e:{if(m=o.type._context,y=o.pendingProps,C=o.memoizedProps,N=y.value,Mt(va,m._currentValue),m._currentValue=N,C!==null)if(W(C.value,N)){if(C.children===y.children&&!qn.current){o=di(n,o,h);break e}}else for(C=o.child,C!==null&&(C.return=o);C!==null;){var P=C.dependencies;if(P!==null){N=C.child;for(var B=P.firstContext;B!==null;){if(B.context===m){if(C.tag===1){B=hi(-1,h&-h),B.tag=2;var Q=C.updateQueue;if(Q!==null){Q=Q.shared;var ae=Q.pending;ae===null?B.next=B:(B.next=ae.next,ae.next=B),Q.pending=B}}C.lanes|=h,B=C.alternate,B!==null&&(B.lanes|=h),hu(C.return,h,o),P.lanes|=h;break}B=B.next}}else if(C.tag===10)N=C.type===o.type?null:C.child;else if(C.tag===18){if(N=C.return,N===null)throw Error(i(341));N.lanes|=h,P=N.alternate,P!==null&&(P.lanes|=h),hu(N,h,o),N=C.sibling}else N=C.child;if(N!==null)N.return=C;else for(N=C;N!==null;){if(N===o){N=null;break}if(C=N.sibling,C!==null){C.return=N.return,N=C;break}N=N.return}C=N}zn(n,o,y.children,h),o=o.child}return o;case 9:return y=o.type,m=o.pendingProps.children,co(o,h),y=Ir(y),m=m(y),o.flags|=1,zn(n,o,m,h),o.child;case 14:return m=o.type,y=Pr(m,o.pendingProps),y=Pr(m.type,y),l1(n,o,m,y,h);case 15:return a1(n,o,o.type,o.pendingProps,h);case 17:return m=o.type,y=o.pendingProps,y=o.elementType===m?y:Pr(m,y),La(n,o),o.tag=1,Zn(m)?(n=!0,wa(o)):n=!1,co(o,h),$d(o,m,y),Nu(o,m,y,h),Du(null,o,m,!0,n,h);case 19:return m1(n,o,h);case 22:return c1(n,o,h)}throw Error(i(156,o.tag))};function V1(n,o){return ar(n,o)}function em(n,o,h,m){this.tag=n,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rr(n,o,h,m){return new em(n,o,h,m)}function Ju(n){return n=n.prototype,!(!n||!n.isReactComponent)}function tm(n){if(typeof n=="function")return Ju(n)?1:0;if(n!=null){if(n=n.$$typeof,n===re)return 11;if(n===K)return 14}return 2}function Ki(n,o){var h=n.alternate;return h===null?(h=Rr(n.tag,o,n.key,n.mode),h.elementType=n.elementType,h.type=n.type,h.stateNode=n.stateNode,h.alternate=n,n.alternate=h):(h.pendingProps=o,h.type=n.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=n.flags&14680064,h.childLanes=n.childLanes,h.lanes=n.lanes,h.child=n.child,h.memoizedProps=n.memoizedProps,h.memoizedState=n.memoizedState,h.updateQueue=n.updateQueue,o=n.dependencies,h.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},h.sibling=n.sibling,h.index=n.index,h.ref=n.ref,h}function Ya(n,o,h,m,y,C){var N=2;if(m=n,typeof n=="function")Ju(n)&&(N=1);else if(typeof n=="string")N=5;else e:switch(n){case Y:return Ns(h.children,y,C,o);case de:N=8,y|=8;break;case j:return n=Rr(12,h,o,y|2),n.elementType=j,n.lanes=C,n;case fe:return n=Rr(13,h,o,y),n.elementType=fe,n.lanes=C,n;case Se:return n=Rr(19,h,o,y),n.elementType=Se,n.lanes=C,n;case Re:return Ka(h,y,C,o);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Me:N=10;break e;case ve:N=9;break e;case re:N=11;break e;case K:N=14;break e;case Je:N=16,m=null;break e}throw Error(i(130,n==null?n:typeof n,""))}return o=Rr(N,h,o,y),o.elementType=n,o.type=m,o.lanes=C,o}function Ns(n,o,h,m){return n=Rr(7,n,m,o),n.lanes=h,n}function Ka(n,o,h,m){return n=Rr(22,n,m,o),n.elementType=Re,n.lanes=h,n.stateNode={isHidden:!1},n}function $u(n,o,h){return n=Rr(6,n,null,o),n.lanes=h,n}function ef(n,o,h){return o=Rr(4,n.children!==null?n.children:[],n.key,o),o.lanes=h,o.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},o}function nm(n,o,h,m,y){this.tag=o,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=z(0),this.expirationTimes=z(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=z(0),this.identifierPrefix=m,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function tf(n,o,h,m,y,C,N,P,B){return n=new nm(n,o,h,P,B),o===1?(o=1,C===!0&&(o|=8)):o=0,C=Rr(3,null,null,o),n.current=C,C.stateNode=n,C.memoizedState={element:m,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},gu(C),n}function rm(n,o,h){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ie,key:m==null?null:""+m,children:n,containerInfo:o,implementation:h}}function H1(n){if(!n)return Ui;n=n._reactInternals;e:{if(Kn(n)!==n||n.tag!==1)throw Error(i(170));var o=n;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Zn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(i(171))}if(n.tag===1){var h=n.type;if(Zn(h))return pd(n,h,o)}return o}function W1(n,o,h,m,y,C,N,P,B){return n=tf(h,m,!0,n,y,C,N,P,B),n.context=H1(null),h=n.current,m=Gn(),y=Xi(h),C=hi(m,y),C.callback=o??null,Wi(h,C,y),n.current.lanes=y,D(n,y,m),$n(n,m),n}function qa(n,o,h,m){var y=o.current,C=Gn(),N=Xi(y);return h=H1(h),o.context===null?o.context=h:o.pendingContext=h,o=hi(C,N),o.payload={element:n},m=m===void 0?null:m,m!==null&&(o.callback=m),n=Wi(y,o,N),n!==null&&(Fr(n,y,N,C),Ia(n,y,N)),N}function Za(n){return n=n.current,n.child?(n.child.tag===5,n.child.stateNode):null}function z1(n,o){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var h=n.retryLane;n.retryLane=h!==0&&h<o?h:o}}function nf(n,o){z1(n,o),(n=n.alternate)&&z1(n,o)}function im(){return null}var G1=typeof reportError=="function"?reportError:function(n){console.error(n)};function rf(n){this._internalRoot=n}Qa.prototype.render=rf.prototype.render=function(n){var o=this._internalRoot;if(o===null)throw Error(i(409));qa(n,o,null,null)},Qa.prototype.unmount=rf.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var o=n.containerInfo;Ss(function(){qa(null,n,null,null)}),o[li]=null}};function Qa(n){this._internalRoot=n}Qa.prototype.unstable_scheduleHydration=function(n){if(n){var o=Ot();n={blockedOn:null,target:n,priority:o};for(var h=0;h<Tn.length&&o!==0&&o<Tn[h].priority;h++);Tn.splice(h,0,n),h===0&&na(n)}};function sf(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Ja(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function j1(){}function sm(n,o,h,m,y){if(y){if(typeof m=="function"){var C=m;m=function(){var Q=Za(N);C.call(Q)}}var N=W1(o,m,n,0,null,!1,!1,"",j1);return n._reactRootContainer=N,n[li]=N.current,nl(n.nodeType===8?n.parentNode:n),Ss(),N}for(;y=n.lastChild;)n.removeChild(y);if(typeof m=="function"){var P=m;m=function(){var Q=Za(B);P.call(Q)}}var B=tf(n,0,!1,null,null,!1,!1,"",j1);return n._reactRootContainer=B,n[li]=B.current,nl(n.nodeType===8?n.parentNode:n),Ss(function(){qa(o,B,h,m)}),B}function $a(n,o,h,m,y){var C=h._reactRootContainer;if(C){var N=C;if(typeof y=="function"){var P=y;y=function(){var B=Za(N);P.call(B)}}qa(o,N,n,y)}else N=sm(h,o,n,y,m);return Za(N)}Xs=function(n){switch(n.tag){case 3:var o=n.stateNode;if(o.current.memoizedState.isDehydrated){var h=Tt(o.pendingLanes);h!==0&&(Kt(o,h|1),$n(o,Ct()),(mt&6)===0&&(po=Ct()+500,Vi()))}break;case 13:Ss(function(){var m=fi(n,1);if(m!==null){var y=Gn();Fr(m,n,1,y)}}),nf(n,1)}},Pn=function(n){if(n.tag===13){var o=fi(n,134217728);if(o!==null){var h=Gn();Fr(o,n,134217728,h)}nf(n,134217728)}},Ue=function(n){if(n.tag===13){var o=Xi(n),h=fi(n,o);if(h!==null){var m=Gn();Fr(h,n,o,m)}nf(n,o)}},Ot=function(){return et},Wo=function(n,o){var h=et;try{return et=n,o()}finally{et=h}},zs=function(n,o,h){switch(o){case"input":if($t(n,h),o=h.name,h.type==="radio"&&o!=null){for(h=n;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<h.length;o++){var m=h[o];if(m!==n&&m.form===n.form){var y=ma(m);if(!y)throw Error(i(90));rs(m),$t(m,y)}}}break;case"textarea":wr(n,h);break;case"select":o=h.value,o!=null&&Ne(n,!!h.multiple,o,!1)}},Gs=qu,cn=Ss;var om={usingClientEntryPoint:!1,Events:[sl,to,ma,Po,Yn,qu]},_l={findFiberByHostInstance:xs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lm={bundleType:_l.bundleType,version:_l.version,rendererPackageName:_l.rendererPackageName,rendererConfig:_l.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:oe.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=ql(n),n===null?null:n.stateNode},findFiberByHostInstance:_l.findFiberByHostInstance||im,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ec=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ec.isDisabled&&ec.supportsFiber)try{gt=ec.inject(lm),$e=ec}catch{}}return er.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=om,er.createPortal=function(n,o){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sf(o))throw Error(i(200));return rm(n,o,null,h)},er.createRoot=function(n,o){if(!sf(n))throw Error(i(299));var h=!1,m="",y=G1;return o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onRecoverableError!==void 0&&(y=o.onRecoverableError)),o=tf(n,1,!1,null,null,h,!1,m,y),n[li]=o.current,nl(n.nodeType===8?n.parentNode:n),new rf(o)},er.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var o=n._reactInternals;if(o===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=ql(o),n=n===null?null:n.stateNode,n},er.flushSync=function(n){return Ss(n)},er.hydrate=function(n,o,h){if(!Ja(o))throw Error(i(200));return $a(null,n,o,!0,h)},er.hydrateRoot=function(n,o,h){if(!sf(n))throw Error(i(405));var m=h!=null&&h.hydratedSources||null,y=!1,C="",N=G1;if(h!=null&&(h.unstable_strictMode===!0&&(y=!0),h.identifierPrefix!==void 0&&(C=h.identifierPrefix),h.onRecoverableError!==void 0&&(N=h.onRecoverableError)),o=W1(o,null,n,1,h??null,y,!1,C,N),n[li]=o.current,nl(n),m)for(n=0;n<m.length;n++)h=m[n],y=h._getVersion,y=y(h._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[h,y]:o.mutableSourceEagerHydrationData.push(h,y);return new Qa(o)},er.render=function(n,o,h){if(!Ja(o))throw Error(i(200));return $a(null,n,o,!1,h)},er.unmountComponentAtNode=function(n){if(!Ja(n))throw Error(i(40));return n._reactRootContainer?(Ss(function(){$a(null,null,n,!1,function(){n._reactRootContainer=null,n[li]=null})}),!0):!1},er.unstable_batchedUpdates=qu,er.unstable_renderSubtreeIntoContainer=function(n,o,h,m){if(!Ja(h))throw Error(i(200));if(n==null||n._reactInternals===void 0)throw Error(i(38));return $a(n,o,h,!1,m)},er.version="18.3.1-next-f1338f8080-20240426",er}var $1;function mm(){if($1)return af.exports;$1=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(t){console.error(t)}}return l(),af.exports=pm(),af.exports}var e0;function xm(){if(e0)return nc;e0=1;var l=mm();return nc.createRoot=l.createRoot,nc.hydrateRoot=l.hydrateRoot,nc}var wm=xm(),xo={},ff,t0;function _m(){return t0||(t0=1,ff=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),ff}var hf={},Zi={},n0;function Fs(){if(n0)return Zi;n0=1;let l;const t=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return Zi.getSymbolSize=function(u){if(!u)throw new Error('"version" cannot be null or undefined');if(u<1||u>40)throw new Error('"version" should be in range from 1 to 40');return u*4+17},Zi.getSymbolTotalCodewords=function(u){return t[u]},Zi.getBCHDigit=function(i){let u=0;for(;i!==0;)u++,i>>>=1;return u},Zi.setToSJISFunction=function(u){if(typeof u!="function")throw new Error('"toSJISFunc" is not a valid function.');l=u},Zi.isKanjiModeEnabled=function(){return typeof l<"u"},Zi.toSJIS=function(u){return l(u)},Zi}var df={},r0;function gh(){return r0||(r0=1,(function(l){l.L={bit:1},l.M={bit:0},l.Q={bit:3},l.H={bit:2};function t(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"l":case"low":return l.L;case"m":case"medium":return l.M;case"q":case"quartile":return l.Q;case"h":case"high":return l.H;default:throw new Error("Unknown EC Level: "+i)}}l.isValid=function(u){return u&&typeof u.bit<"u"&&u.bit>=0&&u.bit<4},l.from=function(u,d){if(l.isValid(u))return u;try{return t(u)}catch{return d}}})(df)),df}var gf,i0;function ym(){if(i0)return gf;i0=1;function l(){this.buffer=[],this.length=0}return l.prototype={get:function(t){const i=Math.floor(t/8);return(this.buffer[i]>>>7-t%8&1)===1},put:function(t,i){for(let u=0;u<i;u++)this.putBit((t>>>i-u-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const i=Math.floor(this.length/8);this.buffer.length<=i&&this.buffer.push(0),t&&(this.buffer[i]|=128>>>this.length%8),this.length++}},gf=l,gf}var pf,s0;function Cm(){if(s0)return pf;s0=1;function l(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}return l.prototype.set=function(t,i,u,d){const p=t*this.size+i;this.data[p]=u,d&&(this.reservedBit[p]=!0)},l.prototype.get=function(t,i){return this.data[t*this.size+i]},l.prototype.xor=function(t,i,u){this.data[t*this.size+i]^=u},l.prototype.isReserved=function(t,i){return this.reservedBit[t*this.size+i]},pf=l,pf}var mf={},o0;function Em(){return o0||(o0=1,(function(l){const t=Fs().getSymbolSize;l.getRowColCoords=function(u){if(u===1)return[];const d=Math.floor(u/7)+2,p=t(u),w=p===145?26:Math.ceil((p-13)/(2*d-2))*2,A=[p-7];for(let S=1;S<d-1;S++)A[S]=A[S-1]-w;return A.push(6),A.reverse()},l.getPositions=function(u){const d=[],p=l.getRowColCoords(u),w=p.length;for(let A=0;A<w;A++)for(let S=0;S<w;S++)A===0&&S===0||A===0&&S===w-1||A===w-1&&S===0||d.push([p[A],p[S]]);return d}})(mf)),mf}var xf={},l0;function Am(){if(l0)return xf;l0=1;const l=Fs().getSymbolSize,t=7;return xf.getPositions=function(u){const d=l(u);return[[0,0],[d-t,0],[0,d-t]]},xf}var wf={},a0;function vm(){return a0||(a0=1,(function(l){l.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};l.isValid=function(d){return d!=null&&d!==""&&!isNaN(d)&&d>=0&&d<=7},l.from=function(d){return l.isValid(d)?parseInt(d,10):void 0},l.getPenaltyN1=function(d){const p=d.size;let w=0,A=0,S=0,E=null,O=null;for(let b=0;b<p;b++){A=S=0,E=O=null;for(let k=0;k<p;k++){let V=d.get(b,k);V===E?A++:(A>=5&&(w+=t.N1+(A-5)),E=V,A=1),V=d.get(k,b),V===O?S++:(S>=5&&(w+=t.N1+(S-5)),O=V,S=1)}A>=5&&(w+=t.N1+(A-5)),S>=5&&(w+=t.N1+(S-5))}return w},l.getPenaltyN2=function(d){const p=d.size;let w=0;for(let A=0;A<p-1;A++)for(let S=0;S<p-1;S++){const E=d.get(A,S)+d.get(A,S+1)+d.get(A+1,S)+d.get(A+1,S+1);(E===4||E===0)&&w++}return w*t.N2},l.getPenaltyN3=function(d){const p=d.size;let w=0,A=0,S=0;for(let E=0;E<p;E++){A=S=0;for(let O=0;O<p;O++)A=A<<1&2047|d.get(E,O),O>=10&&(A===1488||A===93)&&w++,S=S<<1&2047|d.get(O,E),O>=10&&(S===1488||S===93)&&w++}return w*t.N3},l.getPenaltyN4=function(d){let p=0;const w=d.data.length;for(let S=0;S<w;S++)p+=d.data[S];return Math.abs(Math.ceil(p*100/w/5)-10)*t.N4};function i(u,d,p){switch(u){case l.Patterns.PATTERN000:return(d+p)%2===0;case l.Patterns.PATTERN001:return d%2===0;case l.Patterns.PATTERN010:return p%3===0;case l.Patterns.PATTERN011:return(d+p)%3===0;case l.Patterns.PATTERN100:return(Math.floor(d/2)+Math.floor(p/3))%2===0;case l.Patterns.PATTERN101:return d*p%2+d*p%3===0;case l.Patterns.PATTERN110:return(d*p%2+d*p%3)%2===0;case l.Patterns.PATTERN111:return(d*p%3+(d+p)%2)%2===0;default:throw new Error("bad maskPattern:"+u)}}l.applyMask=function(d,p){const w=p.size;for(let A=0;A<w;A++)for(let S=0;S<w;S++)p.isReserved(S,A)||p.xor(S,A,i(d,S,A))},l.getBestMask=function(d,p){const w=Object.keys(l.Patterns).length;let A=0,S=1/0;for(let E=0;E<w;E++){p(E),l.applyMask(E,d);const O=l.getPenaltyN1(d)+l.getPenaltyN2(d)+l.getPenaltyN3(d)+l.getPenaltyN4(d);l.applyMask(E,d),O<S&&(S=O,A=E)}return A}})(wf)),wf}var rc={},c0;function Pg(){if(c0)return rc;c0=1;const l=gh(),t=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],i=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return rc.getBlocksCount=function(d,p){switch(p){case l.L:return t[(d-1)*4+0];case l.M:return t[(d-1)*4+1];case l.Q:return t[(d-1)*4+2];case l.H:return t[(d-1)*4+3];default:return}},rc.getTotalCodewordsCount=function(d,p){switch(p){case l.L:return i[(d-1)*4+0];case l.M:return i[(d-1)*4+1];case l.Q:return i[(d-1)*4+2];case l.H:return i[(d-1)*4+3];default:return}},rc}var _f={},Cl={},u0;function Sm(){if(u0)return Cl;u0=1;const l=new Uint8Array(512),t=new Uint8Array(256);return(function(){let u=1;for(let d=0;d<255;d++)l[d]=u,t[u]=d,u<<=1,u&256&&(u^=285);for(let d=255;d<512;d++)l[d]=l[d-255]})(),Cl.log=function(u){if(u<1)throw new Error("log("+u+")");return t[u]},Cl.exp=function(u){return l[u]},Cl.mul=function(u,d){return u===0||d===0?0:l[t[u]+t[d]]},Cl}var f0;function Im(){return f0||(f0=1,(function(l){const t=Sm();l.mul=function(u,d){const p=new Uint8Array(u.length+d.length-1);for(let w=0;w<u.length;w++)for(let A=0;A<d.length;A++)p[w+A]^=t.mul(u[w],d[A]);return p},l.mod=function(u,d){let p=new Uint8Array(u);for(;p.length-d.length>=0;){const w=p[0];for(let S=0;S<d.length;S++)p[S]^=t.mul(d[S],w);let A=0;for(;A<p.length&&p[A]===0;)A++;p=p.slice(A)}return p},l.generateECPolynomial=function(u){let d=new Uint8Array([1]);for(let p=0;p<u;p++)d=l.mul(d,new Uint8Array([1,t.exp(p)]));return d}})(_f)),_f}var yf,h0;function Tm(){if(h0)return yf;h0=1;const l=Im();function t(i){this.genPoly=void 0,this.degree=i,this.degree&&this.initialize(this.degree)}return t.prototype.initialize=function(u){this.degree=u,this.genPoly=l.generateECPolynomial(this.degree)},t.prototype.encode=function(u){if(!this.genPoly)throw new Error("Encoder not initialized");const d=new Uint8Array(u.length+this.degree);d.set(u);const p=l.mod(d,this.genPoly),w=this.degree-p.length;if(w>0){const A=new Uint8Array(this.degree);return A.set(p,w),A}return p},yf=t,yf}var Cf={},Ef={},Af={},d0;function Lg(){return d0||(d0=1,Af.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40}),Af}var ei={},g0;function Bg(){if(g0)return ei;g0=1;const l="[0-9]+",t="[A-Z $%*+\\-./:]+";let i="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";i=i.replace(/u/g,"\\u");const u="(?:(?![A-Z0-9 $%*+\\-./:]|"+i+`)(?:.|[\r
]))+`;ei.KANJI=new RegExp(i,"g"),ei.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),ei.BYTE=new RegExp(u,"g"),ei.NUMERIC=new RegExp(l,"g"),ei.ALPHANUMERIC=new RegExp(t,"g");const d=new RegExp("^"+i+"$"),p=new RegExp("^"+l+"$"),w=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return ei.testKanji=function(S){return d.test(S)},ei.testNumeric=function(S){return p.test(S)},ei.testAlphanumeric=function(S){return w.test(S)},ei}var p0;function Us(){return p0||(p0=1,(function(l){const t=Lg(),i=Bg();l.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},l.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},l.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},l.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},l.MIXED={bit:-1},l.getCharCountIndicator=function(p,w){if(!p.ccBits)throw new Error("Invalid mode: "+p);if(!t.isValid(w))throw new Error("Invalid version: "+w);return w>=1&&w<10?p.ccBits[0]:w<27?p.ccBits[1]:p.ccBits[2]},l.getBestModeForData=function(p){return i.testNumeric(p)?l.NUMERIC:i.testAlphanumeric(p)?l.ALPHANUMERIC:i.testKanji(p)?l.KANJI:l.BYTE},l.toString=function(p){if(p&&p.id)return p.id;throw new Error("Invalid mode")},l.isValid=function(p){return p&&p.bit&&p.ccBits};function u(d){if(typeof d!="string")throw new Error("Param is not a string");switch(d.toLowerCase()){case"numeric":return l.NUMERIC;case"alphanumeric":return l.ALPHANUMERIC;case"kanji":return l.KANJI;case"byte":return l.BYTE;default:throw new Error("Unknown mode: "+d)}}l.from=function(p,w){if(l.isValid(p))return p;try{return u(p)}catch{return w}}})(Ef)),Ef}var m0;function Nm(){return m0||(m0=1,(function(l){const t=Fs(),i=Pg(),u=gh(),d=Us(),p=Lg(),w=7973,A=t.getBCHDigit(w);function S(k,V,J){for(let $=1;$<=40;$++)if(V<=l.getCapacity($,J,k))return $}function E(k,V){return d.getCharCountIndicator(k,V)+4}function O(k,V){let J=0;return k.forEach(function($){const xe=E($.mode,V);J+=xe+$.getBitsLength()}),J}function b(k,V){for(let J=1;J<=40;J++)if(O(k,J)<=l.getCapacity(J,V,d.MIXED))return J}l.from=function(V,J){return p.isValid(V)?parseInt(V,10):J},l.getCapacity=function(V,J,$){if(!p.isValid(V))throw new Error("Invalid QR Code version");typeof $>"u"&&($=d.BYTE);const xe=t.getSymbolTotalCodewords(V),Ee=i.getTotalCodewordsCount(V,J),pe=(xe-Ee)*8;if($===d.MIXED)return pe;const te=pe-E($,V);switch($){case d.NUMERIC:return Math.floor(te/10*3);case d.ALPHANUMERIC:return Math.floor(te/11*2);case d.KANJI:return Math.floor(te/13);case d.BYTE:default:return Math.floor(te/8)}},l.getBestVersionForData=function(V,J){let $;const xe=u.from(J,u.M);if(Array.isArray(V)){if(V.length>1)return b(V,xe);if(V.length===0)return 1;$=V[0]}else $=V;return S($.mode,$.getLength(),xe)},l.getEncodedBits=function(V){if(!p.isValid(V)||V<7)throw new Error("Invalid QR Code version");let J=V<<12;for(;t.getBCHDigit(J)-A>=0;)J^=w<<t.getBCHDigit(J)-A;return V<<12|J}})(Cf)),Cf}var vf={},x0;function Rm(){if(x0)return vf;x0=1;const l=Fs(),t=1335,i=21522,u=l.getBCHDigit(t);return vf.getEncodedBits=function(p,w){const A=p.bit<<3|w;let S=A<<10;for(;l.getBCHDigit(S)-u>=0;)S^=t<<l.getBCHDigit(S)-u;return(A<<10|S)^i},vf}var Sf={},If,w0;function bm(){if(w0)return If;w0=1;const l=Us();function t(i){this.mode=l.NUMERIC,this.data=i.toString()}return t.getBitsLength=function(u){return 10*Math.floor(u/3)+(u%3?u%3*3+1:0)},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(u){let d,p,w;for(d=0;d+3<=this.data.length;d+=3)p=this.data.substr(d,3),w=parseInt(p,10),u.put(w,10);const A=this.data.length-d;A>0&&(p=this.data.substr(d),w=parseInt(p,10),u.put(w,A*3+1))},If=t,If}var Tf,_0;function Om(){if(_0)return Tf;_0=1;const l=Us(),t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function i(u){this.mode=l.ALPHANUMERIC,this.data=u}return i.getBitsLength=function(d){return 11*Math.floor(d/2)+6*(d%2)},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(d){let p;for(p=0;p+2<=this.data.length;p+=2){let w=t.indexOf(this.data[p])*45;w+=t.indexOf(this.data[p+1]),d.put(w,11)}this.data.length%2&&d.put(t.indexOf(this.data[p]),6)},Tf=i,Tf}var Nf,y0;function Dm(){if(y0)return Nf;y0=1;const l=Us();function t(i){this.mode=l.BYTE,typeof i=="string"?this.data=new TextEncoder().encode(i):this.data=new Uint8Array(i)}return t.getBitsLength=function(u){return u*8},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(i){for(let u=0,d=this.data.length;u<d;u++)i.put(this.data[u],8)},Nf=t,Nf}var Rf,C0;function Mm(){if(C0)return Rf;C0=1;const l=Us(),t=Fs();function i(u){this.mode=l.KANJI,this.data=u}return i.getBitsLength=function(d){return d*13},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(u){let d;for(d=0;d<this.data.length;d++){let p=t.toSJIS(this.data[d]);if(p>=33088&&p<=40956)p-=33088;else if(p>=57408&&p<=60351)p-=49472;else throw new Error("Invalid SJIS character: "+this.data[d]+`
Make sure your charset is UTF-8`);p=(p>>>8&255)*192+(p&255),u.put(p,13)}},Rf=i,Rf}var bf={exports:{}},E0;function km(){return E0||(E0=1,(function(l){var t={single_source_shortest_paths:function(i,u,d){var p={},w={};w[u]=0;var A=t.PriorityQueue.make();A.push(u,0);for(var S,E,O,b,k,V,J,$,xe;!A.empty();){S=A.pop(),E=S.value,b=S.cost,k=i[E]||{};for(O in k)k.hasOwnProperty(O)&&(V=k[O],J=b+V,$=w[O],xe=typeof w[O]>"u",(xe||$>J)&&(w[O]=J,A.push(O,J),p[O]=E))}if(typeof d<"u"&&typeof w[d]>"u"){var Ee=["Could not find a path from ",u," to ",d,"."].join("");throw new Error(Ee)}return p},extract_shortest_path_from_predecessor_list:function(i,u){for(var d=[],p=u;p;)d.push(p),i[p],p=i[p];return d.reverse(),d},find_path:function(i,u,d){var p=t.single_source_shortest_paths(i,u,d);return t.extract_shortest_path_from_predecessor_list(p,d)},PriorityQueue:{make:function(i){var u=t.PriorityQueue,d={},p;i=i||{};for(p in u)u.hasOwnProperty(p)&&(d[p]=u[p]);return d.queue=[],d.sorter=i.sorter||u.default_sorter,d},default_sorter:function(i,u){return i.cost-u.cost},push:function(i,u){var d={value:i,cost:u};this.queue.push(d),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};l.exports=t})(bf)),bf.exports}var A0;function Pm(){return A0||(A0=1,(function(l){const t=Us(),i=bm(),u=Om(),d=Dm(),p=Mm(),w=Bg(),A=Fs(),S=km();function E(Ee){return unescape(encodeURIComponent(Ee)).length}function O(Ee,pe,te){const oe=[];let Qe;for(;(Qe=Ee.exec(te))!==null;)oe.push({data:Qe[0],index:Qe.index,mode:pe,length:Qe[0].length});return oe}function b(Ee){const pe=O(w.NUMERIC,t.NUMERIC,Ee),te=O(w.ALPHANUMERIC,t.ALPHANUMERIC,Ee);let oe,Qe;return A.isKanjiModeEnabled()?(oe=O(w.BYTE,t.BYTE,Ee),Qe=O(w.KANJI,t.KANJI,Ee)):(oe=O(w.BYTE_KANJI,t.BYTE,Ee),Qe=[]),pe.concat(te,oe,Qe).sort(function(Y,de){return Y.index-de.index}).map(function(Y){return{data:Y.data,mode:Y.mode,length:Y.length}})}function k(Ee,pe){switch(pe){case t.NUMERIC:return i.getBitsLength(Ee);case t.ALPHANUMERIC:return u.getBitsLength(Ee);case t.KANJI:return p.getBitsLength(Ee);case t.BYTE:return d.getBitsLength(Ee)}}function V(Ee){return Ee.reduce(function(pe,te){const oe=pe.length-1>=0?pe[pe.length-1]:null;return oe&&oe.mode===te.mode?(pe[pe.length-1].data+=te.data,pe):(pe.push(te),pe)},[])}function J(Ee){const pe=[];for(let te=0;te<Ee.length;te++){const oe=Ee[te];switch(oe.mode){case t.NUMERIC:pe.push([oe,{data:oe.data,mode:t.ALPHANUMERIC,length:oe.length},{data:oe.data,mode:t.BYTE,length:oe.length}]);break;case t.ALPHANUMERIC:pe.push([oe,{data:oe.data,mode:t.BYTE,length:oe.length}]);break;case t.KANJI:pe.push([oe,{data:oe.data,mode:t.BYTE,length:E(oe.data)}]);break;case t.BYTE:pe.push([{data:oe.data,mode:t.BYTE,length:E(oe.data)}])}}return pe}function $(Ee,pe){const te={},oe={start:{}};let Qe=["start"];for(let ie=0;ie<Ee.length;ie++){const Y=Ee[ie],de=[];for(let j=0;j<Y.length;j++){const Me=Y[j],ve=""+ie+j;de.push(ve),te[ve]={node:Me,lastCount:0},oe[ve]={};for(let re=0;re<Qe.length;re++){const fe=Qe[re];te[fe]&&te[fe].node.mode===Me.mode?(oe[fe][ve]=k(te[fe].lastCount+Me.length,Me.mode)-k(te[fe].lastCount,Me.mode),te[fe].lastCount+=Me.length):(te[fe]&&(te[fe].lastCount=Me.length),oe[fe][ve]=k(Me.length,Me.mode)+4+t.getCharCountIndicator(Me.mode,pe))}}Qe=de}for(let ie=0;ie<Qe.length;ie++)oe[Qe[ie]].end=0;return{map:oe,table:te}}function xe(Ee,pe){let te;const oe=t.getBestModeForData(Ee);if(te=t.from(pe,oe),te!==t.BYTE&&te.bit<oe.bit)throw new Error('"'+Ee+'" cannot be encoded with mode '+t.toString(te)+`.
 Suggested mode is: `+t.toString(oe));switch(te===t.KANJI&&!A.isKanjiModeEnabled()&&(te=t.BYTE),te){case t.NUMERIC:return new i(Ee);case t.ALPHANUMERIC:return new u(Ee);case t.KANJI:return new p(Ee);case t.BYTE:return new d(Ee)}}l.fromArray=function(pe){return pe.reduce(function(te,oe){return typeof oe=="string"?te.push(xe(oe,null)):oe.data&&te.push(xe(oe.data,oe.mode)),te},[])},l.fromString=function(pe,te){const oe=b(pe,A.isKanjiModeEnabled()),Qe=J(oe),ie=$(Qe,te),Y=S.find_path(ie.map,"start","end"),de=[];for(let j=1;j<Y.length-1;j++)de.push(ie.table[Y[j]].node);return l.fromArray(V(de))},l.rawSplit=function(pe){return l.fromArray(b(pe,A.isKanjiModeEnabled()))}})(Sf)),Sf}var v0;function Lm(){if(v0)return hf;v0=1;const l=Fs(),t=gh(),i=ym(),u=Cm(),d=Em(),p=Am(),w=vm(),A=Pg(),S=Tm(),E=Nm(),O=Rm(),b=Us(),k=Pm();function V(ie,Y){const de=ie.size,j=p.getPositions(Y);for(let Me=0;Me<j.length;Me++){const ve=j[Me][0],re=j[Me][1];for(let fe=-1;fe<=7;fe++)if(!(ve+fe<=-1||de<=ve+fe))for(let Se=-1;Se<=7;Se++)re+Se<=-1||de<=re+Se||(fe>=0&&fe<=6&&(Se===0||Se===6)||Se>=0&&Se<=6&&(fe===0||fe===6)||fe>=2&&fe<=4&&Se>=2&&Se<=4?ie.set(ve+fe,re+Se,!0,!0):ie.set(ve+fe,re+Se,!1,!0))}}function J(ie){const Y=ie.size;for(let de=8;de<Y-8;de++){const j=de%2===0;ie.set(de,6,j,!0),ie.set(6,de,j,!0)}}function $(ie,Y){const de=d.getPositions(Y);for(let j=0;j<de.length;j++){const Me=de[j][0],ve=de[j][1];for(let re=-2;re<=2;re++)for(let fe=-2;fe<=2;fe++)re===-2||re===2||fe===-2||fe===2||re===0&&fe===0?ie.set(Me+re,ve+fe,!0,!0):ie.set(Me+re,ve+fe,!1,!0)}}function xe(ie,Y){const de=ie.size,j=E.getEncodedBits(Y);let Me,ve,re;for(let fe=0;fe<18;fe++)Me=Math.floor(fe/3),ve=fe%3+de-8-3,re=(j>>fe&1)===1,ie.set(Me,ve,re,!0),ie.set(ve,Me,re,!0)}function Ee(ie,Y,de){const j=ie.size,Me=O.getEncodedBits(Y,de);let ve,re;for(ve=0;ve<15;ve++)re=(Me>>ve&1)===1,ve<6?ie.set(ve,8,re,!0):ve<8?ie.set(ve+1,8,re,!0):ie.set(j-15+ve,8,re,!0),ve<8?ie.set(8,j-ve-1,re,!0):ve<9?ie.set(8,15-ve-1+1,re,!0):ie.set(8,15-ve-1,re,!0);ie.set(j-8,8,1,!0)}function pe(ie,Y){const de=ie.size;let j=-1,Me=de-1,ve=7,re=0;for(let fe=de-1;fe>0;fe-=2)for(fe===6&&fe--;;){for(let Se=0;Se<2;Se++)if(!ie.isReserved(Me,fe-Se)){let K=!1;re<Y.length&&(K=(Y[re]>>>ve&1)===1),ie.set(Me,fe-Se,K),ve--,ve===-1&&(re++,ve=7)}if(Me+=j,Me<0||de<=Me){Me-=j,j=-j;break}}}function te(ie,Y,de){const j=new i;de.forEach(function(Se){j.put(Se.mode.bit,4),j.put(Se.getLength(),b.getCharCountIndicator(Se.mode,ie)),Se.write(j)});const Me=l.getSymbolTotalCodewords(ie),ve=A.getTotalCodewordsCount(ie,Y),re=(Me-ve)*8;for(j.getLengthInBits()+4<=re&&j.put(0,4);j.getLengthInBits()%8!==0;)j.putBit(0);const fe=(re-j.getLengthInBits())/8;for(let Se=0;Se<fe;Se++)j.put(Se%2?17:236,8);return oe(j,ie,Y)}function oe(ie,Y,de){const j=l.getSymbolTotalCodewords(Y),Me=A.getTotalCodewordsCount(Y,de),ve=j-Me,re=A.getBlocksCount(Y,de),fe=j%re,Se=re-fe,K=Math.floor(j/re),Je=Math.floor(ve/re),Re=Je+1,ye=K-Je,ke=new S(ye);let ce=0;const H=new Array(re),ee=new Array(re);let Ge=0;const Ve=new Uint8Array(ie.buffer);for(let at=0;at<re;at++){const Wt=at<Se?Je:Re;H[at]=Ve.slice(ce,ce+Wt),ee[at]=ke.encode(H[at]),ce+=Wt,Ge=Math.max(Ge,Wt)}const tt=new Uint8Array(j);let we=0,nt,Be;for(nt=0;nt<Ge;nt++)for(Be=0;Be<re;Be++)nt<H[Be].length&&(tt[we++]=H[Be][nt]);for(nt=0;nt<ye;nt++)for(Be=0;Be<re;Be++)tt[we++]=ee[Be][nt];return tt}function Qe(ie,Y,de,j){let Me;if(Array.isArray(ie))Me=k.fromArray(ie);else if(typeof ie=="string"){let K=Y;if(!K){const Je=k.rawSplit(ie);K=E.getBestVersionForData(Je,de)}Me=k.fromString(ie,K||40)}else throw new Error("Invalid data");const ve=E.getBestVersionForData(Me,de);if(!ve)throw new Error("The amount of data is too big to be stored in a QR Code");if(!Y)Y=ve;else if(Y<ve)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+ve+`.
`);const re=te(Y,de,Me),fe=l.getSymbolSize(Y),Se=new u(fe);return V(Se,Y),J(Se),$(Se,Y),Ee(Se,de,0),Y>=7&&xe(Se,Y),pe(Se,re),isNaN(j)&&(j=w.getBestMask(Se,Ee.bind(null,Se,de))),w.applyMask(j,Se),Ee(Se,de,j),{modules:Se,version:Y,errorCorrectionLevel:de,maskPattern:j,segments:Me}}return hf.create=function(Y,de){if(typeof Y>"u"||Y==="")throw new Error("No input text");let j=t.M,Me,ve;return typeof de<"u"&&(j=t.from(de.errorCorrectionLevel,t.M),Me=E.from(de.version),ve=w.from(de.maskPattern),de.toSJISFunc&&l.setToSJISFunction(de.toSJISFunc)),Qe(Y,Me,j,ve)},hf}var Of={},Df={},S0;function Fg(){return S0||(S0=1,(function(l){function t(i){if(typeof i=="number"&&(i=i.toString()),typeof i!="string")throw new Error("Color should be defined as hex string");let u=i.slice().replace("#","").split("");if(u.length<3||u.length===5||u.length>8)throw new Error("Invalid hex color: "+i);(u.length===3||u.length===4)&&(u=Array.prototype.concat.apply([],u.map(function(p){return[p,p]}))),u.length===6&&u.push("F","F");const d=parseInt(u.join(""),16);return{r:d>>24&255,g:d>>16&255,b:d>>8&255,a:d&255,hex:"#"+u.slice(0,6).join("")}}l.getOptions=function(u){u||(u={}),u.color||(u.color={});const d=typeof u.margin>"u"||u.margin===null||u.margin<0?4:u.margin,p=u.width&&u.width>=21?u.width:void 0,w=u.scale||4;return{width:p,scale:p?4:w,margin:d,color:{dark:t(u.color.dark||"#000000ff"),light:t(u.color.light||"#ffffffff")},type:u.type,rendererOpts:u.rendererOpts||{}}},l.getScale=function(u,d){return d.width&&d.width>=u+d.margin*2?d.width/(u+d.margin*2):d.scale},l.getImageWidth=function(u,d){const p=l.getScale(u,d);return Math.floor((u+d.margin*2)*p)},l.qrToImageData=function(u,d,p){const w=d.modules.size,A=d.modules.data,S=l.getScale(w,p),E=Math.floor((w+p.margin*2)*S),O=p.margin*S,b=[p.color.light,p.color.dark];for(let k=0;k<E;k++)for(let V=0;V<E;V++){let J=(k*E+V)*4,$=p.color.light;if(k>=O&&V>=O&&k<E-O&&V<E-O){const xe=Math.floor((k-O)/S),Ee=Math.floor((V-O)/S);$=b[A[xe*w+Ee]?1:0]}u[J++]=$.r,u[J++]=$.g,u[J++]=$.b,u[J]=$.a}}})(Df)),Df}var I0;function Bm(){return I0||(I0=1,(function(l){const t=Fg();function i(d,p,w){d.clearRect(0,0,p.width,p.height),p.style||(p.style={}),p.height=w,p.width=w,p.style.height=w+"px",p.style.width=w+"px"}function u(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}l.render=function(p,w,A){let S=A,E=w;typeof S>"u"&&(!w||!w.getContext)&&(S=w,w=void 0),w||(E=u()),S=t.getOptions(S);const O=t.getImageWidth(p.modules.size,S),b=E.getContext("2d"),k=b.createImageData(O,O);return t.qrToImageData(k.data,p,S),i(b,E,O),b.putImageData(k,0,0),E},l.renderToDataURL=function(p,w,A){let S=A;typeof S>"u"&&(!w||!w.getContext)&&(S=w,w=void 0),S||(S={});const E=l.render(p,w,S),O=S.type||"image/png",b=S.rendererOpts||{};return E.toDataURL(O,b.quality)}})(Of)),Of}var Mf={},T0;function Fm(){if(T0)return Mf;T0=1;const l=Fg();function t(d,p){const w=d.a/255,A=p+'="'+d.hex+'"';return w<1?A+" "+p+'-opacity="'+w.toFixed(2).slice(1)+'"':A}function i(d,p,w){let A=d+p;return typeof w<"u"&&(A+=" "+w),A}function u(d,p,w){let A="",S=0,E=!1,O=0;for(let b=0;b<d.length;b++){const k=Math.floor(b%p),V=Math.floor(b/p);!k&&!E&&(E=!0),d[b]?(O++,b>0&&k>0&&d[b-1]||(A+=E?i("M",k+w,.5+V+w):i("m",S,0),S=0,E=!1),k+1<p&&d[b+1]||(A+=i("h",O),O=0)):S++}return A}return Mf.render=function(p,w,A){const S=l.getOptions(w),E=p.modules.size,O=p.modules.data,b=E+S.margin*2,k=S.color.light.a?"<path "+t(S.color.light,"fill")+' d="M0 0h'+b+"v"+b+'H0z"/>':"",V="<path "+t(S.color.dark,"stroke")+' d="'+u(O,E,S.margin)+'"/>',J='viewBox="0 0 '+b+" "+b+'"',xe='<svg xmlns="http://www.w3.org/2000/svg" '+(S.width?'width="'+S.width+'" height="'+S.width+'" ':"")+J+' shape-rendering="crispEdges">'+k+V+`</svg>
`;return typeof A=="function"&&A(null,xe),xe},Mf}var N0;function Um(){if(N0)return xo;N0=1;const l=_m(),t=Lm(),i=Bm(),u=Fm();function d(p,w,A,S,E){const O=[].slice.call(arguments,1),b=O.length,k=typeof O[b-1]=="function";if(!k&&!l())throw new Error("Callback required as last argument");if(k){if(b<2)throw new Error("Too few arguments provided");b===2?(E=A,A=w,w=S=void 0):b===3&&(w.getContext&&typeof E>"u"?(E=S,S=void 0):(E=S,S=A,A=w,w=void 0))}else{if(b<1)throw new Error("Too few arguments provided");return b===1?(A=w,w=S=void 0):b===2&&!w.getContext&&(S=A,A=w,w=void 0),new Promise(function(V,J){try{const $=t.create(A,S);V(p($,w,S))}catch($){J($)}})}try{const V=t.create(A,S);E(null,p(V,w,S))}catch(V){E(V)}}return xo.create=t.create,xo.toCanvas=d.bind(null,i.render),xo.toDataURL=d.bind(null,i.renderToDataURL),xo.toString=d.bind(null,function(p,w,A){return u.render(p,A)}),xo}var Vm=Um();const Hm=cm(Vm);var be;(function(l){l[l.QR_CODE=0]="QR_CODE",l[l.AZTEC=1]="AZTEC",l[l.CODABAR=2]="CODABAR",l[l.CODE_39=3]="CODE_39",l[l.CODE_93=4]="CODE_93",l[l.CODE_128=5]="CODE_128",l[l.DATA_MATRIX=6]="DATA_MATRIX",l[l.MAXICODE=7]="MAXICODE",l[l.ITF=8]="ITF",l[l.EAN_13=9]="EAN_13",l[l.EAN_8=10]="EAN_8",l[l.PDF_417=11]="PDF_417",l[l.RSS_14=12]="RSS_14",l[l.RSS_EXPANDED=13]="RSS_EXPANDED",l[l.UPC_A=14]="UPC_A",l[l.UPC_E=15]="UPC_E",l[l.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(be||(be={}));var R0=new Map([[be.QR_CODE,"QR_CODE"],[be.AZTEC,"AZTEC"],[be.CODABAR,"CODABAR"],[be.CODE_39,"CODE_39"],[be.CODE_93,"CODE_93"],[be.CODE_128,"CODE_128"],[be.DATA_MATRIX,"DATA_MATRIX"],[be.MAXICODE,"MAXICODE"],[be.ITF,"ITF"],[be.EAN_13,"EAN_13"],[be.EAN_8,"EAN_8"],[be.PDF_417,"PDF_417"],[be.RSS_14,"RSS_14"],[be.RSS_EXPANDED,"RSS_EXPANDED"],[be.UPC_A,"UPC_A"],[be.UPC_E,"UPC_E"],[be.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),b0;(function(l){l[l.UNKNOWN=0]="UNKNOWN",l[l.URL=1]="URL"})(b0||(b0={}));function Wm(l){return Object.values(be).includes(l)}var lc;(function(l){l[l.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",l[l.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(lc||(lc={}));var zm=(function(){function l(){}return l.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",l.SCAN_DEFAULT_FPS=2,l.DEFAULT_DISABLE_FLIP=!1,l.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,l.DEFAULT_SUPPORTED_SCAN_TYPE=[lc.SCAN_TYPE_CAMERA,lc.SCAN_TYPE_FILE],l})(),Ug=(function(){function l(t,i){this.format=t,this.formatName=i}return l.prototype.toString=function(){return this.formatName},l.create=function(t){if(!R0.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new l(t,R0.get(t))},l})(),O0=(function(){function l(){}return l.createFromText=function(t){var i={text:t};return{decodedText:t,result:i}},l.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},l})(),Yf;(function(l){l[l.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",l[l.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",l[l.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Yf||(Yf={}));var Gm=(function(){function l(){}return l.createFrom=function(t){return{errorMessage:t,type:Yf.UNKWOWN_ERROR}},l})(),jm=(function(){function l(t){this.verbose=t}return l.prototype.log=function(t){this.verbose&&console.log(t)},l.prototype.warn=function(t){this.verbose&&console.warn(t)},l.prototype.logError=function(t,i){(this.verbose||i===!0)&&console.error(t)},l.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},l})();function pi(l){return typeof l>"u"||l===null}var _o=(function(){function l(){}return l.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},l.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},l.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},l.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},l.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},l.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},l.scannerPaused=function(){return"Scanner paused"},l})(),Vg=(function(){function l(){}return l.isMediaStreamConstraintsValid=function(t,i){if(typeof t!="object"){var u=typeof t;return i.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(u,"."),!0),!1}for(var d=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],p=new Set(d),w=Object.keys(t),A=0,S=w;A<S.length;A++){var E=S[A];if(p.has(E))return i.logError("".concat(E," is not supported videoConstaints."),!0),!1}return!0},l})(),Il={exports:{}},Xm=Il.exports,D0;function Ym(){return D0||(D0=1,(function(l,t){(function(i,u){u(t)})(Xm,(function(i){function u(I){return I==null}var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,e){I.__proto__=e}||function(I,e){for(var r in e)e.hasOwnProperty(r)&&(I[r]=e[r])};function p(I,e){d(I,e);function r(){this.constructor=I}I.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function w(I,e){var r=Object.setPrototypeOf;r?r(I,e):I.__proto__=e}function A(I,e){e===void 0&&(e=I.constructor);var r=Error.captureStackTrace;r&&r(I,e)}var S=(function(I){p(e,I);function e(r){var s=this.constructor,a=I.call(this,r)||this;return Object.defineProperty(a,"name",{value:s.name,enumerable:!1}),w(a,s.prototype),A(a),a}return e})(Error);class E extends S{constructor(e=void 0){super(e),this.message=e}getKind(){return this.constructor.kind}}E.kind="Exception";class O extends E{}O.kind="ArgumentException";class b extends E{}b.kind="IllegalArgumentException";class k{constructor(e){if(this.binarizer=e,e===null)throw new b("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,r){return this.binarizer.getBlackRow(e,r)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,r,s,a){const c=this.binarizer.getLuminanceSource().crop(e,r,s,a);return new k(this.binarizer.createBinarizer(c))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new k(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new k(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class V extends E{static getChecksumInstance(){return new V}}V.kind="ChecksumException";class J{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class ${static arraycopy(e,r,s,a,c){for(;c--;)s[a++]=e[r++]}static currentTimeMillis(){return Date.now()}}class xe extends E{}xe.kind="IndexOutOfBoundsException";class Ee extends xe{constructor(e=void 0,r=void 0){super(r),this.index=e,this.message=r}}Ee.kind="ArrayIndexOutOfBoundsException";class pe{static fill(e,r){for(let s=0,a=e.length;s<a;s++)e[s]=r}static fillWithin(e,r,s,a){pe.rangeCheck(e.length,r,s);for(let c=r;c<s;c++)e[c]=a}static rangeCheck(e,r,s){if(r>s)throw new b("fromIndex("+r+") > toIndex("+s+")");if(r<0)throw new Ee(r);if(s>e)throw new Ee(s)}static asList(...e){return e}static create(e,r,s){return Array.from({length:e}).map(c=>Array.from({length:r}).fill(s))}static createInt32Array(e,r,s){return Array.from({length:e}).map(c=>Int32Array.from({length:r}).fill(s))}static equals(e,r){if(!e||!r||!e.length||!r.length||e.length!==r.length)return!1;for(let s=0,a=e.length;s<a;s++)if(e[s]!==r[s])return!1;return!0}static hashCode(e){if(e===null)return 0;let r=1;for(const s of e)r=31*r+s;return r}static fillUint8Array(e,r){for(let s=0;s!==e.length;s++)e[s]=r}static copyOf(e,r){return e.slice(0,r)}static copyOfUint8Array(e,r){if(e.length<=r){const s=new Uint8Array(r);return s.set(e),s}return e.slice(0,r)}static copyOfRange(e,r,s){const a=s-r,c=new Int32Array(a);return $.arraycopy(e,r,c,0,a),c}static binarySearch(e,r,s){s===void 0&&(s=pe.numberComparator);let a=0,c=e.length-1;for(;a<=c;){const f=c+a>>1,g=s(r,e[f]);if(g>0)a=f+1;else if(g<0)c=f-1;else return f}return-a-1}static numberComparator(e,r){return e-r}}class te{static numberOfTrailingZeros(e){let r;if(e===0)return 32;let s=31;return r=e<<16,r!==0&&(s-=16,e=r),r=e<<8,r!==0&&(s-=8,e=r),r=e<<4,r!==0&&(s-=4,e=r),r=e<<2,r!==0&&(s-=2,e=r),s-(e<<1>>>31)}static numberOfLeadingZeros(e){if(e===0)return 32;let r=1;return e>>>16||(r+=16,e<<=16),e>>>24||(r+=8,e<<=8),e>>>28||(r+=4,e<<=4),e>>>30||(r+=2,e<<=2),r-=e>>>31,r}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63}static truncDivision(e,r){return Math.trunc(e/r)}static parseInt(e,r=void 0){return parseInt(e,r)}}te.MIN_VALUE_32_BITS=-2147483648,te.MAX_VALUE=Number.MAX_SAFE_INTEGER;class oe{constructor(e,r){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,r==null?this.bits=oe.makeArray(e):this.bits=r)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>this.bits.length*32){const r=oe.makeArray(e);$.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}}get(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0}set(e){this.bits[Math.floor(e/32)]|=1<<(e&31)}flip(e){this.bits[Math.floor(e/32)]^=1<<(e&31)}getNextSet(e){const r=this.size;if(e>=r)return r;const s=this.bits;let a=Math.floor(e/32),c=s[a];c&=~((1<<(e&31))-1);const f=s.length;for(;c===0;){if(++a===f)return r;c=s[a]}const g=a*32+te.numberOfTrailingZeros(c);return g>r?r:g}getNextUnset(e){const r=this.size;if(e>=r)return r;const s=this.bits;let a=Math.floor(e/32),c=~s[a];c&=~((1<<(e&31))-1);const f=s.length;for(;c===0;){if(++a===f)return r;c=~s[a]}const g=a*32+te.numberOfTrailingZeros(c);return g>r?r:g}setBulk(e,r){this.bits[Math.floor(e/32)]=r}setRange(e,r){if(r<e||e<0||r>this.size)throw new b;if(r===e)return;r--;const s=Math.floor(e/32),a=Math.floor(r/32),c=this.bits;for(let f=s;f<=a;f++){const g=f>s?0:e&31,_=(2<<(f<a?31:r&31))-(1<<g);c[f]|=_}}clear(){const e=this.bits.length,r=this.bits;for(let s=0;s<e;s++)r[s]=0}isRange(e,r,s){if(r<e||e<0||r>this.size)throw new b;if(r===e)return!0;r--;const a=Math.floor(e/32),c=Math.floor(r/32),f=this.bits;for(let g=a;g<=c;g++){const x=g>a?0:e&31,v=(2<<(g<c?31:r&31))-(1<<x)&4294967295;if((f[g]&v)!==(s?v:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(e,r){if(r<0||r>32)throw new b("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(let s=r;s>0;s--)this.appendBit((e>>s-1&1)===1)}appendBitArray(e){const r=e.size;this.ensureCapacity(this.size+r);for(let s=0;s<r;s++)this.appendBit(e.get(s))}xor(e){if(this.size!==e.size)throw new b("Sizes don't match");const r=this.bits;for(let s=0,a=r.length;s<a;s++)r[s]^=e.bits[s]}toBytes(e,r,s,a){for(let c=0;c<a;c++){let f=0;for(let g=0;g<8;g++)this.get(e)&&(f|=1<<7-g),e++;r[s+c]=f}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),s=r+1,a=this.bits;for(let c=0;c<s;c++){let f=a[c];f=f>>1&1431655765|(f&1431655765)<<1,f=f>>2&858993459|(f&858993459)<<2,f=f>>4&252645135|(f&252645135)<<4,f=f>>8&16711935|(f&16711935)<<8,f=f>>16&65535|(f&65535)<<16,e[r-c]=f}if(this.size!==s*32){const c=s*32-this.size;let f=e[0]>>>c;for(let g=1;g<s;g++){const x=e[g];f|=x<<32-c,e[g-1]=f,f=x>>>c}e[s-1]=f}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof oe))return!1;const r=e;return this.size===r.size&&pe.equals(this.bits,r.bits)}hashCode(){return 31*this.size+pe.hashCode(this.bits)}toString(){let e="";for(let r=0,s=this.size;r<s;r++)(r&7)===0&&(e+=" "),e+=this.get(r)?"X":".";return e}clone(){return new oe(this.size,this.bits.slice())}}var Qe;(function(I){I[I.OTHER=0]="OTHER",I[I.PURE_BARCODE=1]="PURE_BARCODE",I[I.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",I[I.TRY_HARDER=3]="TRY_HARDER",I[I.CHARACTER_SET=4]="CHARACTER_SET",I[I.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",I[I.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",I[I.ASSUME_GS1=7]="ASSUME_GS1",I[I.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",I[I.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",I[I.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Qe||(Qe={}));var ie=Qe;class Y extends E{static getFormatInstance(){return new Y}}Y.kind="FormatException";var de;(function(I){I[I.Cp437=0]="Cp437",I[I.ISO8859_1=1]="ISO8859_1",I[I.ISO8859_2=2]="ISO8859_2",I[I.ISO8859_3=3]="ISO8859_3",I[I.ISO8859_4=4]="ISO8859_4",I[I.ISO8859_5=5]="ISO8859_5",I[I.ISO8859_6=6]="ISO8859_6",I[I.ISO8859_7=7]="ISO8859_7",I[I.ISO8859_8=8]="ISO8859_8",I[I.ISO8859_9=9]="ISO8859_9",I[I.ISO8859_10=10]="ISO8859_10",I[I.ISO8859_11=11]="ISO8859_11",I[I.ISO8859_13=12]="ISO8859_13",I[I.ISO8859_14=13]="ISO8859_14",I[I.ISO8859_15=14]="ISO8859_15",I[I.ISO8859_16=15]="ISO8859_16",I[I.SJIS=16]="SJIS",I[I.Cp1250=17]="Cp1250",I[I.Cp1251=18]="Cp1251",I[I.Cp1252=19]="Cp1252",I[I.Cp1256=20]="Cp1256",I[I.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",I[I.UTF8=22]="UTF8",I[I.ASCII=23]="ASCII",I[I.Big5=24]="Big5",I[I.GB18030=25]="GB18030",I[I.EUC_KR=26]="EUC_KR"})(de||(de={}));class j{constructor(e,r,s,...a){this.valueIdentifier=e,this.name=s,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=a,j.VALUE_IDENTIFIER_TO_ECI.set(e,this),j.NAME_TO_ECI.set(s,this);const c=this.values;for(let f=0,g=c.length;f!==g;f++){const x=c[f];j.VALUES_TO_ECI.set(x,this)}for(const f of a)j.NAME_TO_ECI.set(f,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new Y("incorect value");const r=j.VALUES_TO_ECI.get(e);if(r===void 0)throw new Y("incorect value");return r}static getCharacterSetECIByName(e){const r=j.NAME_TO_ECI.get(e);if(r===void 0)throw new Y("incorect value");return r}equals(e){if(!(e instanceof j))return!1;const r=e;return this.getName()===r.getName()}}j.VALUE_IDENTIFIER_TO_ECI=new Map,j.VALUES_TO_ECI=new Map,j.NAME_TO_ECI=new Map,j.Cp437=new j(de.Cp437,Int32Array.from([0,2]),"Cp437"),j.ISO8859_1=new j(de.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),j.ISO8859_2=new j(de.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),j.ISO8859_3=new j(de.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),j.ISO8859_4=new j(de.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),j.ISO8859_5=new j(de.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),j.ISO8859_6=new j(de.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),j.ISO8859_7=new j(de.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),j.ISO8859_8=new j(de.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),j.ISO8859_9=new j(de.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),j.ISO8859_10=new j(de.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),j.ISO8859_11=new j(de.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),j.ISO8859_13=new j(de.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),j.ISO8859_14=new j(de.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),j.ISO8859_15=new j(de.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),j.ISO8859_16=new j(de.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),j.SJIS=new j(de.SJIS,20,"SJIS","Shift_JIS"),j.Cp1250=new j(de.Cp1250,21,"Cp1250","windows-1250"),j.Cp1251=new j(de.Cp1251,22,"Cp1251","windows-1251"),j.Cp1252=new j(de.Cp1252,23,"Cp1252","windows-1252"),j.Cp1256=new j(de.Cp1256,24,"Cp1256","windows-1256"),j.UnicodeBigUnmarked=new j(de.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),j.UTF8=new j(de.UTF8,26,"UTF8","UTF-8"),j.ASCII=new j(de.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),j.Big5=new j(de.Big5,28,"Big5"),j.GB18030=new j(de.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),j.EUC_KR=new j(de.EUC_KR,30,"EUC_KR","EUC-KR");class Me extends E{}Me.kind="UnsupportedOperationException";class ve{static decode(e,r){const s=this.encodingName(r);return this.customDecoder?this.customDecoder(e,s):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(s)?this.decodeFallback(e,s):new TextDecoder(s).decode(e)}static shouldDecodeOnFallback(e){return!ve.isBrowser()&&e==="ISO-8859-1"}static encode(e,r){const s=this.encodingName(r);return this.customEncoder?this.customEncoder(e,s):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(e){return typeof e=="string"?e:e.getName()}static encodingCharacterSet(e){return e instanceof j?e:j.getCharacterSetECIByName(e)}static decodeFallback(e,r){const s=this.encodingCharacterSet(r);if(ve.isDecodeFallbackSupported(s)){let a="";for(let c=0,f=e.length;c<f;c++){let g=e[c].toString(16);g.length<2&&(g="0"+g),a+="%"+g}return decodeURIComponent(a)}if(s.equals(j.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new Me(`Encoding ${this.encodingName(r)} not supported by fallback.`)}static isDecodeFallbackSupported(e){return e.equals(j.UTF8)||e.equals(j.ISO8859_1)||e.equals(j.ASCII)}static encodeFallback(e){const s=btoa(unescape(encodeURIComponent(e))).split(""),a=[];for(let c=0;c<s.length;c++)a.push(s[c].charCodeAt(0));return new Uint8Array(a)}}class re{static castAsNonUtf8Char(e,r=null){const s=r?r.getName():this.ISO88591;return ve.decode(new Uint8Array([e]),s)}static guessEncoding(e,r){if(r!=null&&r.get(ie.CHARACTER_SET)!==void 0)return r.get(ie.CHARACTER_SET).toString();const s=e.length;let a=!0,c=!0,f=!0,g=0,x=0,_=0,v=0,T=0,R=0,M=0,L=0,F=0,W=0,q=0;const he=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191;for(let ge=0;ge<s&&(a||c||f);ge++){const le=e[ge]&255;f&&(g>0?(le&128)===0?f=!1:g--:(le&128)!==0&&((le&64)===0?f=!1:(g++,(le&32)===0?x++:(g++,(le&16)===0?_++:(g++,(le&8)===0?v++:f=!1))))),a&&(le>127&&le<160?a=!1:le>159&&(le<192||le===215||le===247)&&q++),c&&(T>0?le<64||le===127||le>252?c=!1:T--:le===128||le===160||le>239?c=!1:le>160&&le<224?(R++,L=0,M++,M>F&&(F=M)):le>127?(T++,M=0,L++,L>W&&(W=L)):(M=0,L=0))}return f&&g>0&&(f=!1),c&&T>0&&(c=!1),f&&(he||x+_+v>0)?re.UTF8:c&&(re.ASSUME_SHIFT_JIS||F>=3||W>=3)?re.SHIFT_JIS:a&&c?F===2&&R===2||q*10>=s?re.SHIFT_JIS:re.ISO88591:a?re.ISO88591:c?re.SHIFT_JIS:f?re.UTF8:re.PLATFORM_DEFAULT_ENCODING}static format(e,...r){let s=-1;function a(f,g,x,_,v,T){if(f==="%%")return"%";if(r[++s]===void 0)return;f=_?parseInt(_.substr(1)):void 0;let R=v?parseInt(v.substr(1)):void 0,M;switch(T){case"s":M=r[s];break;case"c":M=r[s][0];break;case"f":M=parseFloat(r[s]).toFixed(f);break;case"p":M=parseFloat(r[s]).toPrecision(f);break;case"e":M=parseFloat(r[s]).toExponential(f);break;case"x":M=parseInt(r[s]).toString(R||16);break;case"d":M=parseFloat(parseInt(r[s],R||10).toPrecision(f)).toFixed(0);break}M=typeof M=="object"?JSON.stringify(M):(+M).toString(R);let L=parseInt(x),F=x&&x[0]+""=="0"?"0":" ";for(;M.length<L;)M=g!==void 0?M+F:F+M;return M}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(c,a)}static getBytes(e,r){return ve.encode(e,r)}static getCharCode(e,r=0){return e.charCodeAt(r)}static getCharAt(e){return String.fromCharCode(e)}}re.SHIFT_JIS=j.SJIS.getName(),re.GB2312="GB2312",re.ISO88591=j.ISO8859_1.getName(),re.EUC_JP="EUC_JP",re.UTF8=j.UTF8.getName(),re.PLATFORM_DEFAULT_ENCODING=re.UTF8,re.ASSUME_SHIFT_JIS=!1;class fe{constructor(e=""){this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=re.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,r,s){for(let a=r;r<r+s;a++)this.append(e[a]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,r){this.value=this.value.substr(0,e)+r+this.value.substr(e+1)}substring(e,r){return this.value.substring(e,r)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,r){this.value=this.value.substr(0,e)+r+this.value.substr(e+r.length)}}class Se{constructor(e,r,s,a){if(this.width=e,this.height=r,this.rowSize=s,this.bits=a,r==null&&(r=e),this.height=r,e<1||r<1)throw new b("Both dimensions must be greater than 0");s==null&&(s=Math.floor((e+31)/32)),this.rowSize=s,a==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const r=e.length,s=e[0].length,a=new Se(s,r);for(let c=0;c<r;c++){const f=e[c];for(let g=0;g<s;g++)f[g]&&a.set(g,c)}return a}static parseFromString(e,r,s){if(e===null)throw new b("stringRepresentation cannot be null");const a=new Array(e.length);let c=0,f=0,g=-1,x=0,_=0;for(;_<e.length;)if(e.charAt(_)===`
`||e.charAt(_)==="\r"){if(c>f){if(g===-1)g=c-f;else if(c-f!==g)throw new b("row lengths do not match");f=c,x++}_++}else if(e.substring(_,_+r.length)===r)_+=r.length,a[c]=!0,c++;else if(e.substring(_,_+s.length)===s)_+=s.length,a[c]=!1,c++;else throw new b("illegal character encountered: "+e.substring(_));if(c>f){if(g===-1)g=c-f;else if(c-f!==g)throw new b("row lengths do not match");x++}const v=new Se(g,x);for(let T=0;T<c;T++)a[T]&&v.set(Math.floor(T%g),Math.floor(T/g));return v}get(e,r){const s=r*this.rowSize+Math.floor(e/32);return(this.bits[s]>>>(e&31)&1)!==0}set(e,r){const s=r*this.rowSize+Math.floor(e/32);this.bits[s]|=1<<(e&31)&4294967295}unset(e,r){const s=r*this.rowSize+Math.floor(e/32);this.bits[s]&=~(1<<(e&31)&4294967295)}flip(e,r){const s=r*this.rowSize+Math.floor(e/32);this.bits[s]^=1<<(e&31)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new b("input matrix dimensions do not match");const r=new oe(Math.floor(this.width/32)+1),s=this.rowSize,a=this.bits;for(let c=0,f=this.height;c<f;c++){const g=c*s,x=e.getRow(c,r).getBitArray();for(let _=0;_<s;_++)a[g+_]^=x[_]}}clear(){const e=this.bits,r=e.length;for(let s=0;s<r;s++)e[s]=0}setRegion(e,r,s,a){if(r<0||e<0)throw new b("Left and top must be nonnegative");if(a<1||s<1)throw new b("Height and width must be at least 1");const c=e+s,f=r+a;if(f>this.height||c>this.width)throw new b("The region must fit inside the matrix");const g=this.rowSize,x=this.bits;for(let _=r;_<f;_++){const v=_*g;for(let T=e;T<c;T++)x[v+Math.floor(T/32)]|=1<<(T&31)&4294967295}}getRow(e,r){r==null||r.getSize()<this.width?r=new oe(this.width):r.clear();const s=this.rowSize,a=this.bits,c=e*s;for(let f=0;f<s;f++)r.setBulk(f*32,a[c+f]);return r}setRow(e,r){$.arraycopy(r.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),r=this.getHeight();let s=new oe(e),a=new oe(e);for(let c=0,f=Math.floor((r+1)/2);c<f;c++)s=this.getRow(c,s),a=this.getRow(r-1-c,a),s.reverse(),a.reverse(),this.setRow(c,a),this.setRow(r-1-c,s)}getEnclosingRectangle(){const e=this.width,r=this.height,s=this.rowSize,a=this.bits;let c=e,f=r,g=-1,x=-1;for(let _=0;_<r;_++)for(let v=0;v<s;v++){const T=a[_*s+v];if(T!==0){if(_<f&&(f=_),_>x&&(x=_),v*32<c){let R=0;for(;(T<<31-R&4294967295)===0;)R++;v*32+R<c&&(c=v*32+R)}if(v*32+31>g){let R=31;for(;!(T>>>R);)R--;v*32+R>g&&(g=v*32+R)}}}return g<c||x<f?null:Int32Array.from([c,f,g-c+1,x-f+1])}getTopLeftOnBit(){const e=this.rowSize,r=this.bits;let s=0;for(;s<r.length&&r[s]===0;)s++;if(s===r.length)return null;const a=s/e;let c=s%e*32;const f=r[s];let g=0;for(;(f<<31-g&4294967295)===0;)g++;return c+=g,Int32Array.from([c,a])}getBottomRightOnBit(){const e=this.rowSize,r=this.bits;let s=r.length-1;for(;s>=0&&r[s]===0;)s--;if(s<0)return null;const a=Math.floor(s/e);let c=Math.floor(s%e)*32;const f=r[s];let g=31;for(;!(f>>>g);)g--;return c+=g,Int32Array.from([c,a])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof Se))return!1;const r=e;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&pe.equals(this.bits,r.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+pe.hashCode(this.bits),e}toString(e="X ",r="  ",s=`
`){return this.buildToString(e,r,s)}buildToString(e,r,s){let a=new fe;for(let c=0,f=this.height;c<f;c++){for(let g=0,x=this.width;g<x;g++)a.append(this.get(g,c)?e:r);a.append(s)}return a.toString()}clone(){return new Se(this.width,this.height,this.rowSize,this.bits.slice())}}class K extends E{static getNotFoundInstance(){return new K}}K.kind="NotFoundException";class Je extends J{constructor(e){super(e),this.luminances=Je.EMPTY,this.buckets=new Int32Array(Je.LUMINANCE_BUCKETS)}getBlackRow(e,r){const s=this.getLuminanceSource(),a=s.getWidth();r==null||r.getSize()<a?r=new oe(a):r.clear(),this.initArrays(a);const c=s.getRow(e,this.luminances),f=this.buckets;for(let x=0;x<a;x++)f[(c[x]&255)>>Je.LUMINANCE_SHIFT]++;const g=Je.estimateBlackPoint(f);if(a<3)for(let x=0;x<a;x++)(c[x]&255)<g&&r.set(x);else{let x=c[0]&255,_=c[1]&255;for(let v=1;v<a-1;v++){const T=c[v+1]&255;(_*4-x-T)/2<g&&r.set(v),x=_,_=T}}return r}getBlackMatrix(){const e=this.getLuminanceSource(),r=e.getWidth(),s=e.getHeight(),a=new Se(r,s);this.initArrays(r);const c=this.buckets;for(let x=1;x<5;x++){const _=Math.floor(s*x/5),v=e.getRow(_,this.luminances),T=Math.floor(r*4/5);for(let R=Math.floor(r/5);R<T;R++){const M=v[R]&255;c[M>>Je.LUMINANCE_SHIFT]++}}const f=Je.estimateBlackPoint(c),g=e.getMatrix();for(let x=0;x<s;x++){const _=x*r;for(let v=0;v<r;v++)(g[_+v]&255)<f&&a.set(v,x)}return a}createBinarizer(e){return new Je(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const r=this.buckets;for(let s=0;s<Je.LUMINANCE_BUCKETS;s++)r[s]=0}static estimateBlackPoint(e){const r=e.length;let s=0,a=0,c=0;for(let v=0;v<r;v++)e[v]>c&&(a=v,c=e[v]),e[v]>s&&(s=e[v]);let f=0,g=0;for(let v=0;v<r;v++){const T=v-a,R=e[v]*T*T;R>g&&(f=v,g=R)}if(a>f){const v=a;a=f,f=v}if(f-a<=r/16)throw new K;let x=f-1,_=-1;for(let v=f-1;v>a;v--){const T=v-a,R=T*T*(f-v)*(s-e[v]);R>_&&(x=v,_=R)}return x<<Je.LUMINANCE_SHIFT}}Je.LUMINANCE_BITS=5,Je.LUMINANCE_SHIFT=8-Je.LUMINANCE_BITS,Je.LUMINANCE_BUCKETS=1<<Je.LUMINANCE_BITS,Je.EMPTY=Uint8ClampedArray.from([0]);class Re extends Je{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const e=this.getLuminanceSource(),r=e.getWidth(),s=e.getHeight();if(r>=Re.MINIMUM_DIMENSION&&s>=Re.MINIMUM_DIMENSION){const a=e.getMatrix();let c=r>>Re.BLOCK_SIZE_POWER;(r&Re.BLOCK_SIZE_MASK)!==0&&c++;let f=s>>Re.BLOCK_SIZE_POWER;(s&Re.BLOCK_SIZE_MASK)!==0&&f++;const g=Re.calculateBlackPoints(a,c,f,r,s),x=new Se(r,s);Re.calculateThresholdForBlock(a,c,f,r,s,g,x),this.matrix=x}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new Re(e)}static calculateThresholdForBlock(e,r,s,a,c,f,g){const x=c-Re.BLOCK_SIZE,_=a-Re.BLOCK_SIZE;for(let v=0;v<s;v++){let T=v<<Re.BLOCK_SIZE_POWER;T>x&&(T=x);const R=Re.cap(v,2,s-3);for(let M=0;M<r;M++){let L=M<<Re.BLOCK_SIZE_POWER;L>_&&(L=_);const F=Re.cap(M,2,r-3);let W=0;for(let he=-2;he<=2;he++){const ge=f[R+he];W+=ge[F-2]+ge[F-1]+ge[F]+ge[F+1]+ge[F+2]}const q=W/25;Re.thresholdBlock(e,L,T,q,a,g)}}}static cap(e,r,s){return e<r?r:e>s?s:e}static thresholdBlock(e,r,s,a,c,f){for(let g=0,x=s*c+r;g<Re.BLOCK_SIZE;g++,x+=c)for(let _=0;_<Re.BLOCK_SIZE;_++)(e[x+_]&255)<=a&&f.set(r+_,s+g)}static calculateBlackPoints(e,r,s,a,c){const f=c-Re.BLOCK_SIZE,g=a-Re.BLOCK_SIZE,x=new Array(s);for(let _=0;_<s;_++){x[_]=new Int32Array(r);let v=_<<Re.BLOCK_SIZE_POWER;v>f&&(v=f);for(let T=0;T<r;T++){let R=T<<Re.BLOCK_SIZE_POWER;R>g&&(R=g);let M=0,L=255,F=0;for(let q=0,he=v*a+R;q<Re.BLOCK_SIZE;q++,he+=a){for(let ge=0;ge<Re.BLOCK_SIZE;ge++){const le=e[he+ge]&255;M+=le,le<L&&(L=le),le>F&&(F=le)}if(F-L>Re.MIN_DYNAMIC_RANGE)for(q++,he+=a;q<Re.BLOCK_SIZE;q++,he+=a)for(let ge=0;ge<Re.BLOCK_SIZE;ge++)M+=e[he+ge]&255}let W=M>>Re.BLOCK_SIZE_POWER*2;if(F-L<=Re.MIN_DYNAMIC_RANGE&&(W=L/2,_>0&&T>0)){const q=(x[_-1][T]+2*x[_][T-1]+x[_-1][T-1])/4;L<q&&(W=q)}x[_][T]=W}}return x}}Re.BLOCK_SIZE_POWER=3,Re.BLOCK_SIZE=1<<Re.BLOCK_SIZE_POWER,Re.BLOCK_SIZE_MASK=Re.BLOCK_SIZE-1,Re.MINIMUM_DIMENSION=Re.BLOCK_SIZE*5,Re.MIN_DYNAMIC_RANGE=24;class ye{constructor(e,r){this.width=e,this.height=r}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,r,s,a){throw new Me("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Me("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Me("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let r=new fe;for(let s=0;s<this.height;s++){const a=this.getRow(s,e);for(let c=0;c<this.width;c++){const f=a[c]&255;let g;f<64?g="#":f<128?g="+":f<192?g=".":g=" ",r.append(g)}r.append(`
`)}return r.toString()}}class ke extends ye{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,r){const s=this.delegate.getRow(e,r),a=this.getWidth();for(let c=0;c<a;c++)s[c]=255-(s[c]&255);return s}getMatrix(){const e=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),s=new Uint8ClampedArray(r);for(let a=0;a<r;a++)s[a]=255-(e[a]&255);return s}isCropSupported(){return this.delegate.isCropSupported()}crop(e,r,s,a){return new ke(this.delegate.crop(e,r,s,a))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new ke(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new ke(this.delegate.rotateCounterClockwise45())}}class ce extends ye{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=ce.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const r=e.getContext("2d").getImageData(0,0,e.width,e.height);return ce.toGrayscaleBuffer(r.data,e.width,e.height)}static toGrayscaleBuffer(e,r,s){const a=new Uint8ClampedArray(r*s);for(let c=0,f=0,g=e.length;c<g;c+=4,f++){let x;if(e[c+3]===0)x=255;else{const v=e[c],T=e[c+1],R=e[c+2];x=306*v+601*T+117*R+512>>10}a[f]=x}return a}getRow(e,r){if(e<0||e>=this.getHeight())throw new b("Requested row is outside the image: "+e);const s=this.getWidth(),a=e*s;return r===null?r=this.buffer.slice(a,a+s):(r.length<s&&(r=new Uint8ClampedArray(s)),r.set(this.buffer.slice(a,a+s))),r}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,r,s,a){return super.crop(e,r,s,a),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const r=this.getTempCanvasElement(),s=r.getContext("2d"),a=e*ce.DEGREE_TO_RADIANS,c=this.canvas.width,f=this.canvas.height,g=Math.ceil(Math.abs(Math.cos(a))*c+Math.abs(Math.sin(a))*f),x=Math.ceil(Math.abs(Math.sin(a))*c+Math.abs(Math.cos(a))*f);return r.width=g,r.height=x,s.translate(g/2,x/2),s.rotate(a),s.drawImage(this.canvas,c/-2,f/-2),this.buffer=ce.makeBufferFromCanvasImageData(r),this}invert(){return new ke(this)}}ce.DEGREE_TO_RADIANS=Math.PI/180;class H{constructor(e,r,s){this.deviceId=e,this.label=r,this.kind="videoinput",this.groupId=s||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var ee=(globalThis||tc||self||window||void 0)&&(globalThis||tc||self||window||void 0).__awaiter||function(I,e,r,s){function a(c){return c instanceof r?c:new r(function(f){f(c)})}return new(r||(r=Promise))(function(c,f){function g(v){try{_(s.next(v))}catch(T){f(T)}}function x(v){try{_(s.throw(v))}catch(T){f(T)}}function _(v){v.done?c(v.value):a(v.value).then(g,x)}_((s=s.apply(I,e||[])).next())})};class Ge{constructor(e,r=500,s){this.reader=e,this.timeBetweenScansMillis=r,this._hints=s,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return ee(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),r=[];for(const s of e){const a=s.kind==="video"?"videoinput":s.kind;if(a!=="videoinput")continue;const c=s.deviceId||s.id,f=s.label||`Video device ${r.length+1}`,g=s.groupId,x={deviceId:c,label:f,kind:a,groupId:g};r.push(x)}return r})}getVideoInputDevices(){return ee(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(r=>new H(r.deviceId,r.label))})}findDeviceById(e){return ee(this,void 0,void 0,function*(){const r=yield this.listVideoInputDevices();return r?r.find(s=>s.deviceId===e):null})}decodeFromInputVideoDevice(e,r){return ee(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,r)})}decodeOnceFromVideoDevice(e,r){return ee(this,void 0,void 0,function*(){this.reset();let s;e?s={deviceId:{exact:e}}:s={facingMode:"environment"};const a={video:s};return yield this.decodeOnceFromConstraints(a,r)})}decodeOnceFromConstraints(e,r){return ee(this,void 0,void 0,function*(){const s=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(s,r)})}decodeOnceFromStream(e,r){return ee(this,void 0,void 0,function*(){this.reset();const s=yield this.attachStreamToVideo(e,r);return yield this.decodeOnce(s)})}decodeFromInputVideoDeviceContinuously(e,r,s){return ee(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,r,s)})}decodeFromVideoDevice(e,r,s){return ee(this,void 0,void 0,function*(){let a;e?a={deviceId:{exact:e}}:a={facingMode:"environment"};const c={video:a};return yield this.decodeFromConstraints(c,r,s)})}decodeFromConstraints(e,r,s){return ee(this,void 0,void 0,function*(){const a=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(a,r,s)})}decodeFromStream(e,r,s){return ee(this,void 0,void 0,function*(){this.reset();const a=yield this.attachStreamToVideo(e,r);return yield this.decodeContinuously(a,s)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,r){return ee(this,void 0,void 0,function*(){const s=this.prepareVideoElement(r);return this.addVideoSource(s,e),this.videoElement=s,this.stream=e,yield this.playVideoOnLoadAsync(s),s})}playVideoOnLoadAsync(e){return new Promise((r,s)=>this.playVideoOnLoad(e,()=>r()))}playVideoOnLoad(e,r){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",r),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return ee(this,void 0,void 0,function*(){if(this.isVideoPlaying(e)){console.warn("Trying to play video that is already playing.");return}try{yield e.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(e,r){const s=document.getElementById(e);if(!s)throw new O(`element with id '${e}' not found`);if(s.nodeName.toLowerCase()!==r.toLowerCase())throw new O(`element with id '${e}' must be an ${r} element`);return s}decodeFromImage(e,r){if(!e&&!r)throw new O("either imageElement with a src set or an url must be provided");return r&&!e?this.decodeFromImageUrl(r):this.decodeFromImageElement(e)}decodeFromVideo(e,r){if(!e&&!r)throw new O("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,r,s){if(e===void 0&&r===void 0)throw new O("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrlContinuously(r,s):this.decodeFromVideoElementContinuously(e,s)}decodeFromImageElement(e){if(!e)throw new O("An image element must be provided.");this.reset();const r=this.prepareImageElement(e);this.imageElement=r;let s;return this.isImageLoaded(r)?s=this.decodeOnce(r,!1,!0):s=this._decodeOnLoadImage(r),s}decodeFromVideoElement(e){const r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(r)}decodeFromVideoElementContinuously(e,r){const s=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(s,r)}_decodeFromVideoElementSetup(e){if(!e)throw new O("A video element must be provided.");this.reset();const r=this.prepareVideoElement(e);return this.videoElement=r,r}decodeFromImageUrl(e){if(!e)throw new O("An URL must be provided.");this.reset();const r=this.prepareImageElement();this.imageElement=r;const s=this._decodeOnLoadImage(r);return r.src=e,s}decodeFromVideoUrl(e){if(!e)throw new O("An URL must be provided.");this.reset();const r=this.prepareVideoElement(),s=this.decodeFromVideoElement(r);return r.src=e,s}decodeFromVideoUrlContinuously(e,r){if(!e)throw new O("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),a=this.decodeFromVideoElementContinuously(s,r);return s.src=e,a}_decodeOnLoadImage(e){return new Promise((r,s)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(r,s),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return ee(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,r){return ee(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,r)})}isImageLoaded(e){return!(!e.complete||e.naturalWidth===0)}prepareImageElement(e){let r;return typeof e>"u"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(r=e),r}prepareVideoElement(e){let r;return!e&&typeof document<"u"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(r=e),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r}decodeOnce(e,r=!0,s=!0){this._stopAsyncDecode=!1;const a=(c,f)=>{if(this._stopAsyncDecode){f(new K("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const g=this.decode(e);c(g)}catch(g){const x=r&&g instanceof K,v=(g instanceof V||g instanceof Y)&&s;if(x||v)return setTimeout(a,this._timeBetweenDecodingAttempts,c,f);f(g)}};return new Promise((c,f)=>a(c,f))}decodeContinuously(e,r){this._stopContinuousDecode=!1;const s=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const a=this.decode(e);r(a,null),setTimeout(s,this.timeBetweenScansMillis)}catch(a){r(null,a);const c=a instanceof V||a instanceof Y,f=a instanceof K;(c||f)&&setTimeout(s,this._timeBetweenDecodingAttempts)}};s()}decode(e){const r=this.createBinaryBitmap(e);return this.decodeBitmap(r)}_isHTMLVideoElement(e){return e.videoWidth!==0}drawFrameOnCanvas(e,r,s){r||(r={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),s||(s=this.captureCanvasContext),s.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)}drawImageOnCanvas(e,r,s=this.captureCanvasContext){r||(r={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),s||(s=this.captureCanvasContext),s.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const r=this.getCaptureCanvas(e),s=new ce(r),a=new Re(s);return new k(a)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const s=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=s}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const r=this.createCaptureCanvas(e);this.captureCanvas=r}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const r=document.createElement("canvas");let s,a;return typeof e<"u"&&(e instanceof HTMLVideoElement?(s=e.videoWidth,a=e.videoHeight):e instanceof HTMLImageElement&&(s=e.naturalWidth||e.width,a=e.naturalHeight||e.height)),r.style.width=s+"px",r.style.height=a+"px",r.width=s,r.height=a,r}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,r){try{e.srcObject=r}catch{e.src=URL.createObjectURL(r)}}cleanVideoSource(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")}}class Ve{constructor(e,r,s=r==null?0:8*r.length,a,c,f=$.currentTimeMillis()){this.text=e,this.rawBytes=r,this.numBits=s,this.resultPoints=a,this.format=c,this.timestamp=f,this.text=e,this.rawBytes=r,s==null?this.numBits=r==null?0:8*r.length:this.numBits=s,this.resultPoints=a,this.format=c,this.resultMetadata=null,f==null?this.timestamp=$.currentTimeMillis():this.timestamp=f}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,r)}putAllMetadata(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const r=this.resultPoints;if(r===null)this.resultPoints=e;else if(e!==null&&e.length>0){const s=new Array(r.length+e.length);$.arraycopy(r,0,s,0,r.length),$.arraycopy(e,0,s,r.length,e.length),this.resultPoints=s}}getTimestamp(){return this.timestamp}toString(){return this.text}}var tt;(function(I){I[I.AZTEC=0]="AZTEC",I[I.CODABAR=1]="CODABAR",I[I.CODE_39=2]="CODE_39",I[I.CODE_93=3]="CODE_93",I[I.CODE_128=4]="CODE_128",I[I.DATA_MATRIX=5]="DATA_MATRIX",I[I.EAN_8=6]="EAN_8",I[I.EAN_13=7]="EAN_13",I[I.ITF=8]="ITF",I[I.MAXICODE=9]="MAXICODE",I[I.PDF_417=10]="PDF_417",I[I.QR_CODE=11]="QR_CODE",I[I.RSS_14=12]="RSS_14",I[I.RSS_EXPANDED=13]="RSS_EXPANDED",I[I.UPC_A=14]="UPC_A",I[I.UPC_E=15]="UPC_E",I[I.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(tt||(tt={}));var we=tt,nt;(function(I){I[I.OTHER=0]="OTHER",I[I.ORIENTATION=1]="ORIENTATION",I[I.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",I[I.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",I[I.ISSUE_NUMBER=4]="ISSUE_NUMBER",I[I.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",I[I.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",I[I.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",I[I.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",I[I.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",I[I.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(nt||(nt={}));var Be=nt;class at{constructor(e,r,s,a,c=-1,f=-1){this.rawBytes=e,this.text=r,this.byteSegments=s,this.ecLevel=a,this.structuredAppendSequenceNumber=c,this.structuredAppendParity=f,this.numBits=e==null?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Wt{exp(e){return this.expTable[e]}log(e){if(e===0)throw new b;return this.logTable[e]}static addOrSubtract(e,r){return e^r}}class an{constructor(e,r){if(r.length===0)throw new b;this.field=e;const s=r.length;if(s>1&&r[0]===0){let a=1;for(;a<s&&r[a]===0;)a++;a===s?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(s-a),$.arraycopy(r,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);const r=this.coefficients;let s;if(e===1){s=0;for(let f=0,g=r.length;f!==g;f++){const x=r[f];s=Wt.addOrSubtract(s,x)}return s}s=r[0];const a=r.length,c=this.field;for(let f=1;f<a;f++)s=Wt.addOrSubtract(c.multiply(e,s),r[f]);return s}addOrSubtract(e){if(!this.field.equals(e.field))throw new b("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let r=this.coefficients,s=e.coefficients;if(r.length>s.length){const f=r;r=s,s=f}let a=new Int32Array(s.length);const c=s.length-r.length;$.arraycopy(s,0,a,0,c);for(let f=c;f<s.length;f++)a[f]=Wt.addOrSubtract(r[f-c],s[f]);return new an(this.field,a)}multiply(e){if(!this.field.equals(e.field))throw new b("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const r=this.coefficients,s=r.length,a=e.coefficients,c=a.length,f=new Int32Array(s+c-1),g=this.field;for(let x=0;x<s;x++){const _=r[x];for(let v=0;v<c;v++)f[x+v]=Wt.addOrSubtract(f[x+v],g.multiply(_,a[v]))}return new an(g,f)}multiplyScalar(e){if(e===0)return this.field.getZero();if(e===1)return this;const r=this.coefficients.length,s=this.field,a=new Int32Array(r),c=this.coefficients;for(let f=0;f<r;f++)a[f]=s.multiply(c[f],e);return new an(s,a)}multiplyByMonomial(e,r){if(e<0)throw new b;if(r===0)return this.field.getZero();const s=this.coefficients,a=s.length,c=new Int32Array(a+e),f=this.field;for(let g=0;g<a;g++)c[g]=f.multiply(s[g],r);return new an(f,c)}divide(e){if(!this.field.equals(e.field))throw new b("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new b("Divide by 0");const r=this.field;let s=r.getZero(),a=this;const c=e.getCoefficient(e.getDegree()),f=r.inverse(c);for(;a.getDegree()>=e.getDegree()&&!a.isZero();){const g=a.getDegree()-e.getDegree(),x=r.multiply(a.getCoefficient(a.getDegree()),f),_=e.multiplyByMonomial(g,x),v=r.buildMonomial(g,x);s=s.addOrSubtract(v),a=a.addOrSubtract(_)}return[s,a]}toString(){let e="";for(let r=this.getDegree();r>=0;r--){let s=this.getCoefficient(r);if(s!==0){if(s<0?(e+=" - ",s=-s):e.length>0&&(e+=" + "),r===0||s!==1){const a=this.field.log(s);a===0?e+="1":a===1?e+="a":(e+="a^",e+=a)}r!==0&&(r===1?e+="x":(e+="x^",e+=r))}}return e}}class rs extends E{}rs.kind="ArithmeticException";class ht extends Wt{constructor(e,r,s){super(),this.primitive=e,this.size=r,this.generatorBase=s;const a=new Int32Array(r);let c=1;for(let g=0;g<r;g++)a[g]=c,c*=2,c>=r&&(c^=e,c&=r-1);this.expTable=a;const f=new Int32Array(r);for(let g=0;g<r-1;g++)f[a[g]]=g;this.logTable=f,this.zero=new an(this,Int32Array.from([0])),this.one=new an(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,r){if(e<0)throw new b;if(r===0)return this.zero;const s=new Int32Array(e+1);return s[0]=r,new an(this,s)}inverse(e){if(e===0)throw new rs;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+te.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}ht.AZTEC_DATA_12=new ht(4201,4096,1),ht.AZTEC_DATA_10=new ht(1033,1024,1),ht.AZTEC_DATA_6=new ht(67,64,1),ht.AZTEC_PARAM=new ht(19,16,1),ht.QR_CODE_FIELD_256=new ht(285,256,0),ht.DATA_MATRIX_FIELD_256=new ht(301,256,1),ht.AZTEC_DATA_8=ht.DATA_MATRIX_FIELD_256,ht.MAXICODE_FIELD_64=ht.AZTEC_DATA_6;class zr extends E{}zr.kind="ReedSolomonException";class sr extends E{}sr.kind="IllegalStateException";class Ei{constructor(e){this.field=e}decode(e,r){const s=this.field,a=new an(s,e),c=new Int32Array(r);let f=!0;for(let M=0;M<r;M++){const L=a.evaluateAt(s.exp(M+s.getGeneratorBase()));c[c.length-1-M]=L,L!==0&&(f=!1)}if(f)return;const g=new an(s,c),x=this.runEuclideanAlgorithm(s.buildMonomial(r,1),g,r),_=x[0],v=x[1],T=this.findErrorLocations(_),R=this.findErrorMagnitudes(v,T);for(let M=0;M<T.length;M++){const L=e.length-1-s.log(T[M]);if(L<0)throw new zr("Bad error location");e[L]=ht.addOrSubtract(e[L],R[M])}}runEuclideanAlgorithm(e,r,s){if(e.getDegree()<r.getDegree()){const M=e;e=r,r=M}const a=this.field;let c=e,f=r,g=a.getZero(),x=a.getOne();for(;f.getDegree()>=(s/2|0);){let M=c,L=g;if(c=f,g=x,c.isZero())throw new zr("r_{i-1} was zero");f=M;let F=a.getZero();const W=c.getCoefficient(c.getDegree()),q=a.inverse(W);for(;f.getDegree()>=c.getDegree()&&!f.isZero();){const he=f.getDegree()-c.getDegree(),ge=a.multiply(f.getCoefficient(f.getDegree()),q);F=F.addOrSubtract(a.buildMonomial(he,ge)),f=f.addOrSubtract(c.multiplyByMonomial(he,ge))}if(x=F.multiply(g).addOrSubtract(L),f.getDegree()>=c.getDegree())throw new sr("Division algorithm failed to reduce polynomial?")}const _=x.getCoefficient(0);if(_===0)throw new zr("sigmaTilde(0) was zero");const v=a.inverse(_),T=x.multiplyScalar(v),R=f.multiplyScalar(v);return[T,R]}findErrorLocations(e){const r=e.getDegree();if(r===1)return Int32Array.from([e.getCoefficient(1)]);const s=new Int32Array(r);let a=0;const c=this.field;for(let f=1;f<c.getSize()&&a<r;f++)e.evaluateAt(f)===0&&(s[a]=c.inverse(f),a++);if(a!==r)throw new zr("Error locator degree does not match number of roots");return s}findErrorMagnitudes(e,r){const s=r.length,a=new Int32Array(s),c=this.field;for(let f=0;f<s;f++){const g=c.inverse(r[f]);let x=1;for(let _=0;_<s;_++)if(f!==_){const v=c.multiply(r[_],g),T=(v&1)===0?v|1:v&-2;x=c.multiply(x,T)}a[f]=c.multiply(e.evaluateAt(g),c.inverse(x)),c.getGeneratorBase()!==0&&(a[f]=c.multiply(a[f],g))}return a}}var $t;(function(I){I[I.UPPER=0]="UPPER",I[I.LOWER=1]="LOWER",I[I.MIXED=2]="MIXED",I[I.DIGIT=3]="DIGIT",I[I.PUNCT=4]="PUNCT",I[I.BINARY=5]="BINARY"})($t||($t={}));class At{decode(e){this.ddata=e;let r=e.getBits(),s=this.extractBits(r),a=this.correctBits(s),c=At.convertBoolArrayToByteArray(a),f=At.getEncodedData(a),g=new at(c,f,null,null);return g.setNumBits(a.length),g}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let r=e.length,s=$t.UPPER,a=$t.UPPER,c="",f=0;for(;f<r;)if(a===$t.BINARY){if(r-f<5)break;let g=At.readCode(e,f,5);if(f+=5,g===0){if(r-f<11)break;g=At.readCode(e,f,11)+31,f+=11}for(let x=0;x<g;x++){if(r-f<8){f=r;break}const _=At.readCode(e,f,8);c+=re.castAsNonUtf8Char(_),f+=8}a=s}else{let g=a===$t.DIGIT?4:5;if(r-f<g)break;let x=At.readCode(e,f,g);f+=g;let _=At.getCharacter(a,x);_.startsWith("CTRL_")?(s=a,a=At.getTable(_.charAt(5)),_.charAt(6)==="L"&&(s=a)):(c+=_,a=s)}return c}static getTable(e){switch(e){case"L":return $t.LOWER;case"P":return $t.PUNCT;case"M":return $t.MIXED;case"D":return $t.DIGIT;case"B":return $t.BINARY;default:return $t.UPPER}}static getCharacter(e,r){switch(e){case $t.UPPER:return At.UPPER_TABLE[r];case $t.LOWER:return At.LOWER_TABLE[r];case $t.MIXED:return At.MIXED_TABLE[r];case $t.PUNCT:return At.PUNCT_TABLE[r];case $t.DIGIT:return At.DIGIT_TABLE[r];default:throw new sr("Bad table")}}correctBits(e){let r,s;this.ddata.getNbLayers()<=2?(s=6,r=ht.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(s=8,r=ht.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(s=10,r=ht.AZTEC_DATA_10):(s=12,r=ht.AZTEC_DATA_12);let a=this.ddata.getNbDatablocks(),c=e.length/s;if(c<a)throw new Y;let f=e.length%s,g=new Int32Array(c);for(let R=0;R<c;R++,f+=s)g[R]=At.readCode(e,f,s);try{new Ei(r).decode(g,c-a)}catch(R){throw new Y(R)}let x=(1<<s)-1,_=0;for(let R=0;R<a;R++){let M=g[R];if(M===0||M===x)throw new Y;(M===1||M===x-1)&&_++}let v=new Array(a*s-_),T=0;for(let R=0;R<a;R++){let M=g[R];if(M===1||M===x-1)v.fill(M>1,T,T+s-1),T+=s-1;else for(let L=s-1;L>=0;--L)v[T++]=(M&1<<L)!==0}return v}extractBits(e){let r=this.ddata.isCompact(),s=this.ddata.getNbLayers(),a=(r?11:14)+s*4,c=new Int32Array(a),f=new Array(this.totalBitsInLayer(s,r));if(r)for(let g=0;g<c.length;g++)c[g]=g;else{let g=a+1+2*te.truncDivision(te.truncDivision(a,2)-1,15),x=a/2,_=te.truncDivision(g,2);for(let v=0;v<x;v++){let T=v+te.truncDivision(v,15);c[x-v-1]=_-T-1,c[x+v]=_+T+1}}for(let g=0,x=0;g<s;g++){let _=(s-g)*4+(r?9:12),v=g*2,T=a-1-v;for(let R=0;R<_;R++){let M=R*2;for(let L=0;L<2;L++)f[x+M+L]=e.get(c[v+L],c[v+R]),f[x+2*_+M+L]=e.get(c[v+R],c[T-L]),f[x+4*_+M+L]=e.get(c[T-L],c[T-R]),f[x+6*_+M+L]=e.get(c[T-R],c[v+L])}x+=_*8}return f}static readCode(e,r,s){let a=0;for(let c=r;c<r+s;c++)a<<=1,e[c]&&(a|=1);return a}static readByte(e,r){let s=e.length-r;return s>=8?At.readCode(e,r,8):At.readCode(e,r,s)<<8-s}static convertBoolArrayToByteArray(e){let r=new Uint8Array((e.length+7)/8);for(let s=0;s<r.length;s++)r[s]=At.readByte(e,8*s);return r}totalBitsInLayer(e,r){return((r?88:112)+16*e)*e}}At.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],At.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],At.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],At.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],At.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class ct{constructor(){}static round(e){return e===NaN?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,r,s,a){const c=e-s,f=r-a;return Math.sqrt(c*c+f*f)}static sum(e){let r=0;for(let s=0,a=e.length;s!==a;s++){const c=e[s];r+=c}return r}}class Gr{static floatToIntBits(e){return e}}Gr.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Ne{constructor(e,r){this.x=e,this.y=r}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof Ne){const r=e;return this.x===r.x&&this.y===r.y}return!1}hashCode(){return 31*Gr.floatToIntBits(this.x)+Gr.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const r=this.distance(e[0],e[1]),s=this.distance(e[1],e[2]),a=this.distance(e[0],e[2]);let c,f,g;if(s>=r&&s>=a?(f=e[0],c=e[1],g=e[2]):a>=s&&a>=r?(f=e[1],c=e[0],g=e[2]):(f=e[2],c=e[0],g=e[1]),this.crossProductZ(c,f,g)<0){const x=c;c=g,g=x}e[0]=c,e[1]=f,e[2]=g}static distance(e,r){return ct.distance(e.x,e.y,r.x,r.y)}static crossProductZ(e,r,s){const a=r.x,c=r.y;return(s.x-a)*(e.y-c)-(s.y-c)*(e.x-a)}}class Ai{constructor(e,r){this.bits=e,this.points=r}getBits(){return this.bits}getPoints(){return this.points}}class Mo extends Ai{constructor(e,r,s,a,c){super(e,r),this.compact=s,this.nbDatablocks=a,this.nbLayers=c}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class wr{constructor(e,r,s,a){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),r==null&&(r=wr.INIT_SIZE),s==null&&(s=e.getWidth()/2|0),a==null&&(a=e.getHeight()/2|0);const c=r/2|0;if(this.leftInit=s-c,this.rightInit=s+c,this.upInit=a-c,this.downInit=a+c,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new K}detect(){let e=this.leftInit,r=this.rightInit,s=this.upInit,a=this.downInit,c=!1,f=!0,g=!1,x=!1,_=!1,v=!1,T=!1;const R=this.width,M=this.height;for(;f;){f=!1;let L=!0;for(;(L||!x)&&r<R;)L=this.containsBlackPoint(s,a,r,!1),L?(r++,f=!0,x=!0):x||r++;if(r>=R){c=!0;break}let F=!0;for(;(F||!_)&&a<M;)F=this.containsBlackPoint(e,r,a,!0),F?(a++,f=!0,_=!0):_||a++;if(a>=M){c=!0;break}let W=!0;for(;(W||!v)&&e>=0;)W=this.containsBlackPoint(s,a,e,!1),W?(e--,f=!0,v=!0):v||e--;if(e<0){c=!0;break}let q=!0;for(;(q||!T)&&s>=0;)q=this.containsBlackPoint(e,r,s,!0),q?(s--,f=!0,T=!0):T||s--;if(s<0){c=!0;break}f&&(g=!0)}if(!c&&g){const L=r-e;let F=null;for(let ge=1;F===null&&ge<L;ge++)F=this.getBlackPointOnSegment(e,a-ge,e+ge,a);if(F==null)throw new K;let W=null;for(let ge=1;W===null&&ge<L;ge++)W=this.getBlackPointOnSegment(e,s+ge,e+ge,s);if(W==null)throw new K;let q=null;for(let ge=1;q===null&&ge<L;ge++)q=this.getBlackPointOnSegment(r,s+ge,r-ge,s);if(q==null)throw new K;let he=null;for(let ge=1;he===null&&ge<L;ge++)he=this.getBlackPointOnSegment(r,a-ge,r-ge,a);if(he==null)throw new K;return this.centerEdges(he,F,q,W)}else throw new K}getBlackPointOnSegment(e,r,s,a){const c=ct.round(ct.distance(e,r,s,a)),f=(s-e)/c,g=(a-r)/c,x=this.image;for(let _=0;_<c;_++){const v=ct.round(e+_*f),T=ct.round(r+_*g);if(x.get(v,T))return new Ne(v,T)}return null}centerEdges(e,r,s,a){const c=e.getX(),f=e.getY(),g=r.getX(),x=r.getY(),_=s.getX(),v=s.getY(),T=a.getX(),R=a.getY(),M=wr.CORR;return c<this.width/2?[new Ne(T-M,R+M),new Ne(g+M,x+M),new Ne(_-M,v-M),new Ne(c+M,f-M)]:[new Ne(T+M,R+M),new Ne(g+M,x-M),new Ne(_-M,v+M),new Ne(c-M,f-M)]}containsBlackPoint(e,r,s,a){const c=this.image;if(a){for(let f=e;f<=r;f++)if(c.get(f,s))return!0}else for(let f=e;f<=r;f++)if(c.get(s,f))return!0;return!1}}wr.INIT_SIZE=10,wr.CORR=1;class Hs{static checkAndNudgePoints(e,r){const s=e.getWidth(),a=e.getHeight();let c=!0;for(let f=0;f<r.length&&c;f+=2){const g=Math.floor(r[f]),x=Math.floor(r[f+1]);if(g<-1||g>s||x<-1||x>a)throw new K;c=!1,g===-1?(r[f]=0,c=!0):g===s&&(r[f]=s-1,c=!0),x===-1?(r[f+1]=0,c=!0):x===a&&(r[f+1]=a-1,c=!0)}c=!0;for(let f=r.length-2;f>=0&&c;f-=2){const g=Math.floor(r[f]),x=Math.floor(r[f+1]);if(g<-1||g>s||x<-1||x>a)throw new K;c=!1,g===-1?(r[f]=0,c=!0):g===s&&(r[f]=s-1,c=!0),x===-1?(r[f+1]=0,c=!0):x===a&&(r[f+1]=a-1,c=!0)}}}class jn{constructor(e,r,s,a,c,f,g,x,_){this.a11=e,this.a21=r,this.a31=s,this.a12=a,this.a22=c,this.a32=f,this.a13=g,this.a23=x,this.a33=_}static quadrilateralToQuadrilateral(e,r,s,a,c,f,g,x,_,v,T,R,M,L,F,W){const q=jn.quadrilateralToSquare(e,r,s,a,c,f,g,x);return jn.squareToQuadrilateral(_,v,T,R,M,L,F,W).times(q)}transformPoints(e){const r=e.length,s=this.a11,a=this.a12,c=this.a13,f=this.a21,g=this.a22,x=this.a23,_=this.a31,v=this.a32,T=this.a33;for(let R=0;R<r;R+=2){const M=e[R],L=e[R+1],F=c*M+x*L+T;e[R]=(s*M+f*L+_)/F,e[R+1]=(a*M+g*L+v)/F}}transformPointsWithValues(e,r){const s=this.a11,a=this.a12,c=this.a13,f=this.a21,g=this.a22,x=this.a23,_=this.a31,v=this.a32,T=this.a33,R=e.length;for(let M=0;M<R;M++){const L=e[M],F=r[M],W=c*L+x*F+T;e[M]=(s*L+f*F+_)/W,r[M]=(a*L+g*F+v)/W}}static squareToQuadrilateral(e,r,s,a,c,f,g,x){const _=e-s+c-g,v=r-a+f-x;if(_===0&&v===0)return new jn(s-e,c-s,e,a-r,f-a,r,0,0,1);{const T=s-c,R=g-c,M=a-f,L=x-f,F=T*L-R*M,W=(_*L-R*v)/F,q=(T*v-_*M)/F;return new jn(s-e+W*s,g-e+q*g,e,a-r+W*a,x-r+q*x,r,W,q,1)}}static quadrilateralToSquare(e,r,s,a,c,f,g,x){return jn.squareToQuadrilateral(e,r,s,a,c,f,g,x).buildAdjoint()}buildAdjoint(){return new jn(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new jn(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class Ws extends Hs{sampleGrid(e,r,s,a,c,f,g,x,_,v,T,R,M,L,F,W,q,he,ge){const le=jn.quadrilateralToQuadrilateral(a,c,f,g,x,_,v,T,R,M,L,F,W,q,he,ge);return this.sampleGridWithTransform(e,r,s,le)}sampleGridWithTransform(e,r,s,a){if(r<=0||s<=0)throw new K;const c=new Se(r,s),f=new Float32Array(2*r);for(let g=0;g<s;g++){const x=f.length,_=g+.5;for(let v=0;v<x;v+=2)f[v]=v/2+.5,f[v+1]=_;a.transformPoints(f),Hs.checkAndNudgePoints(e,f);try{for(let v=0;v<x;v+=2)e.get(Math.floor(f[v]),Math.floor(f[v+1]))&&c.set(v/2,g)}catch{throw new K}}return c}}class or{static setGridSampler(e){or.gridSampler=e}static getInstance(){return or.gridSampler}}or.gridSampler=new Ws;class xn{constructor(e,r){this.x=e,this.y=r}toResultPoint(){return new Ne(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class vi{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let r=this.getMatrixCenter(),s=this.getBullsEyeCorners(r);if(e){let f=s[0];s[0]=s[2],s[2]=f}this.extractParameters(s);let a=this.sampleGrid(this.image,s[this.shift%4],s[(this.shift+1)%4],s[(this.shift+2)%4],s[(this.shift+3)%4]),c=this.getMatrixCornerPoints(s);return new Mo(a,c,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new K;let r=2*this.nbCenterLayers,s=new Int32Array([this.sampleLine(e[0],e[1],r),this.sampleLine(e[1],e[2],r),this.sampleLine(e[2],e[3],r),this.sampleLine(e[3],e[0],r)]);this.shift=this.getRotation(s,r);let a=0;for(let f=0;f<4;f++){let g=s[(this.shift+f)%4];this.compact?(a<<=7,a+=g>>1&127):(a<<=10,a+=(g>>2&992)+(g>>1&31))}let c=this.getCorrectedParameterData(a,this.compact);this.compact?(this.nbLayers=(c>>6)+1,this.nbDataBlocks=(c&63)+1):(this.nbLayers=(c>>11)+1,this.nbDataBlocks=(c&2047)+1)}getRotation(e,r){let s=0;e.forEach((a,c,f)=>{let g=(a>>r-2<<1)+(a&1);s=(s<<3)+g}),s=((s&1)<<11)+(s>>1);for(let a=0;a<4;a++)if(te.bitCount(s^this.EXPECTED_CORNER_BITS[a])<=2)return a;throw new K}getCorrectedParameterData(e,r){let s,a;r?(s=7,a=2):(s=10,a=4);let c=s-a,f=new Int32Array(s);for(let x=s-1;x>=0;--x)f[x]=e&15,e>>=4;try{new Ei(ht.AZTEC_PARAM).decode(f,c)}catch{throw new K}let g=0;for(let x=0;x<a;x++)g=(g<<4)+f[x];return g}getBullsEyeCorners(e){let r=e,s=e,a=e,c=e,f=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let T=this.getFirstDifferent(r,f,1,-1),R=this.getFirstDifferent(s,f,1,1),M=this.getFirstDifferent(a,f,-1,1),L=this.getFirstDifferent(c,f,-1,-1);if(this.nbCenterLayers>2){let F=this.distancePoint(L,T)*this.nbCenterLayers/(this.distancePoint(c,r)*(this.nbCenterLayers+2));if(F<.75||F>1.25||!this.isWhiteOrBlackRectangle(T,R,M,L))break}r=T,s=R,a=M,c=L,f=!f}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new K;this.compact=this.nbCenterLayers===5;let g=new Ne(r.getX()+.5,r.getY()-.5),x=new Ne(s.getX()+.5,s.getY()+.5),_=new Ne(a.getX()-.5,a.getY()+.5),v=new Ne(c.getX()-.5,c.getY()-.5);return this.expandSquare([g,x,_,v],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,r,s,a;try{let g=new wr(this.image).detect();e=g[0],r=g[1],s=g[2],a=g[3]}catch{let x=this.image.getWidth()/2,_=this.image.getHeight()/2;e=this.getFirstDifferent(new xn(x+7,_-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new xn(x+7,_+7),!1,1,1).toResultPoint(),s=this.getFirstDifferent(new xn(x-7,_+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new xn(x-7,_-7),!1,-1,-1).toResultPoint()}let c=ct.round((e.getX()+a.getX()+r.getX()+s.getX())/4),f=ct.round((e.getY()+a.getY()+r.getY()+s.getY())/4);try{let g=new wr(this.image,15,c,f).detect();e=g[0],r=g[1],s=g[2],a=g[3]}catch{e=this.getFirstDifferent(new xn(c+7,f-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new xn(c+7,f+7),!1,1,1).toResultPoint(),s=this.getFirstDifferent(new xn(c-7,f+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new xn(c-7,f-7),!1,-1,-1).toResultPoint()}return c=ct.round((e.getX()+a.getX()+r.getX()+s.getX())/4),f=ct.round((e.getY()+a.getY()+r.getY()+s.getY())/4),new xn(c,f)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,r,s,a,c){let f=or.getInstance(),g=this.getDimension(),x=g/2-this.nbCenterLayers,_=g/2+this.nbCenterLayers;return f.sampleGrid(e,g,g,x,x,_,x,_,_,x,_,r.getX(),r.getY(),s.getX(),s.getY(),a.getX(),a.getY(),c.getX(),c.getY())}sampleLine(e,r,s){let a=0,c=this.distanceResultPoint(e,r),f=c/s,g=e.getX(),x=e.getY(),_=f*(r.getX()-e.getX())/c,v=f*(r.getY()-e.getY())/c;for(let T=0;T<s;T++)this.image.get(ct.round(g+T*_),ct.round(x+T*v))&&(a|=1<<s-T-1);return a}isWhiteOrBlackRectangle(e,r,s,a){let c=3;e=new xn(e.getX()-c,e.getY()+c),r=new xn(r.getX()-c,r.getY()-c),s=new xn(s.getX()+c,s.getY()-c),a=new xn(a.getX()+c,a.getY()+c);let f=this.getColor(a,e);if(f===0)return!1;let g=this.getColor(e,r);return g!==f||(g=this.getColor(r,s),g!==f)?!1:(g=this.getColor(s,a),g===f)}getColor(e,r){let s=this.distancePoint(e,r),a=(r.getX()-e.getX())/s,c=(r.getY()-e.getY())/s,f=0,g=e.getX(),x=e.getY(),_=this.image.get(e.getX(),e.getY()),v=Math.ceil(s);for(let R=0;R<v;R++)g+=a,x+=c,this.image.get(ct.round(g),ct.round(x))!==_&&f++;let T=f/s;return T>.1&&T<.9?0:T<=.1===_?1:-1}getFirstDifferent(e,r,s,a){let c=e.getX()+s,f=e.getY()+a;for(;this.isValid(c,f)&&this.image.get(c,f)===r;)c+=s,f+=a;for(c-=s,f-=a;this.isValid(c,f)&&this.image.get(c,f)===r;)c+=s;for(c-=s;this.isValid(c,f)&&this.image.get(c,f)===r;)f+=a;return f-=a,new xn(c,f)}expandSquare(e,r,s){let a=s/(2*r),c=e[0].getX()-e[2].getX(),f=e[0].getY()-e[2].getY(),g=(e[0].getX()+e[2].getX())/2,x=(e[0].getY()+e[2].getY())/2,_=new Ne(g+a*c,x+a*f),v=new Ne(g-a*c,x-a*f);c=e[1].getX()-e[3].getX(),f=e[1].getY()-e[3].getY(),g=(e[1].getX()+e[3].getX())/2,x=(e[1].getY()+e[3].getY())/2;let T=new Ne(g+a*c,x+a*f),R=new Ne(g-a*c,x-a*f);return[_,T,v,R]}isValid(e,r){return e>=0&&e<this.image.getWidth()&&r>0&&r<this.image.getHeight()}isValidPoint(e){let r=ct.round(e.getX()),s=ct.round(e.getY());return this.isValid(r,s)}distancePoint(e,r){return ct.distance(e.getX(),e.getY(),r.getX(),r.getY())}distanceResultPoint(e,r){return ct.distance(e.getX(),e.getY(),r.getX(),r.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(te.truncDivision(this.nbLayers-4,8)+1)+15}}class jr{decode(e,r=null){let s=null,a=new vi(e.getBlackMatrix()),c=null,f=null;try{let v=a.detectMirror(!1);c=v.getPoints(),this.reportFoundResultPoints(r,c),f=new At().decode(v)}catch(v){s=v}if(f==null)try{let v=a.detectMirror(!0);c=v.getPoints(),this.reportFoundResultPoints(r,c),f=new At().decode(v)}catch(v){throw s??v}let g=new Ve(f.getText(),f.getRawBytes(),f.getNumBits(),c,we.AZTEC,$.currentTimeMillis()),x=f.getByteSegments();x!=null&&g.putMetadata(Be.BYTE_SEGMENTS,x);let _=f.getECLevel();return _!=null&&g.putMetadata(Be.ERROR_CORRECTION_LEVEL,_),g}reportFoundResultPoints(e,r){if(e!=null){let s=e.get(ie.NEED_RESULT_POINT_CALLBACK);s!=null&&r.forEach((a,c,f)=>{s.foundPossibleResultPoint(a)})}}reset(){}}class Fc extends Ge{constructor(e=500){super(new jr,e)}}class zt{decode(e,r){try{return this.doDecode(e,r)}catch{if(r&&r.get(ie.TRY_HARDER)===!0&&e.isRotateSupported()){const c=e.rotateCounterClockwise(),f=this.doDecode(c,r),g=f.getResultMetadata();let x=270;g!==null&&g.get(Be.ORIENTATION)===!0&&(x=x+g.get(Be.ORIENTATION)%360),f.putMetadata(Be.ORIENTATION,x);const _=f.getResultPoints();if(_!==null){const v=c.getHeight();for(let T=0;T<_.length;T++)_[T]=new Ne(v-_[T].getY()-1,_[T].getX())}return f}else throw new K}}reset(){}doDecode(e,r){const s=e.getWidth(),a=e.getHeight();let c=new oe(s);const f=r&&r.get(ie.TRY_HARDER)===!0,g=Math.max(1,a>>(f?8:5));let x;f?x=a:x=15;const _=Math.trunc(a/2);for(let v=0;v<x;v++){const T=Math.trunc((v+1)/2),R=(v&1)===0,M=_+g*(R?T:-T);if(M<0||M>=a)break;try{c=e.getBlackRow(M,c)}catch{continue}for(let L=0;L<2;L++){if(L===1&&(c.reverse(),r&&r.get(ie.NEED_RESULT_POINT_CALLBACK)===!0)){const F=new Map;r.forEach((W,q)=>F.set(q,W)),F.delete(ie.NEED_RESULT_POINT_CALLBACK),r=F}try{const F=this.decodeRow(M,c,r);if(L===1){F.putMetadata(Be.ORIENTATION,180);const W=F.getResultPoints();W!==null&&(W[0]=new Ne(s-W[0].getX()-1,W[0].getY()),W[1]=new Ne(s-W[1].getX()-1,W[1].getY()))}return F}catch{}}}throw new K}static recordPattern(e,r,s){const a=s.length;for(let _=0;_<a;_++)s[_]=0;const c=e.getSize();if(r>=c)throw new K;let f=!e.get(r),g=0,x=r;for(;x<c;){if(e.get(x)!==f)s[g]++;else{if(++g===a)break;s[g]=1,f=!f}x++}if(!(g===a||g===a-1&&x===c))throw new K}static recordPatternInReverse(e,r,s){let a=s.length,c=e.get(r);for(;r>0&&a>=0;)e.get(--r)!==c&&(a--,c=!c);if(a>=0)throw new K;zt.recordPattern(e,r+1,s)}static patternMatchVariance(e,r,s){const a=e.length;let c=0,f=0;for(let _=0;_<a;_++)c+=e[_],f+=r[_];if(c<f)return Number.POSITIVE_INFINITY;const g=c/f;s*=g;let x=0;for(let _=0;_<a;_++){const v=e[_],T=r[_]*g,R=v>T?v-T:T-v;if(R>s)return Number.POSITIVE_INFINITY;x+=R}return x/c}}class Ce extends zt{static findStartPattern(e){const r=e.getSize(),s=e.getNextSet(0);let a=0,c=Int32Array.from([0,0,0,0,0,0]),f=s,g=!1;const x=6;for(let _=s;_<r;_++)if(e.get(_)!==g)c[a]++;else{if(a===x-1){let v=Ce.MAX_AVG_VARIANCE,T=-1;for(let R=Ce.CODE_START_A;R<=Ce.CODE_START_C;R++){const M=zt.patternMatchVariance(c,Ce.CODE_PATTERNS[R],Ce.MAX_INDIVIDUAL_VARIANCE);M<v&&(v=M,T=R)}if(T>=0&&e.isRange(Math.max(0,f-(_-f)/2),f,!1))return Int32Array.from([f,_,T]);f+=c[0]+c[1],c=c.slice(2,c.length-1),c[a-1]=0,c[a]=0,a--}else a++;c[a]=1,g=!g}throw new K}static decodeCode(e,r,s){zt.recordPattern(e,s,r);let a=Ce.MAX_AVG_VARIANCE,c=-1;for(let f=0;f<Ce.CODE_PATTERNS.length;f++){const g=Ce.CODE_PATTERNS[f],x=this.patternMatchVariance(r,g,Ce.MAX_INDIVIDUAL_VARIANCE);x<a&&(a=x,c=f)}if(c>=0)return c;throw new K}decodeRow(e,r,s){const a=s&&s.get(ie.ASSUME_GS1)===!0,c=Ce.findStartPattern(r),f=c[2];let g=0;const x=new Uint8Array(20);x[g++]=f;let _;switch(f){case Ce.CODE_START_A:_=Ce.CODE_CODE_A;break;case Ce.CODE_START_B:_=Ce.CODE_CODE_B;break;case Ce.CODE_START_C:_=Ce.CODE_CODE_C;break;default:throw new Y}let v=!1,T=!1,R="",M=c[0],L=c[1];const F=Int32Array.from([0,0,0,0,0,0]);let W=0,q=0,he=f,ge=0,le=!0,rt=!1,qe=!1;for(;!v;){const Mr=T;switch(T=!1,W=q,q=Ce.decodeCode(r,F,L),x[g++]=q,q!==Ce.CODE_STOP&&(le=!0),q!==Ce.CODE_STOP&&(ge++,he+=ge*q),M=L,L+=F.reduce((Pi,el)=>Pi+el,0),q){case Ce.CODE_START_A:case Ce.CODE_START_B:case Ce.CODE_START_C:throw new Y}switch(_){case Ce.CODE_CODE_A:if(q<64)qe===rt?R+=String.fromCharCode(32+q):R+=String.fromCharCode(32+q+128),qe=!1;else if(q<96)qe===rt?R+=String.fromCharCode(q-64):R+=String.fromCharCode(q+64),qe=!1;else switch(q!==Ce.CODE_STOP&&(le=!1),q){case Ce.CODE_FNC_1:a&&(R.length===0?R+="]C1":R+="");break;case Ce.CODE_FNC_2:case Ce.CODE_FNC_3:break;case Ce.CODE_FNC_4_A:!rt&&qe?(rt=!0,qe=!1):rt&&qe?(rt=!1,qe=!1):qe=!0;break;case Ce.CODE_SHIFT:T=!0,_=Ce.CODE_CODE_B;break;case Ce.CODE_CODE_B:_=Ce.CODE_CODE_B;break;case Ce.CODE_CODE_C:_=Ce.CODE_CODE_C;break;case Ce.CODE_STOP:v=!0;break}break;case Ce.CODE_CODE_B:if(q<96)qe===rt?R+=String.fromCharCode(32+q):R+=String.fromCharCode(32+q+128),qe=!1;else switch(q!==Ce.CODE_STOP&&(le=!1),q){case Ce.CODE_FNC_1:a&&(R.length===0?R+="]C1":R+="");break;case Ce.CODE_FNC_2:case Ce.CODE_FNC_3:break;case Ce.CODE_FNC_4_B:!rt&&qe?(rt=!0,qe=!1):rt&&qe?(rt=!1,qe=!1):qe=!0;break;case Ce.CODE_SHIFT:T=!0,_=Ce.CODE_CODE_A;break;case Ce.CODE_CODE_A:_=Ce.CODE_CODE_A;break;case Ce.CODE_CODE_C:_=Ce.CODE_CODE_C;break;case Ce.CODE_STOP:v=!0;break}break;case Ce.CODE_CODE_C:if(q<100)q<10&&(R+="0"),R+=q;else switch(q!==Ce.CODE_STOP&&(le=!1),q){case Ce.CODE_FNC_1:a&&(R.length===0?R+="]C1":R+="");break;case Ce.CODE_CODE_A:_=Ce.CODE_CODE_A;break;case Ce.CODE_CODE_B:_=Ce.CODE_CODE_B;break;case Ce.CODE_STOP:v=!0;break}break}Mr&&(_=_===Ce.CODE_CODE_A?Ce.CODE_CODE_B:Ce.CODE_CODE_A)}const Ln=L-M;if(L=r.getNextUnset(L),!r.isRange(L,Math.min(r.getSize(),L+(L-M)/2),!1))throw new K;if(he-=ge*W,he%103!==W)throw new V;const dr=R.length;if(dr===0)throw new K;dr>0&&le&&(_===Ce.CODE_CODE_C?R=R.substring(0,dr-2):R=R.substring(0,dr-1));const rn=(c[1]+c[0])/2,_t=M+Ln/2,Gt=x.length,Rn=new Uint8Array(Gt);for(let Mr=0;Mr<Gt;Mr++)Rn[Mr]=x[Mr];const oi=[new Ne(rn,e),new Ne(_t,e)];return new Ve(R,Rn,0,oi,we.CODE_128,new Date().getTime())}}Ce.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Ce.MAX_AVG_VARIANCE=.25,Ce.MAX_INDIVIDUAL_VARIANCE=.7,Ce.CODE_SHIFT=98,Ce.CODE_CODE_C=99,Ce.CODE_CODE_B=100,Ce.CODE_CODE_A=101,Ce.CODE_FNC_1=102,Ce.CODE_FNC_2=97,Ce.CODE_FNC_3=96,Ce.CODE_FNC_4_A=101,Ce.CODE_FNC_4_B=100,Ce.CODE_START_A=103,Ce.CODE_START_B=104,Ce.CODE_START_C=105,Ce.CODE_STOP=106;class en extends zt{constructor(e=!1,r=!1){super(),this.usingCheckDigit=e,this.extendedMode=r,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,r,s){let a=this.counters;a.fill(0),this.decodeRowResult="";let c=en.findAsteriskPattern(r,a),f=r.getNextSet(c[1]),g=r.getSize(),x,_;do{en.recordPattern(r,f,a);let F=en.toNarrowWidePattern(a);if(F<0)throw new K;x=en.patternToChar(F),this.decodeRowResult+=x,_=f;for(let W of a)f+=W;f=r.getNextSet(f)}while(x!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let v=0;for(let F of a)v+=F;let T=f-_-v;if(f!==g&&T*2<v)throw new K;if(this.usingCheckDigit){let F=this.decodeRowResult.length-1,W=0;for(let q=0;q<F;q++)W+=en.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(q));if(this.decodeRowResult.charAt(F)!==en.ALPHABET_STRING.charAt(W%43))throw new V;this.decodeRowResult=this.decodeRowResult.substring(0,F)}if(this.decodeRowResult.length===0)throw new K;let R;this.extendedMode?R=en.decodeExtended(this.decodeRowResult):R=this.decodeRowResult;let M=(c[1]+c[0])/2,L=_+v/2;return new Ve(R,null,0,[new Ne(M,e),new Ne(L,e)],we.CODE_39,new Date().getTime())}static findAsteriskPattern(e,r){let s=e.getSize(),a=e.getNextSet(0),c=0,f=a,g=!1,x=r.length;for(let _=a;_<s;_++)if(e.get(_)!==g)r[c]++;else{if(c===x-1){if(this.toNarrowWidePattern(r)===en.ASTERISK_ENCODING&&e.isRange(Math.max(0,f-Math.floor((_-f)/2)),f,!1))return[f,_];f+=r[0]+r[1],r.copyWithin(0,2,2+c-1),r[c-1]=0,r[c]=0,c--}else c++;r[c]=1,g=!g}throw new K}static toNarrowWidePattern(e){let r=e.length,s=0,a;do{let c=2147483647;for(let x of e)x<c&&x>s&&(c=x);s=c,a=0;let f=0,g=0;for(let x=0;x<r;x++){let _=e[x];_>s&&(g|=1<<r-1-x,a++,f+=_)}if(a===3){for(let x=0;x<r&&a>0;x++){let _=e[x];if(_>s&&(a--,_*2>=f))return-1}return g}}while(a>3);return-1}static patternToChar(e){for(let r=0;r<en.CHARACTER_ENCODINGS.length;r++)if(en.CHARACTER_ENCODINGS[r]===e)return en.ALPHABET_STRING.charAt(r);if(e===en.ASTERISK_ENCODING)return"*";throw new K}static decodeExtended(e){let r=e.length,s="";for(let a=0;a<r;a++){let c=e.charAt(a);if(c==="+"||c==="$"||c==="%"||c==="/"){let f=e.charAt(a+1),g="\0";switch(c){case"+":if(f>="A"&&f<="Z")g=String.fromCharCode(f.charCodeAt(0)+32);else throw new Y;break;case"$":if(f>="A"&&f<="Z")g=String.fromCharCode(f.charCodeAt(0)-64);else throw new Y;break;case"%":if(f>="A"&&f<="E")g=String.fromCharCode(f.charCodeAt(0)-38);else if(f>="F"&&f<="J")g=String.fromCharCode(f.charCodeAt(0)-11);else if(f>="K"&&f<="O")g=String.fromCharCode(f.charCodeAt(0)+16);else if(f>="P"&&f<="T")g=String.fromCharCode(f.charCodeAt(0)+43);else if(f==="U")g="\0";else if(f==="V")g="@";else if(f==="W")g="`";else if(f==="X"||f==="Y"||f==="Z")g="";else throw new Y;break;case"/":if(f>="A"&&f<="O")g=String.fromCharCode(f.charCodeAt(0)-32);else if(f==="Z")g=":";else throw new Y;break}s+=g,a++}else s+=c}return s}}en.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",en.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],en.ASTERISK_ENCODING=148;class wt extends zt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,r,s){let a=this.decodeStart(r),c=this.decodeEnd(r),f=new fe;wt.decodeMiddle(r,a[1],c[0],f);let g=f.toString(),x=null;s!=null&&(x=s.get(ie.ALLOWED_LENGTHS)),x==null&&(x=wt.DEFAULT_ALLOWED_LENGTHS);let _=g.length,v=!1,T=0;for(let L of x){if(_===L){v=!0;break}L>T&&(T=L)}if(!v&&_>T&&(v=!0),!v)throw new Y;const R=[new Ne(a[1],e),new Ne(c[0],e)];return new Ve(g,null,0,R,we.ITF,new Date().getTime())}static decodeMiddle(e,r,s,a){let c=new Int32Array(10),f=new Int32Array(5),g=new Int32Array(5);for(c.fill(0),f.fill(0),g.fill(0);r<s;){zt.recordPattern(e,r,c);for(let _=0;_<5;_++){let v=2*_;f[_]=c[v],g[_]=c[v+1]}let x=wt.decodeDigit(f);a.append(x.toString()),x=this.decodeDigit(g),a.append(x.toString()),c.forEach(function(_){r+=_})}}decodeStart(e){let r=wt.skipWhiteSpace(e),s=wt.findGuardPattern(e,r,wt.START_PATTERN);return this.narrowLineWidth=(s[1]-s[0])/4,this.validateQuietZone(e,s[0]),s}validateQuietZone(e,r){let s=this.narrowLineWidth*10;s=s<r?s:r;for(let a=r-1;s>0&&a>=0&&!e.get(a);a--)s--;if(s!==0)throw new K}static skipWhiteSpace(e){const r=e.getSize(),s=e.getNextSet(0);if(s===r)throw new K;return s}decodeEnd(e){e.reverse();try{let r=wt.skipWhiteSpace(e),s;try{s=wt.findGuardPattern(e,r,wt.END_PATTERN_REVERSED[0])}catch(c){c instanceof K&&(s=wt.findGuardPattern(e,r,wt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,s[0]);let a=s[0];return s[0]=e.getSize()-s[1],s[1]=e.getSize()-a,s}finally{e.reverse()}}static findGuardPattern(e,r,s){let a=s.length,c=new Int32Array(a),f=e.getSize(),g=!1,x=0,_=r;c.fill(0);for(let v=r;v<f;v++)if(e.get(v)!==g)c[x]++;else{if(x===a-1){if(zt.patternMatchVariance(c,s,wt.MAX_INDIVIDUAL_VARIANCE)<wt.MAX_AVG_VARIANCE)return[_,v];_+=c[0]+c[1],$.arraycopy(c,2,c,0,x-1),c[x-1]=0,c[x]=0,x--}else x++;c[x]=1,g=!g}throw new K}static decodeDigit(e){let r=wt.MAX_AVG_VARIANCE,s=-1,a=wt.PATTERNS.length;for(let c=0;c<a;c++){let f=wt.PATTERNS[c],g=zt.patternMatchVariance(e,f,wt.MAX_INDIVIDUAL_VARIANCE);g<r?(r=g,s=c):g===r&&(s=-1)}if(s>=0)return s%10;throw new K}}wt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],wt.MAX_AVG_VARIANCE=.38,wt.MAX_INDIVIDUAL_VARIANCE=.5,wt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],wt.START_PATTERN=Int32Array.from([1,1,1,1]),wt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Rt extends zt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let r=!1,s,a=0,c=Int32Array.from([0,0,0]);for(;!r;){c=Int32Array.from([0,0,0]),s=Rt.findGuardPattern(e,a,!1,this.START_END_PATTERN,c);let f=s[0];a=s[1];let g=f-(a-f);g>=0&&(r=e.isRange(g,f,!1))}return s}static checkChecksum(e){return Rt.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let r=e.length;if(r===0)return!1;let s=parseInt(e.charAt(r-1),10);return Rt.getStandardUPCEANChecksum(e.substring(0,r-1))===s}static getStandardUPCEANChecksum(e){let r=e.length,s=0;for(let a=r-1;a>=0;a-=2){let c=e.charAt(a).charCodeAt(0)-48;if(c<0||c>9)throw new Y;s+=c}s*=3;for(let a=r-2;a>=0;a-=2){let c=e.charAt(a).charCodeAt(0)-48;if(c<0||c>9)throw new Y;s+=c}return(1e3-s)%10}static decodeEnd(e,r){return Rt.findGuardPattern(e,r,!1,Rt.START_END_PATTERN,new Int32Array(Rt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,r,s,a){return this.findGuardPattern(e,r,s,a,new Int32Array(a.length))}static findGuardPattern(e,r,s,a,c){let f=e.getSize();r=s?e.getNextUnset(r):e.getNextSet(r);let g=0,x=r,_=a.length,v=s;for(let T=r;T<f;T++)if(e.get(T)!==v)c[g]++;else{if(g===_-1){if(zt.patternMatchVariance(c,a,Rt.MAX_INDIVIDUAL_VARIANCE)<Rt.MAX_AVG_VARIANCE)return Int32Array.from([x,T]);x+=c[0]+c[1];let R=c.slice(2,c.length-1);for(let M=0;M<g-1;M++)c[M]=R[M];c[g-1]=0,c[g]=0,g--}else g++;c[g]=1,v=!v}throw new K}static decodeDigit(e,r,s,a){this.recordPattern(e,s,r);let c=this.MAX_AVG_VARIANCE,f=-1,g=a.length;for(let x=0;x<g;x++){let _=a[x],v=zt.patternMatchVariance(r,_,Rt.MAX_INDIVIDUAL_VARIANCE);v<c&&(c=v,f=x)}if(f>=0)return f;throw new K}}Rt.MAX_AVG_VARIANCE=.48,Rt.MAX_INDIVIDUAL_VARIANCE=.7,Rt.START_END_PATTERN=Int32Array.from([1,1,1]),Rt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Rt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Rt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class ti{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,r,s){let a=this.decodeRowStringBuffer,c=this.decodeMiddle(r,s,a),f=a.toString(),g=ti.parseExtensionString(f),x=[new Ne((s[0]+s[1])/2,e),new Ne(c,e)],_=new Ve(f,null,0,x,we.UPC_EAN_EXTENSION,new Date().getTime());return g!=null&&_.putAllMetadata(g),_}decodeMiddle(e,r,s){let a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let c=e.getSize(),f=r[1],g=0;for(let _=0;_<5&&f<c;_++){let v=Rt.decodeDigit(e,a,f,Rt.L_AND_G_PATTERNS);s+=String.fromCharCode(48+v%10);for(let T of a)f+=T;v>=10&&(g|=1<<4-_),_!==4&&(f=e.getNextSet(f),f=e.getNextUnset(f))}if(s.length!==5)throw new K;let x=this.determineCheckDigit(g);if(ti.extensionChecksum(s.toString())!==x)throw new K;return f}static extensionChecksum(e){let r=e.length,s=0;for(let a=r-2;a>=0;a-=2)s+=e.charAt(a).charCodeAt(0)-48;s*=3;for(let a=r-1;a>=0;a-=2)s+=e.charAt(a).charCodeAt(0)-48;return s*=3,s%10}determineCheckDigit(e){for(let r=0;r<10;r++)if(e===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new K}static parseExtensionString(e){if(e.length!==5)return null;let r=ti.parseExtension5String(e);return r==null?null:new Map([[Be.SUGGESTED_PRICE,r]])}static parseExtension5String(e){let r;switch(e.charAt(0)){case"0":r="";break;case"5":r="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}let s=parseInt(e.substring(1)),a=(s/100).toString(),c=s%100,f=c<10?"0"+c:c.toString();return r+a+"."+f}}class is{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,r,s){let a=this.decodeRowStringBuffer,c=this.decodeMiddle(r,s,a),f=a.toString(),g=is.parseExtensionString(f),x=[new Ne((s[0]+s[1])/2,e),new Ne(c,e)],_=new Ve(f,null,0,x,we.UPC_EAN_EXTENSION,new Date().getTime());return g!=null&&_.putAllMetadata(g),_}decodeMiddle(e,r,s){let a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let c=e.getSize(),f=r[1],g=0;for(let x=0;x<2&&f<c;x++){let _=Rt.decodeDigit(e,a,f,Rt.L_AND_G_PATTERNS);s+=String.fromCharCode(48+_%10);for(let v of a)f+=v;_>=10&&(g|=1<<1-x),x!==1&&(f=e.getNextSet(f),f=e.getNextUnset(f))}if(s.length!==2)throw new K;if(parseInt(s.toString())%4!==g)throw new K;return f}static parseExtensionString(e){return e.length!==2?null:new Map([[Be.ISSUE_NUMBER,parseInt(e)]])}}class zs{static decodeRow(e,r,s){let a=Rt.findGuardPattern(r,s,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new ti().decodeRow(e,r,a)}catch{return new is().decodeRow(e,r,a)}}}zs.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class it extends Rt{constructor(){super(),this.decodeRowStringBuffer="",it.L_AND_G_PATTERNS=it.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let r=it.L_PATTERNS[e-10],s=new Int32Array(r.length);for(let a=0;a<r.length;a++)s[a]=r[r.length-a-1];it.L_AND_G_PATTERNS[e]=s}}decodeRow(e,r,s){let a=it.findStartGuardPattern(r),c=s==null?null:s.get(ie.NEED_RESULT_POINT_CALLBACK);if(c!=null){const le=new Ne((a[0]+a[1])/2,e);c.foundPossibleResultPoint(le)}let f=this.decodeMiddle(r,a,this.decodeRowStringBuffer),g=f.rowOffset,x=f.resultString;if(c!=null){const le=new Ne(g,e);c.foundPossibleResultPoint(le)}let _=this.decodeEnd(r,g);if(c!=null){const le=new Ne((_[0]+_[1])/2,e);c.foundPossibleResultPoint(le)}let v=_[1],T=v+(v-_[0]);if(T>=r.getSize()||!r.isRange(v,T,!1))throw new K;let R=x.toString();if(R.length<8)throw new Y;if(!it.checkChecksum(R))throw new V;let M=(a[1]+a[0])/2,L=(_[1]+_[0])/2,F=this.getBarcodeFormat(),W=[new Ne(M,e),new Ne(L,e)],q=new Ve(R,null,0,W,F,new Date().getTime()),he=0;try{let le=zs.decodeRow(e,r,_[1]);q.putMetadata(Be.UPC_EAN_EXTENSION,le.getText()),q.putAllMetadata(le.getResultMetadata()),q.addResultPoints(le.getResultPoints()),he=le.getText().length}catch{}let ge=s==null?null:s.get(ie.ALLOWED_EAN_EXTENSIONS);if(ge!=null){let le=!1;for(let rt in ge)if(he.toString()===rt){le=!0;break}if(!le)throw new K}return q}decodeEnd(e,r){return it.findGuardPattern(e,r,!1,it.START_END_PATTERN,new Int32Array(it.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return it.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let r=e.length;if(r===0)return!1;let s=parseInt(e.charAt(r-1),10);return it.getStandardUPCEANChecksum(e.substring(0,r-1))===s}static getStandardUPCEANChecksum(e){let r=e.length,s=0;for(let a=r-1;a>=0;a-=2){let c=e.charAt(a).charCodeAt(0)-48;if(c<0||c>9)throw new Y;s+=c}s*=3;for(let a=r-2;a>=0;a-=2){let c=e.charAt(a).charCodeAt(0)-48;if(c<0||c>9)throw new Y;s+=c}return(1e3-s)%10}}class Xn extends it{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,r,s){let a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let c=e.getSize(),f=r[1],g=0;for(let _=0;_<6&&f<c;_++){let v=it.decodeDigit(e,a,f,it.L_AND_G_PATTERNS);s+=String.fromCharCode(48+v%10);for(let T of a)f+=T;v>=10&&(g|=1<<5-_)}s=Xn.determineFirstDigit(s,g),f=it.findGuardPattern(e,f,!0,it.MIDDLE_PATTERN,new Int32Array(it.MIDDLE_PATTERN.length).fill(0))[1];for(let _=0;_<6&&f<c;_++){let v=it.decodeDigit(e,a,f,it.L_PATTERNS);s+=String.fromCharCode(48+v);for(let T of a)f+=T}return{rowOffset:f,resultString:s}}getBarcodeFormat(){return we.EAN_13}static determineFirstDigit(e,r){for(let s=0;s<10;s++)if(r===this.FIRST_DIGIT_ENCODINGS[s])return e=String.fromCharCode(48+s)+e,e;throw new K}}Xn.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class ko extends it{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,r,s){const a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let c=e.getSize(),f=r[1];for(let x=0;x<4&&f<c;x++){let _=it.decodeDigit(e,a,f,it.L_PATTERNS);s+=String.fromCharCode(48+_);for(let v of a)f+=v}f=it.findGuardPattern(e,f,!0,it.MIDDLE_PATTERN,new Int32Array(it.MIDDLE_PATTERN.length).fill(0))[1];for(let x=0;x<4&&f<c;x++){let _=it.decodeDigit(e,a,f,it.L_PATTERNS);s+=String.fromCharCode(48+_);for(let v of a)f+=v}return{rowOffset:f,resultString:s}}getBarcodeFormat(){return we.EAN_8}}class Po extends it{constructor(){super(...arguments),this.ean13Reader=new Xn}getBarcodeFormat(){return we.UPC_A}decode(e,r){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,r,s){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,r,s))}decodeMiddle(e,r,s){return this.ean13Reader.decodeMiddle(e,r,s)}maybeReturnResult(e){let r=e.getText();if(r.charAt(0)==="0"){let s=new Ve(r.substring(1),null,null,e.getResultPoints(),we.UPC_A);return e.getResultMetadata()!=null&&s.putAllMetadata(e.getResultMetadata()),s}else throw new K}reset(){this.ean13Reader.reset()}}class Yn extends it{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,r,s){const a=this.decodeMiddleCounters.map(_=>_);a[0]=0,a[1]=0,a[2]=0,a[3]=0;const c=e.getSize();let f=r[1],g=0;for(let _=0;_<6&&f<c;_++){const v=Yn.decodeDigit(e,a,f,Yn.L_AND_G_PATTERNS);s+=String.fromCharCode(48+v%10);for(let T of a)f+=T;v>=10&&(g|=1<<5-_)}let x=Yn.determineNumSysAndCheckDigit(s,g);return{rowOffset:f,resultString:x}}decodeEnd(e,r){return Yn.findGuardPatternWithoutCounters(e,r,!0,Yn.MIDDLE_END_PATTERN)}checkChecksum(e){return it.checkChecksum(Yn.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,r){for(let s=0;s<=1;s++)for(let a=0;a<10;a++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[s][a]){let c=String.fromCharCode(48+s),f=String.fromCharCode(48+a);return c+e+f}throw K.getNotFoundInstance()}getBarcodeFormat(){return we.UPC_E}static convertUPCEtoUPCA(e){const r=e.slice(1,7).split("").map(c=>c.charCodeAt(0)),s=new fe;s.append(e.charAt(0));let a=r[5];switch(a){case 0:case 1:case 2:s.appendChars(r,0,2),s.append(a),s.append("0000"),s.appendChars(r,2,3);break;case 3:s.appendChars(r,0,3),s.append("00000"),s.appendChars(r,3,2);break;case 4:s.appendChars(r,0,4),s.append("00000"),s.append(r[4]);break;default:s.appendChars(r,0,5),s.append("0000"),s.append(a);break}return e.length>=8&&s.append(e.charAt(7)),s.toString()}}Yn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Yn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Gs extends zt{constructor(e){super();let r=e==null?null:e.get(ie.POSSIBLE_FORMATS),s=[];u(r)?(s.push(new Xn),s.push(new Po),s.push(new ko),s.push(new Yn)):(r.indexOf(we.EAN_13)>-1&&s.push(new Xn),r.indexOf(we.UPC_A)>-1&&s.push(new Po),r.indexOf(we.EAN_8)>-1&&s.push(new ko),r.indexOf(we.UPC_E)>-1&&s.push(new Yn)),this.readers=s}decodeRow(e,r,s){for(let a of this.readers)try{const c=a.decodeRow(e,r,s),f=c.getBarcodeFormat()===we.EAN_13&&c.getText().charAt(0)==="0",g=s==null?null:s.get(ie.POSSIBLE_FORMATS),x=g==null||g.includes(we.UPC_A);if(f&&x){const _=c.getRawBytes(),v=new Ve(c.getText().substring(1),_,_?_.length:null,c.getResultPoints(),we.UPC_A);return v.putAllMetadata(c.getResultMetadata()),v}return c}catch{}throw new K}reset(){for(let e of this.readers)e.reset()}}class cn extends zt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,r){for(let s=0;s<r.length;s++)if(zt.patternMatchVariance(e,r[s],cn.MAX_INDIVIDUAL_VARIANCE)<cn.MAX_AVG_VARIANCE)return s;throw new K}static count(e){return ct.sum(new Int32Array(e))}static increment(e,r){let s=0,a=r[0];for(let c=1;c<e.length;c++)r[c]>a&&(a=r[c],s=c);e[s]++}static decrement(e,r){let s=0,a=r[0];for(let c=1;c<e.length;c++)r[c]<a&&(a=r[c],s=c);e[s]--}static isFinderPattern(e){let r=e[0]+e[1],s=r+e[2]+e[3],a=r/s;if(a>=cn.MIN_FINDER_PATTERN_RATIO&&a<=cn.MAX_FINDER_PATTERN_RATIO){let c=Number.MAX_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER;for(let g of e)g>f&&(f=g),g<c&&(c=g);return f<10*c}return!1}}cn.MAX_AVG_VARIANCE=.2,cn.MAX_INDIVIDUAL_VARIANCE=.45,cn.MIN_FINDER_PATTERN_RATIO=9.5/12,cn.MAX_FINDER_PATTERN_RATIO=12.5/14;class Xr{constructor(e,r){this.value=e,this.checksumPortion=r}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof Xr))return!1;const r=e;return this.value===r.value&&this.checksumPortion===r.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class ss{constructor(e,r,s,a,c){this.value=e,this.startEnd=r,this.value=e,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new Ne(s,c)),this.resultPoints.push(new Ne(a,c))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof ss))return!1;const r=e;return this.value===r.value}hashCode(){return this.value}}class Mn{constructor(){}static getRSSvalue(e,r,s){let a=0;for(let x of e)a+=x;let c=0,f=0,g=e.length;for(let x=0;x<g-1;x++){let _;for(_=1,f|=1<<x;_<e[x];_++,f&=~(1<<x)){let v=Mn.combins(a-_-1,g-x-2);if(s&&f===0&&a-_-(g-x-1)>=g-x-1&&(v-=Mn.combins(a-_-(g-x),g-x-2)),g-x-1>1){let T=0;for(let R=a-_-(g-x-2);R>r;R--)T+=Mn.combins(a-_-R-1,g-x-3);v-=T*(g-1-x)}else a-_>r&&v--;c+=v}a-=_}return c}static combins(e,r){let s,a;e-r>r?(a=r,s=e-r):(a=e-r,s=r);let c=1,f=1;for(let g=e;g>s;g--)c*=g,f<=a&&(c/=f,f++);for(;f<=a;)c/=f,f++;return c}}class Lo{static buildBitArray(e){let r=e.length*2-1;e[e.length-1].getRightChar()==null&&(r-=1);let s=12*r,a=new oe(s),c=0,g=e[0].getRightChar().getValue();for(let x=11;x>=0;--x)(g&1<<x)!=0&&a.set(c),c++;for(let x=1;x<e.length;++x){let _=e[x],v=_.getLeftChar().getValue();for(let T=11;T>=0;--T)(v&1<<T)!=0&&a.set(c),c++;if(_.getRightChar()!=null){let T=_.getRightChar().getValue();for(let R=11;R>=0;--R)(T&1<<R)!=0&&a.set(c),c++}}return a}}class lr{constructor(e,r){r?this.decodedInformation=null:(this.finished=e,this.decodedInformation=r)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Bo{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class on extends Bo{constructor(e,r){super(e),this.value=r}getValue(){return this.value}isFNC1(){return this.value===on.FNC1}}on.FNC1="$";class _r extends Bo{constructor(e,r,s){super(e),s?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=r}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class In extends Bo{constructor(e,r,s){if(super(e),r<0||r>10||s<0||s>10)throw new Y;this.firstDigit=r,this.secondDigit=s}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===In.FNC1}isSecondDigitFNC1(){return this.secondDigit===In.FNC1}isAnyFNC1(){return this.firstDigit===In.FNC1||this.secondDigit===In.FNC1}}In.FNC1=10;class Ie{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new K;let r=e.substring(0,2);for(let c of Ie.TWO_DIGIT_DATA_LENGTH)if(c[0]===r)return c[1]===Ie.VARIABLE_LENGTH?Ie.processVariableAI(2,c[2],e):Ie.processFixedAI(2,c[1],e);if(e.length<3)throw new K;let s=e.substring(0,3);for(let c of Ie.THREE_DIGIT_DATA_LENGTH)if(c[0]===s)return c[1]===Ie.VARIABLE_LENGTH?Ie.processVariableAI(3,c[2],e):Ie.processFixedAI(3,c[1],e);for(let c of Ie.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(c[0]===s)return c[1]===Ie.VARIABLE_LENGTH?Ie.processVariableAI(4,c[2],e):Ie.processFixedAI(4,c[1],e);if(e.length<4)throw new K;let a=e.substring(0,4);for(let c of Ie.FOUR_DIGIT_DATA_LENGTH)if(c[0]===a)return c[1]===Ie.VARIABLE_LENGTH?Ie.processVariableAI(4,c[2],e):Ie.processFixedAI(4,c[1],e);throw new K}static processFixedAI(e,r,s){if(s.length<e)throw new K;let a=s.substring(0,e);if(s.length<e+r)throw new K;let c=s.substring(e,e+r),f=s.substring(e+r),g="("+a+")"+c,x=Ie.parseFieldsInGeneralPurpose(f);return x==null?g:g+x}static processVariableAI(e,r,s){let a=s.substring(0,e),c;s.length<e+r?c=s.length:c=e+r;let f=s.substring(e,c),g=s.substring(c),x="("+a+")"+f,_=Ie.parseFieldsInGeneralPurpose(g);return _==null?x:x+_}}Ie.VARIABLE_LENGTH=[],Ie.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ie.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ie.VARIABLE_LENGTH,20],["22",Ie.VARIABLE_LENGTH,29],["30",Ie.VARIABLE_LENGTH,8],["37",Ie.VARIABLE_LENGTH,8],["90",Ie.VARIABLE_LENGTH,30],["91",Ie.VARIABLE_LENGTH,30],["92",Ie.VARIABLE_LENGTH,30],["93",Ie.VARIABLE_LENGTH,30],["94",Ie.VARIABLE_LENGTH,30],["95",Ie.VARIABLE_LENGTH,30],["96",Ie.VARIABLE_LENGTH,30],["97",Ie.VARIABLE_LENGTH,3],["98",Ie.VARIABLE_LENGTH,30],["99",Ie.VARIABLE_LENGTH,30]],Ie.THREE_DIGIT_DATA_LENGTH=[["240",Ie.VARIABLE_LENGTH,30],["241",Ie.VARIABLE_LENGTH,30],["242",Ie.VARIABLE_LENGTH,6],["250",Ie.VARIABLE_LENGTH,30],["251",Ie.VARIABLE_LENGTH,30],["253",Ie.VARIABLE_LENGTH,17],["254",Ie.VARIABLE_LENGTH,20],["400",Ie.VARIABLE_LENGTH,30],["401",Ie.VARIABLE_LENGTH,30],["402",17],["403",Ie.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ie.VARIABLE_LENGTH,20],["421",Ie.VARIABLE_LENGTH,15],["422",3],["423",Ie.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ie.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ie.VARIABLE_LENGTH,15],["391",Ie.VARIABLE_LENGTH,18],["392",Ie.VARIABLE_LENGTH,15],["393",Ie.VARIABLE_LENGTH,18],["703",Ie.VARIABLE_LENGTH,30]],Ie.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ie.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ie.VARIABLE_LENGTH,20],["8003",Ie.VARIABLE_LENGTH,30],["8004",Ie.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ie.VARIABLE_LENGTH,30],["8008",Ie.VARIABLE_LENGTH,12],["8018",18],["8020",Ie.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ie.VARIABLE_LENGTH,70],["8200",Ie.VARIABLE_LENGTH,70]];class Si{constructor(e){this.buffer=new fe,this.information=e}decodeAllCodes(e,r){let s=r,a=null;do{let c=this.decodeGeneralPurposeField(s,a),f=Ie.parseFieldsInGeneralPurpose(c.getNewString());if(f!=null&&e.append(f),c.isRemaining()?a=""+c.getRemainingValue():a=null,s===c.getNewPosition())break;s=c.getNewPosition()}while(!0);return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let r=e;r<e+3;++r)if(this.information.get(r))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let c=this.extractNumericValueFromBitArray(e,4);return c===0?new In(this.information.getSize(),In.FNC1,In.FNC1):new In(this.information.getSize(),c-1,In.FNC1)}let r=this.extractNumericValueFromBitArray(e,7),s=(r-8)/11,a=(r-8)%11;return new In(e+7,s,a)}extractNumericValueFromBitArray(e,r){return Si.extractNumericValueFromBitArray(this.information,e,r)}static extractNumericValueFromBitArray(e,r,s){let a=0;for(let c=0;c<s;++c)e.get(r+c)&&(a|=1<<s-c-1);return a}decodeGeneralPurposeField(e,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(e);let s=this.parseBlocks();return s!=null&&s.isRemaining()?new _r(this.current.getPosition(),this.buffer.toString(),s.getRemainingValue()):new _r(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,r;do{let s=this.current.getPosition();if(this.current.isAlpha()?(r=this.parseAlphaBlock(),e=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),e=r.isFinished()):(r=this.parseNumericBlock(),e=r.isFinished()),!(s!==this.current.getPosition())&&!e)break}while(!e);return r.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let r;return e.isSecondDigitFNC1()?r=new _r(this.current.getPosition(),this.buffer.toString()):r=new _r(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new lr(!0,r)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let r=new _r(this.current.getPosition(),this.buffer.toString());return new lr(!0,r)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new lr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let r=new _r(this.current.getPosition(),this.buffer.toString());return new lr(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new lr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let r=new _r(this.current.getPosition(),this.buffer.toString());return new lr(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new lr(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+7>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(e,7);if(s>=64&&s<116)return!0;if(e+8>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(e,8);return a>=232&&a<253}decodeIsoIec646(e){let r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new on(e+5,on.FNC1);if(r>=5&&r<15)return new on(e+5,"0"+(r-5));let s=this.extractNumericValueFromBitArray(e,7);if(s>=64&&s<90)return new on(e+7,""+(s+1));if(s>=90&&s<116)return new on(e+7,""+(s+7));let a=this.extractNumericValueFromBitArray(e,8),c;switch(a){case 232:c="!";break;case 233:c='"';break;case 234:c="%";break;case 235:c="&";break;case 236:c="'";break;case 237:c="(";break;case 238:c=")";break;case 239:c="*";break;case 240:c="+";break;case 241:c=",";break;case 242:c="-";break;case 243:c=".";break;case 244:c="/";break;case 245:c=":";break;case 246:c=";";break;case 247:c="<";break;case 248:c="=";break;case 249:c=">";break;case 250:c="?";break;case 251:c="_";break;case 252:c=" ";break;default:throw new Y}return new on(e+8,c)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+6>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(e,6);return s>=16&&s<63}decodeAlphanumeric(e){let r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new on(e+5,on.FNC1);if(r>=5&&r<15)return new on(e+5,"0"+(r-5));let s=this.extractNumericValueFromBitArray(e,6);if(s>=32&&s<58)return new on(e+6,""+(s+33));let a;switch(s){case 58:a="*";break;case 59:a=",";break;case 60:a="-";break;case 61:a=".";break;case 62:a="/";break;default:throw new sr("Decoding invalid alphanumeric value: "+s)}return new on(e+6,a)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let r=0;r<5&&r+e<this.information.getSize();++r)if(r===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+r))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let r=e;r<e+3;++r)if(this.information.get(r))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let r=0;r<4&&r+e<this.information.getSize();++r)if(this.information.get(e+r))return!1;return!0}}class Fo{constructor(e){this.information=e,this.generalDecoder=new Si(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class kn extends Fo{constructor(e){super(e)}encodeCompressedGtin(e,r){e.append("(01)");let s=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,r,s)}encodeCompressedGtinWithoutAI(e,r,s){for(let a=0;a<4;++a){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*a,10);c/100===0&&e.append("0"),c/10===0&&e.append("0"),e.append(c)}kn.appendCheckDigit(e,s)}static appendCheckDigit(e,r){let s=0;for(let a=0;a<13;a++){let c=e.charAt(a+r).charCodeAt(0)-48;s+=(a&1)===0?3*c:c}s=10-s%10,s===10&&(s=0),e.append(s)}}kn.GTIN_SIZE=40;class Kn extends kn{constructor(e){super(e)}parseInformation(){let e=new fe;e.append("(01)");let r=e.length(),s=this.getGeneralDecoder().extractNumericValueFromBitArray(Kn.HEADER_SIZE,4);return e.append(s),this.encodeCompressedGtinWithoutAI(e,Kn.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(e,Kn.HEADER_SIZE+44)}}Kn.HEADER_SIZE=4;class os extends Fo{constructor(e){super(e)}parseInformation(){let e=new fe;return this.getGeneralDecoder().decodeAllCodes(e,os.HEADER_SIZE)}}os.HEADER_SIZE=5;class ls extends kn{constructor(e){super(e)}encodeCompressedWeight(e,r,s){let a=this.getGeneralDecoder().extractNumericValueFromBitArray(r,s);this.addWeightCode(e,a);let c=this.checkWeight(a),f=1e5;for(let g=0;g<5;++g)c/f===0&&e.append("0"),f/=10;e.append(c)}}class yr extends ls{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=yr.HEADER_SIZE+ls.GTIN_SIZE+yr.WEIGHT_SIZE)throw new K;let e=new fe;return this.encodeCompressedGtin(e,yr.HEADER_SIZE),this.encodeCompressedWeight(e,yr.HEADER_SIZE+ls.GTIN_SIZE,yr.WEIGHT_SIZE),e.toString()}}yr.HEADER_SIZE=5,yr.WEIGHT_SIZE=15;class ql extends yr{constructor(e){super(e)}addWeightCode(e,r){e.append("(3103)")}checkWeight(e){return e}}class Zl extends yr{constructor(e){super(e)}addWeightCode(e,r){r<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class ar extends kn{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<ar.HEADER_SIZE+kn.GTIN_SIZE)throw new K;let e=new fe;this.encodeCompressedGtin(e,ar.HEADER_SIZE);let r=this.getGeneralDecoder().extractNumericValueFromBitArray(ar.HEADER_SIZE+kn.GTIN_SIZE,ar.LAST_DIGIT_SIZE);e.append("(392"),e.append(r),e.append(")");let s=this.getGeneralDecoder().decodeGeneralPurposeField(ar.HEADER_SIZE+kn.GTIN_SIZE+ar.LAST_DIGIT_SIZE,null);return e.append(s.getNewString()),e.toString()}}ar.HEADER_SIZE=8,ar.LAST_DIGIT_SIZE=2;class wn extends kn{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<wn.HEADER_SIZE+kn.GTIN_SIZE)throw new K;let e=new fe;this.encodeCompressedGtin(e,wn.HEADER_SIZE);let r=this.getGeneralDecoder().extractNumericValueFromBitArray(wn.HEADER_SIZE+kn.GTIN_SIZE,wn.LAST_DIGIT_SIZE);e.append("(393"),e.append(r),e.append(")");let s=this.getGeneralDecoder().extractNumericValueFromBitArray(wn.HEADER_SIZE+kn.GTIN_SIZE+wn.LAST_DIGIT_SIZE,wn.FIRST_THREE_DIGITS_SIZE);s/100==0&&e.append("0"),s/10==0&&e.append("0"),e.append(s);let a=this.getGeneralDecoder().decodeGeneralPurposeField(wn.HEADER_SIZE+kn.GTIN_SIZE+wn.LAST_DIGIT_SIZE+wn.FIRST_THREE_DIGITS_SIZE,null);return e.append(a.getNewString()),e.toString()}}wn.HEADER_SIZE=8,wn.LAST_DIGIT_SIZE=2,wn.FIRST_THREE_DIGITS_SIZE=10;class bt extends ls{constructor(e,r,s){super(e),this.dateCode=s,this.firstAIdigits=r}parseInformation(){if(this.getInformation().getSize()!=bt.HEADER_SIZE+bt.GTIN_SIZE+bt.WEIGHT_SIZE+bt.DATE_SIZE)throw new K;let e=new fe;return this.encodeCompressedGtin(e,bt.HEADER_SIZE),this.encodeCompressedWeight(e,bt.HEADER_SIZE+bt.GTIN_SIZE,bt.WEIGHT_SIZE),this.encodeCompressedDate(e,bt.HEADER_SIZE+bt.GTIN_SIZE+bt.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,r){let s=this.getGeneralDecoder().extractNumericValueFromBitArray(r,bt.DATE_SIZE);if(s==38400)return;e.append("("),e.append(this.dateCode),e.append(")");let a=s%32;s/=32;let c=s%12+1;s/=12;let f=s;f/10==0&&e.append("0"),e.append(f),c/10==0&&e.append("0"),e.append(c),a/10==0&&e.append("0"),e.append(a)}addWeightCode(e,r){e.append("("),e.append(this.firstAIdigits),e.append(r/1e5),e.append(")")}checkWeight(e){return e%1e5}}bt.HEADER_SIZE=8,bt.WEIGHT_SIZE=20,bt.DATE_SIZE=16;function Ql(I){try{if(I.get(1))return new Kn(I);if(!I.get(2))return new os(I);switch(Si.extractNumericValueFromBitArray(I,1,4)){case 4:return new ql(I);case 5:return new Zl(I)}switch(Si.extractNumericValueFromBitArray(I,1,5)){case 12:return new ar(I);case 13:return new wn(I)}switch(Si.extractNumericValueFromBitArray(I,1,7)){case 56:return new bt(I,"310","11");case 57:return new bt(I,"320","11");case 58:return new bt(I,"310","13");case 59:return new bt(I,"320","13");case 60:return new bt(I,"310","15");case 61:return new bt(I,"320","15");case 62:return new bt(I,"310","17");case 63:return new bt(I,"320","17")}}catch(e){throw console.log(e),new sr("unknown decoder: "+I)}}class Ct{constructor(e,r,s,a){this.leftchar=e,this.rightchar=r,this.finderpattern=s,this.maybeLast=a}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(e,r){return e instanceof Ct?Ct.equalsOrNull(e.leftchar,r.leftchar)&&Ct.equalsOrNull(e.rightchar,r.rightchar)&&Ct.equalsOrNull(e.finderpattern,r.finderpattern):!1}static equalsOrNull(e,r){return e===null?r===null:Ct.equals(e,r)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Uo{constructor(e,r,s){this.pairs=e,this.rowNumber=r,this.wasReversed=s}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,r){return e instanceof Uo?this.checkEqualitity(e,r)&&e.wasReversed===r.wasReversed:!1}checkEqualitity(e,r){if(!e||!r)return;let s;return e.forEach((a,c)=>{r.forEach(f=>{a.getLeftChar().getValue()===f.getLeftChar().getValue()&&a.getRightChar().getValue()===f.getRightChar().getValue()&&a.getFinderPatter().getValue()===f.getFinderPatter().getValue()&&(s=!0)})}),s}}class ne extends cn{constructor(e){super(...arguments),this.pairs=new Array(ne.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=e===!0}decodeRow(e,r,s){this.pairs.length=0,this.startFromEven=!1;try{return ne.constructResult(this.decodeRow2pairs(e,r))}catch(a){this.verbose&&console.log(a)}return this.pairs.length=0,this.startFromEven=!0,ne.constructResult(this.decodeRow2pairs(e,r))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,r){let s=!1;for(;!s;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,e))}catch(c){if(c instanceof K){if(!this.pairs.length)throw new K;s=!0}}if(this.checkChecksum())return this.pairs;let a;if(this.rows.length?a=!0:a=!1,this.storeRow(e,!1),a){let c=this.checkRowsBoolean(!1);if(c!=null||(c=this.checkRowsBoolean(!0),c!=null))return c}throw new K}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let r=null;try{r=this.checkRows(new Array,0)}catch(s){this.verbose&&console.log(s)}return e&&(this.rows=this.rows.reverse()),r}checkRows(e,r){for(let s=r;s<this.rows.length;s++){let a=this.rows[s];this.pairs.length=0;for(let f of e)this.pairs.push(f.getPairs());if(this.pairs.push(a.getPairs()),!ne.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let c=new Array(e);c.push(a);try{return this.checkRows(c,s+1)}catch(f){this.verbose&&console.log(f)}}throw new K}static isValidSequence(e){for(let r of ne.FINDER_PATTERN_SEQUENCES){if(e.length>r.length)continue;let s=!0;for(let a=0;a<e.length;a++)if(e[a].getFinderPattern().getValue()!=r[a]){s=!1;break}if(s)return!0}return!1}storeRow(e,r){let s=0,a=!1,c=!1;for(;s<this.rows.length;){let f=this.rows[s];if(f.getRowNumber()>e){c=f.isEquivalent(this.pairs);break}a=f.isEquivalent(this.pairs),s++}c||a||ne.isPartialRow(this.pairs,this.rows)||(this.rows.push(s,new Uo(this.pairs,e,r)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,r){for(let s of r)if(s.getPairs().length!==e.length){for(let a of s.getPairs())for(let c of e)if(Ct.equals(a,c))break}}static isPartialRow(e,r){for(let s of r){let a=!0;for(let c of e){let f=!1;for(let g of s.getPairs())if(c.equals(g)){f=!0;break}if(!f){a=!1;break}}if(a)return!0}return!1}getRows(){return this.rows}static constructResult(e){let r=Lo.buildBitArray(e),a=Ql(r).parseInformation(),c=e[0].getFinderPattern().getResultPoints(),f=e[e.length-1].getFinderPattern().getResultPoints(),g=[c[0],c[1],f[0],f[1]];return new Ve(a,null,null,g,we.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),r=e.getLeftChar(),s=e.getRightChar();if(s==null)return!1;let a=s.getChecksumPortion(),c=2;for(let g=1;g<this.pairs.size();++g){let x=this.pairs.get(g);a+=x.getLeftChar().getChecksumPortion(),c++;let _=x.getRightChar();_!=null&&(a+=_.getChecksumPortion(),c++)}return a%=211,211*(c-4)+a==r.getValue()}static getNextSecondBar(e,r){let s;return e.get(r)?(s=e.getNextUnset(r),s=e.getNextSet(s)):(s=e.getNextSet(r),s=e.getNextUnset(s)),s}retrieveNextPair(e,r,s){let a=r.length%2==0;this.startFromEven&&(a=!a);let c,f=!0,g=-1;do this.findNextPair(e,r,g),c=this.parseFoundFinderPattern(e,s,a),c==null?g=ne.getNextSecondBar(e,this.startEnd[0]):f=!1;while(f);let x=this.decodeDataCharacter(e,c,a,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new K;let _;try{_=this.decodeDataCharacter(e,c,a,!1)}catch(v){_=null,this.verbose&&console.log(v)}return new Ct(x,_,c,!0)}isEmptyPair(e){return e.length===0}findNextPair(e,r,s){let a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;let c=e.getSize(),f;s>=0?f=s:this.isEmptyPair(r)?f=0:f=r[r.length-1].getFinderPattern().getStartEnd()[1];let g=r.length%2!=0;this.startFromEven&&(g=!g);let x=!1;for(;f<c&&(x=!e.get(f),!!x);)f++;let _=0,v=f;for(let T=f;T<c;T++)if(e.get(T)!=x)a[_]++;else{if(_==3){if(g&&ne.reverseCounters(a),ne.isFinderPattern(a)){this.startEnd[0]=v,this.startEnd[1]=T;return}g&&ne.reverseCounters(a),v+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,_--}else _++;a[_]=1,x=!x}throw new K}static reverseCounters(e){let r=e.length;for(let s=0;s<r/2;++s){let a=e[s];e[s]=e[r-s-1],e[r-s-1]=a}}parseFoundFinderPattern(e,r,s){let a,c,f;if(s){let _=this.startEnd[0]-1;for(;_>=0&&!e.get(_);)_--;_++,a=this.startEnd[0]-_,c=_,f=this.startEnd[1]}else c=this.startEnd[0],f=e.getNextUnset(this.startEnd[1]+1),a=f-this.startEnd[1];let g=this.getDecodeFinderCounters();$.arraycopy(g,0,g,1,g.length-1),g[0]=a;let x;try{x=this.parseFinderValue(g,ne.FINDER_PATTERNS)}catch{return null}return new ss(x,[c,f],c,f,r)}decodeDataCharacter(e,r,s,a){let c=this.getDataCharacterCounters();for(let _t=0;_t<c.length;_t++)c[_t]=0;if(a)ne.recordPatternInReverse(e,r.getStartEnd()[0],c);else{ne.recordPattern(e,r.getStartEnd()[1],c);for(let _t=0,Gt=c.length-1;_t<Gt;_t++,Gt--){let Rn=c[_t];c[_t]=c[Gt],c[Gt]=Rn}}let f=17,g=ct.sum(new Int32Array(c))/f,x=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(g-x)/x>.3)throw new K;let _=this.getOddCounts(),v=this.getEvenCounts(),T=this.getOddRoundingErrors(),R=this.getEvenRoundingErrors();for(let _t=0;_t<c.length;_t++){let Gt=1*c[_t]/g,Rn=Gt+.5;if(Rn<1){if(Gt<.3)throw new K;Rn=1}else if(Rn>8){if(Gt>8.7)throw new K;Rn=8}let oi=_t/2;(_t&1)==0?(_[oi]=Rn,T[oi]=Gt-Rn):(v[oi]=Rn,R[oi]=Gt-Rn)}this.adjustOddEvenCounts(f);let M=4*r.getValue()+(s?0:2)+(a?0:1)-1,L=0,F=0;for(let _t=_.length-1;_t>=0;_t--){if(ne.isNotA1left(r,s,a)){let Gt=ne.WEIGHTS[M][2*_t];F+=_[_t]*Gt}L+=_[_t]}let W=0;for(let _t=v.length-1;_t>=0;_t--)if(ne.isNotA1left(r,s,a)){let Gt=ne.WEIGHTS[M][2*_t+1];W+=v[_t]*Gt}let q=F+W;if((L&1)!=0||L>13||L<4)throw new K;let he=(13-L)/2,ge=ne.SYMBOL_WIDEST[he],le=9-ge,rt=Mn.getRSSvalue(_,ge,!0),qe=Mn.getRSSvalue(v,le,!1),Ln=ne.EVEN_TOTAL_SUBSET[he],dr=ne.GSUM[he],rn=rt*Ln+qe+dr;return new Xr(rn,q)}static isNotA1left(e,r,s){return!(e.getValue()==0&&r&&s)}adjustOddEvenCounts(e){let r=ct.sum(new Int32Array(this.getOddCounts())),s=ct.sum(new Int32Array(this.getEvenCounts())),a=!1,c=!1;r>13?c=!0:r<4&&(a=!0);let f=!1,g=!1;s>13?g=!0:s<4&&(f=!0);let x=r+s-e,_=(r&1)==1,v=(s&1)==0;if(x==1)if(_){if(v)throw new K;c=!0}else{if(!v)throw new K;g=!0}else if(x==-1)if(_){if(v)throw new K;a=!0}else{if(!v)throw new K;f=!0}else if(x==0){if(_){if(!v)throw new K;r<s?(a=!0,g=!0):(c=!0,f=!0)}else if(v)throw new K}else throw new K;if(a){if(c)throw new K;ne.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(c&&ne.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(g)throw new K;ne.increment(this.getEvenCounts(),this.getOddRoundingErrors())}g&&ne.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ne.SYMBOL_WIDEST=[7,5,4,3,1],ne.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ne.GSUM=[0,348,1388,2948,3988],ne.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ne.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ne.FINDER_PAT_A=0,ne.FINDER_PAT_B=1,ne.FINDER_PAT_C=2,ne.FINDER_PAT_D=3,ne.FINDER_PAT_E=4,ne.FINDER_PAT_F=5,ne.FINDER_PATTERN_SEQUENCES=[[ne.FINDER_PAT_A,ne.FINDER_PAT_A],[ne.FINDER_PAT_A,ne.FINDER_PAT_B,ne.FINDER_PAT_B],[ne.FINDER_PAT_A,ne.FINDER_PAT_C,ne.FINDER_PAT_B,ne.FINDER_PAT_D],[ne.FINDER_PAT_A,ne.FINDER_PAT_E,ne.FINDER_PAT_B,ne.FINDER_PAT_D,ne.FINDER_PAT_C],[ne.FINDER_PAT_A,ne.FINDER_PAT_E,ne.FINDER_PAT_B,ne.FINDER_PAT_D,ne.FINDER_PAT_D,ne.FINDER_PAT_F],[ne.FINDER_PAT_A,ne.FINDER_PAT_E,ne.FINDER_PAT_B,ne.FINDER_PAT_D,ne.FINDER_PAT_E,ne.FINDER_PAT_F,ne.FINDER_PAT_F],[ne.FINDER_PAT_A,ne.FINDER_PAT_A,ne.FINDER_PAT_B,ne.FINDER_PAT_B,ne.FINDER_PAT_C,ne.FINDER_PAT_C,ne.FINDER_PAT_D,ne.FINDER_PAT_D],[ne.FINDER_PAT_A,ne.FINDER_PAT_A,ne.FINDER_PAT_B,ne.FINDER_PAT_B,ne.FINDER_PAT_C,ne.FINDER_PAT_C,ne.FINDER_PAT_D,ne.FINDER_PAT_E,ne.FINDER_PAT_E],[ne.FINDER_PAT_A,ne.FINDER_PAT_A,ne.FINDER_PAT_B,ne.FINDER_PAT_B,ne.FINDER_PAT_C,ne.FINDER_PAT_C,ne.FINDER_PAT_D,ne.FINDER_PAT_E,ne.FINDER_PAT_F,ne.FINDER_PAT_F],[ne.FINDER_PAT_A,ne.FINDER_PAT_A,ne.FINDER_PAT_B,ne.FINDER_PAT_B,ne.FINDER_PAT_C,ne.FINDER_PAT_D,ne.FINDER_PAT_D,ne.FINDER_PAT_E,ne.FINDER_PAT_E,ne.FINDER_PAT_F,ne.FINDER_PAT_F]],ne.MAX_PAIRS=11;class Jl extends Xr{constructor(e,r,s){super(e,r),this.count=0,this.finderPattern=s}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class It extends cn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,r,s){const a=this.decodePair(r,!1,e,s);It.addOrTally(this.possibleLeftPairs,a),r.reverse();let c=this.decodePair(r,!0,e,s);It.addOrTally(this.possibleRightPairs,c),r.reverse();for(let f of this.possibleLeftPairs)if(f.getCount()>1){for(let g of this.possibleRightPairs)if(g.getCount()>1&&It.checkChecksum(f,g))return It.constructResult(f,g)}throw new K}static addOrTally(e,r){if(r==null)return;let s=!1;for(let a of e)if(a.getValue()===r.getValue()){a.incrementCount(),s=!0;break}s||e.push(r)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,r){let s=4537077*e.getValue()+r.getValue(),a=new String(s).toString(),c=new fe;for(let _=13-a.length;_>0;_--)c.append("0");c.append(a);let f=0;for(let _=0;_<13;_++){let v=c.charAt(_).charCodeAt(0)-48;f+=(_&1)===0?3*v:v}f=10-f%10,f===10&&(f=0),c.append(f.toString());let g=e.getFinderPattern().getResultPoints(),x=r.getFinderPattern().getResultPoints();return new Ve(c.toString(),null,0,[g[0],g[1],x[0],x[1]],we.RSS_14,new Date().getTime())}static checkChecksum(e,r){let s=(e.getChecksumPortion()+16*r.getChecksumPortion())%79,a=9*e.getFinderPattern().getValue()+r.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,s===a}decodePair(e,r,s,a){try{let c=this.findFinderPattern(e,r),f=this.parseFoundFinderPattern(e,s,r,c),g=a==null?null:a.get(ie.NEED_RESULT_POINT_CALLBACK);if(g!=null){let v=(c[0]+c[1])/2;r&&(v=e.getSize()-1-v),g.foundPossibleResultPoint(new Ne(v,s))}let x=this.decodeDataCharacter(e,f,!0),_=this.decodeDataCharacter(e,f,!1);return new Jl(1597*x.getValue()+_.getValue(),x.getChecksumPortion()+4*_.getChecksumPortion(),f)}catch{return null}}decodeDataCharacter(e,r,s){let a=this.getDataCharacterCounters();for(let W=0;W<a.length;W++)a[W]=0;if(s)zt.recordPatternInReverse(e,r.getStartEnd()[0],a);else{zt.recordPattern(e,r.getStartEnd()[1]+1,a);for(let W=0,q=a.length-1;W<q;W++,q--){let he=a[W];a[W]=a[q],a[q]=he}}let c=s?16:15,f=ct.sum(new Int32Array(a))/c,g=this.getOddCounts(),x=this.getEvenCounts(),_=this.getOddRoundingErrors(),v=this.getEvenRoundingErrors();for(let W=0;W<a.length;W++){let q=a[W]/f,he=Math.floor(q+.5);he<1?he=1:he>8&&(he=8);let ge=Math.floor(W/2);(W&1)===0?(g[ge]=he,_[ge]=q-he):(x[ge]=he,v[ge]=q-he)}this.adjustOddEvenCounts(s,c);let T=0,R=0;for(let W=g.length-1;W>=0;W--)R*=9,R+=g[W],T+=g[W];let M=0,L=0;for(let W=x.length-1;W>=0;W--)M*=9,M+=x[W],L+=x[W];let F=R+3*M;if(s){if((T&1)!==0||T>12||T<4)throw new K;let W=(12-T)/2,q=It.OUTSIDE_ODD_WIDEST[W],he=9-q,ge=Mn.getRSSvalue(g,q,!1),le=Mn.getRSSvalue(x,he,!0),rt=It.OUTSIDE_EVEN_TOTAL_SUBSET[W],qe=It.OUTSIDE_GSUM[W];return new Xr(ge*rt+le+qe,F)}else{if((L&1)!==0||L>10||L<4)throw new K;let W=(10-L)/2,q=It.INSIDE_ODD_WIDEST[W],he=9-q,ge=Mn.getRSSvalue(g,q,!0),le=Mn.getRSSvalue(x,he,!1),rt=It.INSIDE_ODD_TOTAL_SUBSET[W],qe=It.INSIDE_GSUM[W];return new Xr(le*rt+ge+qe,F)}}findFinderPattern(e,r){let s=this.getDecodeFinderCounters();s[0]=0,s[1]=0,s[2]=0,s[3]=0;let a=e.getSize(),c=!1,f=0;for(;f<a&&(c=!e.get(f),r!==c);)f++;let g=0,x=f;for(let _=f;_<a;_++)if(e.get(_)!==c)s[g]++;else{if(g===3){if(cn.isFinderPattern(s))return[x,_];x+=s[0]+s[1],s[0]=s[2],s[1]=s[3],s[2]=0,s[3]=0,g--}else g++;s[g]=1,c=!c}throw new K}parseFoundFinderPattern(e,r,s,a){let c=e.get(a[0]),f=a[0]-1;for(;f>=0&&c!==e.get(f);)f--;f++;const g=a[0]-f,x=this.getDecodeFinderCounters(),_=new Int32Array(x.length);$.arraycopy(x,0,_,1,x.length-1),_[0]=g;const v=this.parseFinderValue(_,It.FINDER_PATTERNS);let T=f,R=a[1];return s&&(T=e.getSize()-1-T,R=e.getSize()-1-R),new ss(v,[f,a[1]],T,R,r)}adjustOddEvenCounts(e,r){let s=ct.sum(new Int32Array(this.getOddCounts())),a=ct.sum(new Int32Array(this.getEvenCounts())),c=!1,f=!1,g=!1,x=!1;e?(s>12?f=!0:s<4&&(c=!0),a>12?x=!0:a<4&&(g=!0)):(s>11?f=!0:s<5&&(c=!0),a>10?x=!0:a<4&&(g=!0));let _=s+a-r,v=(s&1)===(e?1:0),T=(a&1)===1;if(_===1)if(v){if(T)throw new K;f=!0}else{if(!T)throw new K;x=!0}else if(_===-1)if(v){if(T)throw new K;c=!0}else{if(!T)throw new K;g=!0}else if(_===0){if(v){if(!T)throw new K;s<a?(c=!0,x=!0):(f=!0,g=!0)}else if(T)throw new K}else throw new K;if(c){if(f)throw new K;cn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&cn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),g){if(x)throw new K;cn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}x&&cn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}It.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],It.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],It.OUTSIDE_GSUM=[0,161,961,2015,2715],It.INSIDE_GSUM=[0,336,1036,1516],It.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],It.INSIDE_ODD_WIDEST=[2,4,6,8],It.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Ii extends zt{constructor(e,r){super(),this.readers=[],this.verbose=r===!0;const s=e?e.get(ie.POSSIBLE_FORMATS):null,a=e&&e.get(ie.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;s?((s.includes(we.EAN_13)||s.includes(we.UPC_A)||s.includes(we.EAN_8)||s.includes(we.UPC_E))&&this.readers.push(new Gs(e)),s.includes(we.CODE_39)&&this.readers.push(new en(a)),s.includes(we.CODE_128)&&this.readers.push(new Ce),s.includes(we.ITF)&&this.readers.push(new wt),s.includes(we.RSS_14)&&this.readers.push(new It),s.includes(we.RSS_EXPANDED)&&this.readers.push(new ne(this.verbose))):(this.readers.push(new Gs(e)),this.readers.push(new en),this.readers.push(new Gs(e)),this.readers.push(new Ce),this.readers.push(new wt),this.readers.push(new It),this.readers.push(new ne(this.verbose)))}decodeRow(e,r,s){for(let a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(e,r,s)}catch{}throw new K}reset(){this.readers.forEach(e=>e.reset())}}class $l extends Ge{constructor(e=500,r){super(new Ii(r),e,r)}}class gt{constructor(e,r,s){this.ecCodewords=e,this.ecBlocks=[r],s&&this.ecBlocks.push(s)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class $e{constructor(e,r){this.count=e,this.dataCodewords=r}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ut{constructor(e,r,s,a,c,f){this.versionNumber=e,this.symbolSizeRows=r,this.symbolSizeColumns=s,this.dataRegionSizeRows=a,this.dataRegionSizeColumns=c,this.ecBlocks=f;let g=0;const x=f.getECCodewords(),_=f.getECBlocks();for(let v of _)g+=v.getCount()*(v.getDataCodewords()+x);this.totalCodewords=g}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,r){if((e&1)!==0||(r&1)!==0)throw new Y;for(let s of ut.VERSIONS)if(s.symbolSizeRows===e&&s.symbolSizeColumns===r)return s;throw new Y}toString(){return""+this.versionNumber}static buildVersions(){return[new ut(1,10,10,8,8,new gt(5,new $e(1,3))),new ut(2,12,12,10,10,new gt(7,new $e(1,5))),new ut(3,14,14,12,12,new gt(10,new $e(1,8))),new ut(4,16,16,14,14,new gt(12,new $e(1,12))),new ut(5,18,18,16,16,new gt(14,new $e(1,18))),new ut(6,20,20,18,18,new gt(18,new $e(1,22))),new ut(7,22,22,20,20,new gt(20,new $e(1,30))),new ut(8,24,24,22,22,new gt(24,new $e(1,36))),new ut(9,26,26,24,24,new gt(28,new $e(1,44))),new ut(10,32,32,14,14,new gt(36,new $e(1,62))),new ut(11,36,36,16,16,new gt(42,new $e(1,86))),new ut(12,40,40,18,18,new gt(48,new $e(1,114))),new ut(13,44,44,20,20,new gt(56,new $e(1,144))),new ut(14,48,48,22,22,new gt(68,new $e(1,174))),new ut(15,52,52,24,24,new gt(42,new $e(2,102))),new ut(16,64,64,14,14,new gt(56,new $e(2,140))),new ut(17,72,72,16,16,new gt(36,new $e(4,92))),new ut(18,80,80,18,18,new gt(48,new $e(4,114))),new ut(19,88,88,20,20,new gt(56,new $e(4,144))),new ut(20,96,96,22,22,new gt(68,new $e(4,174))),new ut(21,104,104,24,24,new gt(56,new $e(6,136))),new ut(22,120,120,18,18,new gt(68,new $e(6,175))),new ut(23,132,132,20,20,new gt(62,new $e(8,163))),new ut(24,144,144,22,22,new gt(62,new $e(8,156),new $e(2,155))),new ut(25,8,18,6,16,new gt(7,new $e(1,5))),new ut(26,8,32,6,14,new gt(11,new $e(1,10))),new ut(27,12,26,10,24,new gt(14,new $e(1,16))),new ut(28,12,36,10,16,new gt(18,new $e(1,22))),new ut(29,16,36,14,16,new gt(24,new $e(1,32))),new ut(30,16,48,14,22,new gt(28,new $e(1,49)))]}}ut.VERSIONS=ut.buildVersions();class Wn{constructor(e){const r=e.getHeight();if(r<8||r>144||(r&1)!==0)throw new Y;this.version=Wn.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Se(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const r=e.getHeight(),s=e.getWidth();return ut.getVersionForDimensions(r,s)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let r=0,s=4,a=0;const c=this.mappingBitMatrix.getHeight(),f=this.mappingBitMatrix.getWidth();let g=!1,x=!1,_=!1,v=!1;do if(s===c&&a===0&&!g)e[r++]=this.readCorner1(c,f)&255,s-=2,a+=2,g=!0;else if(s===c-2&&a===0&&(f&3)!==0&&!x)e[r++]=this.readCorner2(c,f)&255,s-=2,a+=2,x=!0;else if(s===c+4&&a===2&&(f&7)===0&&!_)e[r++]=this.readCorner3(c,f)&255,s-=2,a+=2,_=!0;else if(s===c-2&&a===0&&(f&7)===4&&!v)e[r++]=this.readCorner4(c,f)&255,s-=2,a+=2,v=!0;else{do s<c&&a>=0&&!this.readMappingMatrix.get(a,s)&&(e[r++]=this.readUtah(s,a,c,f)&255),s-=2,a+=2;while(s>=0&&a<f);s+=1,a+=3;do s>=0&&a<f&&!this.readMappingMatrix.get(a,s)&&(e[r++]=this.readUtah(s,a,c,f)&255),s+=2,a-=2;while(s<c&&a>=0);s+=3,a+=1}while(s<c||a<f);if(r!==this.version.getTotalCodewords())throw new Y;return e}readModule(e,r,s,a){return e<0&&(e+=s,r+=4-(s+4&7)),r<0&&(r+=a,e+=4-(a+4&7)),this.readMappingMatrix.set(r,e),this.mappingBitMatrix.get(r,e)}readUtah(e,r,s,a){let c=0;return this.readModule(e-2,r-2,s,a)&&(c|=1),c<<=1,this.readModule(e-2,r-1,s,a)&&(c|=1),c<<=1,this.readModule(e-1,r-2,s,a)&&(c|=1),c<<=1,this.readModule(e-1,r-1,s,a)&&(c|=1),c<<=1,this.readModule(e-1,r,s,a)&&(c|=1),c<<=1,this.readModule(e,r-2,s,a)&&(c|=1),c<<=1,this.readModule(e,r-1,s,a)&&(c|=1),c<<=1,this.readModule(e,r,s,a)&&(c|=1),c}readCorner1(e,r){let s=0;return this.readModule(e-1,0,e,r)&&(s|=1),s<<=1,this.readModule(e-1,1,e,r)&&(s|=1),s<<=1,this.readModule(e-1,2,e,r)&&(s|=1),s<<=1,this.readModule(0,r-2,e,r)&&(s|=1),s<<=1,this.readModule(0,r-1,e,r)&&(s|=1),s<<=1,this.readModule(1,r-1,e,r)&&(s|=1),s<<=1,this.readModule(2,r-1,e,r)&&(s|=1),s<<=1,this.readModule(3,r-1,e,r)&&(s|=1),s}readCorner2(e,r){let s=0;return this.readModule(e-3,0,e,r)&&(s|=1),s<<=1,this.readModule(e-2,0,e,r)&&(s|=1),s<<=1,this.readModule(e-1,0,e,r)&&(s|=1),s<<=1,this.readModule(0,r-4,e,r)&&(s|=1),s<<=1,this.readModule(0,r-3,e,r)&&(s|=1),s<<=1,this.readModule(0,r-2,e,r)&&(s|=1),s<<=1,this.readModule(0,r-1,e,r)&&(s|=1),s<<=1,this.readModule(1,r-1,e,r)&&(s|=1),s}readCorner3(e,r){let s=0;return this.readModule(e-1,0,e,r)&&(s|=1),s<<=1,this.readModule(e-1,r-1,e,r)&&(s|=1),s<<=1,this.readModule(0,r-3,e,r)&&(s|=1),s<<=1,this.readModule(0,r-2,e,r)&&(s|=1),s<<=1,this.readModule(0,r-1,e,r)&&(s|=1),s<<=1,this.readModule(1,r-3,e,r)&&(s|=1),s<<=1,this.readModule(1,r-2,e,r)&&(s|=1),s<<=1,this.readModule(1,r-1,e,r)&&(s|=1),s}readCorner4(e,r){let s=0;return this.readModule(e-3,0,e,r)&&(s|=1),s<<=1,this.readModule(e-2,0,e,r)&&(s|=1),s<<=1,this.readModule(e-1,0,e,r)&&(s|=1),s<<=1,this.readModule(0,r-2,e,r)&&(s|=1),s<<=1,this.readModule(0,r-1,e,r)&&(s|=1),s<<=1,this.readModule(1,r-1,e,r)&&(s|=1),s<<=1,this.readModule(2,r-1,e,r)&&(s|=1),s<<=1,this.readModule(3,r-1,e,r)&&(s|=1),s}extractDataRegion(e){const r=this.version.getSymbolSizeRows(),s=this.version.getSymbolSizeColumns();if(e.getHeight()!==r)throw new b("Dimension of bitMatrix must match the version size");const a=this.version.getDataRegionSizeRows(),c=this.version.getDataRegionSizeColumns(),f=r/a|0,g=s/c|0,x=f*a,_=g*c,v=new Se(_,x);for(let T=0;T<f;++T){const R=T*a;for(let M=0;M<g;++M){const L=M*c;for(let F=0;F<a;++F){const W=T*(a+2)+1+F,q=R+F;for(let he=0;he<c;++he){const ge=M*(c+2)+1+he;if(e.get(ge,W)){const le=L+he;v.set(le,q)}}}}}return v}}class Vo{constructor(e,r){this.numDataCodewords=e,this.codewords=r}static getDataBlocks(e,r){const s=r.getECBlocks();let a=0;const c=s.getECBlocks();for(let F of c)a+=F.getCount();const f=new Array(a);let g=0;for(let F of c)for(let W=0;W<F.getCount();W++){const q=F.getDataCodewords(),he=s.getECCodewords()+q;f[g++]=new Vo(q,new Uint8Array(he))}const _=f[0].codewords.length-s.getECCodewords(),v=_-1;let T=0;for(let F=0;F<v;F++)for(let W=0;W<g;W++)f[W].codewords[F]=e[T++];const R=r.getVersionNumber()===24,M=R?8:g;for(let F=0;F<M;F++)f[F].codewords[_-1]=e[T++];const L=f[0].codewords.length;for(let F=_;F<L;F++)for(let W=0;W<g;W++){const q=R?(W+8)%g:W,he=R&&q>7?F-1:F;f[q].codewords[he]=e[T++]}if(T!==e.length)throw new b;return f}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Ho{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new b(""+e);let r=0,s=this.bitOffset,a=this.byteOffset;const c=this.bytes;if(s>0){const f=8-s,g=e<f?e:f,x=f-g,_=255>>8-g<<x;r=(c[a]&_)>>x,e-=g,s+=g,s===8&&(s=0,a++)}if(e>0){for(;e>=8;)r=r<<8|c[a]&255,a++,e-=8;if(e>0){const f=8-e,g=255>>f<<f;r=r<<e|(c[a]&g)>>f,s+=e}}return this.bitOffset=s,this.byteOffset=a,r}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var tn;(function(I){I[I.PAD_ENCODE=0]="PAD_ENCODE",I[I.ASCII_ENCODE=1]="ASCII_ENCODE",I[I.C40_ENCODE=2]="C40_ENCODE",I[I.TEXT_ENCODE=3]="TEXT_ENCODE",I[I.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",I[I.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",I[I.BASE256_ENCODE=6]="BASE256_ENCODE"})(tn||(tn={}));class cr{static decode(e){const r=new Ho(e),s=new fe,a=new fe,c=new Array;let f=tn.ASCII_ENCODE;do if(f===tn.ASCII_ENCODE)f=this.decodeAsciiSegment(r,s,a);else{switch(f){case tn.C40_ENCODE:this.decodeC40Segment(r,s);break;case tn.TEXT_ENCODE:this.decodeTextSegment(r,s);break;case tn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,s);break;case tn.EDIFACT_ENCODE:this.decodeEdifactSegment(r,s);break;case tn.BASE256_ENCODE:this.decodeBase256Segment(r,s,c);break;default:throw new Y}f=tn.ASCII_ENCODE}while(f!==tn.PAD_ENCODE&&r.available()>0);return a.length()>0&&s.append(a.toString()),new at(e,s.toString(),c.length===0?null:c,null)}static decodeAsciiSegment(e,r,s){let a=!1;do{let c=e.readBits(8);if(c===0)throw new Y;if(c<=128)return a&&(c+=128),r.append(String.fromCharCode(c-1)),tn.ASCII_ENCODE;if(c===129)return tn.PAD_ENCODE;if(c<=229){const f=c-130;f<10&&r.append("0"),r.append(""+f)}else switch(c){case 230:return tn.C40_ENCODE;case 231:return tn.BASE256_ENCODE;case 232:r.append("");break;case 233:case 234:break;case 235:a=!0;break;case 236:r.append("[)>05"),s.insert(0,"");break;case 237:r.append("[)>06"),s.insert(0,"");break;case 238:return tn.ANSIX12_ENCODE;case 239:return tn.TEXT_ENCODE;case 240:return tn.EDIFACT_ENCODE;case 241:break;default:if(c!==254||e.available()!==0)throw new Y;break}}while(e.available()>0);return tn.ASCII_ENCODE}static decodeC40Segment(e,r){let s=!1;const a=[];let c=0;do{if(e.available()===8)return;const f=e.readBits(8);if(f===254)return;this.parseTwoBytes(f,e.readBits(8),a);for(let g=0;g<3;g++){const x=a[g];switch(c){case 0:if(x<3)c=x+1;else if(x<this.C40_BASIC_SET_CHARS.length){const _=this.C40_BASIC_SET_CHARS[x];s?(r.append(String.fromCharCode(_.charCodeAt(0)+128)),s=!1):r.append(_)}else throw new Y;break;case 1:s?(r.append(String.fromCharCode(x+128)),s=!1):r.append(String.fromCharCode(x)),c=0;break;case 2:if(x<this.C40_SHIFT2_SET_CHARS.length){const _=this.C40_SHIFT2_SET_CHARS[x];s?(r.append(String.fromCharCode(_.charCodeAt(0)+128)),s=!1):r.append(_)}else switch(x){case 27:r.append("");break;case 30:s=!0;break;default:throw new Y}c=0;break;case 3:s?(r.append(String.fromCharCode(x+224)),s=!1):r.append(String.fromCharCode(x+96)),c=0;break;default:throw new Y}}}while(e.available()>0)}static decodeTextSegment(e,r){let s=!1,a=[],c=0;do{if(e.available()===8)return;const f=e.readBits(8);if(f===254)return;this.parseTwoBytes(f,e.readBits(8),a);for(let g=0;g<3;g++){const x=a[g];switch(c){case 0:if(x<3)c=x+1;else if(x<this.TEXT_BASIC_SET_CHARS.length){const _=this.TEXT_BASIC_SET_CHARS[x];s?(r.append(String.fromCharCode(_.charCodeAt(0)+128)),s=!1):r.append(_)}else throw new Y;break;case 1:s?(r.append(String.fromCharCode(x+128)),s=!1):r.append(String.fromCharCode(x)),c=0;break;case 2:if(x<this.TEXT_SHIFT2_SET_CHARS.length){const _=this.TEXT_SHIFT2_SET_CHARS[x];s?(r.append(String.fromCharCode(_.charCodeAt(0)+128)),s=!1):r.append(_)}else switch(x){case 27:r.append("");break;case 30:s=!0;break;default:throw new Y}c=0;break;case 3:if(x<this.TEXT_SHIFT3_SET_CHARS.length){const _=this.TEXT_SHIFT3_SET_CHARS[x];s?(r.append(String.fromCharCode(_.charCodeAt(0)+128)),s=!1):r.append(_),c=0}else throw new Y;break;default:throw new Y}}}while(e.available()>0)}static decodeAnsiX12Segment(e,r){const s=[];do{if(e.available()===8)return;const a=e.readBits(8);if(a===254)return;this.parseTwoBytes(a,e.readBits(8),s);for(let c=0;c<3;c++){const f=s[c];switch(f){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(f<14)r.append(String.fromCharCode(f+44));else if(f<40)r.append(String.fromCharCode(f+51));else throw new Y;break}}}while(e.available()>0)}static parseTwoBytes(e,r,s){let a=(e<<8)+r-1,c=Math.floor(a/1600);s[0]=c,a-=c*1600,c=Math.floor(a/40),s[1]=c,s[2]=a-c*40}static decodeEdifactSegment(e,r){do{if(e.available()<=16)return;for(let s=0;s<4;s++){let a=e.readBits(6);if(a===31){const c=8-e.getBitOffset();c!==8&&e.readBits(c);return}(a&32)===0&&(a|=64),r.append(String.fromCharCode(a))}}while(e.available()>0)}static decodeBase256Segment(e,r,s){let a=1+e.getByteOffset();const c=this.unrandomize255State(e.readBits(8),a++);let f;if(c===0?f=e.available()/8|0:c<250?f=c:f=250*(c-249)+this.unrandomize255State(e.readBits(8),a++),f<0)throw new Y;const g=new Uint8Array(f);for(let x=0;x<f;x++){if(e.available()<8)throw new Y;g[x]=this.unrandomize255State(e.readBits(8),a++)}s.push(g);try{r.append(ve.decode(g,re.ISO88591))}catch(x){throw new sr("Platform does not support required encoding: "+x.message)}}static unrandomize255State(e,r){const s=149*r%255+1,a=e-s;return a>=0?a:a+256}}cr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],cr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],cr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],cr.TEXT_SHIFT2_SET_CHARS=cr.C40_SHIFT2_SET_CHARS,cr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class js{constructor(){this.rsDecoder=new Ei(ht.DATA_MATRIX_FIELD_256)}decode(e){const r=new Wn(e),s=r.getVersion(),a=r.readCodewords(),c=Vo.getDataBlocks(a,s);let f=0;for(let _ of c)f+=_.getNumDataCodewords();const g=new Uint8Array(f),x=c.length;for(let _=0;_<x;_++){const v=c[_],T=v.getCodewords(),R=v.getNumDataCodewords();this.correctErrors(T,R);for(let M=0;M<R;M++)g[M*x+_]=T[M]}return cr.decode(g)}correctErrors(e,r){const s=new Int32Array(e);try{this.rsDecoder.decode(s,e.length-r)}catch{throw new V}for(let a=0;a<r;a++)e[a]=s[a]}}class Tt{constructor(e){this.image=e,this.rectangleDetector=new wr(this.image)}detect(){const e=this.rectangleDetector.detect();let r=this.detectSolid1(e);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new K;r=this.shiftToModuleCenter(r);const s=r[0],a=r[1],c=r[2],f=r[3];let g=this.transitionsBetween(s,f)+1,x=this.transitionsBetween(c,f)+1;(g&1)===1&&(g+=1),(x&1)===1&&(x+=1),4*g<7*x&&4*x<7*g&&(g=x=Math.max(g,x));let _=Tt.sampleGrid(this.image,s,a,c,f,g,x);return new Ai(_,[s,a,c,f])}static shiftPoint(e,r,s){let a=(r.getX()-e.getX())/(s+1),c=(r.getY()-e.getY())/(s+1);return new Ne(e.getX()+a,e.getY()+c)}static moveAway(e,r,s){let a=e.getX(),c=e.getY();return a<r?a-=1:a+=1,c<s?c-=1:c+=1,new Ne(a,c)}detectSolid1(e){let r=e[0],s=e[1],a=e[3],c=e[2],f=this.transitionsBetween(r,s),g=this.transitionsBetween(s,a),x=this.transitionsBetween(a,c),_=this.transitionsBetween(c,r),v=f,T=[c,r,s,a];return v>g&&(v=g,T[0]=r,T[1]=s,T[2]=a,T[3]=c),v>x&&(v=x,T[0]=s,T[1]=a,T[2]=c,T[3]=r),v>_&&(T[0]=a,T[1]=c,T[2]=r,T[3]=s),T}detectSolid2(e){let r=e[0],s=e[1],a=e[2],c=e[3],f=this.transitionsBetween(r,c),g=Tt.shiftPoint(s,a,(f+1)*4),x=Tt.shiftPoint(a,s,(f+1)*4),_=this.transitionsBetween(g,r),v=this.transitionsBetween(x,c);return _<v?(e[0]=r,e[1]=s,e[2]=a,e[3]=c):(e[0]=s,e[1]=a,e[2]=c,e[3]=r),e}correctTopRight(e){let r=e[0],s=e[1],a=e[2],c=e[3],f=this.transitionsBetween(r,c),g=this.transitionsBetween(s,c),x=Tt.shiftPoint(r,s,(g+1)*4),_=Tt.shiftPoint(a,s,(f+1)*4);f=this.transitionsBetween(x,c),g=this.transitionsBetween(_,c);let v=new Ne(c.getX()+(a.getX()-s.getX())/(f+1),c.getY()+(a.getY()-s.getY())/(f+1)),T=new Ne(c.getX()+(r.getX()-s.getX())/(g+1),c.getY()+(r.getY()-s.getY())/(g+1));if(!this.isValid(v))return this.isValid(T)?T:null;if(!this.isValid(T))return v;let R=this.transitionsBetween(x,v)+this.transitionsBetween(_,v),M=this.transitionsBetween(x,T)+this.transitionsBetween(_,T);return R>M?v:T}shiftToModuleCenter(e){let r=e[0],s=e[1],a=e[2],c=e[3],f=this.transitionsBetween(r,c)+1,g=this.transitionsBetween(a,c)+1,x=Tt.shiftPoint(r,s,g*4),_=Tt.shiftPoint(a,s,f*4);f=this.transitionsBetween(x,c)+1,g=this.transitionsBetween(_,c)+1,(f&1)===1&&(f+=1),(g&1)===1&&(g+=1);let v=(r.getX()+s.getX()+a.getX()+c.getX())/4,T=(r.getY()+s.getY()+a.getY()+c.getY())/4;r=Tt.moveAway(r,v,T),s=Tt.moveAway(s,v,T),a=Tt.moveAway(a,v,T),c=Tt.moveAway(c,v,T);let R,M;return x=Tt.shiftPoint(r,s,g*4),x=Tt.shiftPoint(x,c,f*4),R=Tt.shiftPoint(s,r,g*4),R=Tt.shiftPoint(R,a,f*4),_=Tt.shiftPoint(a,c,g*4),_=Tt.shiftPoint(_,s,f*4),M=Tt.shiftPoint(c,a,g*4),M=Tt.shiftPoint(M,r,f*4),[x,R,_,M]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,r,s,a,c,f,g){return or.getInstance().sampleGrid(e,f,g,.5,.5,f-.5,.5,f-.5,g-.5,.5,g-.5,r.getX(),r.getY(),c.getX(),c.getY(),a.getX(),a.getY(),s.getX(),s.getY())}transitionsBetween(e,r){let s=Math.trunc(e.getX()),a=Math.trunc(e.getY()),c=Math.trunc(r.getX()),f=Math.trunc(r.getY()),g=Math.abs(f-a)>Math.abs(c-s);if(g){let F=s;s=a,a=F,F=c,c=f,f=F}let x=Math.abs(c-s),_=Math.abs(f-a),v=-x/2,T=a<f?1:-1,R=s<c?1:-1,M=0,L=this.image.get(g?a:s,g?s:a);for(let F=s,W=a;F!==c;F+=R){let q=this.image.get(g?W:F,g?F:W);if(q!==L&&(M++,L=q),v+=_,v>0){if(W===f)break;W+=T,v-=x}}return M}}class ur{constructor(){this.decoder=new js}decode(e,r=null){let s,a;if(r!=null&&r.has(ie.PURE_BARCODE)){const _=ur.extractPureBits(e.getBlackMatrix());s=this.decoder.decode(_),a=ur.NO_POINTS}else{const _=new Tt(e.getBlackMatrix()).detect();s=this.decoder.decode(_.getBits()),a=_.getPoints()}const c=s.getRawBytes(),f=new Ve(s.getText(),c,8*c.length,a,we.DATA_MATRIX,$.currentTimeMillis()),g=s.getByteSegments();g!=null&&f.putMetadata(Be.BYTE_SEGMENTS,g);const x=s.getECLevel();return x!=null&&f.putMetadata(Be.ERROR_CORRECTION_LEVEL,x),f}reset(){}static extractPureBits(e){const r=e.getTopLeftOnBit(),s=e.getBottomRightOnBit();if(r==null||s==null)throw new K;const a=this.moduleSize(r,e);let c=r[1];const f=s[1];let g=r[0];const _=(s[0]-g+1)/a,v=(f-c+1)/a;if(_<=0||v<=0)throw new K;const T=a/2;c+=T,g+=T;const R=new Se(_,v);for(let M=0;M<v;M++){const L=c+M*a;for(let F=0;F<_;F++)e.get(g+F*a,L)&&R.set(F,M)}return R}static moduleSize(e,r){const s=r.getWidth();let a=e[0];const c=e[1];for(;a<s&&r.get(a,c);)a++;if(a===s)throw new K;const f=a-e[0];if(f===0)throw new K;return f}}ur.NO_POINTS=[];class Uc extends Ge{constructor(e=500){super(new ur,e)}}var Ti;(function(I){I[I.L=0]="L",I[I.M=1]="M",I[I.Q=2]="Q",I[I.H=3]="H"})(Ti||(Ti={}));class Et{constructor(e,r,s){this.value=e,this.stringValue=r,this.bits=s,Et.FOR_BITS.set(s,this),Et.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return Et.L;case"M":return Et.M;case"Q":return Et.Q;case"H":return Et.H;default:throw new O(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof Et))return!1;const r=e;return this.value===r.value}static forBits(e){if(e<0||e>=Et.FOR_BITS.size)throw new b;return Et.FOR_BITS.get(e)}}Et.FOR_BITS=new Map,Et.FOR_VALUE=new Map,Et.L=new Et(Ti.L,"L",1),Et.M=new Et(Ti.M,"M",0),Et.Q=new Et(Ti.Q,"Q",3),Et.H=new Et(Ti.H,"H",2);class un{constructor(e){this.errorCorrectionLevel=Et.forBits(e>>3&3),this.dataMask=e&7}static numBitsDiffering(e,r){return te.bitCount(e^r)}static decodeFormatInformation(e,r){const s=un.doDecodeFormatInformation(e,r);return s!==null?s:un.doDecodeFormatInformation(e^un.FORMAT_INFO_MASK_QR,r^un.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,r){let s=Number.MAX_SAFE_INTEGER,a=0;for(const c of un.FORMAT_INFO_DECODE_LOOKUP){const f=c[0];if(f===e||f===r)return new un(c[1]);let g=un.numBitsDiffering(e,f);g<s&&(a=c[1],s=g),e!==r&&(g=un.numBitsDiffering(r,f),g<s&&(a=c[1],s=g))}return s<=3?new un(a):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof un))return!1;const r=e;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask}}un.FORMAT_INFO_MASK_QR=21522,un.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class z{constructor(e,...r){this.ecCodewordsPerBlock=e,this.ecBlocks=r}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const r=this.ecBlocks;for(const s of r)e+=s.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class D{constructor(e,r){this.count=e,this.dataCodewords=r}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Fe{constructor(e,r,...s){this.versionNumber=e,this.alignmentPatternCenters=r,this.ecBlocks=s;let a=0;const c=s[0].getECCodewordsPerBlock(),f=s[0].getECBlocks();for(const g of f)a+=g.getCount()*(g.getDataCodewords()+c);this.totalCodewords=a}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new Y;try{return this.getVersionForNumber((e-17)/4)}catch{throw new Y}}static getVersionForNumber(e){if(e<1||e>40)throw new b;return Fe.VERSIONS[e-1]}static decodeVersionInformation(e){let r=Number.MAX_SAFE_INTEGER,s=0;for(let a=0;a<Fe.VERSION_DECODE_INFO.length;a++){const c=Fe.VERSION_DECODE_INFO[a];if(c===e)return Fe.getVersionForNumber(a+7);const f=un.numBitsDiffering(e,c);f<r&&(s=a+7,r=f)}return r<=3?Fe.getVersionForNumber(s):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),r=new Se(e);r.setRegion(0,0,9,9),r.setRegion(e-8,0,8,9),r.setRegion(0,e-8,9,8);const s=this.alignmentPatternCenters.length;for(let a=0;a<s;a++){const c=this.alignmentPatternCenters[a]-2;for(let f=0;f<s;f++)a===0&&(f===0||f===s-1)||a===s-1&&f===0||r.setRegion(this.alignmentPatternCenters[f]-2,c,5,5)}return r.setRegion(6,9,1,e-17),r.setRegion(9,6,e-17,1),this.versionNumber>6&&(r.setRegion(e-11,0,3,6),r.setRegion(0,e-11,6,3)),r}toString(){return""+this.versionNumber}}Fe.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Fe.VERSIONS=[new Fe(1,new Int32Array(0),new z(7,new D(1,19)),new z(10,new D(1,16)),new z(13,new D(1,13)),new z(17,new D(1,9))),new Fe(2,Int32Array.from([6,18]),new z(10,new D(1,34)),new z(16,new D(1,28)),new z(22,new D(1,22)),new z(28,new D(1,16))),new Fe(3,Int32Array.from([6,22]),new z(15,new D(1,55)),new z(26,new D(1,44)),new z(18,new D(2,17)),new z(22,new D(2,13))),new Fe(4,Int32Array.from([6,26]),new z(20,new D(1,80)),new z(18,new D(2,32)),new z(26,new D(2,24)),new z(16,new D(4,9))),new Fe(5,Int32Array.from([6,30]),new z(26,new D(1,108)),new z(24,new D(2,43)),new z(18,new D(2,15),new D(2,16)),new z(22,new D(2,11),new D(2,12))),new Fe(6,Int32Array.from([6,34]),new z(18,new D(2,68)),new z(16,new D(4,27)),new z(24,new D(4,19)),new z(28,new D(4,15))),new Fe(7,Int32Array.from([6,22,38]),new z(20,new D(2,78)),new z(18,new D(4,31)),new z(18,new D(2,14),new D(4,15)),new z(26,new D(4,13),new D(1,14))),new Fe(8,Int32Array.from([6,24,42]),new z(24,new D(2,97)),new z(22,new D(2,38),new D(2,39)),new z(22,new D(4,18),new D(2,19)),new z(26,new D(4,14),new D(2,15))),new Fe(9,Int32Array.from([6,26,46]),new z(30,new D(2,116)),new z(22,new D(3,36),new D(2,37)),new z(20,new D(4,16),new D(4,17)),new z(24,new D(4,12),new D(4,13))),new Fe(10,Int32Array.from([6,28,50]),new z(18,new D(2,68),new D(2,69)),new z(26,new D(4,43),new D(1,44)),new z(24,new D(6,19),new D(2,20)),new z(28,new D(6,15),new D(2,16))),new Fe(11,Int32Array.from([6,30,54]),new z(20,new D(4,81)),new z(30,new D(1,50),new D(4,51)),new z(28,new D(4,22),new D(4,23)),new z(24,new D(3,12),new D(8,13))),new Fe(12,Int32Array.from([6,32,58]),new z(24,new D(2,92),new D(2,93)),new z(22,new D(6,36),new D(2,37)),new z(26,new D(4,20),new D(6,21)),new z(28,new D(7,14),new D(4,15))),new Fe(13,Int32Array.from([6,34,62]),new z(26,new D(4,107)),new z(22,new D(8,37),new D(1,38)),new z(24,new D(8,20),new D(4,21)),new z(22,new D(12,11),new D(4,12))),new Fe(14,Int32Array.from([6,26,46,66]),new z(30,new D(3,115),new D(1,116)),new z(24,new D(4,40),new D(5,41)),new z(20,new D(11,16),new D(5,17)),new z(24,new D(11,12),new D(5,13))),new Fe(15,Int32Array.from([6,26,48,70]),new z(22,new D(5,87),new D(1,88)),new z(24,new D(5,41),new D(5,42)),new z(30,new D(5,24),new D(7,25)),new z(24,new D(11,12),new D(7,13))),new Fe(16,Int32Array.from([6,26,50,74]),new z(24,new D(5,98),new D(1,99)),new z(28,new D(7,45),new D(3,46)),new z(24,new D(15,19),new D(2,20)),new z(30,new D(3,15),new D(13,16))),new Fe(17,Int32Array.from([6,30,54,78]),new z(28,new D(1,107),new D(5,108)),new z(28,new D(10,46),new D(1,47)),new z(28,new D(1,22),new D(15,23)),new z(28,new D(2,14),new D(17,15))),new Fe(18,Int32Array.from([6,30,56,82]),new z(30,new D(5,120),new D(1,121)),new z(26,new D(9,43),new D(4,44)),new z(28,new D(17,22),new D(1,23)),new z(28,new D(2,14),new D(19,15))),new Fe(19,Int32Array.from([6,30,58,86]),new z(28,new D(3,113),new D(4,114)),new z(26,new D(3,44),new D(11,45)),new z(26,new D(17,21),new D(4,22)),new z(26,new D(9,13),new D(16,14))),new Fe(20,Int32Array.from([6,34,62,90]),new z(28,new D(3,107),new D(5,108)),new z(26,new D(3,41),new D(13,42)),new z(30,new D(15,24),new D(5,25)),new z(28,new D(15,15),new D(10,16))),new Fe(21,Int32Array.from([6,28,50,72,94]),new z(28,new D(4,116),new D(4,117)),new z(26,new D(17,42)),new z(28,new D(17,22),new D(6,23)),new z(30,new D(19,16),new D(6,17))),new Fe(22,Int32Array.from([6,26,50,74,98]),new z(28,new D(2,111),new D(7,112)),new z(28,new D(17,46)),new z(30,new D(7,24),new D(16,25)),new z(24,new D(34,13))),new Fe(23,Int32Array.from([6,30,54,78,102]),new z(30,new D(4,121),new D(5,122)),new z(28,new D(4,47),new D(14,48)),new z(30,new D(11,24),new D(14,25)),new z(30,new D(16,15),new D(14,16))),new Fe(24,Int32Array.from([6,28,54,80,106]),new z(30,new D(6,117),new D(4,118)),new z(28,new D(6,45),new D(14,46)),new z(30,new D(11,24),new D(16,25)),new z(30,new D(30,16),new D(2,17))),new Fe(25,Int32Array.from([6,32,58,84,110]),new z(26,new D(8,106),new D(4,107)),new z(28,new D(8,47),new D(13,48)),new z(30,new D(7,24),new D(22,25)),new z(30,new D(22,15),new D(13,16))),new Fe(26,Int32Array.from([6,30,58,86,114]),new z(28,new D(10,114),new D(2,115)),new z(28,new D(19,46),new D(4,47)),new z(28,new D(28,22),new D(6,23)),new z(30,new D(33,16),new D(4,17))),new Fe(27,Int32Array.from([6,34,62,90,118]),new z(30,new D(8,122),new D(4,123)),new z(28,new D(22,45),new D(3,46)),new z(30,new D(8,23),new D(26,24)),new z(30,new D(12,15),new D(28,16))),new Fe(28,Int32Array.from([6,26,50,74,98,122]),new z(30,new D(3,117),new D(10,118)),new z(28,new D(3,45),new D(23,46)),new z(30,new D(4,24),new D(31,25)),new z(30,new D(11,15),new D(31,16))),new Fe(29,Int32Array.from([6,30,54,78,102,126]),new z(30,new D(7,116),new D(7,117)),new z(28,new D(21,45),new D(7,46)),new z(30,new D(1,23),new D(37,24)),new z(30,new D(19,15),new D(26,16))),new Fe(30,Int32Array.from([6,26,52,78,104,130]),new z(30,new D(5,115),new D(10,116)),new z(28,new D(19,47),new D(10,48)),new z(30,new D(15,24),new D(25,25)),new z(30,new D(23,15),new D(25,16))),new Fe(31,Int32Array.from([6,30,56,82,108,134]),new z(30,new D(13,115),new D(3,116)),new z(28,new D(2,46),new D(29,47)),new z(30,new D(42,24),new D(1,25)),new z(30,new D(23,15),new D(28,16))),new Fe(32,Int32Array.from([6,34,60,86,112,138]),new z(30,new D(17,115)),new z(28,new D(10,46),new D(23,47)),new z(30,new D(10,24),new D(35,25)),new z(30,new D(19,15),new D(35,16))),new Fe(33,Int32Array.from([6,30,58,86,114,142]),new z(30,new D(17,115),new D(1,116)),new z(28,new D(14,46),new D(21,47)),new z(30,new D(29,24),new D(19,25)),new z(30,new D(11,15),new D(46,16))),new Fe(34,Int32Array.from([6,34,62,90,118,146]),new z(30,new D(13,115),new D(6,116)),new z(28,new D(14,46),new D(23,47)),new z(30,new D(44,24),new D(7,25)),new z(30,new D(59,16),new D(1,17))),new Fe(35,Int32Array.from([6,30,54,78,102,126,150]),new z(30,new D(12,121),new D(7,122)),new z(28,new D(12,47),new D(26,48)),new z(30,new D(39,24),new D(14,25)),new z(30,new D(22,15),new D(41,16))),new Fe(36,Int32Array.from([6,24,50,76,102,128,154]),new z(30,new D(6,121),new D(14,122)),new z(28,new D(6,47),new D(34,48)),new z(30,new D(46,24),new D(10,25)),new z(30,new D(2,15),new D(64,16))),new Fe(37,Int32Array.from([6,28,54,80,106,132,158]),new z(30,new D(17,122),new D(4,123)),new z(28,new D(29,46),new D(14,47)),new z(30,new D(49,24),new D(10,25)),new z(30,new D(24,15),new D(46,16))),new Fe(38,Int32Array.from([6,32,58,84,110,136,162]),new z(30,new D(4,122),new D(18,123)),new z(28,new D(13,46),new D(32,47)),new z(30,new D(48,24),new D(14,25)),new z(30,new D(42,15),new D(32,16))),new Fe(39,Int32Array.from([6,26,54,82,110,138,166]),new z(30,new D(20,117),new D(4,118)),new z(28,new D(40,47),new D(7,48)),new z(30,new D(43,24),new D(22,25)),new z(30,new D(10,15),new D(67,16))),new Fe(40,Int32Array.from([6,30,58,86,114,142,170]),new z(30,new D(19,118),new D(6,119)),new z(28,new D(18,47),new D(31,48)),new z(30,new D(34,24),new D(34,25)),new z(30,new D(20,15),new D(61,16)))];var Kt;(function(I){I[I.DATA_MASK_000=0]="DATA_MASK_000",I[I.DATA_MASK_001=1]="DATA_MASK_001",I[I.DATA_MASK_010=2]="DATA_MASK_010",I[I.DATA_MASK_011=3]="DATA_MASK_011",I[I.DATA_MASK_100=4]="DATA_MASK_100",I[I.DATA_MASK_101=5]="DATA_MASK_101",I[I.DATA_MASK_110=6]="DATA_MASK_110",I[I.DATA_MASK_111=7]="DATA_MASK_111"})(Kt||(Kt={}));class et{constructor(e,r){this.value=e,this.isMasked=r}unmaskBitMatrix(e,r){for(let s=0;s<r;s++)for(let a=0;a<r;a++)this.isMasked(s,a)&&e.flip(a,s)}}et.values=new Map([[Kt.DATA_MASK_000,new et(Kt.DATA_MASK_000,(I,e)=>(I+e&1)===0)],[Kt.DATA_MASK_001,new et(Kt.DATA_MASK_001,(I,e)=>(I&1)===0)],[Kt.DATA_MASK_010,new et(Kt.DATA_MASK_010,(I,e)=>e%3===0)],[Kt.DATA_MASK_011,new et(Kt.DATA_MASK_011,(I,e)=>(I+e)%3===0)],[Kt.DATA_MASK_100,new et(Kt.DATA_MASK_100,(I,e)=>(Math.floor(I/2)+Math.floor(e/3)&1)===0)],[Kt.DATA_MASK_101,new et(Kt.DATA_MASK_101,(I,e)=>I*e%6===0)],[Kt.DATA_MASK_110,new et(Kt.DATA_MASK_110,(I,e)=>I*e%6<3)],[Kt.DATA_MASK_111,new et(Kt.DATA_MASK_111,(I,e)=>(I+e+I*e%3&1)===0)]]);class ea{constructor(e){const r=e.getHeight();if(r<21||(r&3)!==1)throw new Y;this.bitMatrix=e}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let e=0;for(let c=0;c<6;c++)e=this.copyBit(c,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let c=5;c>=0;c--)e=this.copyBit(8,c,e);const r=this.bitMatrix.getHeight();let s=0;const a=r-7;for(let c=r-1;c>=a;c--)s=this.copyBit(8,c,s);for(let c=r-8;c<r;c++)s=this.copyBit(c,8,s);if(this.parsedFormatInfo=un.decodeFormatInformation(e,s),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new Y}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const e=this.bitMatrix.getHeight(),r=Math.floor((e-17)/4);if(r<=6)return Fe.getVersionForNumber(r);let s=0;const a=e-11;for(let f=5;f>=0;f--)for(let g=e-9;g>=a;g--)s=this.copyBit(g,f,s);let c=Fe.decodeVersionInformation(s);if(c!==null&&c.getDimensionForVersion()===e)return this.parsedVersion=c,c;s=0;for(let f=5;f>=0;f--)for(let g=e-9;g>=a;g--)s=this.copyBit(f,g,s);if(c=Fe.decodeVersionInformation(s),c!==null&&c.getDimensionForVersion()===e)return this.parsedVersion=c,c;throw new Y}copyBit(e,r,s){return(this.isMirror?this.bitMatrix.get(r,e):this.bitMatrix.get(e,r))?s<<1|1:s<<1}readCodewords(){const e=this.readFormatInformation(),r=this.readVersion(),s=et.values.get(e.getDataMask()),a=this.bitMatrix.getHeight();s.unmaskBitMatrix(this.bitMatrix,a);const c=r.buildFunctionPattern();let f=!0;const g=new Uint8Array(r.getTotalCodewords());let x=0,_=0,v=0;for(let T=a-1;T>0;T-=2){T===6&&T--;for(let R=0;R<a;R++){const M=f?a-1-R:R;for(let L=0;L<2;L++)c.get(T-L,M)||(v++,_<<=1,this.bitMatrix.get(T-L,M)&&(_|=1),v===8&&(g[x++]=_,v=0,_=0))}f=!f}if(x!==r.getTotalCodewords())throw new Y;return g}remask(){if(this.parsedFormatInfo===null)return;const e=et.values[this.parsedFormatInfo.getDataMask()],r=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,r)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let r=0,s=e.getWidth();r<s;r++)for(let a=r+1,c=e.getHeight();a<c;a++)e.get(r,a)!==e.get(a,r)&&(e.flip(a,r),e.flip(r,a))}}class Xs{constructor(e,r){this.numDataCodewords=e,this.codewords=r}static getDataBlocks(e,r,s){if(e.length!==r.getTotalCodewords())throw new b;const a=r.getECBlocksForLevel(s);let c=0;const f=a.getECBlocks();for(const L of f)c+=L.getCount();const g=new Array(c);let x=0;for(const L of f)for(let F=0;F<L.getCount();F++){const W=L.getDataCodewords(),q=a.getECCodewordsPerBlock()+W;g[x++]=new Xs(W,new Uint8Array(q))}const _=g[0].codewords.length;let v=g.length-1;for(;v>=0&&g[v].codewords.length!==_;)v--;v++;const T=_-a.getECCodewordsPerBlock();let R=0;for(let L=0;L<T;L++)for(let F=0;F<x;F++)g[F].codewords[L]=e[R++];for(let L=v;L<x;L++)g[L].codewords[T]=e[R++];const M=g[0].codewords.length;for(let L=T;L<M;L++)for(let F=0;F<x;F++){const W=F<v?L:L+1;g[F].codewords[W]=e[R++]}return g}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Pn;(function(I){I[I.TERMINATOR=0]="TERMINATOR",I[I.NUMERIC=1]="NUMERIC",I[I.ALPHANUMERIC=2]="ALPHANUMERIC",I[I.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",I[I.BYTE=4]="BYTE",I[I.ECI=5]="ECI",I[I.KANJI=6]="KANJI",I[I.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",I[I.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",I[I.HANZI=9]="HANZI"})(Pn||(Pn={}));class Ue{constructor(e,r,s,a){this.value=e,this.stringValue=r,this.characterCountBitsForVersions=s,this.bits=a,Ue.FOR_BITS.set(a,this),Ue.FOR_VALUE.set(e,this)}static forBits(e){const r=Ue.FOR_BITS.get(e);if(r===void 0)throw new b;return r}getCharacterCountBits(e){const r=e.getVersionNumber();let s;return r<=9?s=0:r<=26?s=1:s=2,this.characterCountBitsForVersions[s]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof Ue))return!1;const r=e;return this.value===r.value}toString(){return this.stringValue}}Ue.FOR_BITS=new Map,Ue.FOR_VALUE=new Map,Ue.TERMINATOR=new Ue(Pn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ue.NUMERIC=new Ue(Pn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ue.ALPHANUMERIC=new Ue(Pn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ue.STRUCTURED_APPEND=new Ue(Pn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ue.BYTE=new Ue(Pn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ue.ECI=new Ue(Pn.ECI,"ECI",Int32Array.from([0,0,0]),7),Ue.KANJI=new Ue(Pn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ue.FNC1_FIRST_POSITION=new Ue(Pn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ue.FNC1_SECOND_POSITION=new Ue(Pn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ue.HANZI=new Ue(Pn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Ot{static decode(e,r,s,a){const c=new Ho(e);let f=new fe;const g=new Array;let x=-1,_=-1;try{let v=null,T=!1,R;do{if(c.available()<4)R=Ue.TERMINATOR;else{const M=c.readBits(4);R=Ue.forBits(M)}switch(R){case Ue.TERMINATOR:break;case Ue.FNC1_FIRST_POSITION:case Ue.FNC1_SECOND_POSITION:T=!0;break;case Ue.STRUCTURED_APPEND:if(c.available()<16)throw new Y;x=c.readBits(8),_=c.readBits(8);break;case Ue.ECI:const M=Ot.parseECIValue(c);if(v=j.getCharacterSetECIByValue(M),v===null)throw new Y;break;case Ue.HANZI:const L=c.readBits(4),F=c.readBits(R.getCharacterCountBits(r));L===Ot.GB2312_SUBSET&&Ot.decodeHanziSegment(c,f,F);break;default:const W=c.readBits(R.getCharacterCountBits(r));switch(R){case Ue.NUMERIC:Ot.decodeNumericSegment(c,f,W);break;case Ue.ALPHANUMERIC:Ot.decodeAlphanumericSegment(c,f,W,T);break;case Ue.BYTE:Ot.decodeByteSegment(c,f,W,v,g,a);break;case Ue.KANJI:Ot.decodeKanjiSegment(c,f,W);break;default:throw new Y}break}}while(R!==Ue.TERMINATOR)}catch{throw new Y}return new at(e,f.toString(),g.length===0?null:g,s===null?null:s.toString(),x,_)}static decodeHanziSegment(e,r,s){if(s*13>e.available())throw new Y;const a=new Uint8Array(2*s);let c=0;for(;s>0;){const f=e.readBits(13);let g=f/96<<8&4294967295|f%96;g<959?g+=41377:g+=42657,a[c]=g>>8&255,a[c+1]=g&255,c+=2,s--}try{r.append(ve.decode(a,re.GB2312))}catch(f){throw new Y(f)}}static decodeKanjiSegment(e,r,s){if(s*13>e.available())throw new Y;const a=new Uint8Array(2*s);let c=0;for(;s>0;){const f=e.readBits(13);let g=f/192<<8&4294967295|f%192;g<7936?g+=33088:g+=49472,a[c]=g>>8,a[c+1]=g,c+=2,s--}try{r.append(ve.decode(a,re.SHIFT_JIS))}catch(f){throw new Y(f)}}static decodeByteSegment(e,r,s,a,c,f){if(8*s>e.available())throw new Y;const g=new Uint8Array(s);for(let _=0;_<s;_++)g[_]=e.readBits(8);let x;a===null?x=re.guessEncoding(g,f):x=a.getName();try{r.append(ve.decode(g,x))}catch(_){throw new Y(_)}c.push(g)}static toAlphaNumericChar(e){if(e>=Ot.ALPHANUMERIC_CHARS.length)throw new Y;return Ot.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,r,s,a){const c=r.length();for(;s>1;){if(e.available()<11)throw new Y;const f=e.readBits(11);r.append(Ot.toAlphaNumericChar(Math.floor(f/45))),r.append(Ot.toAlphaNumericChar(f%45)),s-=2}if(s===1){if(e.available()<6)throw new Y;r.append(Ot.toAlphaNumericChar(e.readBits(6)))}if(a)for(let f=c;f<r.length();f++)r.charAt(f)==="%"&&(f<r.length()-1&&r.charAt(f+1)==="%"?r.deleteCharAt(f+1):r.setCharAt(f,""))}static decodeNumericSegment(e,r,s){for(;s>=3;){if(e.available()<10)throw new Y;const a=e.readBits(10);if(a>=1e3)throw new Y;r.append(Ot.toAlphaNumericChar(Math.floor(a/100))),r.append(Ot.toAlphaNumericChar(Math.floor(a/10)%10)),r.append(Ot.toAlphaNumericChar(a%10)),s-=3}if(s===2){if(e.available()<7)throw new Y;const a=e.readBits(7);if(a>=100)throw new Y;r.append(Ot.toAlphaNumericChar(Math.floor(a/10))),r.append(Ot.toAlphaNumericChar(a%10))}else if(s===1){if(e.available()<4)throw new Y;const a=e.readBits(4);if(a>=10)throw new Y;r.append(Ot.toAlphaNumericChar(a))}}static parseECIValue(e){const r=e.readBits(8);if((r&128)===0)return r&127;if((r&192)===128){const s=e.readBits(8);return(r&63)<<8&4294967295|s}if((r&224)===192){const s=e.readBits(16);return(r&31)<<16&4294967295|s}throw new Y}}Ot.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Ot.GB2312_SUBSET=1;class Wo{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||e===null||e.length<3)return;const r=e[0];e[0]=e[2],e[2]=r}}class zo{constructor(){this.rsDecoder=new Ei(ht.QR_CODE_FIELD_256)}decodeBooleanArray(e,r){return this.decodeBitMatrix(Se.parseFromBooleanArray(e),r)}decodeBitMatrix(e,r){const s=new ea(e);let a=null;try{return this.decodeBitMatrixParser(s,r)}catch(c){a=c}try{s.remask(),s.setMirror(!0),s.readVersion(),s.readFormatInformation(),s.mirror();const c=this.decodeBitMatrixParser(s,r);return c.setOther(new Wo(!0)),c}catch(c){throw a!==null?a:c}}decodeBitMatrixParser(e,r){const s=e.readVersion(),a=e.readFormatInformation().getErrorCorrectionLevel(),c=e.readCodewords(),f=Xs.getDataBlocks(c,s,a);let g=0;for(const v of f)g+=v.getNumDataCodewords();const x=new Uint8Array(g);let _=0;for(const v of f){const T=v.getCodewords(),R=v.getNumDataCodewords();this.correctErrors(T,R);for(let M=0;M<R;M++)x[_++]=T[M]}return Ot.decode(x,s,a,r)}correctErrors(e,r){const s=new Int32Array(e);try{this.rsDecoder.decode(s,e.length-r)}catch{throw new V}for(let a=0;a<r;a++)e[a]=s[a]}}class Ni extends Ne{constructor(e,r,s){super(e,r),this.estimatedModuleSize=s}aboutEquals(e,r,s){if(Math.abs(r-this.getY())<=e&&Math.abs(s-this.getX())<=e){const a=Math.abs(e-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1}combineEstimate(e,r,s){const a=(this.getX()+r)/2,c=(this.getY()+e)/2,f=(this.estimatedModuleSize+s)/2;return new Ni(a,c,f)}}class fr{constructor(e,r,s,a,c,f,g){this.image=e,this.startX=r,this.startY=s,this.width=a,this.height=c,this.moduleSize=f,this.resultPointCallback=g,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,r=this.height,s=this.width,a=e+s,c=this.startY+r/2,f=new Int32Array(3),g=this.image;for(let x=0;x<r;x++){const _=c+((x&1)===0?Math.floor((x+1)/2):-Math.floor((x+1)/2));f[0]=0,f[1]=0,f[2]=0;let v=e;for(;v<a&&!g.get(v,_);)v++;let T=0;for(;v<a;){if(g.get(v,_))if(T===1)f[1]++;else if(T===2){if(this.foundPatternCross(f)){const R=this.handlePossibleCenter(f,_,v);if(R!==null)return R}f[0]=f[2],f[1]=1,f[2]=0,T=1}else f[++T]++;else T===1&&T++,f[T]++;v++}if(this.foundPatternCross(f)){const R=this.handlePossibleCenter(f,_,a);if(R!==null)return R}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new K}static centerFromEnd(e,r){return r-e[2]-e[1]/2}foundPatternCross(e){const r=this.moduleSize,s=r/2;for(let a=0;a<3;a++)if(Math.abs(r-e[a])>=s)return!1;return!0}crossCheckVertical(e,r,s,a){const c=this.image,f=c.getHeight(),g=this.crossCheckStateCount;g[0]=0,g[1]=0,g[2]=0;let x=e;for(;x>=0&&c.get(r,x)&&g[1]<=s;)g[1]++,x--;if(x<0||g[1]>s)return NaN;for(;x>=0&&!c.get(r,x)&&g[0]<=s;)g[0]++,x--;if(g[0]>s)return NaN;for(x=e+1;x<f&&c.get(r,x)&&g[1]<=s;)g[1]++,x++;if(x===f||g[1]>s)return NaN;for(;x<f&&!c.get(r,x)&&g[2]<=s;)g[2]++,x++;if(g[2]>s)return NaN;const _=g[0]+g[1]+g[2];return 5*Math.abs(_-a)>=2*a?NaN:this.foundPatternCross(g)?fr.centerFromEnd(g,x):NaN}handlePossibleCenter(e,r,s){const a=e[0]+e[1]+e[2],c=fr.centerFromEnd(e,s),f=this.crossCheckVertical(r,c,2*e[1],a);if(!isNaN(f)){const g=(e[0]+e[1]+e[2])/3;for(const _ of this.possibleCenters)if(_.aboutEquals(g,f,c))return _.combineEstimate(f,c,g);const x=new Ni(c,f,g);this.possibleCenters.push(x),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(x)}return null}}class Cr extends Ne{constructor(e,r,s,a){super(e,r),this.estimatedModuleSize=s,this.count=a,a===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,r,s){if(Math.abs(r-this.getY())<=e&&Math.abs(s-this.getX())<=e){const a=Math.abs(e-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1}combineEstimate(e,r,s){const a=this.count+1,c=(this.count*this.getX()+r)/a,f=(this.count*this.getY()+e)/a,g=(this.count*this.estimatedModuleSize+s)/a;return new Cr(c,f,g,a)}}class Yr{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Vt{constructor(e,r){this.image=e,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const r=e!=null&&e.get(ie.TRY_HARDER)!==void 0,s=e!=null&&e.get(ie.PURE_BARCODE)!==void 0,a=this.image,c=a.getHeight(),f=a.getWidth();let g=Math.floor(3*c/(4*Vt.MAX_MODULES));(g<Vt.MIN_SKIP||r)&&(g=Vt.MIN_SKIP);let x=!1;const _=new Int32Array(5);for(let T=g-1;T<c&&!x;T+=g){_[0]=0,_[1]=0,_[2]=0,_[3]=0,_[4]=0;let R=0;for(let M=0;M<f;M++)if(a.get(M,T))(R&1)===1&&R++,_[R]++;else if((R&1)===0)if(R===4)if(Vt.foundPatternCross(_)){if(this.handlePossibleCenter(_,T,M,s)===!0)if(g=2,this.hasSkipped===!0)x=this.haveMultiplyConfirmedCenters();else{const F=this.findRowSkip();F>_[2]&&(T+=F-_[2]-g,M=f-1)}else{_[0]=_[2],_[1]=_[3],_[2]=_[4],_[3]=1,_[4]=0,R=3;continue}R=0,_[0]=0,_[1]=0,_[2]=0,_[3]=0,_[4]=0}else _[0]=_[2],_[1]=_[3],_[2]=_[4],_[3]=1,_[4]=0,R=3;else _[++R]++;else _[R]++;Vt.foundPatternCross(_)&&this.handlePossibleCenter(_,T,f,s)===!0&&(g=_[0],this.hasSkipped&&(x=this.haveMultiplyConfirmedCenters()))}const v=this.selectBestPatterns();return Ne.orderBestPatterns(v),new Yr(v)}static centerFromEnd(e,r){return r-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let r=0;for(let c=0;c<5;c++){const f=e[c];if(f===0)return!1;r+=f}if(r<7)return!1;const s=r/7,a=s/2;return Math.abs(s-e[0])<a&&Math.abs(s-e[1])<a&&Math.abs(3*s-e[2])<3*a&&Math.abs(s-e[3])<a&&Math.abs(s-e[4])<a}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,r,s,a){const c=this.getCrossCheckStateCount();let f=0;const g=this.image;for(;e>=f&&r>=f&&g.get(r-f,e-f);)c[2]++,f++;if(e<f||r<f)return!1;for(;e>=f&&r>=f&&!g.get(r-f,e-f)&&c[1]<=s;)c[1]++,f++;if(e<f||r<f||c[1]>s)return!1;for(;e>=f&&r>=f&&g.get(r-f,e-f)&&c[0]<=s;)c[0]++,f++;if(c[0]>s)return!1;const x=g.getHeight(),_=g.getWidth();for(f=1;e+f<x&&r+f<_&&g.get(r+f,e+f);)c[2]++,f++;if(e+f>=x||r+f>=_)return!1;for(;e+f<x&&r+f<_&&!g.get(r+f,e+f)&&c[3]<s;)c[3]++,f++;if(e+f>=x||r+f>=_||c[3]>=s)return!1;for(;e+f<x&&r+f<_&&g.get(r+f,e+f)&&c[4]<s;)c[4]++,f++;if(c[4]>=s)return!1;const v=c[0]+c[1]+c[2]+c[3]+c[4];return Math.abs(v-a)<2*a&&Vt.foundPatternCross(c)}crossCheckVertical(e,r,s,a){const c=this.image,f=c.getHeight(),g=this.getCrossCheckStateCount();let x=e;for(;x>=0&&c.get(r,x);)g[2]++,x--;if(x<0)return NaN;for(;x>=0&&!c.get(r,x)&&g[1]<=s;)g[1]++,x--;if(x<0||g[1]>s)return NaN;for(;x>=0&&c.get(r,x)&&g[0]<=s;)g[0]++,x--;if(g[0]>s)return NaN;for(x=e+1;x<f&&c.get(r,x);)g[2]++,x++;if(x===f)return NaN;for(;x<f&&!c.get(r,x)&&g[3]<s;)g[3]++,x++;if(x===f||g[3]>=s)return NaN;for(;x<f&&c.get(r,x)&&g[4]<s;)g[4]++,x++;if(g[4]>=s)return NaN;const _=g[0]+g[1]+g[2]+g[3]+g[4];return 5*Math.abs(_-a)>=2*a?NaN:Vt.foundPatternCross(g)?Vt.centerFromEnd(g,x):NaN}crossCheckHorizontal(e,r,s,a){const c=this.image,f=c.getWidth(),g=this.getCrossCheckStateCount();let x=e;for(;x>=0&&c.get(x,r);)g[2]++,x--;if(x<0)return NaN;for(;x>=0&&!c.get(x,r)&&g[1]<=s;)g[1]++,x--;if(x<0||g[1]>s)return NaN;for(;x>=0&&c.get(x,r)&&g[0]<=s;)g[0]++,x--;if(g[0]>s)return NaN;for(x=e+1;x<f&&c.get(x,r);)g[2]++,x++;if(x===f)return NaN;for(;x<f&&!c.get(x,r)&&g[3]<s;)g[3]++,x++;if(x===f||g[3]>=s)return NaN;for(;x<f&&c.get(x,r)&&g[4]<s;)g[4]++,x++;if(g[4]>=s)return NaN;const _=g[0]+g[1]+g[2]+g[3]+g[4];return 5*Math.abs(_-a)>=a?NaN:Vt.foundPatternCross(g)?Vt.centerFromEnd(g,x):NaN}handlePossibleCenter(e,r,s,a){const c=e[0]+e[1]+e[2]+e[3]+e[4];let f=Vt.centerFromEnd(e,s),g=this.crossCheckVertical(r,Math.floor(f),e[2],c);if(!isNaN(g)&&(f=this.crossCheckHorizontal(Math.floor(f),Math.floor(g),e[2],c),!isNaN(f)&&(!a||this.crossCheckDiagonal(Math.floor(g),Math.floor(f),e[2],c)))){const x=c/7;let _=!1;const v=this.possibleCenters;for(let T=0,R=v.length;T<R;T++){const M=v[T];if(M.aboutEquals(x,g,f)){v[T]=M.combineEstimate(g,f,x),_=!0;break}}if(!_){const T=new Cr(f,g,x);v.push(T),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(T)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let r=null;for(const s of this.possibleCenters)if(s.getCount()>=Vt.CENTER_QUORUM)if(r==null)r=s;else return this.hasSkipped=!0,Math.floor((Math.abs(r.getX()-s.getX())-Math.abs(r.getY()-s.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let e=0,r=0;const s=this.possibleCenters.length;for(const f of this.possibleCenters)f.getCount()>=Vt.CENTER_QUORUM&&(e++,r+=f.getEstimatedModuleSize());if(e<3)return!1;const a=r/s;let c=0;for(const f of this.possibleCenters)c+=Math.abs(f.getEstimatedModuleSize()-a);return c<=.05*r}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new K;const r=this.possibleCenters;let s;if(e>3){let a=0,c=0;for(const x of this.possibleCenters){const _=x.getEstimatedModuleSize();a+=_,c+=_*_}s=a/e;let f=Math.sqrt(c/e-s*s);r.sort((x,_)=>{const v=Math.abs(_.getEstimatedModuleSize()-s),T=Math.abs(x.getEstimatedModuleSize()-s);return v<T?-1:v>T?1:0});const g=Math.max(.2*s,f);for(let x=0;x<r.length&&r.length>3;x++){const _=r[x];Math.abs(_.getEstimatedModuleSize()-s)>g&&(r.splice(x,1),x--)}}if(r.length>3){let a=0;for(const c of r)a+=c.getEstimatedModuleSize();s=a/r.length,r.sort((c,f)=>{if(f.getCount()===c.getCount()){const g=Math.abs(f.getEstimatedModuleSize()-s),x=Math.abs(c.getEstimatedModuleSize()-s);return g<x?1:g>x?-1:0}else return f.getCount()-c.getCount()}),r.splice(3)}return[r[0],r[1],r[2]]}}Vt.CENTER_QUORUM=2,Vt.MIN_SKIP=3,Vt.MAX_MODULES=57;class br{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=e==null?null:e.get(ie.NEED_RESULT_POINT_CALLBACK);const s=new Vt(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(s)}processFinderPatternInfo(e){const r=e.getTopLeft(),s=e.getTopRight(),a=e.getBottomLeft(),c=this.calculateModuleSize(r,s,a);if(c<1)throw new K("No pattern found in proccess finder.");const f=br.computeDimension(r,s,a,c),g=Fe.getProvisionalVersionForDimension(f),x=g.getDimensionForVersion()-7;let _=null;if(g.getAlignmentPatternCenters().length>0){const M=s.getX()-r.getX()+a.getX(),L=s.getY()-r.getY()+a.getY(),F=1-3/x,W=Math.floor(r.getX()+F*(M-r.getX())),q=Math.floor(r.getY()+F*(L-r.getY()));for(let he=4;he<=16;he<<=1)try{_=this.findAlignmentInRegion(c,W,q,he);break}catch(ge){if(!(ge instanceof K))throw ge}}const v=br.createTransform(r,s,a,_,f),T=br.sampleGrid(this.image,v,f);let R;return _===null?R=[a,r,s]:R=[a,r,s,_],new Ai(T,R)}static createTransform(e,r,s,a,c){const f=c-3.5;let g,x,_,v;return a!==null?(g=a.getX(),x=a.getY(),_=f-3,v=_):(g=r.getX()-e.getX()+s.getX(),x=r.getY()-e.getY()+s.getY(),_=f,v=f),jn.quadrilateralToQuadrilateral(3.5,3.5,f,3.5,_,v,3.5,f,e.getX(),e.getY(),r.getX(),r.getY(),g,x,s.getX(),s.getY())}static sampleGrid(e,r,s){return or.getInstance().sampleGridWithTransform(e,s,s,r)}static computeDimension(e,r,s,a){const c=ct.round(Ne.distance(e,r)/a),f=ct.round(Ne.distance(e,s)/a);let g=Math.floor((c+f)/2)+7;switch(g&3){case 0:g++;break;case 2:g--;break;case 3:throw new K("Dimensions could be not found.")}return g}calculateModuleSize(e,r,s){return(this.calculateModuleSizeOneWay(e,r)+this.calculateModuleSizeOneWay(e,s))/2}calculateModuleSizeOneWay(e,r){const s=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(r.getX()),Math.floor(r.getY())),a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(s)?a/7:isNaN(a)?s/7:(s+a)/14}sizeOfBlackWhiteBlackRunBothWays(e,r,s,a){let c=this.sizeOfBlackWhiteBlackRun(e,r,s,a),f=1,g=e-(s-e);g<0?(f=e/(e-g),g=0):g>=this.image.getWidth()&&(f=(this.image.getWidth()-1-e)/(g-e),g=this.image.getWidth()-1);let x=Math.floor(r-(a-r)*f);return f=1,x<0?(f=r/(r-x),x=0):x>=this.image.getHeight()&&(f=(this.image.getHeight()-1-r)/(x-r),x=this.image.getHeight()-1),g=Math.floor(e+(g-e)*f),c+=this.sizeOfBlackWhiteBlackRun(e,r,g,x),c-1}sizeOfBlackWhiteBlackRun(e,r,s,a){const c=Math.abs(a-r)>Math.abs(s-e);if(c){let M=e;e=r,r=M,M=s,s=a,a=M}const f=Math.abs(s-e),g=Math.abs(a-r);let x=-f/2;const _=e<s?1:-1,v=r<a?1:-1;let T=0;const R=s+_;for(let M=e,L=r;M!==R;M+=_){const F=c?L:M,W=c?M:L;if(T===1===this.image.get(F,W)){if(T===2)return ct.distance(M,L,e,r);T++}if(x+=g,x>0){if(L===a)break;L+=v,x-=f}}return T===2?ct.distance(s+_,a,e,r):NaN}findAlignmentInRegion(e,r,s,a){const c=Math.floor(a*e),f=Math.max(0,r-c),g=Math.min(this.image.getWidth()-1,r+c);if(g-f<e*3)throw new K("Alignment top exceeds estimated module size.");const x=Math.max(0,s-c),_=Math.min(this.image.getHeight()-1,s+c);if(_-x<e*3)throw new K("Alignment bottom exceeds estimated module size.");return new fr(this.image,f,x,g-f,_-x,e,this.resultPointCallback).find()}}class Tn{constructor(){this.decoder=new zo}getDecoder(){return this.decoder}decode(e,r){let s,a;if(r!=null&&r.get(ie.PURE_BARCODE)!==void 0){const x=Tn.extractPureBits(e.getBlackMatrix());s=this.decoder.decodeBitMatrix(x,r),a=Tn.NO_POINTS}else{const x=new br(e.getBlackMatrix()).detect(r);s=this.decoder.decodeBitMatrix(x.getBits(),r),a=x.getPoints()}s.getOther()instanceof Wo&&s.getOther().applyMirroredCorrection(a);const c=new Ve(s.getText(),s.getRawBytes(),void 0,a,we.QR_CODE,void 0),f=s.getByteSegments();f!==null&&c.putMetadata(Be.BYTE_SEGMENTS,f);const g=s.getECLevel();return g!==null&&c.putMetadata(Be.ERROR_CORRECTION_LEVEL,g),s.hasStructuredAppend()&&(c.putMetadata(Be.STRUCTURED_APPEND_SEQUENCE,s.getStructuredAppendSequenceNumber()),c.putMetadata(Be.STRUCTURED_APPEND_PARITY,s.getStructuredAppendParity())),c}reset(){}static extractPureBits(e){const r=e.getTopLeftOnBit(),s=e.getBottomRightOnBit();if(r===null||s===null)throw new K;const a=this.moduleSize(r,e);let c=r[1],f=s[1],g=r[0],x=s[0];if(g>=x||c>=f)throw new K;if(f-c!==x-g&&(x=g+(f-c),x>=e.getWidth()))throw new K;const _=Math.round((x-g+1)/a),v=Math.round((f-c+1)/a);if(_<=0||v<=0)throw new K;if(v!==_)throw new K;const T=Math.floor(a/2);c+=T,g+=T;const R=g+Math.floor((_-1)*a)-x;if(R>0){if(R>T)throw new K;g-=R}const M=c+Math.floor((v-1)*a)-f;if(M>0){if(M>T)throw new K;c-=M}const L=new Se(_,v);for(let F=0;F<v;F++){const W=c+Math.floor(F*a);for(let q=0;q<_;q++)e.get(g+Math.floor(q*a),W)&&L.set(q,F)}return L}static moduleSize(e,r){const s=r.getHeight(),a=r.getWidth();let c=e[0],f=e[1],g=!0,x=0;for(;c<a&&f<s;){if(g!==r.get(c,f)){if(++x===5)break;g=!g}c++,f++}if(c===a||f===s)throw new K;return(c-e[0])/7}}Tn.NO_POINTS=new Array;class je{PDF417Common(){}static getBitCountSum(e){return ct.sum(e)}static toIntArray(e){if(e==null||!e.length)return je.EMPTY_INT_ARRAY;const r=new Int32Array(e.length);let s=0;for(const a of e)r[s++]=a;return r}static getCodeword(e){const r=pe.binarySearch(je.SYMBOL_TABLE,e&262143);return r<0?-1:(je.CODEWORD_TABLE[r]-1)%je.NUMBER_OF_CODEWORDS}}je.NUMBER_OF_CODEWORDS=929,je.MAX_CODEWORDS_IN_BARCODE=je.NUMBER_OF_CODEWORDS-1,je.MIN_ROWS_IN_BARCODE=3,je.MAX_ROWS_IN_BARCODE=90,je.MODULES_IN_CODEWORD=17,je.MODULES_IN_STOP_PATTERN=18,je.BARS_IN_MODULE=8,je.EMPTY_INT_ARRAY=new Int32Array([]),je.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),je.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class ta{constructor(e,r){this.bits=e,this.points=r}getBits(){return this.bits}getPoints(){return this.points}}class Ke{static detectMultiple(e,r,s){let a=e.getBlackMatrix(),c=Ke.detect(s,a);return c.length||(a=a.clone(),a.rotate180(),c=Ke.detect(s,a)),new ta(a,c)}static detect(e,r){const s=new Array;let a=0,c=0,f=!1;for(;a<r.getHeight();){const g=Ke.findVertices(r,a,c);if(g[0]==null&&g[3]==null){if(!f)break;f=!1,c=0;for(const x of s)x[1]!=null&&(a=Math.trunc(Math.max(a,x[1].getY()))),x[3]!=null&&(a=Math.max(a,Math.trunc(x[3].getY())));a+=Ke.ROW_STEP;continue}if(f=!0,s.push(g),!e)break;g[2]!=null?(c=Math.trunc(g[2].getX()),a=Math.trunc(g[2].getY())):(c=Math.trunc(g[4].getX()),a=Math.trunc(g[4].getY()))}return s}static findVertices(e,r,s){const a=e.getHeight(),c=e.getWidth(),f=new Array(8);return Ke.copyToResult(f,Ke.findRowsWithPattern(e,a,c,r,s,Ke.START_PATTERN),Ke.INDEXES_START_PATTERN),f[4]!=null&&(s=Math.trunc(f[4].getX()),r=Math.trunc(f[4].getY())),Ke.copyToResult(f,Ke.findRowsWithPattern(e,a,c,r,s,Ke.STOP_PATTERN),Ke.INDEXES_STOP_PATTERN),f}static copyToResult(e,r,s){for(let a=0;a<s.length;a++)e[s[a]]=r[a]}static findRowsWithPattern(e,r,s,a,c,f){const g=new Array(4);let x=!1;const _=new Int32Array(f.length);for(;a<r;a+=Ke.ROW_STEP){let T=Ke.findGuardPattern(e,c,a,s,!1,f,_);if(T!=null){for(;a>0;){const R=Ke.findGuardPattern(e,c,--a,s,!1,f,_);if(R!=null)T=R;else{a++;break}}g[0]=new Ne(T[0],a),g[1]=new Ne(T[1],a),x=!0;break}}let v=a+1;if(x){let T=0,R=Int32Array.from([Math.trunc(g[0].getX()),Math.trunc(g[1].getX())]);for(;v<r;v++){const M=Ke.findGuardPattern(e,R[0],v,s,!1,f,_);if(M!=null&&Math.abs(R[0]-M[0])<Ke.MAX_PATTERN_DRIFT&&Math.abs(R[1]-M[1])<Ke.MAX_PATTERN_DRIFT)R=M,T=0;else{if(T>Ke.SKIPPED_ROW_COUNT_MAX)break;T++}}v-=T+1,g[2]=new Ne(R[0],v),g[3]=new Ne(R[1],v)}return v-a<Ke.BARCODE_MIN_HEIGHT&&pe.fill(g,null),g}static findGuardPattern(e,r,s,a,c,f,g){pe.fillWithin(g,0,g.length,0);let x=r,_=0;for(;e.get(x,s)&&x>0&&_++<Ke.MAX_PIXEL_DRIFT;)x--;let v=x,T=0,R=f.length;for(let M=c;v<a;v++)if(e.get(v,s)!==M)g[T]++;else{if(T===R-1){if(Ke.patternMatchVariance(g,f,Ke.MAX_INDIVIDUAL_VARIANCE)<Ke.MAX_AVG_VARIANCE)return new Int32Array([x,v]);x+=g[0]+g[1],$.arraycopy(g,2,g,0,T-1),g[T-1]=0,g[T]=0,T--}else T++;g[T]=1,M=!M}return T===R-1&&Ke.patternMatchVariance(g,f,Ke.MAX_INDIVIDUAL_VARIANCE)<Ke.MAX_AVG_VARIANCE?new Int32Array([x,v-1]):null}static patternMatchVariance(e,r,s){let a=e.length,c=0,f=0;for(let _=0;_<a;_++)c+=e[_],f+=r[_];if(c<f)return 1/0;let g=c/f;s*=g;let x=0;for(let _=0;_<a;_++){let v=e[_],T=r[_]*g,R=v>T?v-T:T-v;if(R>s)return 1/0;x+=R}return x/c}}Ke.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Ke.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Ke.MAX_AVG_VARIANCE=.42,Ke.MAX_INDIVIDUAL_VARIANCE=.8,Ke.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Ke.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Ke.MAX_PIXEL_DRIFT=3,Ke.MAX_PATTERN_DRIFT=5,Ke.SKIPPED_ROW_COUNT_MAX=25,Ke.ROW_STEP=5,Ke.BARCODE_MIN_HEIGHT=10;class fn{constructor(e,r){if(r.length===0)throw new b;this.field=e;let s=r.length;if(s>1&&r[0]===0){let a=1;for(;a<s&&r[a]===0;)a++;a===s?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(s-a),$.arraycopy(r,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);if(e===1){let a=0;for(let c of this.coefficients)a=this.field.add(a,c);return a}let r=this.coefficients[0],s=this.coefficients.length;for(let a=1;a<s;a++)r=this.field.add(this.field.multiply(e,r),this.coefficients[a]);return r}add(e){if(!this.field.equals(e.field))throw new b("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let r=this.coefficients,s=e.coefficients;if(r.length>s.length){let f=r;r=s,s=f}let a=new Int32Array(s.length),c=s.length-r.length;$.arraycopy(s,0,a,0,c);for(let f=c;f<s.length;f++)a[f]=this.field.add(r[f-c],s[f]);return new fn(this.field,a)}subtract(e){if(!this.field.equals(e.field))throw new b("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof fn?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new b("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new fn(this.field,new Int32Array([0]));let r=this.coefficients,s=r.length,a=e.coefficients,c=a.length,f=new Int32Array(s+c-1);for(let g=0;g<s;g++){let x=r[g];for(let _=0;_<c;_++)f[g+_]=this.field.add(f[g+_],this.field.multiply(x,a[_]))}return new fn(this.field,f)}negative(){let e=this.coefficients.length,r=new Int32Array(e);for(let s=0;s<e;s++)r[s]=this.field.subtract(0,this.coefficients[s]);return new fn(this.field,r)}multiplyScalar(e){if(e===0)return new fn(this.field,new Int32Array([0]));if(e===1)return this;let r=this.coefficients.length,s=new Int32Array(r);for(let a=0;a<r;a++)s[a]=this.field.multiply(this.coefficients[a],e);return new fn(this.field,s)}multiplyByMonomial(e,r){if(e<0)throw new b;if(r===0)return new fn(this.field,new Int32Array([0]));let s=this.coefficients.length,a=new Int32Array(s+e);for(let c=0;c<s;c++)a[c]=this.field.multiply(this.coefficients[c],r);return new fn(this.field,a)}toString(){let e=new fe;for(let r=this.getDegree();r>=0;r--){let s=this.getCoefficient(r);s!==0&&(s<0?(e.append(" - "),s=-s):e.length()>0&&e.append(" + "),(r===0||s!==1)&&e.append(s),r!==0&&(r===1?e.append("x"):(e.append("x^"),e.append(r))))}return e.toString()}}class na{add(e,r){return(e+r)%this.modulus}subtract(e,r){return(this.modulus+e-r)%this.modulus}exp(e){return this.expTable[e]}log(e){if(e===0)throw new b;return this.logTable[e]}inverse(e){if(e===0)throw new rs;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class Ri extends na{constructor(e,r){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let s=1;for(let a=0;a<e;a++)this.expTable[a]=s,s=s*r%e;for(let a=0;a<e-1;a++)this.logTable[this.expTable[a]]=a;this.zero=new fn(this,new Int32Array([0])),this.one=new fn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,r){if(e<0)throw new b;if(r===0)return this.zero;let s=new Int32Array(e+1);return s[0]=r,new fn(this,s)}}Ri.PDF417_GF=new Ri(je.NUMBER_OF_CODEWORDS,3);class Go{constructor(){this.field=Ri.PDF417_GF}decode(e,r,s){let a=new fn(this.field,e),c=new Int32Array(r),f=!1;for(let L=r;L>0;L--){let F=a.evaluateAt(this.field.exp(L));c[r-L]=F,F!==0&&(f=!0)}if(!f)return 0;let g=this.field.getOne();if(s!=null)for(const L of s){let F=this.field.exp(e.length-1-L),W=new fn(this.field,new Int32Array([this.field.subtract(0,F),1]));g=g.multiply(W)}let x=new fn(this.field,c),_=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),x,r),v=_[0],T=_[1],R=this.findErrorLocations(v),M=this.findErrorMagnitudes(T,v,R);for(let L=0;L<R.length;L++){let F=e.length-1-this.field.log(R[L]);if(F<0)throw V.getChecksumInstance();e[F]=this.field.subtract(e[F],M[L])}return R.length}runEuclideanAlgorithm(e,r,s){if(e.getDegree()<r.getDegree()){let R=e;e=r,r=R}let a=e,c=r,f=this.field.getZero(),g=this.field.getOne();for(;c.getDegree()>=Math.round(s/2);){let R=a,M=f;if(a=c,f=g,a.isZero())throw V.getChecksumInstance();c=R;let L=this.field.getZero(),F=a.getCoefficient(a.getDegree()),W=this.field.inverse(F);for(;c.getDegree()>=a.getDegree()&&!c.isZero();){let q=c.getDegree()-a.getDegree(),he=this.field.multiply(c.getCoefficient(c.getDegree()),W);L=L.add(this.field.buildMonomial(q,he)),c=c.subtract(a.multiplyByMonomial(q,he))}g=L.multiply(f).subtract(M).negative()}let x=g.getCoefficient(0);if(x===0)throw V.getChecksumInstance();let _=this.field.inverse(x),v=g.multiply(_),T=c.multiply(_);return[v,T]}findErrorLocations(e){let r=e.getDegree(),s=new Int32Array(r),a=0;for(let c=1;c<this.field.getSize()&&a<r;c++)e.evaluateAt(c)===0&&(s[a]=this.field.inverse(c),a++);if(a!==r)throw V.getChecksumInstance();return s}findErrorMagnitudes(e,r,s){let a=r.getDegree(),c=new Int32Array(a);for(let _=1;_<=a;_++)c[a-_]=this.field.multiply(_,r.getCoefficient(_));let f=new fn(this.field,c),g=s.length,x=new Int32Array(g);for(let _=0;_<g;_++){let v=this.field.inverse(s[_]),T=this.field.subtract(0,e.evaluateAt(v)),R=this.field.inverse(f.evaluateAt(v));x[_]=this.field.multiply(T,R)}return x}}class ni{constructor(e,r,s,a,c){e instanceof ni?this.constructor_2(e):this.constructor_1(e,r,s,a,c)}constructor_1(e,r,s,a,c){const f=r==null||s==null,g=a==null||c==null;if(f&&g)throw new K;f?(r=new Ne(0,a.getY()),s=new Ne(0,c.getY())):g&&(a=new Ne(e.getWidth()-1,r.getY()),c=new Ne(e.getWidth()-1,s.getY())),this.image=e,this.topLeft=r,this.bottomLeft=s,this.topRight=a,this.bottomRight=c,this.minX=Math.trunc(Math.min(r.getX(),s.getX())),this.maxX=Math.trunc(Math.max(a.getX(),c.getX())),this.minY=Math.trunc(Math.min(r.getY(),a.getY())),this.maxY=Math.trunc(Math.max(s.getY(),c.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,r){return e==null?r:r==null?e:new ni(e.image,e.topLeft,e.bottomLeft,r.topRight,r.bottomRight)}addMissingRows(e,r,s){let a=this.topLeft,c=this.bottomLeft,f=this.topRight,g=this.bottomRight;if(e>0){let x=s?this.topLeft:this.topRight,_=Math.trunc(x.getY()-e);_<0&&(_=0);let v=new Ne(x.getX(),_);s?a=v:f=v}if(r>0){let x=s?this.bottomLeft:this.bottomRight,_=Math.trunc(x.getY()+r);_>=this.image.getHeight()&&(_=this.image.getHeight()-1);let v=new Ne(x.getX(),_);s?c=v:g=v}return new ni(this.image,a,c,f,g)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class as{constructor(e,r,s,a){this.columnCount=e,this.errorCorrectionLevel=a,this.rowCountUpperPart=r,this.rowCountLowerPart=s,this.rowCount=r+s}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Or{constructor(){this.buffer=""}static form(e,r){let s=-1;function a(f,g,x,_,v,T){if(f==="%%")return"%";if(r[++s]===void 0)return;f=_?parseInt(_.substr(1)):void 0;let R=v?parseInt(v.substr(1)):void 0,M;switch(T){case"s":M=r[s];break;case"c":M=r[s][0];break;case"f":M=parseFloat(r[s]).toFixed(f);break;case"p":M=parseFloat(r[s]).toPrecision(f);break;case"e":M=parseFloat(r[s]).toExponential(f);break;case"x":M=parseInt(r[s]).toString(R||16);break;case"d":M=parseFloat(parseInt(r[s],R||10).toPrecision(f)).toFixed(0);break}M=typeof M=="object"?JSON.stringify(M):(+M).toString(R);let L=parseInt(x),F=x&&x[0]+""=="0"?"0":" ";for(;M.length<L;)M=g!==void 0?M+F:F+M;return M}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(c,a)}format(e,...r){this.buffer+=Or.form(e,r)}toString(){return this.buffer}}class Er{constructor(e){this.boundingBox=new ni(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let r=this.getCodeword(e);if(r!=null)return r;for(let s=1;s<Er.MAX_NEARBY_DISTANCE;s++){let a=this.imageRowToCodewordIndex(e)-s;if(a>=0&&(r=this.codewords[a],r!=null)||(a=this.imageRowToCodewordIndex(e)+s,a<this.codewords.length&&(r=this.codewords[a],r!=null)))return r}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,r){this.codewords[this.imageRowToCodewordIndex(e)]=r}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new Or;let r=0;for(const s of this.codewords){if(s==null){e.format("%3d:    |   %n",r++);continue}e.format("%3d: %3d|%3d%n",r++,s.getRowNumber(),s.getValue())}return e.toString()}}Er.MAX_NEARBY_DISTANCE=5;class Kr{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let r=this.values.get(e);r==null&&(r=0),r++,this.values.set(e,r)}getValue(){let e=-1,r=new Array;for(const[s,a]of this.values.entries()){const c={getKey:()=>s,getValue:()=>a};c.getValue()>e?(e=c.getValue(),r=[],r.push(c.getKey())):c.getValue()===e&&r.push(c.getKey())}return je.toIntArray(r)}getConfidence(e){return this.values.get(e)}}class ra extends Er{constructor(e,r){super(e),this._isLeft=r}setRowNumbers(){for(let e of this.getCodewords())e?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,e);let s=this.getBoundingBox(),a=this._isLeft?s.getTopLeft():s.getTopRight(),c=this._isLeft?s.getBottomLeft():s.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(a.getY())),g=this.imageRowToCodewordIndex(Math.trunc(c.getY())),x=-1,_=1,v=0;for(let T=f;T<g;T++){if(r[T]==null)continue;let R=r[T],M=R.getRowNumber()-x;if(M===0)v++;else if(M===1)_=Math.max(_,v),v=1,x=R.getRowNumber();else if(M<0||R.getRowNumber()>=e.getRowCount()||M>T)r[T]=null;else{let L;_>2?L=(_-2)*M:L=M;let F=L>=T;for(let W=1;W<=L&&!F;W++)F=r[T-W]!=null;F?r[T]=null:(x=R.getRowNumber(),v=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(e==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let r=new Int32Array(e.getRowCount());for(let s of this.getCodewords())if(s!=null){let a=s.getRowNumber();if(a>=r.length)continue;r[a]++}return r}adjustIncompleteIndicatorColumnRowNumbers(e){let r=this.getBoundingBox(),s=this._isLeft?r.getTopLeft():r.getTopRight(),a=this._isLeft?r.getBottomLeft():r.getBottomRight(),c=this.imageRowToCodewordIndex(Math.trunc(s.getY())),f=this.imageRowToCodewordIndex(Math.trunc(a.getY())),g=this.getCodewords(),x=-1;for(let _=c;_<f;_++){if(g[_]==null)continue;let v=g[_];v.setRowNumberAsRowIndicatorColumn();let T=v.getRowNumber()-x;T===0||(T===1?x=v.getRowNumber():v.getRowNumber()>=e.getRowCount()?g[_]=null:x=v.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),r=new Kr,s=new Kr,a=new Kr,c=new Kr;for(let g of e){if(g==null)continue;g.setRowNumberAsRowIndicatorColumn();let x=g.getValue()%30,_=g.getRowNumber();switch(this._isLeft||(_+=2),_%3){case 0:s.setValue(x*3+1);break;case 1:c.setValue(x/3),a.setValue(x%3);break;case 2:r.setValue(x+1);break}}if(r.getValue().length===0||s.getValue().length===0||a.getValue().length===0||c.getValue().length===0||r.getValue()[0]<1||s.getValue()[0]+a.getValue()[0]<je.MIN_ROWS_IN_BARCODE||s.getValue()[0]+a.getValue()[0]>je.MAX_ROWS_IN_BARCODE)return null;let f=new as(r.getValue()[0],s.getValue()[0],a.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(e,f),f}removeIncorrectCodewords(e,r){for(let s=0;s<e.length;s++){let a=e[s];if(e[s]==null)continue;let c=a.getValue()%30,f=a.getRowNumber();if(f>r.getRowCount()){e[s]=null;continue}switch(this._isLeft||(f+=2),f%3){case 0:c*3+1!==r.getRowCountUpperPart()&&(e[s]=null);break;case 1:(Math.trunc(c/3)!==r.getErrorCorrectionLevel()||c%3!==r.getRowCountLowerPart())&&(e[s]=null);break;case 2:c+1!==r.getColumnCount()&&(e[s]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class cs{constructor(e,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e=je.MAX_CODEWORDS_IN_BARCODE,r;do r=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<r);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(e===0)return 0;for(let r=1;r<this.barcodeColumnCount+1;r++){let s=this.detectionResultColumns[r].getCodewords();for(let a=0;a<s.length;a++)s[a]!=null&&(s[a].hasValidRowNumber()||this.adjustRowNumbers(r,a,s))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let e=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let s=0;s<e.length;s++)if(e[s]!=null&&r[s]!=null&&e[s].getRowNumber()===r[s].getRowNumber())for(let a=1;a<=this.barcodeColumnCount;a++){let c=this.detectionResultColumns[a].getCodewords()[s];c!=null&&(c.setRowNumber(e[s].getRowNumber()),c.hasValidRowNumber()||(this.detectionResultColumns[a].getCodewords()[s]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let e=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let s=0;s<r.length;s++){if(r[s]==null)continue;let a=r[s].getRowNumber(),c=0;for(let f=this.barcodeColumnCount+1;f>0&&c<this.ADJUST_ROW_NUMBER_SKIP;f--){let g=this.detectionResultColumns[f].getCodewords()[s];g!=null&&(c=cs.adjustRowNumberIfValid(a,c,g),g.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let e=0,r=this.detectionResultColumns[0].getCodewords();for(let s=0;s<r.length;s++){if(r[s]==null)continue;let a=r[s].getRowNumber(),c=0;for(let f=1;f<this.barcodeColumnCount+1&&c<this.ADJUST_ROW_NUMBER_SKIP;f++){let g=this.detectionResultColumns[f].getCodewords()[s];g!=null&&(c=cs.adjustRowNumberIfValid(a,c,g),g.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,r,s){return s==null||s.hasValidRowNumber()||(s.isValidRowNumber(e)?(s.setRowNumber(e),r=0):++r),r}adjustRowNumbers(e,r,s){if(!this.detectionResultColumns[e-1])return;let a=s[r],c=this.detectionResultColumns[e-1].getCodewords(),f=c;this.detectionResultColumns[e+1]!=null&&(f=this.detectionResultColumns[e+1].getCodewords());let g=new Array(14);g[2]=c[r],g[3]=f[r],r>0&&(g[0]=s[r-1],g[4]=c[r-1],g[5]=f[r-1]),r>1&&(g[8]=s[r-2],g[10]=c[r-2],g[11]=f[r-2]),r<s.length-1&&(g[1]=s[r+1],g[6]=c[r+1],g[7]=f[r+1]),r<s.length-2&&(g[9]=s[r+2],g[12]=c[r+2],g[13]=f[r+2]);for(let x of g)if(cs.adjustRowNumber(a,x))return}static adjustRowNumber(e,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===e.getBucket()?(e.setRowNumber(r.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,r){this.detectionResultColumns[e]=r}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let r=new Or;for(let s=0;s<e.getCodewords().length;s++){r.format("CW %3d:",s);for(let a=0;a<this.barcodeColumnCount+2;a++){if(this.detectionResultColumns[a]==null){r.format("    |   ");continue}let c=this.detectionResultColumns[a].getCodewords()[s];if(c==null){r.format("    |   ");continue}r.format(" %3d|%3d",c.getRowNumber(),c.getValue())}r.format("%n")}return r.toString()}}class ri{constructor(e,r,s,a){this.rowNumber=ri.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(r),this.bucket=Math.trunc(s),this.value=Math.trunc(a)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==ri.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}ri.BARCODE_ROW_UNKNOWN=-1;class hn{static initialize(){for(let e=0;e<je.SYMBOL_TABLE.length;e++){let r=je.SYMBOL_TABLE[e],s=r&1;for(let a=0;a<je.BARS_IN_MODULE;a++){let c=0;for(;(r&1)===s;)c+=1,r>>=1;s=r&1,hn.RATIOS_TABLE[e]||(hn.RATIOS_TABLE[e]=new Array(je.BARS_IN_MODULE)),hn.RATIOS_TABLE[e][je.BARS_IN_MODULE-a-1]=Math.fround(c/je.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let r=hn.getDecodedCodewordValue(hn.sampleBitCounts(e));return r!==-1?r:hn.getClosestDecodedValue(e)}static sampleBitCounts(e){let r=ct.sum(e),s=new Int32Array(je.BARS_IN_MODULE),a=0,c=0;for(let f=0;f<je.MODULES_IN_CODEWORD;f++){let g=r/(2*je.MODULES_IN_CODEWORD)+f*r/je.MODULES_IN_CODEWORD;c+e[a]<=g&&(c+=e[a],a++),s[a]++}return s}static getDecodedCodewordValue(e){let r=hn.getBitValue(e);return je.getCodeword(r)===-1?-1:r}static getBitValue(e){let r=0;for(let s=0;s<e.length;s++)for(let a=0;a<e[s];a++)r=r<<1|(s%2===0?1:0);return Math.trunc(r)}static getClosestDecodedValue(e){let r=ct.sum(e),s=new Array(je.BARS_IN_MODULE);if(r>1)for(let f=0;f<s.length;f++)s[f]=Math.fround(e[f]/r);let a=Gr.MAX_VALUE,c=-1;this.bSymbolTableReady||hn.initialize();for(let f=0;f<hn.RATIOS_TABLE.length;f++){let g=0,x=hn.RATIOS_TABLE[f];for(let _=0;_<je.BARS_IN_MODULE;_++){let v=Math.fround(x[_]-s[_]);if(g+=Math.fround(v*v),g>=a)break}g<a&&(a=g,c=je.SYMBOL_TABLE[f])}return c}}hn.bSymbolTableReady=!1,hn.RATIOS_TABLE=new Array(je.SYMBOL_TABLE.length).map(I=>new Array(je.BARS_IN_MODULE));class Ys{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class jo{static parseLong(e,r=void 0){return parseInt(e,r)}}class Dr extends E{}Dr.kind="NullPointerException";class Xo{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,r,s){if(e==null)throw new Dr;if(r<0||r>e.length||s<0||r+s>e.length||r+s<0)throw new xe;if(s===0)return;for(let a=0;a<s;a++)this.write(e[r+a])}flush(){}close(){}}class Ks extends E{}class ia extends Xo{constructor(e=32){if(super(),this.count=0,e<0)throw new b("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let s=this.buf.length<<1;if(s-e<0&&(s=e),s<0){if(e<0)throw new Ks;s=te.MAX_VALUE}this.buf=pe.copyOfUint8Array(this.buf,s)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,r,s){if(r<0||r>e.length||s<0||r+s-e.length>0)throw new xe;this.ensureCapacity(this.count+s),$.arraycopy(e,r,this.buf,this.count,s),this.count+=s}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return pe.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?typeof e=="string"?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}var pt;(function(I){I[I.ALPHA=0]="ALPHA",I[I.LOWER=1]="LOWER",I[I.MIXED=2]="MIXED",I[I.PUNCT=3]="PUNCT",I[I.ALPHA_SHIFT=4]="ALPHA_SHIFT",I[I.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(pt||(pt={}));function us(){if(typeof window<"u")return window.BigInt||null;if(typeof tc<"u")return tc.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let fs;function qt(I){if(typeof fs>"u"&&(fs=us()),fs===null)throw new Error("BigInt is not supported!");return fs(I)}function bi(){let I=[];I[0]=qt(1);let e=qt(900);I[1]=e;for(let r=2;r<16;r++)I[r]=I[r-1]*e;return I}class Z{static decode(e,r){let s=new fe(""),a=j.ISO8859_1;s.enableDecoding(a);let c=1,f=e[c++],g=new Ys;for(;c<e[0];){switch(f){case Z.TEXT_COMPACTION_MODE_LATCH:c=Z.textCompaction(e,c,s);break;case Z.BYTE_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH_6:c=Z.byteCompaction(f,e,a,c,s);break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:s.append(e[c++]);break;case Z.NUMERIC_COMPACTION_MODE_LATCH:c=Z.numericCompaction(e,c,s);break;case Z.ECI_CHARSET:j.getCharacterSetECIByValue(e[c++]);break;case Z.ECI_GENERAL_PURPOSE:c+=2;break;case Z.ECI_USER_DEFINED:c++;break;case Z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:c=Z.decodeMacroBlock(e,c,g);break;case Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Z.MACRO_PDF417_TERMINATOR:throw new Y;default:c--,c=Z.textCompaction(e,c,s);break}if(c<e.length)f=e[c++];else throw Y.getFormatInstance()}if(s.length()===0)throw Y.getFormatInstance();let x=new at(null,s.toString(),null,r);return x.setOther(g),x}static decodeMacroBlock(e,r,s){if(r+Z.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw Y.getFormatInstance();let a=new Int32Array(Z.NUMBER_OF_SEQUENCE_CODEWORDS);for(let g=0;g<Z.NUMBER_OF_SEQUENCE_CODEWORDS;g++,r++)a[g]=e[r];s.setSegmentIndex(te.parseInt(Z.decodeBase900toBase10(a,Z.NUMBER_OF_SEQUENCE_CODEWORDS)));let c=new fe;r=Z.textCompaction(e,r,c),s.setFileId(c.toString());let f=-1;for(e[r]===Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(f=r+1);r<e[0];)switch(e[r]){case Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,e[r]){case Z.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let g=new fe;r=Z.textCompaction(e,r+1,g),s.setFileName(g.toString());break;case Z.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let x=new fe;r=Z.textCompaction(e,r+1,x),s.setSender(x.toString());break;case Z.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let _=new fe;r=Z.textCompaction(e,r+1,_),s.setAddressee(_.toString());break;case Z.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let v=new fe;r=Z.numericCompaction(e,r+1,v),s.setSegmentCount(te.parseInt(v.toString()));break;case Z.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let T=new fe;r=Z.numericCompaction(e,r+1,T),s.setTimestamp(jo.parseLong(T.toString()));break;case Z.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let R=new fe;r=Z.numericCompaction(e,r+1,R),s.setChecksum(te.parseInt(R.toString()));break;case Z.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let M=new fe;r=Z.numericCompaction(e,r+1,M),s.setFileSize(jo.parseLong(M.toString()));break;default:throw Y.getFormatInstance()}break;case Z.MACRO_PDF417_TERMINATOR:r++,s.setLastSegment(!0);break;default:throw Y.getFormatInstance()}if(f!==-1){let g=r-f;s.isLastSegment()&&g--,s.setOptionalData(pe.copyOfRange(e,f,f+g))}return r}static textCompaction(e,r,s){let a=new Int32Array((e[0]-r)*2),c=new Int32Array((e[0]-r)*2),f=0,g=!1;for(;r<e[0]&&!g;){let x=e[r++];if(x<Z.TEXT_COMPACTION_MODE_LATCH)a[f]=x/30,a[f+1]=x%30,f+=2;else switch(x){case Z.TEXT_COMPACTION_MODE_LATCH:a[f++]=Z.TEXT_COMPACTION_MODE_LATCH;break;case Z.BYTE_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH_6:case Z.NUMERIC_COMPACTION_MODE_LATCH:case Z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Z.MACRO_PDF417_TERMINATOR:r--,g=!0;break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a[f]=Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,x=e[r++],c[f]=x,f++;break}}return Z.decodeTextCompaction(a,c,f,s),r}static decodeTextCompaction(e,r,s,a){let c=pt.ALPHA,f=pt.ALPHA,g=0;for(;g<s;){let x=e[g],_="";switch(c){case pt.ALPHA:if(x<26)_=String.fromCharCode(65+x);else switch(x){case 26:_=" ";break;case Z.LL:c=pt.LOWER;break;case Z.ML:c=pt.MIXED;break;case Z.PS:f=c,c=pt.PUNCT_SHIFT;break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[g]);break;case Z.TEXT_COMPACTION_MODE_LATCH:c=pt.ALPHA;break}break;case pt.LOWER:if(x<26)_=String.fromCharCode(97+x);else switch(x){case 26:_=" ";break;case Z.AS:f=c,c=pt.ALPHA_SHIFT;break;case Z.ML:c=pt.MIXED;break;case Z.PS:f=c,c=pt.PUNCT_SHIFT;break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[g]);break;case Z.TEXT_COMPACTION_MODE_LATCH:c=pt.ALPHA;break}break;case pt.MIXED:if(x<Z.PL)_=Z.MIXED_CHARS[x];else switch(x){case Z.PL:c=pt.PUNCT;break;case 26:_=" ";break;case Z.LL:c=pt.LOWER;break;case Z.AL:c=pt.ALPHA;break;case Z.PS:f=c,c=pt.PUNCT_SHIFT;break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[g]);break;case Z.TEXT_COMPACTION_MODE_LATCH:c=pt.ALPHA;break}break;case pt.PUNCT:if(x<Z.PAL)_=Z.PUNCT_CHARS[x];else switch(x){case Z.PAL:c=pt.ALPHA;break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[g]);break;case Z.TEXT_COMPACTION_MODE_LATCH:c=pt.ALPHA;break}break;case pt.ALPHA_SHIFT:if(c=f,x<26)_=String.fromCharCode(65+x);else switch(x){case 26:_=" ";break;case Z.TEXT_COMPACTION_MODE_LATCH:c=pt.ALPHA;break}break;case pt.PUNCT_SHIFT:if(c=f,x<Z.PAL)_=Z.PUNCT_CHARS[x];else switch(x){case Z.PAL:c=pt.ALPHA;break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[g]);break;case Z.TEXT_COMPACTION_MODE_LATCH:c=pt.ALPHA;break}break}_!==""&&a.append(_),g++}}static byteCompaction(e,r,s,a,c){let f=new ia,g=0,x=0,_=!1;switch(e){case Z.BYTE_COMPACTION_MODE_LATCH:let v=new Int32Array(6),T=r[a++];for(;a<r[0]&&!_;)switch(v[g++]=T,x=900*x+T,T=r[a++],T){case Z.TEXT_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH:case Z.NUMERIC_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH_6:case Z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Z.MACRO_PDF417_TERMINATOR:a--,_=!0;break;default:if(g%5===0&&g>0){for(let R=0;R<6;++R)f.write(Number(qt(x)>>qt(8*(5-R))));x=0,g=0}break}a===r[0]&&T<Z.TEXT_COMPACTION_MODE_LATCH&&(v[g++]=T);for(let R=0;R<g;R++)f.write(v[R]);break;case Z.BYTE_COMPACTION_MODE_LATCH_6:for(;a<r[0]&&!_;){let R=r[a++];if(R<Z.TEXT_COMPACTION_MODE_LATCH)g++,x=900*x+R;else switch(R){case Z.TEXT_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH:case Z.NUMERIC_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH_6:case Z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Z.MACRO_PDF417_TERMINATOR:a--,_=!0;break}if(g%5===0&&g>0){for(let M=0;M<6;++M)f.write(Number(qt(x)>>qt(8*(5-M))));x=0,g=0}}break}return c.append(ve.decode(f.toByteArray(),s)),a}static numericCompaction(e,r,s){let a=0,c=!1,f=new Int32Array(Z.MAX_NUMERIC_CODEWORDS);for(;r<e[0]&&!c;){let g=e[r++];if(r===e[0]&&(c=!0),g<Z.TEXT_COMPACTION_MODE_LATCH)f[a]=g,a++;else switch(g){case Z.TEXT_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH_6:case Z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Z.MACRO_PDF417_TERMINATOR:r--,c=!0;break}(a%Z.MAX_NUMERIC_CODEWORDS===0||g===Z.NUMERIC_COMPACTION_MODE_LATCH||c)&&a>0&&(s.append(Z.decodeBase900toBase10(f,a)),a=0)}return r}static decodeBase900toBase10(e,r){let s=qt(0);for(let c=0;c<r;c++)s+=Z.EXP900[r-c-1]*qt(e[c]);let a=s.toString();if(a.charAt(0)!=="1")throw new Y;return a.substring(1)}}Z.TEXT_COMPACTION_MODE_LATCH=900,Z.BYTE_COMPACTION_MODE_LATCH=901,Z.NUMERIC_COMPACTION_MODE_LATCH=902,Z.BYTE_COMPACTION_MODE_LATCH_6=924,Z.ECI_USER_DEFINED=925,Z.ECI_GENERAL_PURPOSE=926,Z.ECI_CHARSET=927,Z.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Z.MACRO_PDF417_TERMINATOR=922,Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Z.MAX_NUMERIC_CODEWORDS=15,Z.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Z.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Z.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Z.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Z.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Z.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Z.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Z.PL=25,Z.LL=27,Z.AS=27,Z.ML=28,Z.AL=28,Z.PS=29,Z.PAL=29,Z.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,Z.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",Z.EXP900=us()?bi():[],Z.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Ze{constructor(){}static decode(e,r,s,a,c,f,g){let x=new ni(e,r,s,a,c),_=null,v=null,T;for(let L=!0;;L=!1){if(r!=null&&(_=Ze.getRowIndicatorColumn(e,x,r,!0,f,g)),a!=null&&(v=Ze.getRowIndicatorColumn(e,x,a,!1,f,g)),T=Ze.merge(_,v),T==null)throw K.getNotFoundInstance();let F=T.getBoundingBox();if(L&&F!=null&&(F.getMinY()<x.getMinY()||F.getMaxY()>x.getMaxY()))x=F;else break}T.setBoundingBox(x);let R=T.getBarcodeColumnCount()+1;T.setDetectionResultColumn(0,_),T.setDetectionResultColumn(R,v);let M=_!=null;for(let L=1;L<=R;L++){let F=M?L:R-L;if(T.getDetectionResultColumn(F)!==void 0)continue;let W;F===0||F===R?W=new ra(x,F===0):W=new Er(x),T.setDetectionResultColumn(F,W);let q=-1,he=q;for(let ge=x.getMinY();ge<=x.getMaxY();ge++){if(q=Ze.getStartColumn(T,F,ge,M),q<0||q>x.getMaxX()){if(he===-1)continue;q=he}let le=Ze.detectCodeword(e,x.getMinX(),x.getMaxX(),M,q,ge,f,g);le!=null&&(W.setCodeword(ge,le),he=q,f=Math.min(f,le.getWidth()),g=Math.max(g,le.getWidth()))}}return Ze.createDecoderResult(T)}static merge(e,r){if(e==null&&r==null)return null;let s=Ze.getBarcodeMetadata(e,r);if(s==null)return null;let a=ni.merge(Ze.adjustBoundingBox(e),Ze.adjustBoundingBox(r));return new cs(s,a)}static adjustBoundingBox(e){if(e==null)return null;let r=e.getRowHeights();if(r==null)return null;let s=Ze.getMax(r),a=0;for(let g of r)if(a+=s-g,g>0)break;let c=e.getCodewords();for(let g=0;a>0&&c[g]==null;g++)a--;let f=0;for(let g=r.length-1;g>=0&&(f+=s-r[g],!(r[g]>0));g--);for(let g=c.length-1;f>0&&c[g]==null;g--)f--;return e.getBoundingBox().addMissingRows(a,f,e.isLeft())}static getMax(e){let r=-1;for(let s of e)r=Math.max(r,s);return r}static getBarcodeMetadata(e,r){let s;if(e==null||(s=e.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();let a;return r==null||(a=r.getBarcodeMetadata())==null?s:s.getColumnCount()!==a.getColumnCount()&&s.getErrorCorrectionLevel()!==a.getErrorCorrectionLevel()&&s.getRowCount()!==a.getRowCount()?null:s}static getRowIndicatorColumn(e,r,s,a,c,f){let g=new ra(r,a);for(let x=0;x<2;x++){let _=x===0?1:-1,v=Math.trunc(Math.trunc(s.getX()));for(let T=Math.trunc(Math.trunc(s.getY()));T<=r.getMaxY()&&T>=r.getMinY();T+=_){let R=Ze.detectCodeword(e,0,e.getWidth(),a,v,T,c,f);R!=null&&(g.setCodeword(T,R),a?v=R.getStartX():v=R.getEndX())}}return g}static adjustCodewordCount(e,r){let s=r[0][1],a=s.getValue(),c=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-Ze.getNumberOfECCodeWords(e.getBarcodeECLevel());if(a.length===0){if(c<1||c>je.MAX_CODEWORDS_IN_BARCODE)throw K.getNotFoundInstance();s.setValue(c)}else a[0]!==c&&s.setValue(c)}static createDecoderResult(e){let r=Ze.createBarcodeMatrix(e);Ze.adjustCodewordCount(e,r);let s=new Array,a=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),c=[],f=new Array;for(let x=0;x<e.getBarcodeRowCount();x++)for(let _=0;_<e.getBarcodeColumnCount();_++){let v=r[x][_+1].getValue(),T=x*e.getBarcodeColumnCount()+_;v.length===0?s.push(T):v.length===1?a[T]=v[0]:(f.push(T),c.push(v))}let g=new Array(c.length);for(let x=0;x<g.length;x++)g[x]=c[x];return Ze.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),a,je.toIntArray(s),je.toIntArray(f),g)}static createDecoderResultFromAmbiguousValues(e,r,s,a,c){let f=new Int32Array(a.length),g=100;for(;g-- >0;){for(let x=0;x<f.length;x++)r[a[x]]=c[x][f[x]];try{return Ze.decodeCodewords(r,e,s)}catch(x){if(!(x instanceof V))throw x}if(f.length===0)throw V.getChecksumInstance();for(let x=0;x<f.length;x++)if(f[x]<c[x].length-1){f[x]++;break}else if(f[x]=0,x===f.length-1)throw V.getChecksumInstance()}throw V.getChecksumInstance()}static createBarcodeMatrix(e){let r=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let a=0;a<r.length;a++)for(let c=0;c<r[a].length;c++)r[a][c]=new Kr;let s=0;for(let a of e.getDetectionResultColumns()){if(a!=null){for(let c of a.getCodewords())if(c!=null){let f=c.getRowNumber();if(f>=0){if(f>=r.length)continue;r[f][s].setValue(c.getValue())}}}s++}return r}static isValidBarcodeColumn(e,r){return r>=0&&r<=e.getBarcodeColumnCount()+1}static getStartColumn(e,r,s,a){let c=a?1:-1,f=null;if(Ze.isValidBarcodeColumn(e,r-c)&&(f=e.getDetectionResultColumn(r-c).getCodeword(s)),f!=null)return a?f.getEndX():f.getStartX();if(f=e.getDetectionResultColumn(r).getCodewordNearby(s),f!=null)return a?f.getStartX():f.getEndX();if(Ze.isValidBarcodeColumn(e,r-c)&&(f=e.getDetectionResultColumn(r-c).getCodewordNearby(s)),f!=null)return a?f.getEndX():f.getStartX();let g=0;for(;Ze.isValidBarcodeColumn(e,r-c);){r-=c;for(let x of e.getDetectionResultColumn(r).getCodewords())if(x!=null)return(a?x.getEndX():x.getStartX())+c*g*(x.getEndX()-x.getStartX());g++}return a?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,r,s,a,c,f,g,x){c=Ze.adjustCodewordStartColumn(e,r,s,a,c,f);let _=Ze.getModuleBitCount(e,r,s,a,c,f);if(_==null)return null;let v,T=ct.sum(_);if(a)v=c+T;else{for(let L=0;L<_.length/2;L++){let F=_[L];_[L]=_[_.length-1-L],_[_.length-1-L]=F}v=c,c=v-T}if(!Ze.checkCodewordSkew(T,g,x))return null;let R=hn.getDecodedValue(_),M=je.getCodeword(R);return M===-1?null:new ri(c,v,Ze.getCodewordBucketNumber(R),M)}static getModuleBitCount(e,r,s,a,c,f){let g=c,x=new Int32Array(8),_=0,v=a?1:-1,T=a;for(;(a?g<s:g>=r)&&_<x.length;)e.get(g,f)===T?(x[_]++,g+=v):(_++,T=!T);return _===x.length||g===(a?s:r)&&_===x.length-1?x:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,r,s,a,c,f){let g=c,x=a?-1:1;for(let _=0;_<2;_++){for(;(a?g>=r:g<s)&&a===e.get(g,f);){if(Math.abs(c-g)>Ze.CODEWORD_SKEW_SIZE)return c;g+=x}x=-x,a=!a}return g}static checkCodewordSkew(e,r,s){return r-Ze.CODEWORD_SKEW_SIZE<=e&&e<=s+Ze.CODEWORD_SKEW_SIZE}static decodeCodewords(e,r,s){if(e.length===0)throw Y.getFormatInstance();let a=1<<r+1,c=Ze.correctErrors(e,s,a);Ze.verifyCodewordCount(e,a);let f=Z.decode(e,""+r);return f.setErrorsCorrected(c),f.setErasures(s.length),f}static correctErrors(e,r,s){if(r!=null&&r.length>s/2+Ze.MAX_ERRORS||s<0||s>Ze.MAX_EC_CODEWORDS)throw V.getChecksumInstance();return Ze.errorCorrection.decode(e,s,r)}static verifyCodewordCount(e,r){if(e.length<4)throw Y.getFormatInstance();let s=e[0];if(s>e.length)throw Y.getFormatInstance();if(s===0)if(r<e.length)e[0]=e.length-r;else throw Y.getFormatInstance()}static getBitCountForCodeword(e){let r=new Int32Array(8),s=0,a=r.length-1;for(;!((e&1)!==s&&(s=e&1,a--,a<0));)r[a]++,e>>=1;return r}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return Ze.getCodewordBucketNumber(Ze.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let r=new Or;for(let s=0;s<e.length;s++){r.format("Row %2d: ",s);for(let a=0;a<e[s].length;a++){let c=e[s][a];c.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",c.getValue()[0],c.getConfidence(c.getValue()[0]))}r.format("%n")}return r.toString()}}Ze.CODEWORD_SKEW_SIZE=2,Ze.MAX_ERRORS=3,Ze.MAX_EC_CODEWORDS=512,Ze.errorCorrection=new Go;class dn{decode(e,r=null){let s=dn.decode(e,r,!1);if(s==null||s.length===0||s[0]==null)throw K.getNotFoundInstance();return s[0]}decodeMultiple(e,r=null){try{return dn.decode(e,r,!0)}catch(s){throw s instanceof Y||s instanceof V?K.getNotFoundInstance():s}}static decode(e,r,s){const a=new Array,c=Ke.detectMultiple(e,r,s);for(const f of c.getPoints()){const g=Ze.decode(c.getBits(),f[4],f[5],f[6],f[7],dn.getMinCodewordWidth(f),dn.getMaxCodewordWidth(f)),x=new Ve(g.getText(),g.getRawBytes(),void 0,f,we.PDF_417);x.putMetadata(Be.ERROR_CORRECTION_LEVEL,g.getECLevel());const _=g.getOther();_!=null&&x.putMetadata(Be.PDF417_EXTRA_METADATA,_),a.push(x)}return a.map(f=>f)}static getMaxWidth(e,r){return e==null||r==null?0:Math.trunc(Math.abs(e.getX()-r.getX()))}static getMinWidth(e,r){return e==null||r==null?te.MAX_VALUE:Math.trunc(Math.abs(e.getX()-r.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(dn.getMaxWidth(e[0],e[4]),dn.getMaxWidth(e[6],e[2])*je.MODULES_IN_CODEWORD/je.MODULES_IN_STOP_PATTERN),Math.max(dn.getMaxWidth(e[1],e[5]),dn.getMaxWidth(e[7],e[3])*je.MODULES_IN_CODEWORD/je.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(dn.getMinWidth(e[0],e[4]),dn.getMinWidth(e[6],e[2])*je.MODULES_IN_CODEWORD/je.MODULES_IN_STOP_PATTERN),Math.min(dn.getMinWidth(e[1],e[5]),dn.getMinWidth(e[7],e[3])*je.MODULES_IN_CODEWORD/je.MODULES_IN_STOP_PATTERN)))}reset(){}}class Oi extends E{}Oi.kind="ReaderException";class qs{constructor(e,r){this.verbose=e===!0,r&&this.setHints(r)}decode(e,r){return r&&this.setHints(r),this.decodeInternal(e)}decodeWithState(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const r=!u(e)&&e.get(ie.TRY_HARDER)===!0,s=u(e)?null:e.get(ie.POSSIBLE_FORMATS),a=new Array;if(!u(s)){const c=s.some(f=>f===we.UPC_A||f===we.UPC_E||f===we.EAN_13||f===we.EAN_8||f===we.CODABAR||f===we.CODE_39||f===we.CODE_93||f===we.CODE_128||f===we.ITF||f===we.RSS_14||f===we.RSS_EXPANDED);c&&!r&&a.push(new Ii(e,this.verbose)),s.includes(we.QR_CODE)&&a.push(new Tn),s.includes(we.DATA_MATRIX)&&a.push(new ur),s.includes(we.AZTEC)&&a.push(new jr),s.includes(we.PDF_417)&&a.push(new dn),c&&r&&a.push(new Ii(e,this.verbose))}a.length===0&&(r||a.push(new Ii(e,this.verbose)),a.push(new Tn),a.push(new ur),a.push(new jr),a.push(new dn),r&&a.push(new Ii(e,this.verbose))),this.readers=a}reset(){if(this.readers!==null)for(const e of this.readers)e.reset()}decodeInternal(e){if(this.readers===null)throw new Oi("No readers where selected, nothing can be read.");for(const r of this.readers)try{return r.decode(e,this.hints)}catch(s){if(s instanceof Oi)continue}throw new K("No MultiFormat Readers were able to detect the code.")}}class hs extends Ge{constructor(e=null,r=500){const s=new qs;s.setHints(e),super(s,r)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class Zs extends Ge{constructor(e=500){super(new dn,e)}}class sa extends Ge{constructor(e=500){super(new Tn,e)}}var Yo;(function(I){I[I.ERROR_CORRECTION=0]="ERROR_CORRECTION",I[I.CHARACTER_SET=1]="CHARACTER_SET",I[I.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",I[I.MIN_SIZE=3]="MIN_SIZE",I[I.MAX_SIZE=4]="MAX_SIZE",I[I.MARGIN=5]="MARGIN",I[I.PDF417_COMPACT=6]="PDF417_COMPACT",I[I.PDF417_COMPACTION=7]="PDF417_COMPACTION",I[I.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",I[I.AZTEC_LAYERS=9]="AZTEC_LAYERS",I[I.QR_VERSION=10]="QR_VERSION"})(Yo||(Yo={}));var nn=Yo;class Ko{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new an(e,Int32Array.from([1])))}buildGenerator(e){const r=this.cachedGenerators;if(e>=r.length){let s=r[r.length-1];const a=this.field;for(let c=r.length;c<=e;c++){const f=s.multiply(new an(a,Int32Array.from([1,a.exp(c-1+a.getGeneratorBase())])));r.push(f),s=f}}return r[e]}encode(e,r){if(r===0)throw new b("No error correction bytes");const s=e.length-r;if(s<=0)throw new b("No data bytes provided");const a=this.buildGenerator(r),c=new Int32Array(s);$.arraycopy(e,0,c,0,s);let f=new an(this.field,c);f=f.multiplyByMonomial(r,1);const x=f.divide(a)[1].getCoefficients(),_=r-x.length;for(let v=0;v<_;v++)e[s+v]=0;$.arraycopy(x,0,e,s+_,x.length)}}class Dt{constructor(){}static applyMaskPenaltyRule1(e){return Dt.applyMaskPenaltyRule1Internal(e,!0)+Dt.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let r=0;const s=e.getArray(),a=e.getWidth(),c=e.getHeight();for(let f=0;f<c-1;f++){const g=s[f];for(let x=0;x<a-1;x++){const _=g[x];_===g[x+1]&&_===s[f+1][x]&&_===s[f+1][x+1]&&r++}}return Dt.N2*r}static applyMaskPenaltyRule3(e){let r=0;const s=e.getArray(),a=e.getWidth(),c=e.getHeight();for(let f=0;f<c;f++)for(let g=0;g<a;g++){const x=s[f];g+6<a&&x[g]===1&&x[g+1]===0&&x[g+2]===1&&x[g+3]===1&&x[g+4]===1&&x[g+5]===0&&x[g+6]===1&&(Dt.isWhiteHorizontal(x,g-4,g)||Dt.isWhiteHorizontal(x,g+7,g+11))&&r++,f+6<c&&s[f][g]===1&&s[f+1][g]===0&&s[f+2][g]===1&&s[f+3][g]===1&&s[f+4][g]===1&&s[f+5][g]===0&&s[f+6][g]===1&&(Dt.isWhiteVertical(s,g,f-4,f)||Dt.isWhiteVertical(s,g,f+7,f+11))&&r++}return r*Dt.N3}static isWhiteHorizontal(e,r,s){r=Math.max(r,0),s=Math.min(s,e.length);for(let a=r;a<s;a++)if(e[a]===1)return!1;return!0}static isWhiteVertical(e,r,s,a){s=Math.max(s,0),a=Math.min(a,e.length);for(let c=s;c<a;c++)if(e[c][r]===1)return!1;return!0}static applyMaskPenaltyRule4(e){let r=0;const s=e.getArray(),a=e.getWidth(),c=e.getHeight();for(let x=0;x<c;x++){const _=s[x];for(let v=0;v<a;v++)_[v]===1&&r++}const f=e.getHeight()*e.getWidth();return Math.floor(Math.abs(r*2-f)*10/f)*Dt.N4}static getDataMaskBit(e,r,s){let a,c;switch(e){case 0:a=s+r&1;break;case 1:a=s&1;break;case 2:a=r%3;break;case 3:a=(s+r)%3;break;case 4:a=Math.floor(s/2)+Math.floor(r/3)&1;break;case 5:c=s*r,a=(c&1)+c%3;break;case 6:c=s*r,a=(c&1)+c%3&1;break;case 7:c=s*r,a=c%3+(s+r&1)&1;break;default:throw new b("Invalid mask pattern: "+e)}return a===0}static applyMaskPenaltyRule1Internal(e,r){let s=0;const a=r?e.getHeight():e.getWidth(),c=r?e.getWidth():e.getHeight(),f=e.getArray();for(let g=0;g<a;g++){let x=0,_=-1;for(let v=0;v<c;v++){const T=r?f[g][v]:f[v][g];T===_?x++:(x>=5&&(s+=Dt.N1+(x-5)),x=1,_=T)}x>=5&&(s+=Dt.N1+(x-5))}return s}}Dt.N1=3,Dt.N2=3,Dt.N3=40,Dt.N4=10;class Qs{constructor(e,r){this.width=e,this.height=r;const s=new Array(r);for(let a=0;a!==r;a++)s[a]=new Uint8Array(e);this.bytes=s}getHeight(){return this.height}getWidth(){return this.width}get(e,r){return this.bytes[r][e]}getArray(){return this.bytes}setNumber(e,r,s){this.bytes[r][e]=s}setBoolean(e,r,s){this.bytes[r][e]=s?1:0}clear(e){for(const r of this.bytes)pe.fill(r,e)}equals(e){if(!(e instanceof Qs))return!1;const r=e;if(this.width!==r.width||this.height!==r.height)return!1;for(let s=0,a=this.height;s<a;++s){const c=this.bytes[s],f=r.bytes[s];for(let g=0,x=this.width;g<x;++g)if(c[g]!==f[g])return!1}return!0}toString(){const e=new fe;for(let r=0,s=this.height;r<s;++r){const a=this.bytes[r];for(let c=0,f=this.width;c<f;++c)switch(a[c]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()}}class ii{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new fe;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<ii.NUM_MASK_PATTERNS}}ii.NUM_MASK_PATTERNS=8;class vt extends E{}vt.kind="WriterException";class He{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,r,s,a,c){He.clearMatrix(c),He.embedBasicPatterns(s,c),He.embedTypeInfo(r,a,c),He.maybeEmbedVersionInfo(s,c),He.embedDataBits(e,a,c)}static embedBasicPatterns(e,r){He.embedPositionDetectionPatternsAndSeparators(r),He.embedDarkDotAtLeftBottomCorner(r),He.maybeEmbedPositionAdjustmentPatterns(e,r),He.embedTimingPatterns(r)}static embedTypeInfo(e,r,s){const a=new oe;He.makeTypeInfoBits(e,r,a);for(let c=0,f=a.getSize();c<f;++c){const g=a.get(a.getSize()-1-c),x=He.TYPE_INFO_COORDINATES[c],_=x[0],v=x[1];if(s.setBoolean(_,v,g),c<8){const T=s.getWidth()-c-1;s.setBoolean(T,8,g)}else{const R=s.getHeight()-7+(c-8);s.setBoolean(8,R,g)}}}static maybeEmbedVersionInfo(e,r){if(e.getVersionNumber()<7)return;const s=new oe;He.makeVersionInfoBits(e,s);let a=17;for(let c=0;c<6;++c)for(let f=0;f<3;++f){const g=s.get(a);a--,r.setBoolean(c,r.getHeight()-11+f,g),r.setBoolean(r.getHeight()-11+f,c,g)}}static embedDataBits(e,r,s){let a=0,c=-1,f=s.getWidth()-1,g=s.getHeight()-1;for(;f>0;){for(f===6&&(f-=1);g>=0&&g<s.getHeight();){for(let x=0;x<2;++x){const _=f-x;if(!He.isEmpty(s.get(_,g)))continue;let v;a<e.getSize()?(v=e.get(a),++a):v=!1,r!==255&&Dt.getDataMaskBit(r,_,g)&&(v=!v),s.setBoolean(_,g,v)}g+=c}c=-c,g+=c,f-=2}if(a!==e.getSize())throw new vt("Not all bits consumed: "+a+"/"+e.getSize())}static findMSBSet(e){return 32-te.numberOfLeadingZeros(e)}static calculateBCHCode(e,r){if(r===0)throw new b("0 polynomial");const s=He.findMSBSet(r);for(e<<=s-1;He.findMSBSet(e)>=s;)e^=r<<He.findMSBSet(e)-s;return e}static makeTypeInfoBits(e,r,s){if(!ii.isValidMaskPattern(r))throw new vt("Invalid mask pattern");const a=e.getBits()<<3|r;s.appendBits(a,5);const c=He.calculateBCHCode(a,He.TYPE_INFO_POLY);s.appendBits(c,10);const f=new oe;if(f.appendBits(He.TYPE_INFO_MASK_PATTERN,15),s.xor(f),s.getSize()!==15)throw new vt("should not happen but we got: "+s.getSize())}static makeVersionInfoBits(e,r){r.appendBits(e.getVersionNumber(),6);const s=He.calculateBCHCode(e.getVersionNumber(),He.VERSION_INFO_POLY);if(r.appendBits(s,12),r.getSize()!==18)throw new vt("should not happen but we got: "+r.getSize())}static isEmpty(e){return e===255}static embedTimingPatterns(e){for(let r=8;r<e.getWidth()-8;++r){const s=(r+1)%2;He.isEmpty(e.get(r,6))&&e.setNumber(r,6,s),He.isEmpty(e.get(6,r))&&e.setNumber(6,r,s)}}static embedDarkDotAtLeftBottomCorner(e){if(e.get(8,e.getHeight()-8)===0)throw new vt;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,r,s){for(let a=0;a<8;++a){if(!He.isEmpty(s.get(e+a,r)))throw new vt;s.setNumber(e+a,r,0)}}static embedVerticalSeparationPattern(e,r,s){for(let a=0;a<7;++a){if(!He.isEmpty(s.get(e,r+a)))throw new vt;s.setNumber(e,r+a,0)}}static embedPositionAdjustmentPattern(e,r,s){for(let a=0;a<5;++a){const c=He.POSITION_ADJUSTMENT_PATTERN[a];for(let f=0;f<5;++f)s.setNumber(e+f,r+a,c[f])}}static embedPositionDetectionPattern(e,r,s){for(let a=0;a<7;++a){const c=He.POSITION_DETECTION_PATTERN[a];for(let f=0;f<7;++f)s.setNumber(e+f,r+a,c[f])}}static embedPositionDetectionPatternsAndSeparators(e){const r=He.POSITION_DETECTION_PATTERN[0].length;He.embedPositionDetectionPattern(0,0,e),He.embedPositionDetectionPattern(e.getWidth()-r,0,e),He.embedPositionDetectionPattern(0,e.getWidth()-r,e);const s=8;He.embedHorizontalSeparationPattern(0,s-1,e),He.embedHorizontalSeparationPattern(e.getWidth()-s,s-1,e),He.embedHorizontalSeparationPattern(0,e.getWidth()-s,e);const a=7;He.embedVerticalSeparationPattern(a,0,e),He.embedVerticalSeparationPattern(e.getHeight()-a-1,0,e),He.embedVerticalSeparationPattern(a,e.getHeight()-a,e)}static maybeEmbedPositionAdjustmentPatterns(e,r){if(e.getVersionNumber()<2)return;const s=e.getVersionNumber()-1,a=He.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[s];for(let c=0,f=a.length;c!==f;c++){const g=a[c];if(g>=0)for(let x=0;x!==f;x++){const _=a[x];_>=0&&He.isEmpty(r.get(_,g))&&He.embedPositionAdjustmentPattern(_-2,g-2,r)}}}}He.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),He.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),He.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),He.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),He.VERSION_INFO_POLY=7973,He.TYPE_INFO_POLY=1335,He.TYPE_INFO_MASK_PATTERN=21522;class Vc{constructor(e,r){this.dataBytes=e,this.errorCorrectionBytes=r}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class St{constructor(){}static calculateMaskPenalty(e){return Dt.applyMaskPenaltyRule1(e)+Dt.applyMaskPenaltyRule2(e)+Dt.applyMaskPenaltyRule3(e)+Dt.applyMaskPenaltyRule4(e)}static encode(e,r,s=null){let a=St.DEFAULT_BYTE_MODE_ENCODING;const c=s!==null&&s.get(nn.CHARACTER_SET)!==void 0;c&&(a=s.get(nn.CHARACTER_SET).toString());const f=this.chooseMode(e,a),g=new oe;if(f===Ue.BYTE&&(c||St.DEFAULT_BYTE_MODE_ENCODING!==a)){const ge=j.getCharacterSetECIByName(a);ge!==void 0&&this.appendECI(ge,g)}this.appendModeInfo(f,g);const x=new oe;this.appendBytes(e,f,x,a);let _;if(s!==null&&s.get(nn.QR_VERSION)!==void 0){const ge=Number.parseInt(s.get(nn.QR_VERSION).toString(),10);_=Fe.getVersionForNumber(ge);const le=this.calculateBitsNeeded(f,g,x,_);if(!this.willFit(le,_,r))throw new vt("Data too big for requested version")}else _=this.recommendVersion(r,f,g,x);const v=new oe;v.appendBitArray(g);const T=f===Ue.BYTE?x.getSizeInBytes():e.length;this.appendLengthInfo(T,_,f,v),v.appendBitArray(x);const R=_.getECBlocksForLevel(r),M=_.getTotalCodewords()-R.getTotalECCodewords();this.terminateBits(M,v);const L=this.interleaveWithECBytes(v,_.getTotalCodewords(),M,R.getNumBlocks()),F=new ii;F.setECLevel(r),F.setMode(f),F.setVersion(_);const W=_.getDimensionForVersion(),q=new Qs(W,W),he=this.chooseMaskPattern(L,r,_,q);return F.setMaskPattern(he),He.buildMatrix(L,r,_,he,q),F.setMatrix(q),F}static recommendVersion(e,r,s,a){const c=this.calculateBitsNeeded(r,s,a,Fe.getVersionForNumber(1)),f=this.chooseVersion(c,e),g=this.calculateBitsNeeded(r,s,a,f);return this.chooseVersion(g,e)}static calculateBitsNeeded(e,r,s,a){return r.getSize()+e.getCharacterCountBits(a)+s.getSize()}static getAlphanumericCode(e){return e<St.ALPHANUMERIC_TABLE.length?St.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e,r=null){if(j.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(e))return Ue.KANJI;let s=!1,a=!1;for(let c=0,f=e.length;c<f;++c){const g=e.charAt(c);if(St.isDigit(g))s=!0;else if(this.getAlphanumericCode(g.charCodeAt(0))!==-1)a=!0;else return Ue.BYTE}return a?Ue.ALPHANUMERIC:s?Ue.NUMERIC:Ue.BYTE}static isOnlyDoubleByteKanji(e){let r;try{r=ve.encode(e,j.SJIS)}catch{return!1}const s=r.length;if(s%2!==0)return!1;for(let a=0;a<s;a+=2){const c=r[a]&255;if((c<129||c>159)&&(c<224||c>235))return!1}return!0}static chooseMaskPattern(e,r,s,a){let c=Number.MAX_SAFE_INTEGER,f=-1;for(let g=0;g<ii.NUM_MASK_PATTERNS;g++){He.buildMatrix(e,r,s,g,a);let x=this.calculateMaskPenalty(a);x<c&&(c=x,f=g)}return f}static chooseVersion(e,r){for(let s=1;s<=40;s++){const a=Fe.getVersionForNumber(s);if(St.willFit(e,a,r))return a}throw new vt("Data too big")}static willFit(e,r,s){const a=r.getTotalCodewords(),f=r.getECBlocksForLevel(s).getTotalECCodewords(),g=a-f,x=(e+7)/8;return g>=x}static terminateBits(e,r){const s=e*8;if(r.getSize()>s)throw new vt("data bits cannot fit in the QR Code"+r.getSize()+" > "+s);for(let f=0;f<4&&r.getSize()<s;++f)r.appendBit(!1);const a=r.getSize()&7;if(a>0)for(let f=a;f<8;f++)r.appendBit(!1);const c=e-r.getSizeInBytes();for(let f=0;f<c;++f)r.appendBits((f&1)===0?236:17,8);if(r.getSize()!==s)throw new vt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,r,s,a,c,f){if(a>=s)throw new vt("Block ID too large");const g=e%s,x=s-g,_=Math.floor(e/s),v=_+1,T=Math.floor(r/s),R=T+1,M=_-T,L=v-R;if(M!==L)throw new vt("EC bytes mismatch");if(s!==x+g)throw new vt("RS blocks mismatch");if(e!==(T+M)*x+(R+L)*g)throw new vt("Total bytes mismatch");a<x?(c[0]=T,f[0]=M):(c[0]=R,f[0]=L)}static interleaveWithECBytes(e,r,s,a){if(e.getSizeInBytes()!==s)throw new vt("Number of bits and data bytes does not match");let c=0,f=0,g=0;const x=new Array;for(let v=0;v<a;++v){const T=new Int32Array(1),R=new Int32Array(1);St.getNumDataBytesAndNumECBytesForBlockID(r,s,a,v,T,R);const M=T[0],L=new Uint8Array(M);e.toBytes(8*c,L,0,M);const F=St.generateECBytes(L,R[0]);x.push(new Vc(L,F)),f=Math.max(f,M),g=Math.max(g,F.length),c+=T[0]}if(s!==c)throw new vt("Data bytes does not match offset");const _=new oe;for(let v=0;v<f;++v)for(const T of x){const R=T.getDataBytes();v<R.length&&_.appendBits(R[v],8)}for(let v=0;v<g;++v)for(const T of x){const R=T.getErrorCorrectionBytes();v<R.length&&_.appendBits(R[v],8)}if(r!==_.getSizeInBytes())throw new vt("Interleaving error: "+r+" and "+_.getSizeInBytes()+" differ.");return _}static generateECBytes(e,r){const s=e.length,a=new Int32Array(s+r);for(let f=0;f<s;f++)a[f]=e[f]&255;new Ko(ht.QR_CODE_FIELD_256).encode(a,r);const c=new Uint8Array(r);for(let f=0;f<r;f++)c[f]=a[s+f];return c}static appendModeInfo(e,r){r.appendBits(e.getBits(),4)}static appendLengthInfo(e,r,s,a){const c=s.getCharacterCountBits(r);if(e>=1<<c)throw new vt(e+" is bigger than "+((1<<c)-1));a.appendBits(e,c)}static appendBytes(e,r,s,a){switch(r){case Ue.NUMERIC:St.appendNumericBytes(e,s);break;case Ue.ALPHANUMERIC:St.appendAlphanumericBytes(e,s);break;case Ue.BYTE:St.append8BitBytes(e,s,a);break;case Ue.KANJI:St.appendKanjiBytes(e,s);break;default:throw new vt("Invalid mode: "+r)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const r=St.getDigit(e);return r>=0&&r<=9}static appendNumericBytes(e,r){const s=e.length;let a=0;for(;a<s;){const c=St.getDigit(e.charAt(a));if(a+2<s){const f=St.getDigit(e.charAt(a+1)),g=St.getDigit(e.charAt(a+2));r.appendBits(c*100+f*10+g,10),a+=3}else if(a+1<s){const f=St.getDigit(e.charAt(a+1));r.appendBits(c*10+f,7),a+=2}else r.appendBits(c,4),a++}}static appendAlphanumericBytes(e,r){const s=e.length;let a=0;for(;a<s;){const c=St.getAlphanumericCode(e.charCodeAt(a));if(c===-1)throw new vt;if(a+1<s){const f=St.getAlphanumericCode(e.charCodeAt(a+1));if(f===-1)throw new vt;r.appendBits(c*45+f,11),a+=2}else r.appendBits(c,6),a++}}static append8BitBytes(e,r,s){let a;try{a=ve.encode(e,s)}catch(c){throw new vt(c)}for(let c=0,f=a.length;c!==f;c++){const g=a[c];r.appendBits(g,8)}}static appendKanjiBytes(e,r){let s;try{s=ve.encode(e,j.SJIS)}catch(c){throw new vt(c)}const a=s.length;for(let c=0;c<a;c+=2){const f=s[c]&255,g=s[c+1]&255,x=f<<8&4294967295|g;let _=-1;if(x>=33088&&x<=40956?_=x-33088:x>=57408&&x<=60351&&(_=x-49472),_===-1)throw new vt("Invalid byte sequence");const v=(_>>8)*192+(_&255);r.appendBits(v,13)}}static appendECI(e,r){r.appendBits(Ue.ECI.getBits(),4),r.appendBits(e.getValue(),8)}}St.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),St.DEFAULT_BYTE_MODE_ENCODING=j.UTF8.getName();class si{write(e,r,s,a=null){if(e.length===0)throw new b("Found empty contents");if(r<0||s<0)throw new b("Requested dimensions are too small: "+r+"x"+s);let c=Et.L,f=si.QUIET_ZONE_SIZE;a!==null&&(a.get(nn.ERROR_CORRECTION)!==void 0&&(c=Et.fromString(a.get(nn.ERROR_CORRECTION).toString())),a.get(nn.MARGIN)!==void 0&&(f=Number.parseInt(a.get(nn.MARGIN).toString(),10)));const g=St.encode(e,c,a);return this.renderResult(g,r,s,f)}writeToDom(e,r,s,a,c=null){typeof e=="string"&&(e=document.querySelector(e));const f=this.write(r,s,a,c);e&&e.appendChild(f)}renderResult(e,r,s,a){const c=e.getMatrix();if(c===null)throw new sr;const f=c.getWidth(),g=c.getHeight(),x=f+a*2,_=g+a*2,v=Math.max(r,x),T=Math.max(s,_),R=Math.min(Math.floor(v/x),Math.floor(T/_)),M=Math.floor((v-f*R)/2),L=Math.floor((T-g*R)/2),F=this.createSVGElement(v,T);for(let W=0,q=L;W<g;W++,q+=R)for(let he=0,ge=M;he<f;he++,ge+=R)if(c.get(he,W)===1){const le=this.createSvgRectElement(ge,q,R,R);F.appendChild(le)}return F}createSVGElement(e,r){const s=document.createElementNS(si.SVG_NS,"svg");return s.setAttributeNS(null,"height",e.toString()),s.setAttributeNS(null,"width",r.toString()),s}createSvgRectElement(e,r,s,a){const c=document.createElementNS(si.SVG_NS,"rect");return c.setAttributeNS(null,"x",e.toString()),c.setAttributeNS(null,"y",r.toString()),c.setAttributeNS(null,"height",s.toString()),c.setAttributeNS(null,"width",a.toString()),c.setAttributeNS(null,"fill","#000000"),c}}si.QUIET_ZONE_SIZE=4,si.SVG_NS="http://www.w3.org/2000/svg";class Di{encode(e,r,s,a,c){if(e.length===0)throw new b("Found empty contents");if(r!==we.QR_CODE)throw new b("Can only encode QR_CODE, but got "+r);if(s<0||a<0)throw new b(`Requested dimensions are too small: ${s}x${a}`);let f=Et.L,g=Di.QUIET_ZONE_SIZE;c!==null&&(c.get(nn.ERROR_CORRECTION)!==void 0&&(f=Et.fromString(c.get(nn.ERROR_CORRECTION).toString())),c.get(nn.MARGIN)!==void 0&&(g=Number.parseInt(c.get(nn.MARGIN).toString(),10)));const x=St.encode(e,f,c);return Di.renderResult(x,s,a,g)}static renderResult(e,r,s,a){const c=e.getMatrix();if(c===null)throw new sr;const f=c.getWidth(),g=c.getHeight(),x=f+a*2,_=g+a*2,v=Math.max(r,x),T=Math.max(s,_),R=Math.min(Math.floor(v/x),Math.floor(T/_)),M=Math.floor((v-f*R)/2),L=Math.floor((T-g*R)/2),F=new Se(v,T);for(let W=0,q=L;W<g;W++,q+=R)for(let he=0,ge=M;he<f;he++,ge+=R)c.get(he,W)===1&&F.setRegion(ge,q,R,R);return F}}Di.QUIET_ZONE_SIZE=4;class Hc{encode(e,r,s,a,c){let f;if(r===we.QR_CODE)f=new Di;else throw new b("No encoder available for format "+r);return f.encode(e,r,s,a,c)}}class Ar extends ye{constructor(e,r,s,a,c,f,g,x){if(super(f,g),this.yuvData=e,this.dataWidth=r,this.dataHeight=s,this.left=a,this.top=c,a+f>r||c+g>s)throw new b("Crop rectangle does not fit within image data.");x&&this.reverseHorizontal(f,g)}getRow(e,r){if(e<0||e>=this.getHeight())throw new b("Requested row is outside the image: "+e);const s=this.getWidth();(r==null||r.length<s)&&(r=new Uint8ClampedArray(s));const a=(e+this.top)*this.dataWidth+this.left;return $.arraycopy(this.yuvData,a,r,0,s),r}getMatrix(){const e=this.getWidth(),r=this.getHeight();if(e===this.dataWidth&&r===this.dataHeight)return this.yuvData;const s=e*r,a=new Uint8ClampedArray(s);let c=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return $.arraycopy(this.yuvData,c,a,0,s),a;for(let f=0;f<r;f++){const g=f*e;$.arraycopy(this.yuvData,c,a,g,e),c+=this.dataWidth}return a}isCropSupported(){return!0}crop(e,r,s,a){return new Ar(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+r,s,a,!1)}renderThumbnail(){const e=this.getWidth()/Ar.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/Ar.THUMBNAIL_SCALE_FACTOR,s=new Int32Array(e*r),a=this.yuvData;let c=this.top*this.dataWidth+this.left;for(let f=0;f<r;f++){const g=f*e;for(let x=0;x<e;x++){const _=a[c+x*Ar.THUMBNAIL_SCALE_FACTOR]&255;s[g+x]=4278190080|_*65793}c+=this.dataWidth*Ar.THUMBNAIL_SCALE_FACTOR}return s}getThumbnailWidth(){return this.getWidth()/Ar.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Ar.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,r){const s=this.yuvData;for(let a=0,c=this.top*this.dataWidth+this.left;a<r;a++,c+=this.dataWidth){const f=c+e/2;for(let g=c,x=c+e-1;g<f;g++,x--){const _=s[g];s[g]=s[x],s[x]=_}}}invert(){return new ke(this)}}Ar.THUMBNAIL_SCALE_FACTOR=2;class ds extends ye{constructor(e,r,s,a,c,f,g){if(super(r,s),this.dataWidth=a,this.dataHeight=c,this.left=f,this.top=g,e.BYTES_PER_ELEMENT===4){const x=r*s,_=new Uint8ClampedArray(x);for(let v=0;v<x;v++){const T=e[v],R=T>>16&255,M=T>>7&510,L=T&255;_[v]=(R+M+L)/4&255}this.luminances=_}else this.luminances=e;if(a===void 0&&(this.dataWidth=r),c===void 0&&(this.dataHeight=s),f===void 0&&(this.left=0),g===void 0&&(this.top=0),this.left+r>this.dataWidth||this.top+s>this.dataHeight)throw new b("Crop rectangle does not fit within image data.")}getRow(e,r){if(e<0||e>=this.getHeight())throw new b("Requested row is outside the image: "+e);const s=this.getWidth();(r==null||r.length<s)&&(r=new Uint8ClampedArray(s));const a=(e+this.top)*this.dataWidth+this.left;return $.arraycopy(this.luminances,a,r,0,s),r}getMatrix(){const e=this.getWidth(),r=this.getHeight();if(e===this.dataWidth&&r===this.dataHeight)return this.luminances;const s=e*r,a=new Uint8ClampedArray(s);let c=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return $.arraycopy(this.luminances,c,a,0,s),a;for(let f=0;f<r;f++){const g=f*e;$.arraycopy(this.luminances,c,a,g,e),c+=this.dataWidth}return a}isCropSupported(){return!0}crop(e,r,s,a){return new ds(this.luminances,s,a,this.dataWidth,this.dataHeight,this.left+e,this.top+r)}invert(){return new ke(this)}}class oa extends j{static forName(e){return this.getCharacterSetECIByName(e)}}class qo{}qo.ISO_8859_1=j.ISO8859_1;class la{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class Zo{static singletonList(e){return[e]}static min(e,r){return e.sort(r)[0]}}class Wc{constructor(e){this.previous=e}getPrevious(){return this.previous}}class Mi extends Wc{constructor(e,r,s){super(e),this.value=r,this.bitCount=s}appendTo(e,r){e.appendBits(this.value,this.bitCount)}add(e,r){return new Mi(this,e,r)}addBinaryShift(e,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Mi(this,e,r)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+te.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class Qo extends Mi{constructor(e,r,s){super(e,0,0),this.binaryShiftStart=r,this.binaryShiftByteCount=s}appendTo(e,r){for(let s=0;s<this.binaryShiftByteCount;s++)(s===0||s===31&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):s===0?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(r[this.binaryShiftStart+s],8)}addBinaryShift(e,r){return new Qo(this,e,r)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function zc(I,e,r){return new Qo(I,e,r)}function gs(I,e,r){return new Mi(I,e,r)}const Gc=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],qr=0,ki=1,_n=2,aa=3,hr=4,ca=new Mi(null,0,0),Js=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function ua(I){for(let e of I)pe.fill(e,-1);return I[qr][hr]=0,I[ki][hr]=0,I[ki][qr]=28,I[aa][hr]=0,I[_n][hr]=0,I[_n][qr]=15,I}const Jo=ua(pe.createInt32Array(6,6));class Nn{constructor(e,r,s,a){this.token=e,this.mode=r,this.binaryShiftByteCount=s,this.bitCount=a}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,r){let s=this.bitCount,a=this.token;if(e!==this.mode){let f=Js[this.mode][e];a=gs(a,f&65535,f>>16),s+=f>>16}let c=e===_n?4:5;return a=gs(a,r,c),new Nn(a,e,0,s+c)}shiftAndAppend(e,r){let s=this.token,a=this.mode===_n?4:5;return s=gs(s,Jo[this.mode][e],a),s=gs(s,r,5),new Nn(s,this.mode,0,this.bitCount+a+5)}addBinaryShiftChar(e){let r=this.token,s=this.mode,a=this.bitCount;if(this.mode===hr||this.mode===_n){let g=Js[s][qr];r=gs(r,g&65535,g>>16),a+=g>>16,s=qr}let c=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,f=new Nn(r,s,this.binaryShiftByteCount+1,a+c);return f.binaryShiftByteCount===2078&&(f=f.endBinaryShift(e+1)),f}endBinaryShift(e){if(this.binaryShiftByteCount===0)return this;let r=this.token;return r=zc(r,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new Nn(r,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let r=this.bitCount+(Js[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?r+=Nn.calculateBinaryShiftCost(e)-Nn.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(r+=10),r<=e.bitCount}toBitArray(e){let r=[];for(let a=this.endBinaryShift(e.length).token;a!==null;a=a.getPrevious())r.unshift(a);let s=new oe;for(const a of r)a.appendTo(s,e);return s}toString(){return re.format("%s bits=%d bytes=%d",Gc[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}Nn.INITIAL_STATE=new Nn(ca,qr,0,0);function jc(I){const e=re.getCharCode(" "),r=re.getCharCode("."),s=re.getCharCode(",");I[qr][e]=1;const a=re.getCharCode("Z"),c=re.getCharCode("A");for(let R=c;R<=a;R++)I[qr][R]=R-c+2;I[ki][e]=1;const f=re.getCharCode("z"),g=re.getCharCode("a");for(let R=g;R<=f;R++)I[ki][R]=R-g+2;I[_n][e]=1;const x=re.getCharCode("9"),_=re.getCharCode("0");for(let R=_;R<=x;R++)I[_n][R]=R-_+2;I[_n][s]=12,I[_n][r]=13;const v=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let R=0;R<v.length;R++)I[aa][re.getCharCode(v[R])]=R;const T=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let R=0;R<T.length;R++)re.getCharCode(T[R])>0&&(I[hr][re.getCharCode(T[R])]=R);return I}const $o=jc(pe.createInt32Array(5,256));class ps{constructor(e){this.text=e}encode(){const e=re.getCharCode(" "),r=re.getCharCode(`
`);let s=Zo.singletonList(Nn.INITIAL_STATE);for(let c=0;c<this.text.length;c++){let f,g=c+1<this.text.length?this.text[c+1]:0;switch(this.text[c]){case re.getCharCode("\r"):f=g===r?2:0;break;case re.getCharCode("."):f=g===e?3:0;break;case re.getCharCode(","):f=g===e?4:0;break;case re.getCharCode(":"):f=g===e?5:0;break;default:f=0}f>0?(s=ps.updateStateListForPair(s,c,f),c++):s=this.updateStateListForChar(s,c)}return Zo.min(s,(c,f)=>c.getBitCount()-f.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,r){const s=[];for(let a of e)this.updateStateForChar(a,r,s);return ps.simplifyStates(s)}updateStateForChar(e,r,s){let a=this.text[r]&255,c=$o[e.getMode()][a]>0,f=null;for(let g=0;g<=hr;g++){let x=$o[g][a];if(x>0){if(f==null&&(f=e.endBinaryShift(r)),!c||g===e.getMode()||g===_n){const _=f.latchAndAppend(g,x);s.push(_)}if(!c&&Jo[e.getMode()][g]>=0){const _=f.shiftAndAppend(g,x);s.push(_)}}}if(e.getBinaryShiftByteCount()>0||$o[e.getMode()][a]===0){let g=e.addBinaryShiftChar(r);s.push(g)}}static updateStateListForPair(e,r,s){const a=[];for(let c of e)this.updateStateForPair(c,r,s,a);return this.simplifyStates(a)}static updateStateForPair(e,r,s,a){let c=e.endBinaryShift(r);if(a.push(c.latchAndAppend(hr,s)),e.getMode()!==hr&&a.push(c.shiftAndAppend(hr,s)),s===3||s===4){let f=c.latchAndAppend(_n,16-s).latchAndAppend(_n,1);a.push(f)}if(e.getBinaryShiftByteCount()>0){let f=e.addBinaryShiftChar(r).addBinaryShiftChar(r+1);a.push(f)}}static simplifyStates(e){let r=[];for(const s of e){let a=!0;for(const c of r){if(c.isBetterThanOrEqualTo(s)){a=!1;break}s.isBetterThanOrEqualTo(c)&&(r=r.filter(f=>f!==c))}a&&r.push(s)}return r}}class dt{constructor(){}static encodeBytes(e){return dt.encode(e,dt.DEFAULT_EC_PERCENT,dt.DEFAULT_AZTEC_LAYERS)}static encode(e,r,s){let a=new ps(e).encode(),c=te.truncDivision(a.getSize()*r,100)+11,f=a.getSize()+c,g,x,_,v,T;if(s!==dt.DEFAULT_AZTEC_LAYERS){if(g=s<0,x=Math.abs(s),x>(g?dt.MAX_NB_BITS_COMPACT:dt.MAX_NB_BITS))throw new b(re.format("Illegal value %s for layers",s));_=dt.totalBitsInLayer(x,g),v=dt.WORD_SIZE[x];let le=_-_%v;if(T=dt.stuffBits(a,v),T.getSize()+c>le)throw new b("Data to large for user specified layer");if(g&&T.getSize()>v*64)throw new b("Data to large for user specified layer")}else{v=0,T=null;for(let le=0;;le++){if(le>dt.MAX_NB_BITS)throw new b("Data too large for an Aztec code");if(g=le<=3,x=g?le+1:le,_=dt.totalBitsInLayer(x,g),f>_)continue;(T==null||v!==dt.WORD_SIZE[x])&&(v=dt.WORD_SIZE[x],T=dt.stuffBits(a,v));let rt=_-_%v;if(!(g&&T.getSize()>v*64)&&T.getSize()+c<=rt)break}}let R=dt.generateCheckWords(T,_,v),M=T.getSize()/v,L=dt.generateModeMessage(g,x,M),F=(g?11:14)+x*4,W=new Int32Array(F),q;if(g){q=F;for(let le=0;le<W.length;le++)W[le]=le}else{q=F+1+2*te.truncDivision(te.truncDivision(F,2)-1,15);let le=te.truncDivision(F,2),rt=te.truncDivision(q,2);for(let qe=0;qe<le;qe++){let Ln=qe+te.truncDivision(qe,15);W[le-qe-1]=rt-Ln-1,W[le+qe]=rt+Ln+1}}let he=new Se(q);for(let le=0,rt=0;le<x;le++){let qe=(x-le)*4+(g?9:12);for(let Ln=0;Ln<qe;Ln++){let dr=Ln*2;for(let rn=0;rn<2;rn++)R.get(rt+dr+rn)&&he.set(W[le*2+rn],W[le*2+Ln]),R.get(rt+qe*2+dr+rn)&&he.set(W[le*2+Ln],W[F-1-le*2-rn]),R.get(rt+qe*4+dr+rn)&&he.set(W[F-1-le*2-rn],W[F-1-le*2-Ln]),R.get(rt+qe*6+dr+rn)&&he.set(W[F-1-le*2-Ln],W[le*2+rn])}rt+=qe*8}if(dt.drawModeMessage(he,g,q,L),g)dt.drawBullsEye(he,te.truncDivision(q,2),5);else{dt.drawBullsEye(he,te.truncDivision(q,2),7);for(let le=0,rt=0;le<te.truncDivision(F,2)-1;le+=15,rt+=16)for(let qe=te.truncDivision(q,2)&1;qe<q;qe+=2)he.set(te.truncDivision(q,2)-rt,qe),he.set(te.truncDivision(q,2)+rt,qe),he.set(qe,te.truncDivision(q,2)-rt),he.set(qe,te.truncDivision(q,2)+rt)}let ge=new la;return ge.setCompact(g),ge.setSize(q),ge.setLayers(x),ge.setCodeWords(M),ge.setMatrix(he),ge}static drawBullsEye(e,r,s){for(let a=0;a<s;a+=2)for(let c=r-a;c<=r+a;c++)e.set(c,r-a),e.set(c,r+a),e.set(r-a,c),e.set(r+a,c);e.set(r-s,r-s),e.set(r-s+1,r-s),e.set(r-s,r-s+1),e.set(r+s,r-s),e.set(r+s,r-s+1),e.set(r+s,r+s-1)}static generateModeMessage(e,r,s){let a=new oe;return e?(a.appendBits(r-1,2),a.appendBits(s-1,6),a=dt.generateCheckWords(a,28,4)):(a.appendBits(r-1,5),a.appendBits(s-1,11),a=dt.generateCheckWords(a,40,4)),a}static drawModeMessage(e,r,s,a){let c=te.truncDivision(s,2);if(r)for(let f=0;f<7;f++){let g=c-3+f;a.get(f)&&e.set(g,c-5),a.get(f+7)&&e.set(c+5,g),a.get(20-f)&&e.set(g,c+5),a.get(27-f)&&e.set(c-5,g)}else for(let f=0;f<10;f++){let g=c-5+f+te.truncDivision(f,5);a.get(f)&&e.set(g,c-7),a.get(f+10)&&e.set(c+7,g),a.get(29-f)&&e.set(g,c+7),a.get(39-f)&&e.set(c-7,g)}}static generateCheckWords(e,r,s){let a=e.getSize()/s,c=new Ko(dt.getGF(s)),f=te.truncDivision(r,s),g=dt.bitsToWords(e,s,f);c.encode(g,f-a);let x=r%s,_=new oe;_.appendBits(0,x);for(const v of Array.from(g))_.appendBits(v,s);return _}static bitsToWords(e,r,s){let a=new Int32Array(s),c,f;for(c=0,f=e.getSize()/r;c<f;c++){let g=0;for(let x=0;x<r;x++)g|=e.get(c*r+x)?1<<r-x-1:0;a[c]=g}return a}static getGF(e){switch(e){case 4:return ht.AZTEC_PARAM;case 6:return ht.AZTEC_DATA_6;case 8:return ht.AZTEC_DATA_8;case 10:return ht.AZTEC_DATA_10;case 12:return ht.AZTEC_DATA_12;default:throw new b("Unsupported word size "+e)}}static stuffBits(e,r){let s=new oe,a=e.getSize(),c=(1<<r)-2;for(let f=0;f<a;f+=r){let g=0;for(let x=0;x<r;x++)(f+x>=a||e.get(f+x))&&(g|=1<<r-1-x);(g&c)===c?(s.appendBits(g&c,r),f--):(g&c)===0?(s.appendBits(g|1,r),f--):s.appendBits(g,r)}return s}static totalBitsInLayer(e,r){return((r?88:112)+16*e)*e}}dt.DEFAULT_EC_PERCENT=33,dt.DEFAULT_AZTEC_LAYERS=0,dt.MAX_NB_BITS=32,dt.MAX_NB_BITS_COMPACT=4,dt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class ms{encode(e,r,s,a){return this.encodeWithHints(e,r,s,a,null)}encodeWithHints(e,r,s,a,c){let f=qo.ISO_8859_1,g=dt.DEFAULT_EC_PERCENT,x=dt.DEFAULT_AZTEC_LAYERS;return c!=null&&(c.has(nn.CHARACTER_SET)&&(f=oa.forName(c.get(nn.CHARACTER_SET).toString())),c.has(nn.ERROR_CORRECTION)&&(g=te.parseInt(c.get(nn.ERROR_CORRECTION).toString())),c.has(nn.AZTEC_LAYERS)&&(x=te.parseInt(c.get(nn.AZTEC_LAYERS).toString()))),ms.encodeLayers(e,r,s,a,f,g,x)}static encodeLayers(e,r,s,a,c,f,g){if(r!==we.AZTEC)throw new b("Can only encode AZTEC, but got "+r);let x=dt.encode(re.getBytes(e,c),f,g);return ms.renderResult(x,s,a)}static renderResult(e,r,s){let a=e.getMatrix();if(a==null)throw new sr;let c=a.getWidth(),f=a.getHeight(),g=Math.max(r,c),x=Math.max(s,f),_=Math.min(g/c,x/f),v=(g-c*_)/2,T=(x-f*_)/2,R=new Se(g,x);for(let M=0,L=T;M<f;M++,L+=_)for(let F=0,W=v;F<c;F++,W+=_)a.get(F,M)&&R.setRegion(W,L,_,_);return R}}i.AbstractExpandedDecoder=Fo,i.ArgumentException=O,i.ArithmeticException=rs,i.AztecCode=la,i.AztecCodeReader=jr,i.AztecCodeWriter=ms,i.AztecDecoder=At,i.AztecDetector=vi,i.AztecDetectorResult=Mo,i.AztecEncoder=dt,i.AztecHighLevelEncoder=ps,i.AztecPoint=xn,i.BarcodeFormat=we,i.Binarizer=J,i.BinaryBitmap=k,i.BitArray=oe,i.BitMatrix=Se,i.BitSource=Ho,i.BrowserAztecCodeReader=Fc,i.BrowserBarcodeReader=$l,i.BrowserCodeReader=Ge,i.BrowserDatamatrixCodeReader=Uc,i.BrowserMultiFormatReader=hs,i.BrowserPDF417Reader=Zs,i.BrowserQRCodeReader=sa,i.BrowserQRCodeSvgWriter=si,i.CharacterSetECI=j,i.ChecksumException=V,i.Code128Reader=Ce,i.Code39Reader=en,i.DataMatrixDecodedBitStreamParser=cr,i.DataMatrixReader=ur,i.DecodeHintType=ie,i.DecoderResult=at,i.DefaultGridSampler=Ws,i.DetectorResult=Ai,i.EAN13Reader=Xn,i.EncodeHintType=nn,i.Exception=E,i.FormatException=Y,i.GenericGF=ht,i.GenericGFPoly=an,i.GlobalHistogramBinarizer=Je,i.GridSampler=Hs,i.GridSamplerInstance=or,i.HTMLCanvasElementLuminanceSource=ce,i.HybridBinarizer=Re,i.ITFReader=wt,i.IllegalArgumentException=b,i.IllegalStateException=sr,i.InvertedLuminanceSource=ke,i.LuminanceSource=ye,i.MathUtils=ct,i.MultiFormatOneDReader=Ii,i.MultiFormatReader=qs,i.MultiFormatWriter=Hc,i.NotFoundException=K,i.OneDReader=zt,i.PDF417DecodedBitStreamParser=Z,i.PDF417DecoderErrorCorrection=Go,i.PDF417Reader=dn,i.PDF417ResultMetadata=Ys,i.PerspectiveTransform=jn,i.PlanarYUVLuminanceSource=Ar,i.QRCodeByteMatrix=Qs,i.QRCodeDataMask=et,i.QRCodeDecodedBitStreamParser=Ot,i.QRCodeDecoderErrorCorrectionLevel=Et,i.QRCodeDecoderFormatInformation=un,i.QRCodeEncoder=St,i.QRCodeEncoderQRCode=ii,i.QRCodeMaskUtil=Dt,i.QRCodeMatrixUtil=He,i.QRCodeMode=Ue,i.QRCodeReader=Tn,i.QRCodeVersion=Fe,i.QRCodeWriter=Di,i.RGBLuminanceSource=ds,i.RSS14Reader=It,i.RSSExpandedReader=ne,i.ReaderException=Oi,i.ReedSolomonDecoder=Ei,i.ReedSolomonEncoder=Ko,i.ReedSolomonException=zr,i.Result=Ve,i.ResultMetadataType=Be,i.ResultPoint=Ne,i.StringUtils=re,i.UnsupportedOperationException=Me,i.VideoInputDevice=H,i.WhiteRectangleDetector=wr,i.WriterException=vt,i.ZXingArrays=pe,i.ZXingCharset=oa,i.ZXingInteger=te,i.ZXingStandardCharsets=qo,i.ZXingStringBuilder=fe,i.ZXingStringEncoding=ve,i.ZXingSystem=$,i.createAbstractExpandedDecoder=Ql,Object.defineProperty(i,"__esModule",{value:!0})}))})(Il,Il.exports)),Il.exports}var Yt=Ym();const Km=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));var M0=(function(){function l(t,i,u){if(this.formatMap=new Map([[be.QR_CODE,Yt.BarcodeFormat.QR_CODE],[be.AZTEC,Yt.BarcodeFormat.AZTEC],[be.CODABAR,Yt.BarcodeFormat.CODABAR],[be.CODE_39,Yt.BarcodeFormat.CODE_39],[be.CODE_93,Yt.BarcodeFormat.CODE_93],[be.CODE_128,Yt.BarcodeFormat.CODE_128],[be.DATA_MATRIX,Yt.BarcodeFormat.DATA_MATRIX],[be.MAXICODE,Yt.BarcodeFormat.MAXICODE],[be.ITF,Yt.BarcodeFormat.ITF],[be.EAN_13,Yt.BarcodeFormat.EAN_13],[be.EAN_8,Yt.BarcodeFormat.EAN_8],[be.PDF_417,Yt.BarcodeFormat.PDF_417],[be.RSS_14,Yt.BarcodeFormat.RSS_14],[be.RSS_EXPANDED,Yt.BarcodeFormat.RSS_EXPANDED],[be.UPC_A,Yt.BarcodeFormat.UPC_A],[be.UPC_E,Yt.BarcodeFormat.UPC_E],[be.UPC_EAN_EXTENSION,Yt.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!Km)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=i,this.logger=u;var d=this.createZXingFormats(t),p=new Map;p.set(Yt.DecodeHintType.POSSIBLE_FORMATS,d),p.set(Yt.DecodeHintType.TRY_HARDER,!1),this.hints=p}return l.prototype.decodeAsync=function(t){var i=this;return new Promise(function(u,d){try{u(i.decode(t))}catch(p){d(p)}})},l.prototype.decode=function(t){var i=new Yt.MultiFormatReader(this.verbose,this.hints),u=new Yt.HTMLCanvasElementLuminanceSource(t),d=new Yt.BinaryBitmap(new Yt.HybridBinarizer(u)),p=i.decode(d);return{text:p.text,format:Ug.create(this.toHtml5QrcodeSupportedFormats(p.format)),debugData:this.createDebugData()}},l.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(i,u,d){t.set(i,u)}),t},l.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},l.prototype.createZXingFormats=function(t){for(var i=[],u=0,d=t;u<d.length;u++){var p=d[u];this.formatMap.has(p)?i.push(this.formatMap.get(p)):this.logger.logError("".concat(p," is not supported by")+"ZXingHtml5QrcodeShim")}return i},l.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},l})(),qm=function(l,t,i,u){function d(p){return p instanceof i?p:new i(function(w){w(p)})}return new(i||(i=Promise))(function(p,w){function A(O){try{E(u.next(O))}catch(b){w(b)}}function S(O){try{E(u.throw(O))}catch(b){w(b)}}function E(O){O.done?p(O.value):d(O.value).then(A,S)}E((u=u.apply(l,t||[])).next())})},Zm=function(l,t){var i={label:0,sent:function(){if(p[0]&1)throw p[1];return p[1]},trys:[],ops:[]},u,d,p,w;return w={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function A(E){return function(O){return S([E,O])}}function S(E){if(u)throw new TypeError("Generator is already executing.");for(;w&&(w=0,E[0]&&(i=0)),i;)try{if(u=1,d&&(p=E[0]&2?d.return:E[0]?d.throw||((p=d.return)&&p.call(d),0):d.next)&&!(p=p.call(d,E[1])).done)return p;switch(d=0,p&&(E=[E[0]&2,p.value]),E[0]){case 0:case 1:p=E;break;case 4:return i.label++,{value:E[1],done:!1};case 5:i.label++,d=E[1],E=[0];continue;case 7:E=i.ops.pop(),i.trys.pop();continue;default:if(p=i.trys,!(p=p.length>0&&p[p.length-1])&&(E[0]===6||E[0]===2)){i=0;continue}if(E[0]===3&&(!p||E[1]>p[0]&&E[1]<p[3])){i.label=E[1];break}if(E[0]===6&&i.label<p[1]){i.label=p[1],p=E;break}if(p&&i.label<p[2]){i.label=p[2],i.ops.push(E);break}p[2]&&i.ops.pop(),i.trys.pop();continue}E=t.call(l,i)}catch(O){E=[6,O],d=0}finally{u=p=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},k0=(function(){function l(t,i,u){if(this.formatMap=new Map([[be.QR_CODE,"qr_code"],[be.AZTEC,"aztec"],[be.CODABAR,"codabar"],[be.CODE_39,"code_39"],[be.CODE_93,"code_93"],[be.CODE_128,"code_128"],[be.DATA_MATRIX,"data_matrix"],[be.ITF,"itf"],[be.EAN_13,"ean_13"],[be.EAN_8,"ean_8"],[be.PDF_417,"pdf417"],[be.UPC_A,"upc_a"],[be.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!l.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=i,this.logger=u;var d=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(d),!this.detector)throw"BarcodeDetector detector not supported"}return l.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},l.prototype.decodeAsync=function(t){return qm(this,void 0,void 0,function(){var i,u;return Zm(this,function(d){switch(d.label){case 0:return[4,this.detector.detect(t)];case 1:if(i=d.sent(),!i||i.length===0)throw"No barcode or QR code detected.";return u=this.selectLargestBarcode(i),[2,{text:u.rawValue,format:Ug.create(this.toHtml5QrcodeSupportedFormats(u.format)),debugData:this.createDebugData()}]}})})},l.prototype.selectLargestBarcode=function(t){for(var i=null,u=0,d=0,p=t;d<p.length;d++){var w=p[d],A=w.boundingBox.width*w.boundingBox.height;A>u&&(u=A,i=w)}if(!i)throw"No largest barcode found";return i},l.prototype.createBarcodeDetectorFormats=function(t){for(var i=[],u=0,d=t;u<d.length;u++){var p=d[u];this.formatMap.has(p)?i.push(this.formatMap.get(p)):this.logger.warn("".concat(p," is not supported by")+"BarcodeDetectorDelegate")}return{formats:i}},l.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},l.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(i,u,d){t.set(i,u)}),t},l.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},l})(),P0=function(l,t,i,u){function d(p){return p instanceof i?p:new i(function(w){w(p)})}return new(i||(i=Promise))(function(p,w){function A(O){try{E(u.next(O))}catch(b){w(b)}}function S(O){try{E(u.throw(O))}catch(b){w(b)}}function E(O){O.done?p(O.value):d(O.value).then(A,S)}E((u=u.apply(l,t||[])).next())})},L0=function(l,t){var i={label:0,sent:function(){if(p[0]&1)throw p[1];return p[1]},trys:[],ops:[]},u,d,p,w;return w={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function A(E){return function(O){return S([E,O])}}function S(E){if(u)throw new TypeError("Generator is already executing.");for(;w&&(w=0,E[0]&&(i=0)),i;)try{if(u=1,d&&(p=E[0]&2?d.return:E[0]?d.throw||((p=d.return)&&p.call(d),0):d.next)&&!(p=p.call(d,E[1])).done)return p;switch(d=0,p&&(E=[E[0]&2,p.value]),E[0]){case 0:case 1:p=E;break;case 4:return i.label++,{value:E[1],done:!1};case 5:i.label++,d=E[1],E=[0];continue;case 7:E=i.ops.pop(),i.trys.pop();continue;default:if(p=i.trys,!(p=p.length>0&&p[p.length-1])&&(E[0]===6||E[0]===2)){i=0;continue}if(E[0]===3&&(!p||E[1]>p[0]&&E[1]<p[3])){i.label=E[1];break}if(E[0]===6&&i.label<p[1]){i.label=p[1],p=E;break}if(p&&i.label<p[2]){i.label=p[2],i.ops.push(E);break}p[2]&&i.ops.pop(),i.trys.pop();continue}E=t.call(l,i)}catch(O){E=[6,O],d=0}finally{u=p=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},Qm=(function(){function l(t,i,u,d){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=u,i&&k0.isSupported()?(this.primaryDecoder=new k0(t,u,d),this.secondaryDecoder=new M0(t,u,d)):this.primaryDecoder=new M0(t,u,d)}return l.prototype.decodeAsync=function(t){return P0(this,void 0,void 0,function(){var i;return L0(this,function(u){switch(u.label){case 0:i=performance.now(),u.label=1;case 1:return u.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,u.sent()];case 3:return this.possiblyLogPerformance(i),[7];case 4:return[2]}})})},l.prototype.decodeRobustlyAsync=function(t){return P0(this,void 0,void 0,function(){var i,u;return L0(this,function(d){switch(d.label){case 0:i=performance.now(),d.label=1;case 1:return d.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,d.sent()];case 3:if(u=d.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw u;case 4:return this.possiblyLogPerformance(i),[7];case 5:return[2]}})})},l.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},l.prototype.possiblyLogPerformance=function(t){if(this.verbose){var i=performance.now()-t;this.executionResults.push(i),this.executions++,this.possiblyFlushPerformanceReport()}},l.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,i=0,u=this.executionResults;i<u.length;i++){var d=u[i];t+=d}var p=t/this.executionResults.length;console.log("".concat(p," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},l})(),ph=(function(){var l=function(t,i){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,d){u.__proto__=d}||function(u,d){for(var p in d)Object.prototype.hasOwnProperty.call(d,p)&&(u[p]=d[p])},l(t,i)};return function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");l(t,i);function u(){this.constructor=t}t.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}})(),ac=function(l,t,i,u){function d(p){return p instanceof i?p:new i(function(w){w(p)})}return new(i||(i=Promise))(function(p,w){function A(O){try{E(u.next(O))}catch(b){w(b)}}function S(O){try{E(u.throw(O))}catch(b){w(b)}}function E(O){O.done?p(O.value):d(O.value).then(A,S)}E((u=u.apply(l,t||[])).next())})},cc=function(l,t){var i={label:0,sent:function(){if(p[0]&1)throw p[1];return p[1]},trys:[],ops:[]},u,d,p,w;return w={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function A(E){return function(O){return S([E,O])}}function S(E){if(u)throw new TypeError("Generator is already executing.");for(;w&&(w=0,E[0]&&(i=0)),i;)try{if(u=1,d&&(p=E[0]&2?d.return:E[0]?d.throw||((p=d.return)&&p.call(d),0):d.next)&&!(p=p.call(d,E[1])).done)return p;switch(d=0,p&&(E=[E[0]&2,p.value]),E[0]){case 0:case 1:p=E;break;case 4:return i.label++,{value:E[1],done:!1};case 5:i.label++,d=E[1],E=[0];continue;case 7:E=i.ops.pop(),i.trys.pop();continue;default:if(p=i.trys,!(p=p.length>0&&p[p.length-1])&&(E[0]===6||E[0]===2)){i=0;continue}if(E[0]===3&&(!p||E[1]>p[0]&&E[1]<p[3])){i.label=E[1];break}if(E[0]===6&&i.label<p[1]){i.label=p[1],p=E;break}if(p&&i.label<p[2]){i.label=p[2],i.ops.push(E);break}p[2]&&i.ops.pop(),i.trys.pop();continue}E=t.call(l,i)}catch(O){E=[6,O],d=0}finally{u=p=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},Hg=(function(){function l(t,i){this.name=t,this.track=i}return l.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},l.prototype.apply=function(t){var i={};i[this.name]=t;var u={advanced:[i]};return this.track.applyConstraints(u)},l.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var i=t[this.name];return i}return null},l})(),Jm=(function(l){ph(t,l);function t(i,u){return l.call(this,i,u)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(i){var u={};u[this.name]=i;var d={advanced:[u]};return this.track.applyConstraints(d)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var i=this.track.getCapabilities(),u=i[this.name];return{min:u.min,max:u.max,step:u.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t})(Hg),$m=(function(l){ph(t,l);function t(i){return l.call(this,"zoom",i)||this}return t})(Jm),ex=(function(l){ph(t,l);function t(i){return l.call(this,"torch",i)||this}return t})(Hg),tx=(function(){function l(t){this.track=t}return l.prototype.zoomFeature=function(){return new $m(this.track)},l.prototype.torchFeature=function(){return new ex(this.track)},l})(),nx=(function(){function l(t,i,u){this.isClosed=!1,this.parentElement=t,this.mediaStream=i,this.callbacks=u,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return l.prototype.createVideoElement=function(t){var i=document.createElement("video");return i.style.width="".concat(t,"px"),i.style.display="block",i.muted=!0,i.setAttribute("muted","true"),i.playsInline=!0,i},l.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var i=function(){var u=t.surface.clientWidth,d=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(u,d),t.surface.removeEventListener("playing",i)};this.surface.addEventListener("playing",i),this.surface.srcObject=this.mediaStream,this.surface.play()},l.create=function(t,i,u,d){return ac(this,void 0,void 0,function(){var p,w;return cc(this,function(A){switch(A.label){case 0:return p=new l(t,i,d),u.aspectRatio?(w={aspectRatio:u.aspectRatio},[4,p.getFirstTrackOrFail().applyConstraints(w)]):[3,2];case 1:A.sent(),A.label=2;case 2:return p.setupSurface(),[2,p]}})})},l.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},l.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},l.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},l.prototype.resume=function(t){this.failIfClosed();var i=this,u=function(){setTimeout(t,200),i.surface.removeEventListener("playing",u)};this.surface.addEventListener("playing",u),this.surface.play()},l.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},l.prototype.getSurface=function(){return this.failIfClosed(),this.surface},l.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},l.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},l.prototype.applyVideoConstraints=function(t){return ac(this,void 0,void 0,function(){return cc(this,function(i){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},l.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(i,u){var d=t.mediaStream.getVideoTracks(),p=d.length,w=0;t.mediaStream.getVideoTracks().forEach(function(A){t.mediaStream.removeTrack(A),A.stop(),++w,w>=p&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),i())})})},l.prototype.getCapabilities=function(){return new tx(this.getFirstTrackOrFail())},l})(),rx=(function(){function l(t){this.mediaStream=t}return l.prototype.render=function(t,i,u){return ac(this,void 0,void 0,function(){return cc(this,function(d){return[2,nx.create(t,this.mediaStream,i,u)]})})},l.create=function(t){return ac(this,void 0,void 0,function(){var i,u;return cc(this,function(d){switch(d.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return i={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(i)];case 1:return u=d.sent(),[2,new l(u)]}})})},l})(),B0=function(l,t,i,u){function d(p){return p instanceof i?p:new i(function(w){w(p)})}return new(i||(i=Promise))(function(p,w){function A(O){try{E(u.next(O))}catch(b){w(b)}}function S(O){try{E(u.throw(O))}catch(b){w(b)}}function E(O){O.done?p(O.value):d(O.value).then(A,S)}E((u=u.apply(l,t||[])).next())})},F0=function(l,t){var i={label:0,sent:function(){if(p[0]&1)throw p[1];return p[1]},trys:[],ops:[]},u,d,p,w;return w={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function A(E){return function(O){return S([E,O])}}function S(E){if(u)throw new TypeError("Generator is already executing.");for(;w&&(w=0,E[0]&&(i=0)),i;)try{if(u=1,d&&(p=E[0]&2?d.return:E[0]?d.throw||((p=d.return)&&p.call(d),0):d.next)&&!(p=p.call(d,E[1])).done)return p;switch(d=0,p&&(E=[E[0]&2,p.value]),E[0]){case 0:case 1:p=E;break;case 4:return i.label++,{value:E[1],done:!1};case 5:i.label++,d=E[1],E=[0];continue;case 7:E=i.ops.pop(),i.trys.pop();continue;default:if(p=i.trys,!(p=p.length>0&&p[p.length-1])&&(E[0]===6||E[0]===2)){i=0;continue}if(E[0]===3&&(!p||E[1]>p[0]&&E[1]<p[3])){i.label=E[1];break}if(E[0]===6&&i.label<p[1]){i.label=p[1],p=E;break}if(p&&i.label<p[2]){i.label=p[2],i.ops.push(E);break}p[2]&&i.ops.pop(),i.trys.pop();continue}E=t.call(l,i)}catch(O){E=[6,O],d=0}finally{u=p=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},ix=(function(){function l(){}return l.failIfNotSupported=function(){return B0(this,void 0,void 0,function(){return F0(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new l]})})},l.prototype.create=function(t){return B0(this,void 0,void 0,function(){return F0(this,function(i){return[2,rx.create(t)]})})},l})(),sx=function(l,t,i,u){function d(p){return p instanceof i?p:new i(function(w){w(p)})}return new(i||(i=Promise))(function(p,w){function A(O){try{E(u.next(O))}catch(b){w(b)}}function S(O){try{E(u.throw(O))}catch(b){w(b)}}function E(O){O.done?p(O.value):d(O.value).then(A,S)}E((u=u.apply(l,t||[])).next())})},ox=function(l,t){var i={label:0,sent:function(){if(p[0]&1)throw p[1];return p[1]},trys:[],ops:[]},u,d,p,w;return w={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function A(E){return function(O){return S([E,O])}}function S(E){if(u)throw new TypeError("Generator is already executing.");for(;w&&(w=0,E[0]&&(i=0)),i;)try{if(u=1,d&&(p=E[0]&2?d.return:E[0]?d.throw||((p=d.return)&&p.call(d),0):d.next)&&!(p=p.call(d,E[1])).done)return p;switch(d=0,p&&(E=[E[0]&2,p.value]),E[0]){case 0:case 1:p=E;break;case 4:return i.label++,{value:E[1],done:!1};case 5:i.label++,d=E[1],E=[0];continue;case 7:E=i.ops.pop(),i.trys.pop();continue;default:if(p=i.trys,!(p=p.length>0&&p[p.length-1])&&(E[0]===6||E[0]===2)){i=0;continue}if(E[0]===3&&(!p||E[1]>p[0]&&E[1]<p[3])){i.label=E[1];break}if(E[0]===6&&i.label<p[1]){i.label=p[1],p=E;break}if(p&&i.label<p[2]){i.label=p[2],i.ops.push(E);break}p[2]&&i.ops.pop(),i.trys.pop();continue}E=t.call(l,i)}catch(O){E=[6,O],d=0}finally{u=p=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},lx=(function(){function l(){}return l.retrieve=function(){if(navigator.mediaDevices)return l.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?l.getCamerasFromMediaStreamTrack():l.rejectWithError()},l.rejectWithError=function(){var t=_o.unableToQuerySupportedDevices();return l.isHttpsOrLocalhost()||(t=_o.insecureContextCameraQueryError()),Promise.reject(t)},l.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},l.getCamerasFromMediaDevices=function(){return sx(this,void 0,void 0,function(){var t,i,u,d,p,w,A;return ox(this,function(S){switch(S.label){case 0:return t=function(E){for(var O=E.getVideoTracks(),b=0,k=O;b<k.length;b++){var V=k[b];V.enabled=!1,V.stop(),E.removeTrack(V)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return i=S.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(u=S.sent(),d=[],p=0,w=u;p<w.length;p++)A=w[p],A.kind==="videoinput"&&d.push({id:A.deviceId,label:A.label});return t(i),[2,d]}})})},l.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,i){var u=function(p){for(var w=[],A=0,S=p;A<S.length;A++){var E=S[A];E.kind==="video"&&w.push({id:E.id,label:E.label})}t(w)},d=MediaStreamTrack;d.getSources(u)})},l})(),Qt;(function(l){l[l.UNKNOWN=0]="UNKNOWN",l[l.NOT_STARTED=1]="NOT_STARTED",l[l.SCANNING=2]="SCANNING",l[l.PAUSED=3]="PAUSED"})(Qt||(Qt={}));var ax=(function(){function l(){this.state=Qt.NOT_STARTED,this.onGoingTransactionNewState=Qt.UNKNOWN}return l.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},l.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},l.prototype.execute=function(){if(this.onGoingTransactionNewState===Qt.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Qt.UNKNOWN,this.directTransition(t)},l.prototype.cancel=function(){if(this.onGoingTransactionNewState===Qt.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Qt.UNKNOWN},l.prototype.getState=function(){return this.state},l.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Qt.UNKNOWN)throw"Cannot transition to a new state, already under transition"},l.prototype.validateTransition=function(t){switch(this.state){case Qt.UNKNOWN:throw"Transition from unknown is not allowed";case Qt.NOT_STARTED:this.failIfNewStateIs(t,[Qt.PAUSED]);break;case Qt.SCANNING:break;case Qt.PAUSED:break}},l.prototype.failIfNewStateIs=function(t,i){for(var u=0,d=i;u<d.length;u++){var p=d[u];if(t===p)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},l})(),cx=(function(){function l(t){this.stateManager=t}return l.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},l.prototype.directTransition=function(t){this.stateManager.directTransition(t)},l.prototype.getState=function(){return this.stateManager.getState()},l.prototype.canScanFile=function(){return this.stateManager.getState()===Qt.NOT_STARTED},l.prototype.isScanning=function(){return this.stateManager.getState()!==Qt.NOT_STARTED},l.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Qt.SCANNING},l.prototype.isPaused=function(){return this.stateManager.getState()===Qt.PAUSED},l})(),ux=(function(){function l(){}return l.create=function(){return new cx(new ax)},l})(),fx=(function(){var l=function(t,i){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,d){u.__proto__=d}||function(u,d){for(var p in d)Object.prototype.hasOwnProperty.call(d,p)&&(u[p]=d[p])},l(t,i)};return function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");l(t,i);function u(){this.constructor=t}t.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}})(),xr=(function(l){fx(t,l);function t(){return l!==null&&l.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t})(zm),hx=(function(){function l(t,i){this.logger=i,this.fps=xr.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=xr.DEFAULT_DISABLE_FLIP}return l.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Vg.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},l.prototype.isShadedBoxEnabled=function(){return!pi(this.qrbox)},l.create=function(t,i){return new l(t,i)},l})(),dx=(function(){function l(t,i){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var u;typeof i=="boolean"?this.verbose=i===!0:i&&(u=i,this.verbose=u.verbose===!0,u.experimentalFeatures),this.logger=new jm(this.verbose),this.qrcode=new Qm(this.getSupportedFormats(i),this.getUseBarCodeDetectorIfSupported(u),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=ux.create()}return l.prototype.start=function(t,i,u,d){var p=this;if(!t)throw"cameraIdOrConfig is required";if(!u||typeof u!="function")throw"qrCodeSuccessCallback is required and should be a function.";var w;d?w=d:w=this.verbose?this.logger.log:function(){};var A=hx.create(i,this.logger);this.clearElement();var S=!1;A.videoConstraints&&(A.isMediaStreamConstraintsValid()?S=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var E=S,O=document.getElementById(this.elementId);O.clientWidth?O.clientWidth:xr.DEFAULT_WIDTH,O.style.position="relative",this.shouldScan=!0,this.element=O;var b=this,k=this.stateManagerProxy.startTransition(Qt.SCANNING);return new Promise(function(V,J){var $=E?A.videoConstraints:b.createVideoConstraints(t);if(!$){k.cancel(),J("videoConstraints should be defined");return}var xe={};(!E||A.aspectRatio)&&(xe.aspectRatio=A.aspectRatio);var Ee={onRenderSurfaceReady:function(pe,te){b.setupUi(pe,te,A),b.isScanning=!0,b.foreverScan(A,u,w)}};ix.failIfNotSupported().then(function(pe){pe.create($).then(function(te){return te.render(p.element,xe,Ee).then(function(oe){b.renderedCamera=oe,k.execute(),V(null)}).catch(function(oe){k.cancel(),J(oe)})}).catch(function(te){k.cancel(),J(_o.errorGettingUserMedia(te))})}).catch(function(pe){k.cancel(),J(_o.cameraStreamingNotSupported())})})},l.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Qt.PAUSED),this.showPausedState(),(pi(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},l.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,i=function(){t.stateManagerProxy.directTransition(Qt.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){i();return}this.renderedCamera.resume(function(){i()})},l.prototype.getState=function(){return this.stateManagerProxy.getState()},l.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var i=this.stateManagerProxy.startTransition(Qt.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var u=function(){if(t.element){var p=document.getElementById(xr.SHADED_REGION_ELEMENT_ID);p&&t.element.removeChild(p)}},d=this;return this.renderedCamera.close().then(function(){return d.renderedCamera=null,d.element&&(d.element.removeChild(d.canvasElement),d.canvasElement=null),u(),d.qrRegion&&(d.qrRegion=null),d.context&&(d.context=null),i.execute(),d.hidePausedState(),d.isScanning=!1,Promise.resolve()})},l.prototype.scanFile=function(t,i){return this.scanFileV2(t,i).then(function(u){return u.decodedText})},l.prototype.scanFileV2=function(t,i){var u=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(pi(i)&&(i=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(d,p){u.possiblyCloseLastScanImageFile(),u.clearElement(),u.lastScanImageFile=URL.createObjectURL(t);var w=new Image;w.onload=function(){var A=w.width,S=w.height,E=document.getElementById(u.elementId),O=E.clientWidth?E.clientWidth:xr.DEFAULT_WIDTH,b=Math.max(E.clientHeight?E.clientHeight:S,xr.FILE_SCAN_MIN_HEIGHT),k=u.computeCanvasDrawConfig(A,S,O,b);if(i){var V=u.createCanvasElement(O,b,"qr-canvas-visible");V.style.display="inline-block",E.appendChild(V);var J=V.getContext("2d");if(!J)throw"Unable to get 2d context from canvas";J.canvas.width=O,J.canvas.height=b,J.drawImage(w,0,0,A,S,k.x,k.y,k.width,k.height)}var $=xr.FILE_SCAN_HIDDEN_CANVAS_PADDING,xe=Math.max(w.width,k.width),Ee=Math.max(w.height,k.height),pe=xe+2*$,te=Ee+2*$,oe=u.createCanvasElement(pe,te);E.appendChild(oe);var Qe=oe.getContext("2d");if(!Qe)throw"Unable to get 2d context from canvas";Qe.canvas.width=pe,Qe.canvas.height=te,Qe.drawImage(w,0,0,A,S,$,$,xe,Ee);try{u.qrcode.decodeRobustlyAsync(oe).then(function(ie){d(O0.createFromQrcodeResult(ie))}).catch(p)}catch(ie){p("QR code parse error, error = ".concat(ie))}},w.onerror=p,w.onabort=p,w.onstalled=p,w.onsuspend=p,w.src=URL.createObjectURL(t)})},l.prototype.clear=function(){this.clearElement()},l.getCameras=function(){return lx.retrieve()},l.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},l.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},l.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},l.prototype.applyVideoConstraints=function(t){if(t){if(!Vg.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},l.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},l.prototype.getSupportedFormats=function(t){var i=[be.QR_CODE,be.AZTEC,be.CODABAR,be.CODE_39,be.CODE_93,be.CODE_128,be.DATA_MATRIX,be.MAXICODE,be.ITF,be.EAN_13,be.EAN_8,be.PDF_417,be.RSS_14,be.RSS_EXPANDED,be.UPC_A,be.UPC_E,be.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return i;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var u=[],d=0,p=t.formatsToSupport;d<p.length;d++){var w=p[d];Wm(w)?u.push(w):this.logger.warn("Invalid format: ".concat(w," passed in config, ignoring."))}if(u.length===0)throw"None of formatsToSupport match supported values.";return u},l.prototype.getUseBarCodeDetectorIfSupported=function(t){if(pi(t))return!0;if(!pi(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(pi(t.experimentalFeatures))return!0;var i=t.experimentalFeatures;return pi(i.useBarCodeDetectorIfSupported)?!0:i.useBarCodeDetectorIfSupported!==!1},l.prototype.validateQrboxSize=function(t,i,u){var d=this,p=u.qrbox;this.validateQrboxConfig(p);var w=this.toQrdimensions(t,i,p),A=function(E){if(E<xr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(xr.MIN_QR_BOX_SIZE,"px.")},S=function(E){return E>t&&(d.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),E=t),E};A(w.width),A(w.height),w.width=S(w.width)},l.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},l.prototype.toQrdimensions=function(t,i,u){if(typeof u=="number")return{width:u,height:u};if(typeof u=="function")try{return u(t,i)}catch(d){throw new Error("qrbox config was passed as a function but it failed with unknown error"+d)}return u},l.prototype.setupUi=function(t,i,u){u.isShadedBoxEnabled()&&this.validateQrboxSize(t,i,u);var d=pi(u.qrbox)?{width:t,height:i}:u.qrbox;this.validateQrboxConfig(d);var p=this.toQrdimensions(t,i,d);p.height>i&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var w=u.isShadedBoxEnabled()&&p.height<=i,A={x:0,y:0,width:t,height:i},S=w?this.getShadedRegionBounds(t,i,p):A,E=this.createCanvasElement(S.width,S.height),O={willReadFrequently:!0},b=E.getContext("2d",O);b.canvas.width=S.width,b.canvas.height=S.height,this.element.append(E),w&&this.possiblyInsertShadingElement(this.element,t,i,p),this.createScannerPausedUiElement(this.element),this.qrRegion=S,this.context=b,this.canvasElement=E},l.prototype.createScannerPausedUiElement=function(t){var i=document.createElement("div");i.innerText=_o.scannerPaused(),i.style.display="none",i.style.position="absolute",i.style.top="0px",i.style.zIndex="1",i.style.background="rgba(9, 9, 9, 0.46)",i.style.color="#FFECEC",i.style.textAlign="center",i.style.width="100%",t.appendChild(i),this.scannerPausedUiElement=i},l.prototype.scanContext=function(t,i){var u=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(d){return t(d.text,O0.createFromQrcodeResult(d)),u.possiblyUpdateShaders(!0),!0}).catch(function(d){u.possiblyUpdateShaders(!1);var p=_o.codeParseError(d);return i(p,Gm.createFrom(p)),!1})},l.prototype.foreverScan=function(t,i,u){var d=this;if(this.shouldScan&&this.renderedCamera){var p=this.renderedCamera.getSurface(),w=p.videoWidth/p.clientWidth,A=p.videoHeight/p.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var S=this.qrRegion.width*w,E=this.qrRegion.height*A,O=this.qrRegion.x*w,b=this.qrRegion.y*A;this.context.drawImage(p,O,b,S,E,0,0,this.qrRegion.width,this.qrRegion.height);var k=function(){d.foreverScanTimeout=setTimeout(function(){d.foreverScan(t,i,u)},d.getTimeoutFps(t.fps))};this.scanContext(i,u).then(function(V){!V&&t.disableFlip!==!0?(d.context.translate(d.context.canvas.width,0),d.context.scale(-1,1),d.scanContext(i,u).finally(function(){k()})):k()}).catch(function(V){d.logger.logError("Error happend while scanning context",V),k()})}},l.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var i="facingMode",u="deviceId",d={user:!0,environment:!0},p="exact",w=function(J){if(J in d)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(J,"'")},A=Object.keys(t);if(A.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(A.length," keys");var S=Object.keys(t)[0];if(S!==i&&S!==u)throw"Only '".concat(i,"' and '").concat(u,"' ")+" are supported for 'cameraIdOrConfig'";if(S===i){var E=t.facingMode;if(typeof E=="string"){if(w(E))return{facingMode:E}}else if(typeof E=="object")if(p in E){if(w(E["".concat(p)]))return{facingMode:{exact:E["".concat(p)]}}}else throw"'facingMode' should be string or object with"+" ".concat(p," as key.");else{var O=typeof E;throw"Invalid type of 'facingMode' = ".concat(O)}}else{var b=t.deviceId;if(typeof b=="string")return{deviceId:b};if(typeof b=="object"){if(p in b)return{deviceId:{exact:b["".concat(p)]}};throw"'deviceId' should be string or object with"+" ".concat(p," as key.")}else{var k=typeof b;throw"Invalid type of 'deviceId' = ".concat(k)}}}var V=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(V)},l.prototype.computeCanvasDrawConfig=function(t,i,u,d){if(t<=u&&i<=d){var p=(u-t)/2,w=(d-i)/2;return{x:p,y:w,width:t,height:i}}else{var A=t,S=i;return t>u&&(i=u/t*i,t=u),i>d&&(t=d/i*t,i=d),this.logger.log("Image downsampled from "+"".concat(A,"X").concat(S)+" to ".concat(t,"X").concat(i,".")),this.computeCanvasDrawConfig(t,i,u,d)}},l.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},l.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(i){i.style.backgroundColor=t?xr.BORDER_SHADER_MATCH_COLOR:xr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},l.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},l.prototype.createCanvasElement=function(t,i,u){var d=t,p=i,w=document.createElement("canvas");return w.style.width="".concat(d,"px"),w.style.height="".concat(p,"px"),w.style.display="none",w.id=pi(u)?"qr-canvas":u,w},l.prototype.getShadedRegionBounds=function(t,i,u){if(u.width>t||u.height>i)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-u.width)/2,y:(i-u.height)/2,width:u.width,height:u.height}},l.prototype.possiblyInsertShadingElement=function(t,i,u,d){if(!(i-d.width<1||u-d.height<1)){var p=document.createElement("div");p.style.position="absolute";var w=(i-d.width)/2,A=(u-d.height)/2;if(p.style.borderLeft="".concat(w,"px solid rgba(0, 0, 0, 0.48)"),p.style.borderRight="".concat(w,"px solid rgba(0, 0, 0, 0.48)"),p.style.borderTop="".concat(A,"px solid rgba(0, 0, 0, 0.48)"),p.style.borderBottom="".concat(A,"px solid rgba(0, 0, 0, 0.48)"),p.style.boxSizing="border-box",p.style.top="0px",p.style.bottom="0px",p.style.left="0px",p.style.right="0px",p.id="".concat(xr.SHADED_REGION_ELEMENT_ID),i-d.width<11||u-d.height<11)this.hasBorderShaders=!1;else{var S=5,E=40;this.insertShaderBorders(p,E,S,-S,null,0,!0),this.insertShaderBorders(p,E,S,-S,null,0,!1),this.insertShaderBorders(p,E,S,null,-S,0,!0),this.insertShaderBorders(p,E,S,null,-S,0,!1),this.insertShaderBorders(p,S,E+S,-S,null,-S,!0),this.insertShaderBorders(p,S,E+S,null,-S,-S,!0),this.insertShaderBorders(p,S,E+S,-S,null,-S,!1),this.insertShaderBorders(p,S,E+S,null,-S,-S,!1),this.hasBorderShaders=!0}t.append(p)}},l.prototype.insertShaderBorders=function(t,i,u,d,p,w,A){var S=document.createElement("div");S.style.position="absolute",S.style.backgroundColor=xr.BORDER_SHADER_DEFAULT_COLOR,S.style.width="".concat(i,"px"),S.style.height="".concat(u,"px"),d!==null&&(S.style.top="".concat(d,"px")),p!==null&&(S.style.bottom="".concat(p,"px")),A?S.style.left="".concat(w,"px"):S.style.right="".concat(w,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(S),t.appendChild(S)},l.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},l.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},l.prototype.getTimeoutFps=function(t){return 1e3/t},l})(),U0;(function(l){l[l.STATUS_DEFAULT=0]="STATUS_DEFAULT",l[l.STATUS_SUCCESS=1]="STATUS_SUCCESS",l[l.STATUS_WARNING=2]="STATUS_WARNING",l[l.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(U0||(U0={}));const gx=()=>{};var V0={};const Wg={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};const _e=function(l,t){if(!l)throw Ro(t)},Ro=function(l){return new Error("Firebase Database ("+Wg.SDK_VERSION+") INTERNAL ASSERT FAILED: "+l)};const zg=function(l){const t=[];let i=0;for(let u=0;u<l.length;u++){let d=l.charCodeAt(u);d<128?t[i++]=d:d<2048?(t[i++]=d>>6|192,t[i++]=d&63|128):(d&64512)===55296&&u+1<l.length&&(l.charCodeAt(u+1)&64512)===56320?(d=65536+((d&1023)<<10)+(l.charCodeAt(++u)&1023),t[i++]=d>>18|240,t[i++]=d>>12&63|128,t[i++]=d>>6&63|128,t[i++]=d&63|128):(t[i++]=d>>12|224,t[i++]=d>>6&63|128,t[i++]=d&63|128)}return t},px=function(l){const t=[];let i=0,u=0;for(;i<l.length;){const d=l[i++];if(d<128)t[u++]=String.fromCharCode(d);else if(d>191&&d<224){const p=l[i++];t[u++]=String.fromCharCode((d&31)<<6|p&63)}else if(d>239&&d<365){const p=l[i++],w=l[i++],A=l[i++],S=((d&7)<<18|(p&63)<<12|(w&63)<<6|A&63)-65536;t[u++]=String.fromCharCode(55296+(S>>10)),t[u++]=String.fromCharCode(56320+(S&1023))}else{const p=l[i++],w=l[i++];t[u++]=String.fromCharCode((d&15)<<12|(p&63)<<6|w&63)}}return t.join("")},mh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(l,t){if(!Array.isArray(l))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,u=[];for(let d=0;d<l.length;d+=3){const p=l[d],w=d+1<l.length,A=w?l[d+1]:0,S=d+2<l.length,E=S?l[d+2]:0,O=p>>2,b=(p&3)<<4|A>>4;let k=(A&15)<<2|E>>6,V=E&63;S||(V=64,w||(k=64)),u.push(i[O],i[b],i[k],i[V])}return u.join("")},encodeString(l,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(l):this.encodeByteArray(zg(l),t)},decodeString(l,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(l):px(this.decodeStringToByteArray(l,t))},decodeStringToByteArray(l,t){this.init_();const i=t?this.charToByteMapWebSafe_:this.charToByteMap_,u=[];for(let d=0;d<l.length;){const p=i[l.charAt(d++)],A=d<l.length?i[l.charAt(d)]:0;++d;const E=d<l.length?i[l.charAt(d)]:64;++d;const b=d<l.length?i[l.charAt(d)]:64;if(++d,p==null||A==null||E==null||b==null)throw new mx;const k=p<<2|A>>4;if(u.push(k),E!==64){const V=A<<4&240|E>>2;if(u.push(V),b!==64){const J=E<<6&192|b;u.push(J)}}}return u},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let l=0;l<this.ENCODED_VALS.length;l++)this.byteToCharMap_[l]=this.ENCODED_VALS.charAt(l),this.charToByteMap_[this.byteToCharMap_[l]]=l,this.byteToCharMapWebSafe_[l]=this.ENCODED_VALS_WEBSAFE.charAt(l),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[l]]=l,l>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(l)]=l,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(l)]=l)}}};class mx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Gg=function(l){const t=zg(l);return mh.encodeByteArray(t,!0)},uc=function(l){return Gg(l).replace(/\./g,"")},Kf=function(l){try{return mh.decodeString(l,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function xx(l){return jg(void 0,l)}function jg(l,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const i=t;return new Date(i.getTime());case Object:l===void 0&&(l={});break;case Array:l=[];break;default:return t}for(const i in t)!t.hasOwnProperty(i)||!wx(i)||(l[i]=jg(l[i],t[i]));return l}function wx(l){return l!=="__proto__"}function _x(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const yx=()=>_x().__FIREBASE_DEFAULTS__,Cx=()=>{if(typeof process>"u"||typeof V0>"u")return;const l=V0.__FIREBASE_DEFAULTS__;if(l)return JSON.parse(l)},Ex=()=>{if(typeof document>"u")return;let l;try{l=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=l&&Kf(l[1]);return t&&JSON.parse(t)},Xg=()=>{try{return gx()||yx()||Cx()||Ex()}catch(l){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${l}`);return}},Ax=l=>Xg()?.emulatorHosts?.[l],vx=l=>{const t=Ax(l);if(!t)return;const i=t.lastIndexOf(":");if(i<=0||i+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const u=parseInt(t.substring(i+1),10);return t[0]==="["?[t.substring(1,i-1),u]:[t.substring(0,i),u]},Yg=()=>Xg()?.config;class Nc{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}wrapCallback(t){return(i,u)=>{i?this.reject(i):this.resolve(u),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(i):t(i,u))}}}function xh(l){try{return(l.startsWith("http://")||l.startsWith("https://")?new URL(l).hostname:l).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Sx(l){return(await fetch(l,{credentials:"include"})).ok}function Ix(l,t){if(l.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},u=t||"demo-project",d=l.iat||0,p=l.sub||l.user_id;if(!p)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const w={iss:`https://securetoken.google.com/${u}`,aud:u,iat:d,exp:d+3600,auth_time:d,sub:p,user_id:p,firebase:{sign_in_provider:"custom",identities:{}},...l};return[uc(JSON.stringify(i)),uc(JSON.stringify(w)),""].join(".")}const Tl={};function Tx(){const l={prod:[],emulator:[]};for(const t of Object.keys(Tl))Tl[t]?l.emulator.push(t):l.prod.push(t);return l}function Nx(l){let t=document.getElementById(l),i=!1;return t||(t=document.createElement("div"),t.setAttribute("id",l),i=!0),{created:i,element:t}}let H0=!1;function Rx(l,t){if(typeof window>"u"||typeof document>"u"||!xh(window.location.host)||Tl[l]===t||Tl[l]||H0)return;Tl[l]=t;function i(k){return`__firebase__banner__${k}`}const u="__firebase__banner",p=Tx().prod.length>0;function w(){const k=document.getElementById(u);k&&k.remove()}function A(k){k.style.display="flex",k.style.background="#7faaf0",k.style.position="fixed",k.style.bottom="5px",k.style.left="5px",k.style.padding=".5em",k.style.borderRadius="5px",k.style.alignItems="center"}function S(k,V){k.setAttribute("width","24"),k.setAttribute("id",V),k.setAttribute("height","24"),k.setAttribute("viewBox","0 0 24 24"),k.setAttribute("fill","none"),k.style.marginLeft="-6px"}function E(){const k=document.createElement("span");return k.style.cursor="pointer",k.style.marginLeft="16px",k.style.fontSize="24px",k.innerHTML=" &times;",k.onclick=()=>{H0=!0,w()},k}function O(k,V){k.setAttribute("id",V),k.innerText="Learn more",k.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",k.setAttribute("target","__blank"),k.style.paddingLeft="5px",k.style.textDecoration="underline"}function b(){const k=Nx(u),V=i("text"),J=document.getElementById(V)||document.createElement("span"),$=i("learnmore"),xe=document.getElementById($)||document.createElement("a"),Ee=i("preprendIcon"),pe=document.getElementById(Ee)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(k.created){const te=k.element;A(te),O(xe,$);const oe=E();S(pe,Ee),te.append(pe,J,xe,oe),document.body.appendChild(te)}p?(J.innerText="Preview backend disconnected.",pe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(pe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,J.innerText="Preview backend running in this workspace."),J.setAttribute("id",V)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}function bx(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Kg(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(bx())}function Ox(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Dx(){return Wg.NODE_ADMIN===!0}function Mx(){try{return typeof indexedDB=="object"}catch{return!1}}function kx(){return new Promise((l,t)=>{try{let i=!0;const u="validate-browser-context-for-indexeddb-analytics-module",d=self.indexedDB.open(u);d.onsuccess=()=>{d.result.close(),i||self.indexedDB.deleteDatabase(u),l(!0)},d.onupgradeneeded=()=>{i=!1},d.onerror=()=>{t(d.error?.message||"")}}catch(i){t(i)}})}const Px="FirebaseError";class Wl extends Error{constructor(t,i,u){super(i),this.code=t,this.customData=u,this.name=Px,Object.setPrototypeOf(this,Wl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qg.prototype.create)}}class qg{constructor(t,i,u){this.service=t,this.serviceName=i,this.errors=u}create(t,...i){const u=i[0]||{},d=`${this.service}/${t}`,p=this.errors[t],w=p?Lx(p,u):"Error",A=`${this.serviceName}: ${w} (${d}).`;return new Wl(d,A,u)}}function Lx(l,t){return l.replace(Bx,(i,u)=>{const d=t[u];return d!=null?String(d):`<${u}?>`})}const Bx=/\{\$([^}]+)}/g;function Ml(l){return JSON.parse(l)}function Sn(l){return JSON.stringify(l)}const Zg=function(l){let t={},i={},u={},d="";try{const p=l.split(".");t=Ml(Kf(p[0])||""),i=Ml(Kf(p[1])||""),d=p[2],u=i.d||{},delete i.d}catch{}return{header:t,claims:i,data:u,signature:d}},Fx=function(l){const t=Zg(l),i=t.claims;return!!i&&typeof i=="object"&&i.hasOwnProperty("iat")},Ux=function(l){const t=Zg(l).claims;return typeof t=="object"&&t.admin===!0};function Ci(l,t){return Object.prototype.hasOwnProperty.call(l,t)}function So(l,t){if(Object.prototype.hasOwnProperty.call(l,t))return l[t]}function W0(l){for(const t in l)if(Object.prototype.hasOwnProperty.call(l,t))return!1;return!0}function fc(l,t,i){const u={};for(const d in l)Object.prototype.hasOwnProperty.call(l,d)&&(u[d]=t.call(i,l[d],d,l));return u}function hc(l,t){if(l===t)return!0;const i=Object.keys(l),u=Object.keys(t);for(const d of i){if(!u.includes(d))return!1;const p=l[d],w=t[d];if(z0(p)&&z0(w)){if(!hc(p,w))return!1}else if(p!==w)return!1}for(const d of u)if(!i.includes(d))return!1;return!0}function z0(l){return l!==null&&typeof l=="object"}function Vx(l){const t=[];for(const[i,u]of Object.entries(l))Array.isArray(u)?u.forEach(d=>{t.push(encodeURIComponent(i)+"="+encodeURIComponent(d))}):t.push(encodeURIComponent(i)+"="+encodeURIComponent(u));return t.length?"&"+t.join("&"):""}class Hx{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,i){i||(i=0);const u=this.W_;if(typeof t=="string")for(let b=0;b<16;b++)u[b]=t.charCodeAt(i)<<24|t.charCodeAt(i+1)<<16|t.charCodeAt(i+2)<<8|t.charCodeAt(i+3),i+=4;else for(let b=0;b<16;b++)u[b]=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3],i+=4;for(let b=16;b<80;b++){const k=u[b-3]^u[b-8]^u[b-14]^u[b-16];u[b]=(k<<1|k>>>31)&4294967295}let d=this.chain_[0],p=this.chain_[1],w=this.chain_[2],A=this.chain_[3],S=this.chain_[4],E,O;for(let b=0;b<80;b++){b<40?b<20?(E=A^p&(w^A),O=1518500249):(E=p^w^A,O=1859775393):b<60?(E=p&w|A&(p|w),O=2400959708):(E=p^w^A,O=3395469782);const k=(d<<5|d>>>27)+E+S+O+u[b]&4294967295;S=A,A=w,w=(p<<30|p>>>2)&4294967295,p=d,d=k}this.chain_[0]=this.chain_[0]+d&4294967295,this.chain_[1]=this.chain_[1]+p&4294967295,this.chain_[2]=this.chain_[2]+w&4294967295,this.chain_[3]=this.chain_[3]+A&4294967295,this.chain_[4]=this.chain_[4]+S&4294967295}update(t,i){if(t==null)return;i===void 0&&(i=t.length);const u=i-this.blockSize;let d=0;const p=this.buf_;let w=this.inbuf_;for(;d<i;){if(w===0)for(;d<=u;)this.compress_(t,d),d+=this.blockSize;if(typeof t=="string"){for(;d<i;)if(p[w]=t.charCodeAt(d),++w,++d,w===this.blockSize){this.compress_(p),w=0;break}}else for(;d<i;)if(p[w]=t[d],++w,++d,w===this.blockSize){this.compress_(p),w=0;break}}this.inbuf_=w,this.total_+=i}digest(){const t=[];let i=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let d=this.blockSize-1;d>=56;d--)this.buf_[d]=i&255,i/=256;this.compress_(this.buf_);let u=0;for(let d=0;d<5;d++)for(let p=24;p>=0;p-=8)t[u]=this.chain_[d]>>p&255,++u;return t}}function wh(l,t){return`${l} failed: ${t} argument `}const Wx=function(l){const t=[];let i=0;for(let u=0;u<l.length;u++){let d=l.charCodeAt(u);if(d>=55296&&d<=56319){const p=d-55296;u++,_e(u<l.length,"Surrogate pair missing trail surrogate.");const w=l.charCodeAt(u)-56320;d=65536+(p<<10)+w}d<128?t[i++]=d:d<2048?(t[i++]=d>>6|192,t[i++]=d&63|128):d<65536?(t[i++]=d>>12|224,t[i++]=d>>6&63|128,t[i++]=d&63|128):(t[i++]=d>>18|240,t[i++]=d>>12&63|128,t[i++]=d>>6&63|128,t[i++]=d&63|128)}return t},Rc=function(l){let t=0;for(let i=0;i<l.length;i++){const u=l.charCodeAt(i);u<128?t++:u<2048?t+=2:u>=55296&&u<=56319?(t+=4,i++):t+=3}return t};function zl(l){return l&&l._delegate?l._delegate:l}class kl{constructor(t,i,u){this.name=t,this.instanceFactory=i,this.type=u,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const Rs="[DEFAULT]";class zx{constructor(t,i){this.name=t,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const i=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(i)){const u=new Nc;if(this.instancesDeferred.set(i,u),this.isInitialized(i)||this.shouldAutoInitialize())try{const d=this.getOrInitializeService({instanceIdentifier:i});d&&u.resolve(d)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(t){const i=this.normalizeInstanceIdentifier(t?.identifier),u=t?.optional??!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(d){if(u)return null;throw d}else{if(u)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(jx(t))try{this.getOrInitializeService({instanceIdentifier:Rs})}catch{}for(const[i,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(i);try{const p=this.getOrInitializeService({instanceIdentifier:d});u.resolve(p)}catch{}}}}clearInstance(t=Rs){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Rs){return this.instances.has(t)}getOptions(t=Rs){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:i={}}=t,u=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(u))throw Error(`${this.name}(${u}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const d=this.getOrInitializeService({instanceIdentifier:u,options:i});for(const[p,w]of this.instancesDeferred.entries()){const A=this.normalizeInstanceIdentifier(p);u===A&&w.resolve(d)}return d}onInit(t,i){const u=this.normalizeInstanceIdentifier(i),d=this.onInitCallbacks.get(u)??new Set;d.add(t),this.onInitCallbacks.set(u,d);const p=this.instances.get(u);return p&&t(p,u),()=>{d.delete(t)}}invokeOnInitCallbacks(t,i){const u=this.onInitCallbacks.get(i);if(u)for(const d of u)try{d(t,i)}catch{}}getOrInitializeService({instanceIdentifier:t,options:i={}}){let u=this.instances.get(t);if(!u&&this.component&&(u=this.component.instanceFactory(this.container,{instanceIdentifier:Gx(t),options:i}),this.instances.set(t,u),this.instancesOptions.set(t,i),this.invokeOnInitCallbacks(u,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,u)}catch{}return u||null}normalizeInstanceIdentifier(t=Rs){return this.component?this.component.multipleInstances?t:Rs:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Gx(l){return l===Rs?void 0:l}function jx(l){return l.instantiationMode==="EAGER"}class Xx{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const i=this.getProvider(t.name);if(i.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);i.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const i=new zx(t,this);return this.providers.set(t,i),i}getProviders(){return Array.from(this.providers.values())}}var Pt;(function(l){l[l.DEBUG=0]="DEBUG",l[l.VERBOSE=1]="VERBOSE",l[l.INFO=2]="INFO",l[l.WARN=3]="WARN",l[l.ERROR=4]="ERROR",l[l.SILENT=5]="SILENT"})(Pt||(Pt={}));const Yx={debug:Pt.DEBUG,verbose:Pt.VERBOSE,info:Pt.INFO,warn:Pt.WARN,error:Pt.ERROR,silent:Pt.SILENT},Kx=Pt.INFO,qx={[Pt.DEBUG]:"log",[Pt.VERBOSE]:"log",[Pt.INFO]:"info",[Pt.WARN]:"warn",[Pt.ERROR]:"error"},Zx=(l,t,...i)=>{if(t<l.logLevel)return;const u=new Date().toISOString(),d=qx[t];if(d)console[d](`[${u}]  ${l.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Qg{constructor(t){this.name=t,this._logLevel=Kx,this._logHandler=Zx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Pt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Yx[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Pt.DEBUG,...t),this._logHandler(this,Pt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Pt.VERBOSE,...t),this._logHandler(this,Pt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Pt.INFO,...t),this._logHandler(this,Pt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Pt.WARN,...t),this._logHandler(this,Pt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Pt.ERROR,...t),this._logHandler(this,Pt.ERROR,...t)}}const Qx=(l,t)=>t.some(i=>l instanceof i);let G0,j0;function Jx(){return G0||(G0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $x(){return j0||(j0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Jg=new WeakMap,qf=new WeakMap,$g=new WeakMap,kf=new WeakMap,_h=new WeakMap;function ew(l){const t=new Promise((i,u)=>{const d=()=>{l.removeEventListener("success",p),l.removeEventListener("error",w)},p=()=>{i(Qi(l.result)),d()},w=()=>{u(l.error),d()};l.addEventListener("success",p),l.addEventListener("error",w)});return t.then(i=>{i instanceof IDBCursor&&Jg.set(i,l)}).catch(()=>{}),_h.set(t,l),t}function tw(l){if(qf.has(l))return;const t=new Promise((i,u)=>{const d=()=>{l.removeEventListener("complete",p),l.removeEventListener("error",w),l.removeEventListener("abort",w)},p=()=>{i(),d()},w=()=>{u(l.error||new DOMException("AbortError","AbortError")),d()};l.addEventListener("complete",p),l.addEventListener("error",w),l.addEventListener("abort",w)});qf.set(l,t)}let Zf={get(l,t,i){if(l instanceof IDBTransaction){if(t==="done")return qf.get(l);if(t==="objectStoreNames")return l.objectStoreNames||$g.get(l);if(t==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return Qi(l[t])},set(l,t,i){return l[t]=i,!0},has(l,t){return l instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in l}};function nw(l){Zf=l(Zf)}function rw(l){return l===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...i){const u=l.call(Pf(this),t,...i);return $g.set(u,t.sort?t.sort():[t]),Qi(u)}:$x().includes(l)?function(...t){return l.apply(Pf(this),t),Qi(Jg.get(this))}:function(...t){return Qi(l.apply(Pf(this),t))}}function iw(l){return typeof l=="function"?rw(l):(l instanceof IDBTransaction&&tw(l),Qx(l,Jx())?new Proxy(l,Zf):l)}function Qi(l){if(l instanceof IDBRequest)return ew(l);if(kf.has(l))return kf.get(l);const t=iw(l);return t!==l&&(kf.set(l,t),_h.set(t,l)),t}const Pf=l=>_h.get(l);function sw(l,t,{blocked:i,upgrade:u,blocking:d,terminated:p}={}){const w=indexedDB.open(l,t),A=Qi(w);return u&&w.addEventListener("upgradeneeded",S=>{u(Qi(w.result),S.oldVersion,S.newVersion,Qi(w.transaction),S)}),i&&w.addEventListener("blocked",S=>i(S.oldVersion,S.newVersion,S)),A.then(S=>{p&&S.addEventListener("close",()=>p()),d&&S.addEventListener("versionchange",E=>d(E.oldVersion,E.newVersion,E))}).catch(()=>{}),A}const ow=["get","getKey","getAll","getAllKeys","count"],lw=["put","add","delete","clear"],Lf=new Map;function X0(l,t){if(!(l instanceof IDBDatabase&&!(t in l)&&typeof t=="string"))return;if(Lf.get(t))return Lf.get(t);const i=t.replace(/FromIndex$/,""),u=t!==i,d=lw.includes(i);if(!(i in(u?IDBIndex:IDBObjectStore).prototype)||!(d||ow.includes(i)))return;const p=async function(w,...A){const S=this.transaction(w,d?"readwrite":"readonly");let E=S.store;return u&&(E=E.index(A.shift())),(await Promise.all([E[i](...A),d&&S.done]))[0]};return Lf.set(t,p),p}nw(l=>({...l,get:(t,i,u)=>X0(t,i)||l.get(t,i,u),has:(t,i)=>!!X0(t,i)||l.has(t,i)}));class aw{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(cw(i)){const u=i.getImmediate();return`${u.library}/${u.version}`}else return null}).filter(i=>i).join(" ")}}function cw(l){return l.getComponent()?.type==="VERSION"}const Qf="@firebase/app",Y0="0.14.8";const wi=new Qg("@firebase/app"),uw="@firebase/app-compat",fw="@firebase/analytics-compat",hw="@firebase/analytics",dw="@firebase/app-check-compat",gw="@firebase/app-check",pw="@firebase/auth",mw="@firebase/auth-compat",xw="@firebase/database",ww="@firebase/data-connect",_w="@firebase/database-compat",yw="@firebase/functions",Cw="@firebase/functions-compat",Ew="@firebase/installations",Aw="@firebase/installations-compat",vw="@firebase/messaging",Sw="@firebase/messaging-compat",Iw="@firebase/performance",Tw="@firebase/performance-compat",Nw="@firebase/remote-config",Rw="@firebase/remote-config-compat",bw="@firebase/storage",Ow="@firebase/storage-compat",Dw="@firebase/firestore",Mw="@firebase/ai",kw="@firebase/firestore-compat",Pw="firebase",Lw="12.9.0";const Jf="[DEFAULT]",Bw={[Qf]:"fire-core",[uw]:"fire-core-compat",[hw]:"fire-analytics",[fw]:"fire-analytics-compat",[gw]:"fire-app-check",[dw]:"fire-app-check-compat",[pw]:"fire-auth",[mw]:"fire-auth-compat",[xw]:"fire-rtdb",[ww]:"fire-data-connect",[_w]:"fire-rtdb-compat",[yw]:"fire-fn",[Cw]:"fire-fn-compat",[Ew]:"fire-iid",[Aw]:"fire-iid-compat",[vw]:"fire-fcm",[Sw]:"fire-fcm-compat",[Iw]:"fire-perf",[Tw]:"fire-perf-compat",[Nw]:"fire-rc",[Rw]:"fire-rc-compat",[bw]:"fire-gcs",[Ow]:"fire-gcs-compat",[Dw]:"fire-fst",[kw]:"fire-fst-compat",[Mw]:"fire-vertex","fire-js":"fire-js",[Pw]:"fire-js-all"};const dc=new Map,Fw=new Map,$f=new Map;function K0(l,t){try{l.container.addComponent(t)}catch(i){wi.debug(`Component ${t.name} failed to register with FirebaseApp ${l.name}`,i)}}function gc(l){const t=l.name;if($f.has(t))return wi.debug(`There were multiple attempts to register component ${t}.`),!1;$f.set(t,l);for(const i of dc.values())K0(i,l);for(const i of Fw.values())K0(i,l);return!0}function Uw(l,t){const i=l.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),l.container.getProvider(t)}function Vw(l){return l==null?!1:l.settings!==void 0}const Hw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ji=new qg("app","Firebase",Hw);class Ww{constructor(t,i,u){this._isDeleted=!1,this._options={...t},this._config={...i},this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=u,this.container.addComponent(new kl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ji.create("app-deleted",{appName:this._name})}}const zw=Lw;function ep(l,t={}){let i=l;typeof t!="object"&&(t={name:t});const u={name:Jf,automaticDataCollectionEnabled:!0,...t},d=u.name;if(typeof d!="string"||!d)throw Ji.create("bad-app-name",{appName:String(d)});if(i||(i=Yg()),!i)throw Ji.create("no-options");const p=dc.get(d);if(p){if(hc(i,p.options)&&hc(u,p.config))return p;throw Ji.create("duplicate-app",{appName:d})}const w=new Xx(d);for(const S of $f.values())w.addComponent(S);const A=new Ww(i,u,w);return dc.set(d,A),A}function Gw(l=Jf){const t=dc.get(l);if(!t&&l===Jf&&Yg())return ep();if(!t)throw Ji.create("no-app",{appName:l});return t}function Co(l,t,i){let u=Bw[l]??l;i&&(u+=`-${i}`);const d=u.match(/\s|\//),p=t.match(/\s|\//);if(d||p){const w=[`Unable to register library "${u}" with version "${t}":`];d&&w.push(`library name "${u}" contains illegal characters (whitespace or "/")`),d&&p&&w.push("and"),p&&w.push(`version name "${t}" contains illegal characters (whitespace or "/")`),wi.warn(w.join(" "));return}gc(new kl(`${u}-version`,()=>({library:u,version:t}),"VERSION"))}const jw="firebase-heartbeat-database",Xw=1,Pl="firebase-heartbeat-store";let Bf=null;function tp(){return Bf||(Bf=sw(jw,Xw,{upgrade:(l,t)=>{switch(t){case 0:try{l.createObjectStore(Pl)}catch(i){console.warn(i)}}}}).catch(l=>{throw Ji.create("idb-open",{originalErrorMessage:l.message})})),Bf}async function Yw(l){try{const i=(await tp()).transaction(Pl),u=await i.objectStore(Pl).get(np(l));return await i.done,u}catch(t){if(t instanceof Wl)wi.warn(t.message);else{const i=Ji.create("idb-get",{originalErrorMessage:t?.message});wi.warn(i.message)}}}async function q0(l,t){try{const u=(await tp()).transaction(Pl,"readwrite");await u.objectStore(Pl).put(t,np(l)),await u.done}catch(i){if(i instanceof Wl)wi.warn(i.message);else{const u=Ji.create("idb-set",{originalErrorMessage:i?.message});wi.warn(u.message)}}}function np(l){return`${l.name}!${l.options.appId}`}const Kw=1024,qw=30;class Zw{constructor(t){this.container=t,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new Jw(i),this._heartbeatsCachePromise=this._storage.read().then(u=>(this._heartbeatsCache=u,u))}async triggerHeartbeat(){try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=Z0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(d=>d.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:i}),this._heartbeatsCache.heartbeats.length>qw){const d=$w(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){wi.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Z0(),{heartbeatsToSend:i,unsentEntries:u}=Qw(this._heartbeatsCache.heartbeats),d=uc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,u.length>0?(this._heartbeatsCache.heartbeats=u,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),d}catch(t){return wi.warn(t),""}}}function Z0(){return new Date().toISOString().substring(0,10)}function Qw(l,t=Kw){const i=[];let u=l.slice();for(const d of l){const p=i.find(w=>w.agent===d.agent);if(p){if(p.dates.push(d.date),Q0(i)>t){p.dates.pop();break}}else if(i.push({agent:d.agent,dates:[d.date]}),Q0(i)>t){i.pop();break}u=u.slice(1)}return{heartbeatsToSend:i,unsentEntries:u}}class Jw{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Mx()?kx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await Yw(this.app);return i?.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const u=await this.read();return q0(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??u.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const u=await this.read();return q0(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??u.lastSentHeartbeatDate,heartbeats:[...u.heartbeats,...t.heartbeats]})}else return}}function Q0(l){return uc(JSON.stringify({version:2,heartbeats:l})).length}function $w(l){if(l.length===0)return-1;let t=0,i=l[0].date;for(let u=1;u<l.length;u++)l[u].date<i&&(i=l[u].date,t=u);return t}function e_(l){gc(new kl("platform-logger",t=>new aw(t),"PRIVATE")),gc(new kl("heartbeat",t=>new Zw(t),"PRIVATE")),Co(Qf,Y0,l),Co(Qf,Y0,"esm2020"),Co("fire-js","")}e_("");var t_="firebase",n_="12.9.0";Co(t_,n_,"app");var J0={};const $0="@firebase/database",eg="1.1.0";let rp="";function r_(l){rp=l}class i_{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,i){i==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Sn(i))}get(t){const i=this.domStorage_.getItem(this.prefixedName_(t));return i==null?null:Ml(i)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class s_{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,i){i==null?delete this.cache_[t]:this.cache_[t]=i}get(t){return Ci(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const ip=function(l){try{if(typeof window<"u"&&typeof window[l]<"u"){const t=window[l];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new i_(t)}}catch{}return new s_},Os=ip("localStorage"),o_=ip("sessionStorage");const Eo=new Qg("@firebase/database"),l_=(function(){let l=1;return function(){return l++}})(),sp=function(l){const t=Wx(l),i=new Hx;i.update(t);const u=i.digest();return mh.encodeByteArray(u)},Gl=function(...l){let t="";for(let i=0;i<l.length;i++){const u=l[i];Array.isArray(u)||u&&typeof u=="object"&&typeof u.length=="number"?t+=Gl.apply(null,u):typeof u=="object"?t+=Sn(u):t+=u,t+=" "}return t};let Nl=null,tg=!0;const a_=function(l,t){_e(!0,"Can't turn on custom loggers persistently."),Eo.logLevel=Pt.VERBOSE,Nl=Eo.log.bind(Eo)},Hn=function(...l){if(tg===!0&&(tg=!1,Nl===null&&o_.get("logging_enabled")===!0&&a_()),Nl){const t=Gl.apply(null,l);Nl(t)}},jl=function(l){return function(...t){Hn(l,...t)}},eh=function(...l){const t="FIREBASE INTERNAL ERROR: "+Gl(...l);Eo.error(t)},_i=function(...l){const t=`FIREBASE FATAL ERROR: ${Gl(...l)}`;throw Eo.error(t),new Error(t)},rr=function(...l){const t="FIREBASE WARNING: "+Gl(...l);Eo.warn(t)},c_=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&rr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},op=function(l){return typeof l=="number"&&(l!==l||l===Number.POSITIVE_INFINITY||l===Number.NEGATIVE_INFINITY)},u_=function(l){if(document.readyState==="complete")l();else{let t=!1;const i=function(){if(!document.body){setTimeout(i,Math.floor(10));return}t||(t=!0,l())};document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&i()}),window.attachEvent("onload",i))}},Io="[MIN_NAME]",Ms="[MAX_NAME]",bo=function(l,t){if(l===t)return 0;if(l===Io||t===Ms)return-1;if(t===Io||l===Ms)return 1;{const i=ng(l),u=ng(t);return i!==null?u!==null?i-u===0?l.length-t.length:i-u:-1:u!==null?1:l<t?-1:1}},f_=function(l,t){return l===t?0:l<t?-1:1},El=function(l,t){if(t&&l in t)return t[l];throw new Error("Missing required key ("+l+") in object: "+Sn(t))},yh=function(l){if(typeof l!="object"||l===null)return Sn(l);const t=[];for(const u in l)t.push(u);t.sort();let i="{";for(let u=0;u<t.length;u++)u!==0&&(i+=","),i+=Sn(t[u]),i+=":",i+=yh(l[t[u]]);return i+="}",i},lp=function(l,t){const i=l.length;if(i<=t)return[l];const u=[];for(let d=0;d<i;d+=t)d+t>i?u.push(l.substring(d,i)):u.push(l.substring(d,d+t));return u};function ir(l,t){for(const i in l)l.hasOwnProperty(i)&&t(i,l[i])}const ap=function(l){_e(!op(l),"Invalid JSON number");const t=11,i=52,u=(1<<t-1)-1;let d,p,w,A,S;l===0?(p=0,w=0,d=1/l===-1/0?1:0):(d=l<0,l=Math.abs(l),l>=Math.pow(2,1-u)?(A=Math.min(Math.floor(Math.log(l)/Math.LN2),u),p=A+u,w=Math.round(l*Math.pow(2,i-A)-Math.pow(2,i))):(p=0,w=Math.round(l/Math.pow(2,1-u-i))));const E=[];for(S=i;S;S-=1)E.push(w%2?1:0),w=Math.floor(w/2);for(S=t;S;S-=1)E.push(p%2?1:0),p=Math.floor(p/2);E.push(d?1:0),E.reverse();const O=E.join("");let b="";for(S=0;S<64;S+=8){let k=parseInt(O.substr(S,8),2).toString(16);k.length===1&&(k="0"+k),b=b+k}return b.toLowerCase()},h_=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},d_=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function g_(l,t){let i="Unknown Error";l==="too_big"?i="The data requested exceeds the maximum size that can be accessed with a single request.":l==="permission_denied"?i="Client doesn't have permission to access the desired data.":l==="unavailable"&&(i="The service is unavailable");const u=new Error(l+" at "+t._path.toString()+": "+i);return u.code=l.toUpperCase(),u}const p_=new RegExp("^-?(0*)\\d{1,10}$"),m_=-2147483648,x_=2147483647,ng=function(l){if(p_.test(l)){const t=Number(l);if(t>=m_&&t<=x_)return t}return null},Oo=function(l){try{l()}catch(t){setTimeout(()=>{const i=t.stack||"";throw rr("Exception was thrown by user callback.",i),t},Math.floor(0))}},w_=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Rl=function(l,t){const i=setTimeout(l,t);return typeof i=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(i):typeof i=="object"&&i.unref&&i.unref(),i};class __{constructor(t,i){this.appCheckProvider=i,this.appName=t.name,Vw(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.appCheck=i?.getImmediate({optional:!0}),this.appCheck||i?.get().then(u=>this.appCheck=u)}getToken(t){if(this.serverAppAppCheckToken){if(t)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(t):new Promise((i,u)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(i,u):i(null)},0)})}addTokenChangeListener(t){this.appCheckProvider?.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){rr(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}class y_{constructor(t,i,u){this.appName_=t,this.firebaseOptions_=i,this.authProvider_=u,this.auth_=null,this.auth_=u.getImmediate({optional:!0}),this.auth_||u.onInit(d=>this.auth_=d)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(i=>i&&i.code==="auth/token-not-initialized"?(Hn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(i)):new Promise((i,u)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(i,u):i(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(i=>i.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(i=>i.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',rr(t)}}class oc{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}oc.OWNER="owner";const Ch="5",cp="v",up="s",fp="r",hp="f",dp=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,gp="ls",pp="p",th="ac",mp="websocket",xp="long_polling";class wp{constructor(t,i,u,d,p=!1,w="",A=!1,S=!1,E=null){this.secure=i,this.namespace=u,this.webSocketOnly=d,this.nodeAdmin=p,this.persistenceKey=w,this.includeNamespaceInQueryParams=A,this.isUsingEmulator=S,this.emulatorOptions=E,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Os.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Os.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",i=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${i}`}}function C_(l){return l.host!==l.internalHost||l.isCustomHost()||l.includeNamespaceInQueryParams}function _p(l,t,i){_e(typeof t=="string","typeof type must == string"),_e(typeof i=="object","typeof params must == object");let u;if(t===mp)u=(l.secure?"wss://":"ws://")+l.internalHost+"/.ws?";else if(t===xp)u=(l.secure?"https://":"http://")+l.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);C_(l)&&(i.ns=l.namespace);const d=[];return ir(i,(p,w)=>{d.push(p+"="+w)}),u+d.join("&")}class E_{constructor(){this.counters_={}}incrementCounter(t,i=1){Ci(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=i}get(){return xx(this.counters_)}}const Ff={},Uf={};function Eh(l){const t=l.toString();return Ff[t]||(Ff[t]=new E_),Ff[t]}function A_(l,t){const i=l.toString();return Uf[i]||(Uf[i]=t()),Uf[i]}class v_{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,i){this.closeAfterResponse=t,this.onClose=i,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,i){for(this.pendingResponses[t]=i;this.pendingResponses[this.currentResponseNum];){const u=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let d=0;d<u.length;++d)u[d]&&Oo(()=>{this.onMessage_(u[d])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const rg="start",S_="close",I_="pLPCommand",T_="pRTLPCB",yp="id",Cp="pw",Ep="ser",N_="cb",R_="seg",b_="ts",O_="d",D_="dframe",Ap=1870,vp=30,M_=Ap-vp,k_=25e3,P_=3e4;class yo{constructor(t,i,u,d,p,w,A){this.connId=t,this.repoInfo=i,this.applicationId=u,this.appCheckToken=d,this.authToken=p,this.transportSessionId=w,this.lastSessionId=A,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=jl(t),this.stats_=Eh(i),this.urlFn=S=>(this.appCheckToken&&(S[th]=this.appCheckToken),_p(i,xp,S))}open(t,i){this.curSegmentNum=0,this.onDisconnect_=i,this.myPacketOrderer=new v_(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(P_)),u_(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ah((...p)=>{const[w,A,S,E,O]=p;if(this.incrementIncomingBytes_(p),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,w===rg)this.id=A,this.password=S;else if(w===S_)A?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(A,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+w)},(...p)=>{const[w,A]=p;this.incrementIncomingBytes_(p),this.myPacketOrderer.handleResponse(w,A)},()=>{this.onClosed_()},this.urlFn);const u={};u[rg]="t",u[Ep]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(u[N_]=this.scriptTagHolder.uniqueCallbackIdentifier),u[cp]=Ch,this.transportSessionId&&(u[up]=this.transportSessionId),this.lastSessionId&&(u[gp]=this.lastSessionId),this.applicationId&&(u[pp]=this.applicationId),this.appCheckToken&&(u[th]=this.appCheckToken),typeof location<"u"&&location.hostname&&dp.test(location.hostname)&&(u[fp]=hp);const d=this.urlFn(u);this.log_("Connecting via long-poll to "+d),this.scriptTagHolder.addTag(d,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){yo.forceAllow_=!0}static forceDisallow(){yo.forceDisallow_=!0}static isAvailable(){return yo.forceAllow_?!0:!yo.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!h_()&&!d_()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const i=Sn(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const u=Gg(i),d=lp(u,M_);for(let p=0;p<d.length;p++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,d.length,d[p]),this.curSegmentNum++}addDisconnectPingFrame(t,i){this.myDisconnFrame=document.createElement("iframe");const u={};u[D_]="t",u[yp]=t,u[Cp]=i,this.myDisconnFrame.src=this.urlFn(u),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const i=Sn(t).length;this.bytesReceived+=i,this.stats_.incrementCounter("bytes_received",i)}}class Ah{constructor(t,i,u,d){this.onDisconnect=u,this.urlFn=d,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=l_(),window[I_+this.uniqueCallbackIdentifier]=t,window[T_+this.uniqueCallbackIdentifier]=i,this.myIFrame=Ah.createIFrame_();let p="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(p='<script>document.domain="'+document.domain+'";<\/script>');const w="<html><body>"+p+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(w),this.myIFrame.doc.close()}catch(A){Hn("frame writing exception"),A.stack&&Hn(A.stack),Hn(A)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||Hn("No IE domain setting required")}catch{const u=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+u+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,i){for(this.myID=t,this.myPW=i,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[yp]=this.myID,t[Cp]=this.myPW,t[Ep]=this.currentSerial;let i=this.urlFn(t),u="",d=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+vp+u.length<=Ap;){const w=this.pendingSegs.shift();u=u+"&"+R_+d+"="+w.seg+"&"+b_+d+"="+w.ts+"&"+O_+d+"="+w.d,d++}return i=i+u,this.addLongPollTag_(i,this.currentSerial),!0}else return!1}enqueueSegment(t,i,u){this.pendingSegs.push({seg:t,ts:i,d:u}),this.alive&&this.newRequest_()}addLongPollTag_(t,i){this.outstandingRequests.add(i);const u=()=>{this.outstandingRequests.delete(i),this.newRequest_()},d=setTimeout(u,Math.floor(k_)),p=()=>{clearTimeout(d),u()};this.addTag(t,p)}addTag(t,i){setTimeout(()=>{try{if(!this.sendNewPolls)return;const u=this.myIFrame.doc.createElement("script");u.type="text/javascript",u.async=!0,u.src=t,u.onload=u.onreadystatechange=function(){const d=u.readyState;(!d||d==="loaded"||d==="complete")&&(u.onload=u.onreadystatechange=null,u.parentNode&&u.parentNode.removeChild(u),i())},u.onerror=()=>{Hn("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(u)}catch{}},Math.floor(1))}}const L_=16384,B_=45e3;let pc=null;typeof MozWebSocket<"u"?pc=MozWebSocket:typeof WebSocket<"u"&&(pc=WebSocket);class Ur{constructor(t,i,u,d,p,w,A){this.connId=t,this.applicationId=u,this.appCheckToken=d,this.authToken=p,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=jl(this.connId),this.stats_=Eh(i),this.connURL=Ur.connectionURL_(i,w,A,d,u),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,u,d,p){const w={};return w[cp]=Ch,typeof location<"u"&&location.hostname&&dp.test(location.hostname)&&(w[fp]=hp),i&&(w[up]=i),u&&(w[gp]=u),d&&(w[th]=d),p&&(w[pp]=p),_p(t,mp,w)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Os.set("previous_websocket_failure",!0);try{let u;Dx(),this.mySock=new pc(this.connURL,[],u)}catch(u){this.log_("Error instantiating WebSocket.");const d=u.message||u.data;d&&this.log_(d),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=u=>{this.handleIncomingFrame(u)},this.mySock.onerror=u=>{this.log_("WebSocket error.  Closing connection.");const d=u.message||u.data;d&&this.log_(d),this.onClosed_()}}start(){}static forceDisallow(){Ur.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=/Android ([0-9]{0,}\.[0-9]{0,})/,u=navigator.userAgent.match(i);u&&u.length>1&&parseFloat(u[1])<4.4&&(t=!0)}return!t&&pc!==null&&!Ur.forceDisallow_}static previouslyFailed(){return Os.isInMemoryStorage||Os.get("previous_websocket_failure")===!0}markConnectionHealthy(){Os.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const u=Ml(i);this.onMessage(u)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(_e(this.frames===null,"We already have a frame buffer"),t.length<=6){const i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{const u=this.extractFrameCount_(i);u!==null&&this.appendFrame_(u)}}send(t){this.resetKeepAlive();const i=Sn(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const u=lp(i,L_);u.length>1&&this.sendString_(String(u.length));for(let d=0;d<u.length;d++)this.sendString_(u[d])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(B_))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Ur.responsesRequiredToBeHealthy=2;Ur.healthyTimeout=3e4;class Ll{static get ALL_TRANSPORTS(){return[yo,Ur]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){const i=Ur&&Ur.isAvailable();let u=i&&!Ur.previouslyFailed();if(t.webSocketOnly&&(i||rr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),u=!0),u)this.transports_=[Ur];else{const d=this.transports_=[];for(const p of Ll.ALL_TRANSPORTS)p&&p.isAvailable()&&d.push(p);Ll.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Ll.globalTransportInitialized_=!1;const F_=6e4,U_=5e3,V_=10*1024,H_=100*1024,Vf="t",ig="d",W_="s",sg="r",z_="e",og="o",lg="a",ag="n",cg="p",G_="h";class j_{constructor(t,i,u,d,p,w,A,S,E,O){this.id=t,this.repoInfo_=i,this.applicationId_=u,this.appCheckToken_=d,this.authToken_=p,this.onMessage_=w,this.onReady_=A,this.onDisconnect_=S,this.onKill_=E,this.lastSessionId=O,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=jl("c:"+this.id+":"),this.transportManager_=new Ll(i),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const i=this.connReceiver_(this.conn_),u=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(i,u)},Math.floor(0));const d=t.healthyTimeout||0;d>0&&(this.healthyTimeout_=Rl(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>H_?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>V_?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(d)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return i=>{t===this.conn_?this.onConnectionLost_(i):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return i=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(i):t===this.secondaryConn_?this.onSecondaryMessageReceived_(i):this.log_("message on old connection"))}}sendRequest(t){const i={t:"d",d:t};this.sendData_(i)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(Vf in t){const i=t[Vf];i===lg?this.upgradeIfSecondaryHealthy_():i===sg?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):i===og&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const i=El("t",t),u=El("d",t);if(i==="c")this.onSecondaryControl_(u);else if(i==="d")this.pendingDataMessages.push(u);else throw new Error("Unknown protocol layer: "+i)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:cg,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:lg,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:ag,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const i=El("t",t),u=El("d",t);i==="c"?this.onControl_(u):i==="d"&&this.onDataMessage_(u)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const i=El(Vf,t);if(ig in t){const u=t[ig];if(i===G_){const d={...u};this.repoInfo_.isUsingEmulator&&(d.h=this.repoInfo_.host),this.onHandshake_(d)}else if(i===ag){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let d=0;d<this.pendingDataMessages.length;++d)this.onDataMessage_(this.pendingDataMessages[d]);this.pendingDataMessages=[],this.tryCleanupConnection()}else i===W_?this.onConnectionShutdown_(u):i===sg?this.onReset_(u):i===z_?eh("Server Error: "+u):i===og?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):eh("Unknown control packet command: "+i)}}onHandshake_(t){const i=t.ts,u=t.v,d=t.h;this.sessionId=t.s,this.repoInfo_.host=d,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,i),Ch!==u&&rr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const i=this.connReceiver_(this.secondaryConn_),u=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(i,u),Rl(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(F_))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,i){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(i,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Rl(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(U_))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:cg,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Os.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Sp{put(t,i,u,d){}merge(t,i,u,d){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,i,u){}onDisconnectMerge(t,i,u){}onDisconnectCancel(t,i){}reportStats(t){}}class Ip{constructor(t){this.allowedEvents_=t,this.listeners_={},_e(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...i){if(Array.isArray(this.listeners_[t])){const u=[...this.listeners_[t]];for(let d=0;d<u.length;d++)u[d].callback.apply(u[d].context,i)}}on(t,i,u){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:i,context:u});const d=this.getInitialEvent(t);d&&i.apply(u,d)}off(t,i,u){this.validateEventType_(t);const d=this.listeners_[t]||[];for(let p=0;p<d.length;p++)if(d[p].callback===i&&(!u||u===d[p].context)){d.splice(p,1);return}}validateEventType_(t){_e(this.allowedEvents_.find(i=>i===t),"Unknown event: "+t)}}class mc extends Ip{static getInstance(){return new mc}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Kg()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(t){return _e(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}const ug=32,fg=768;class Nt{constructor(t,i){if(i===void 0){this.pieces_=t.split("/");let u=0;for(let d=0;d<this.pieces_.length;d++)this.pieces_[d].length>0&&(this.pieces_[u]=this.pieces_[d],u++);this.pieces_.length=u,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=i}toString(){let t="";for(let i=this.pieceNum_;i<this.pieces_.length;i++)this.pieces_[i]!==""&&(t+="/"+this.pieces_[i]);return t||"/"}}function yt(){return new Nt("")}function ot(l){return l.pieceNum_>=l.pieces_.length?null:l.pieces_[l.pieceNum_]}function es(l){return l.pieces_.length-l.pieceNum_}function Lt(l){let t=l.pieceNum_;return t<l.pieces_.length&&t++,new Nt(l.pieces_,t)}function Tp(l){return l.pieceNum_<l.pieces_.length?l.pieces_[l.pieces_.length-1]:null}function X_(l){let t="";for(let i=l.pieceNum_;i<l.pieces_.length;i++)l.pieces_[i]!==""&&(t+="/"+encodeURIComponent(String(l.pieces_[i])));return t||"/"}function Np(l,t=0){return l.pieces_.slice(l.pieceNum_+t)}function Rp(l){if(l.pieceNum_>=l.pieces_.length)return null;const t=[];for(let i=l.pieceNum_;i<l.pieces_.length-1;i++)t.push(l.pieces_[i]);return new Nt(t,0)}function mn(l,t){const i=[];for(let u=l.pieceNum_;u<l.pieces_.length;u++)i.push(l.pieces_[u]);if(t instanceof Nt)for(let u=t.pieceNum_;u<t.pieces_.length;u++)i.push(t.pieces_[u]);else{const u=t.split("/");for(let d=0;d<u.length;d++)u[d].length>0&&i.push(u[d])}return new Nt(i,0)}function ft(l){return l.pieceNum_>=l.pieces_.length}function tr(l,t){const i=ot(l),u=ot(t);if(i===null)return t;if(i===u)return tr(Lt(l),Lt(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+l+")")}function vh(l,t){if(es(l)!==es(t))return!1;for(let i=l.pieceNum_,u=t.pieceNum_;i<=l.pieces_.length;i++,u++)if(l.pieces_[i]!==t.pieces_[u])return!1;return!0}function Vr(l,t){let i=l.pieceNum_,u=t.pieceNum_;if(es(l)>es(t))return!1;for(;i<l.pieces_.length;){if(l.pieces_[i]!==t.pieces_[u])return!1;++i,++u}return!0}class Y_{constructor(t,i){this.errorPrefix_=i,this.parts_=Np(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let u=0;u<this.parts_.length;u++)this.byteLength_+=Rc(this.parts_[u]);bp(this)}}function K_(l,t){l.parts_.length>0&&(l.byteLength_+=1),l.parts_.push(t),l.byteLength_+=Rc(t),bp(l)}function q_(l){const t=l.parts_.pop();l.byteLength_-=Rc(t),l.parts_.length>0&&(l.byteLength_-=1)}function bp(l){if(l.byteLength_>fg)throw new Error(l.errorPrefix_+"has a key path longer than "+fg+" bytes ("+l.byteLength_+").");if(l.parts_.length>ug)throw new Error(l.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+ug+") or object contains a cycle "+bs(l))}function bs(l){return l.parts_.length===0?"":"in property '"+l.parts_.join(".")+"'"}class Sh extends Ip{static getInstance(){return new Sh}constructor(){super(["visible"]);let t,i;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(i="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(i="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(i="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(i="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,i&&document.addEventListener(i,()=>{const u=!document[t];u!==this.visible_&&(this.visible_=u,this.trigger("visible",u))},!1)}getInitialEvent(t){return _e(t==="visible","Unknown event type: "+t),[this.visible_]}}const Al=1e3,Z_=300*1e3,hg=30*1e3,Q_=1.3,J_=3e4,$_="server_kill",dg=3;class xi extends Sp{constructor(t,i,u,d,p,w,A,S){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=u,this.onConnectStatus_=d,this.onServerInfoUpdate_=p,this.authTokenProvider_=w,this.appCheckTokenProvider_=A,this.authOverride_=S,this.id=xi.nextPersistentConnectionId_++,this.log_=jl("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Al,this.maxReconnectDelay_=Z_,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,S)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Sh.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&mc.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,u){const d=++this.requestNumber_,p={r:d,a:t,b:i};this.log_(Sn(p)),_e(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(p),u&&(this.requestCBHash_[d]=u)}get(t){this.initConnection_();const i=new Nc,d={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:w=>{const A=w.d;w.s==="ok"?i.resolve(A):i.reject(A)}};this.outstandingGets_.push(d),this.outstandingGetCount_++;const p=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(p),i.promise}listen(t,i,u,d){this.initConnection_();const p=t._queryIdentifier,w=t._path.toString();this.log_("Listen called for "+w+" "+p),this.listens.has(w)||this.listens.set(w,new Map),_e(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),_e(!this.listens.get(w).has(p),"listen() called twice for same path/queryId.");const A={onComplete:d,hashFn:i,query:t,tag:u};this.listens.get(w).set(p,A),this.connected_&&this.sendListen_(A)}sendGet_(t){const i=this.outstandingGets_[t];this.sendRequest("g",i.request,u=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(u)})}sendListen_(t){const i=t.query,u=i._path.toString(),d=i._queryIdentifier;this.log_("Listen on "+u+" for "+d);const p={p:u},w="q";t.tag&&(p.q=i._queryObject,p.t=t.tag),p.h=t.hashFn(),this.sendRequest(w,p,A=>{const S=A.d,E=A.s;xi.warnOnListenWarnings_(S,i),(this.listens.get(u)&&this.listens.get(u).get(d))===t&&(this.log_("listen response",A),E!=="ok"&&this.removeListen_(u,d),t.onComplete&&t.onComplete(E,S))})}static warnOnListenWarnings_(t,i){if(t&&typeof t=="object"&&Ci(t,"w")){const u=So(t,"w");if(Array.isArray(u)&&~u.indexOf("no_index")){const d='".indexOn": "'+i._queryParams.getIndex().toString()+'"',p=i._path.toString();rr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${d} at ${p} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||Ux(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=hg)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,i=Fx(t)?"auth":"gauth",u={cred:t};this.authOverride_===null?u.noauth=!0:typeof this.authOverride_=="object"&&(u.authvar=this.authOverride_),this.sendRequest(i,u,d=>{const p=d.s,w=d.d||"error";this.authToken_===t&&(p==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(p,w))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const i=t.s,u=t.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,u)})}unlisten(t,i){const u=t._path.toString(),d=t._queryIdentifier;this.log_("Unlisten called for "+u+" "+d),_e(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(u,d)&&this.connected_&&this.sendUnlisten_(u,d,t._queryObject,i)}sendUnlisten_(t,i,u,d){this.log_("Unlisten on "+t+" for "+i);const p={p:t},w="n";d&&(p.q=u,p.t=d),this.sendRequest(w,p)}onDisconnectPut(t,i,u){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,u):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:u})}onDisconnectMerge(t,i,u){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,u):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:u})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,u,d){const p={p:i,d:u};this.log_("onDisconnect "+t,p),this.sendRequest(t,p,w=>{d&&setTimeout(()=>{d(w.s,w.d)},Math.floor(0))})}put(t,i,u,d){this.putInternal("p",t,i,u,d)}merge(t,i,u,d){this.putInternal("m",t,i,u,d)}putInternal(t,i,u,d,p){this.initConnection_();const w={p:i,d:u};p!==void 0&&(w.h=p),this.outstandingPuts_.push({action:t,request:w,onComplete:d}),this.outstandingPutCount_++;const A=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(A):this.log_("Buffering put: "+i)}sendPut_(t){const i=this.outstandingPuts_[t].action,u=this.outstandingPuts_[t].request,d=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,u,p=>{this.log_(i+" response",p),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),d&&d(p.s,p.d)})}reportStats(t){if(this.connected_){const i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,u=>{if(u.s!=="ok"){const p=u.d;this.log_("reportStats","Error sending stats: "+p)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Sn(t));const i=t.r,u=this.requestCBHash_[i];u&&(delete this.requestCBHash_[i],u(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),t==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):t==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):t==="c"?this.onListenRevoked_(i.p,i.q):t==="ac"?this.onAuthRevoked_(i.s,i.d):t==="apc"?this.onAppCheckRevoked_(i.s,i.d):t==="sd"?this.onSecurityDebugPacket_(i):eh("Unrecognized action received from server: "+Sn(t)+`
Are you using the latest client?`)}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){_e(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Al,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Al,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>J_&&(this.reconnectDelay_=Al),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Q_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),u=this.onRealtimeDisconnect_.bind(this),d=this.id+":"+xi.nextConnectionId_++,p=this.lastSessionId;let w=!1,A=null;const S=function(){A?A.close():(w=!0,u())},E=function(b){_e(A,"sendRequest call when we're not connected not allowed."),A.sendRequest(b)};this.realtime_={close:S,sendRequest:E};const O=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[b,k]=await Promise.all([this.authTokenProvider_.getToken(O),this.appCheckTokenProvider_.getToken(O)]);w?Hn("getToken() completed but was canceled"):(Hn("getToken() completed. Creating connection."),this.authToken_=b&&b.accessToken,this.appCheckToken_=k&&k.token,A=new j_(d,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,i,u,V=>{rr(V+" ("+this.repoInfo_.toString()+")"),this.interrupt($_)},p))}catch(b){this.log_("Failed to get token: "+b),w||(this.repoInfo_.nodeAdmin&&rr(b),S())}}}interrupt(t){Hn("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Hn("Resuming connection for reason: "+t),delete this.interruptReasons_[t],W0(this.interruptReasons_)&&(this.reconnectDelay_=Al,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const i=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let u;i?u=i.map(p=>yh(p)).join("$"):u="default";const d=this.removeListen_(t,u);d&&d.onComplete&&d.onComplete("permission_denied")}removeListen_(t,i){const u=new Nt(t).toString();let d;if(this.listens.has(u)){const p=this.listens.get(u);d=p.get(i),p.delete(i),p.size===0&&this.listens.delete(u)}else d=void 0;return d}onAuthRevoked_(t,i){Hn("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=dg&&(this.reconnectDelay_=hg,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){Hn("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=dg&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let i="js";t["sdk."+i+"."+rp.replace(/\./g,"-")]=1,Kg()?t["framework.cordova"]=1:Ox()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=mc.getInstance().currentlyOnline();return W0(this.interruptReasons_)&&t}}xi.nextPersistentConnectionId_=0;xi.nextConnectionId_=0;class lt{constructor(t,i){this.name=t,this.node=i}static Wrap(t,i){return new lt(t,i)}}class bc{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,i){const u=new lt(Io,t),d=new lt(Io,i);return this.compare(u,d)!==0}minPost(){return lt.MIN}}let ic;class Op extends bc{static get __EMPTY_NODE(){return ic}static set __EMPTY_NODE(t){ic=t}compare(t,i){return bo(t.name,i.name)}isDefinedOn(t){throw Ro("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,i){return!1}minPost(){return lt.MIN}maxPost(){return new lt(Ms,ic)}makePost(t,i){return _e(typeof t=="string","KeyIndex indexValue must always be a string."),new lt(t,ic)}toString(){return".key"}}const Ao=new Op;class sc{constructor(t,i,u,d,p=null){this.isReverse_=d,this.resultGenerator_=p,this.nodeStack_=[];let w=1;for(;!t.isEmpty();)if(t=t,w=i?u(t.key,i):1,d&&(w*=-1),w<0)this.isReverse_?t=t.left:t=t.right;else if(w===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),i;if(this.resultGenerator_?i=this.resultGenerator_(t.key,t.value):i={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return i}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class vn{constructor(t,i,u,d,p){this.key=t,this.value=i,this.color=u??vn.RED,this.left=d??nr.EMPTY_NODE,this.right=p??nr.EMPTY_NODE}copy(t,i,u,d,p){return new vn(t??this.key,i??this.value,u??this.color,d??this.left,p??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,u){let d=this;const p=u(t,d.key);return p<0?d=d.copy(null,null,null,d.left.insert(t,i,u),null):p===0?d=d.copy(null,i,null,null,null):d=d.copy(null,null,null,null,d.right.insert(t,i,u)),d.fixUp_()}removeMin_(){if(this.left.isEmpty())return nr.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let u,d;if(u=this,i(t,u.key)<0)!u.left.isEmpty()&&!u.left.isRed_()&&!u.left.left.isRed_()&&(u=u.moveRedLeft_()),u=u.copy(null,null,null,u.left.remove(t,i),null);else{if(u.left.isRed_()&&(u=u.rotateRight_()),!u.right.isEmpty()&&!u.right.isRed_()&&!u.right.left.isRed_()&&(u=u.moveRedRight_()),i(t,u.key)===0){if(u.right.isEmpty())return nr.EMPTY_NODE;d=u.right.min_(),u=u.copy(d.key,d.value,null,null,u.right.removeMin_())}u=u.copy(null,null,null,null,u.right.remove(t,i))}return u.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,vn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,vn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}vn.RED=!0;vn.BLACK=!1;class ey{copy(t,i,u,d,p){return this}insert(t,i,u){return new vn(t,i,null)}remove(t,i){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class nr{constructor(t,i=nr.EMPTY_NODE){this.comparator_=t,this.root_=i}insert(t,i){return new nr(this.comparator_,this.root_.insert(t,i,this.comparator_).copy(null,null,vn.BLACK,null,null))}remove(t){return new nr(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,vn.BLACK,null,null))}get(t){let i,u=this.root_;for(;!u.isEmpty();){if(i=this.comparator_(t,u.key),i===0)return u.value;i<0?u=u.left:i>0&&(u=u.right)}return null}getPredecessorKey(t){let i,u=this.root_,d=null;for(;!u.isEmpty();)if(i=this.comparator_(t,u.key),i===0){if(u.left.isEmpty())return d?d.key:null;for(u=u.left;!u.right.isEmpty();)u=u.right;return u.key}else i<0?u=u.left:i>0&&(d=u,u=u.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new sc(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,i){return new sc(this.root_,t,this.comparator_,!1,i)}getReverseIteratorFrom(t,i){return new sc(this.root_,t,this.comparator_,!0,i)}getReverseIterator(t){return new sc(this.root_,null,this.comparator_,!0,t)}}nr.EMPTY_NODE=new ey;function ty(l,t){return bo(l.name,t.name)}function Ih(l,t){return bo(l,t)}let nh;function ny(l){nh=l}const Dp=function(l){return typeof l=="number"?"number:"+ap(l):"string:"+l},Mp=function(l){if(l.isLeafNode()){const t=l.val();_e(typeof t=="string"||typeof t=="number"||typeof t=="object"&&Ci(t,".sv"),"Priority must be a string or number.")}else _e(l===nh||l.isEmpty(),"priority of unexpected type.");_e(l===nh||l.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let gg;class An{static set __childrenNodeConstructor(t){gg=t}static get __childrenNodeConstructor(){return gg}constructor(t,i=An.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,_e(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Mp(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new An(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:An.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return ft(t)?this:ot(t)===".priority"?this.priorityNode_:An.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return t===".priority"?this.updatePriority(i):i.isEmpty()&&t!==".priority"?this:An.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){const u=ot(t);return u===null?i:i.isEmpty()&&u!==".priority"?this:(_e(u!==".priority"||es(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(u,An.__childrenNodeConstructor.EMPTY_NODE.updateChild(Lt(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Dp(this.priorityNode_.val())+":");const i=typeof this.value_;t+=i+":",i==="number"?t+=ap(this.value_):t+=this.value_,this.lazyHash_=sp(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===An.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof An.__childrenNodeConstructor?-1:(_e(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const i=typeof t.value_,u=typeof this.value_,d=An.VALUE_TYPE_ORDER.indexOf(i),p=An.VALUE_TYPE_ORDER.indexOf(u);return _e(d>=0,"Unknown leaf type: "+i),_e(p>=0,"Unknown leaf type: "+u),d===p?u==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:p-d}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const i=t;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}An.VALUE_TYPE_ORDER=["object","boolean","number","string"];let kp,Pp;function ry(l){kp=l}function iy(l){Pp=l}class sy extends bc{compare(t,i){const u=t.node.getPriority(),d=i.node.getPriority(),p=u.compareTo(d);return p===0?bo(t.name,i.name):p}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,i){return!t.getPriority().equals(i.getPriority())}minPost(){return lt.MIN}maxPost(){return new lt(Ms,new An("[PRIORITY-POST]",Pp))}makePost(t,i){const u=kp(t);return new lt(i,new An("[PRIORITY-POST]",u))}toString(){return".priority"}}const Jt=new sy;const oy=Math.log(2);class ly{constructor(t){const i=p=>parseInt(Math.log(p)/oy,10),u=p=>parseInt(Array(p+1).join("1"),2);this.count=i(t+1),this.current_=this.count-1;const d=u(this.count);this.bits_=t+1&d}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const xc=function(l,t,i,u){l.sort(t);const d=function(S,E){const O=E-S;let b,k;if(O===0)return null;if(O===1)return b=l[S],k=i?i(b):b,new vn(k,b.node,vn.BLACK,null,null);{const V=parseInt(O/2,10)+S,J=d(S,V),$=d(V+1,E);return b=l[V],k=i?i(b):b,new vn(k,b.node,vn.BLACK,J,$)}},p=function(S){let E=null,O=null,b=l.length;const k=function(J,$){const xe=b-J,Ee=b;b-=J;const pe=d(xe+1,Ee),te=l[xe],oe=i?i(te):te;V(new vn(oe,te.node,$,null,pe))},V=function(J){E?(E.left=J,E=J):(O=J,E=J)};for(let J=0;J<S.count;++J){const $=S.nextBitIsOne(),xe=Math.pow(2,S.count-(J+1));$?k(xe,vn.BLACK):(k(xe,vn.BLACK),k(xe,vn.RED))}return O},w=new ly(l.length),A=p(w);return new nr(u||t,A)};let Hf;const wo={};class mi{static get Default(){return _e(wo&&Jt,"ChildrenNode.ts has not been loaded"),Hf=Hf||new mi({".priority":wo},{".priority":Jt}),Hf}constructor(t,i){this.indexes_=t,this.indexSet_=i}get(t){const i=So(this.indexes_,t);if(!i)throw new Error("No index defined for "+t);return i instanceof nr?i:null}hasIndex(t){return Ci(this.indexSet_,t.toString())}addIndex(t,i){_e(t!==Ao,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const u=[];let d=!1;const p=i.getIterator(lt.Wrap);let w=p.getNext();for(;w;)d=d||t.isDefinedOn(w.node),u.push(w),w=p.getNext();let A;d?A=xc(u,t.getCompare()):A=wo;const S=t.toString(),E={...this.indexSet_};E[S]=t;const O={...this.indexes_};return O[S]=A,new mi(O,E)}addToIndexes(t,i){const u=fc(this.indexes_,(d,p)=>{const w=So(this.indexSet_,p);if(_e(w,"Missing index implementation for "+p),d===wo)if(w.isDefinedOn(t.node)){const A=[],S=i.getIterator(lt.Wrap);let E=S.getNext();for(;E;)E.name!==t.name&&A.push(E),E=S.getNext();return A.push(t),xc(A,w.getCompare())}else return wo;else{const A=i.get(t.name);let S=d;return A&&(S=S.remove(new lt(t.name,A))),S.insert(t,t.node)}});return new mi(u,this.indexSet_)}removeFromIndexes(t,i){const u=fc(this.indexes_,d=>{if(d===wo)return d;{const p=i.get(t.name);return p?d.remove(new lt(t.name,p)):d}});return new mi(u,this.indexSet_)}}let vl;class Xe{static get EMPTY_NODE(){return vl||(vl=new Xe(new nr(Ih),null,mi.Default))}constructor(t,i,u){this.children_=t,this.priorityNode_=i,this.indexMap_=u,this.lazyHash_=null,this.priorityNode_&&Mp(this.priorityNode_),this.children_.isEmpty()&&_e(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||vl}updatePriority(t){return this.children_.isEmpty()?this:new Xe(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const i=this.children_.get(t);return i===null?vl:i}}getChild(t){const i=ot(t);return i===null?this:this.getImmediateChild(i).getChild(Lt(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,i){if(_e(i,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(i);{const u=new lt(t,i);let d,p;i.isEmpty()?(d=this.children_.remove(t),p=this.indexMap_.removeFromIndexes(u,this.children_)):(d=this.children_.insert(t,i),p=this.indexMap_.addToIndexes(u,this.children_));const w=d.isEmpty()?vl:this.priorityNode_;return new Xe(d,w,p)}}updateChild(t,i){const u=ot(t);if(u===null)return i;{_e(ot(t)!==".priority"||es(t)===1,".priority must be the last token in a path");const d=this.getImmediateChild(u).updateChild(Lt(t),i);return this.updateImmediateChild(u,d)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const i={};let u=0,d=0,p=!0;if(this.forEachChild(Jt,(w,A)=>{i[w]=A.val(t),u++,p&&Xe.INTEGER_REGEXP_.test(w)?d=Math.max(d,Number(w)):p=!1}),!t&&p&&d<2*u){const w=[];for(const A in i)w[A]=i[A];return w}else return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+Dp(this.getPriority().val())+":"),this.forEachChild(Jt,(i,u)=>{const d=u.hash();d!==""&&(t+=":"+i+":"+d)}),this.lazyHash_=t===""?"":sp(t)}return this.lazyHash_}getPredecessorChildName(t,i,u){const d=this.resolveIndex_(u);if(d){const p=d.getPredecessorKey(new lt(t,i));return p?p.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const i=this.resolveIndex_(t);if(i){const u=i.minKey();return u&&u.name}else return this.children_.minKey()}getFirstChild(t){const i=this.getFirstChildName(t);return i?new lt(i,this.children_.get(i)):null}getLastChildName(t){const i=this.resolveIndex_(t);if(i){const u=i.maxKey();return u&&u.name}else return this.children_.maxKey()}getLastChild(t){const i=this.getLastChildName(t);return i?new lt(i,this.children_.get(i)):null}forEachChild(t,i){const u=this.resolveIndex_(t);return u?u.inorderTraversal(d=>i(d.name,d.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){const u=this.resolveIndex_(i);if(u)return u.getIteratorFrom(t,d=>d);{const d=this.children_.getIteratorFrom(t.name,lt.Wrap);let p=d.peek();for(;p!=null&&i.compare(p,t)<0;)d.getNext(),p=d.peek();return d}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){const u=this.resolveIndex_(i);if(u)return u.getReverseIteratorFrom(t,d=>d);{const d=this.children_.getReverseIteratorFrom(t.name,lt.Wrap);let p=d.peek();for(;p!=null&&i.compare(p,t)>0;)d.getNext(),p=d.peek();return d}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Xl?-1:0}withIndex(t){if(t===Ao||this.indexMap_.hasIndex(t))return this;{const i=this.indexMap_.addIndex(t,this.children_);return new Xe(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===Ao||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const i=t;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){const u=this.getIterator(Jt),d=i.getIterator(Jt);let p=u.getNext(),w=d.getNext();for(;p&&w;){if(p.name!==w.name||!p.node.equals(w.node))return!1;p=u.getNext(),w=d.getNext()}return p===null&&w===null}else return!1;else return!1}}resolveIndex_(t){return t===Ao?null:this.indexMap_.get(t.toString())}}Xe.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class ay extends Xe{constructor(){super(new nr(Ih),Xe.EMPTY_NODE,mi.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return Xe.EMPTY_NODE}isEmpty(){return!1}}const Xl=new ay;Object.defineProperties(lt,{MIN:{value:new lt(Io,Xe.EMPTY_NODE)},MAX:{value:new lt(Ms,Xl)}});Op.__EMPTY_NODE=Xe.EMPTY_NODE;An.__childrenNodeConstructor=Xe;ny(Xl);iy(Xl);const cy=!0;function Dn(l,t=null){if(l===null)return Xe.EMPTY_NODE;if(typeof l=="object"&&".priority"in l&&(t=l[".priority"]),_e(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof l=="object"&&".value"in l&&l[".value"]!==null&&(l=l[".value"]),typeof l!="object"||".sv"in l){const i=l;return new An(i,Dn(t))}if(!(l instanceof Array)&&cy){const i=[];let u=!1;if(ir(l,(w,A)=>{if(w.substring(0,1)!=="."){const S=Dn(A);S.isEmpty()||(u=u||!S.getPriority().isEmpty(),i.push(new lt(w,S)))}}),i.length===0)return Xe.EMPTY_NODE;const p=xc(i,ty,w=>w.name,Ih);if(u){const w=xc(i,Jt.getCompare());return new Xe(p,Dn(t),new mi({".priority":w},{".priority":Jt}))}else return new Xe(p,Dn(t),mi.Default)}else{let i=Xe.EMPTY_NODE;return ir(l,(u,d)=>{if(Ci(l,u)&&u.substring(0,1)!=="."){const p=Dn(d);(p.isLeafNode()||!p.isEmpty())&&(i=i.updateImmediateChild(u,p))}}),i.updatePriority(Dn(t))}}ry(Dn);class uy extends bc{constructor(t){super(),this.indexPath_=t,_e(!ft(t)&&ot(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,i){const u=this.extractChild(t.node),d=this.extractChild(i.node),p=u.compareTo(d);return p===0?bo(t.name,i.name):p}makePost(t,i){const u=Dn(t),d=Xe.EMPTY_NODE.updateChild(this.indexPath_,u);return new lt(i,d)}maxPost(){const t=Xe.EMPTY_NODE.updateChild(this.indexPath_,Xl);return new lt(Ms,t)}toString(){return Np(this.indexPath_,0).join("/")}}class fy extends bc{compare(t,i){const u=t.node.compareTo(i.node);return u===0?bo(t.name,i.name):u}isDefinedOn(t){return!0}indexedValueChanged(t,i){return!t.equals(i)}minPost(){return lt.MIN}maxPost(){return lt.MAX}makePost(t,i){const u=Dn(t);return new lt(i,u)}toString(){return".value"}}const hy=new fy;function Lp(l){return{type:"value",snapshotNode:l}}function To(l,t){return{type:"child_added",snapshotNode:t,childName:l}}function Bl(l,t){return{type:"child_removed",snapshotNode:t,childName:l}}function Fl(l,t,i){return{type:"child_changed",snapshotNode:t,childName:l,oldSnap:i}}function dy(l,t){return{type:"child_moved",snapshotNode:t,childName:l}}class Th{constructor(t){this.index_=t}updateChild(t,i,u,d,p,w){_e(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const A=t.getImmediateChild(i);return A.getChild(d).equals(u.getChild(d))&&A.isEmpty()===u.isEmpty()||(w!=null&&(u.isEmpty()?t.hasChild(i)?w.trackChildChange(Bl(i,A)):_e(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):A.isEmpty()?w.trackChildChange(To(i,u)):w.trackChildChange(Fl(i,u,A))),t.isLeafNode()&&u.isEmpty())?t:t.updateImmediateChild(i,u).withIndex(this.index_)}updateFullNode(t,i,u){return u!=null&&(t.isLeafNode()||t.forEachChild(Jt,(d,p)=>{i.hasChild(d)||u.trackChildChange(Bl(d,p))}),i.isLeafNode()||i.forEachChild(Jt,(d,p)=>{if(t.hasChild(d)){const w=t.getImmediateChild(d);w.equals(p)||u.trackChildChange(Fl(d,p,w))}else u.trackChildChange(To(d,p))})),i.withIndex(this.index_)}updatePriority(t,i){return t.isEmpty()?Xe.EMPTY_NODE:t.updatePriority(i)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Ul{constructor(t){this.indexedFilter_=new Th(t.getIndex()),this.index_=t.getIndex(),this.startPost_=Ul.getStartPost_(t),this.endPost_=Ul.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const i=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,u=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return i&&u}updateChild(t,i,u,d,p,w){return this.matches(new lt(i,u))||(u=Xe.EMPTY_NODE),this.indexedFilter_.updateChild(t,i,u,d,p,w)}updateFullNode(t,i,u){i.isLeafNode()&&(i=Xe.EMPTY_NODE);let d=i.withIndex(this.index_);d=d.updatePriority(Xe.EMPTY_NODE);const p=this;return i.forEachChild(Jt,(w,A)=>{p.matches(new lt(w,A))||(d=d.updateImmediateChild(w,Xe.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,d,u)}updatePriority(t,i){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const i=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),i)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const i=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),i)}else return t.getIndex().maxPost()}}class gy{constructor(t){this.withinDirectionalStart=i=>this.reverse_?this.withinEndPost(i):this.withinStartPost(i),this.withinDirectionalEnd=i=>this.reverse_?this.withinStartPost(i):this.withinEndPost(i),this.withinStartPost=i=>{const u=this.index_.compare(this.rangedFilter_.getStartPost(),i);return this.startIsInclusive_?u<=0:u<0},this.withinEndPost=i=>{const u=this.index_.compare(i,this.rangedFilter_.getEndPost());return this.endIsInclusive_?u<=0:u<0},this.rangedFilter_=new Ul(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,i,u,d,p,w){return this.rangedFilter_.matches(new lt(i,u))||(u=Xe.EMPTY_NODE),t.getImmediateChild(i).equals(u)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,i,u,d,p,w):this.fullLimitUpdateChild_(t,i,u,p,w)}updateFullNode(t,i,u){let d;if(i.isLeafNode()||i.isEmpty())d=Xe.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<i.numChildren()&&i.isIndexed(this.index_)){d=Xe.EMPTY_NODE.withIndex(this.index_);let p;this.reverse_?p=i.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):p=i.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let w=0;for(;p.hasNext()&&w<this.limit_;){const A=p.getNext();if(this.withinDirectionalStart(A))if(this.withinDirectionalEnd(A))d=d.updateImmediateChild(A.name,A.node),w++;else break;else continue}}else{d=i.withIndex(this.index_),d=d.updatePriority(Xe.EMPTY_NODE);let p;this.reverse_?p=d.getReverseIterator(this.index_):p=d.getIterator(this.index_);let w=0;for(;p.hasNext();){const A=p.getNext();w<this.limit_&&this.withinDirectionalStart(A)&&this.withinDirectionalEnd(A)?w++:d=d.updateImmediateChild(A.name,Xe.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,d,u)}updatePriority(t,i){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,i,u,d,p){let w;if(this.reverse_){const b=this.index_.getCompare();w=(k,V)=>b(V,k)}else w=this.index_.getCompare();const A=t;_e(A.numChildren()===this.limit_,"");const S=new lt(i,u),E=this.reverse_?A.getFirstChild(this.index_):A.getLastChild(this.index_),O=this.rangedFilter_.matches(S);if(A.hasChild(i)){const b=A.getImmediateChild(i);let k=d.getChildAfterChild(this.index_,E,this.reverse_);for(;k!=null&&(k.name===i||A.hasChild(k.name));)k=d.getChildAfterChild(this.index_,k,this.reverse_);const V=k==null?1:w(k,S);if(O&&!u.isEmpty()&&V>=0)return p?.trackChildChange(Fl(i,u,b)),A.updateImmediateChild(i,u);{p?.trackChildChange(Bl(i,b));const $=A.updateImmediateChild(i,Xe.EMPTY_NODE);return k!=null&&this.rangedFilter_.matches(k)?(p?.trackChildChange(To(k.name,k.node)),$.updateImmediateChild(k.name,k.node)):$}}else return u.isEmpty()?t:O&&w(E,S)>=0?(p!=null&&(p.trackChildChange(Bl(E.name,E.node)),p.trackChildChange(To(i,u))),A.updateImmediateChild(i,u).updateImmediateChild(E.name,Xe.EMPTY_NODE)):t}}class Nh{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Jt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return _e(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return _e(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Io}hasEnd(){return this.endSet_}getIndexEndValue(){return _e(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return _e(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ms}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return _e(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Jt}copy(){const t=new Nh;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function py(l){return l.loadsAllData()?new Th(l.getIndex()):l.hasLimit()?new gy(l):new Ul(l)}function pg(l){const t={};if(l.isDefault())return t;let i;if(l.index_===Jt?i="$priority":l.index_===hy?i="$value":l.index_===Ao?i="$key":(_e(l.index_ instanceof uy,"Unrecognized index type!"),i=l.index_.toString()),t.orderBy=Sn(i),l.startSet_){const u=l.startAfterSet_?"startAfter":"startAt";t[u]=Sn(l.indexStartValue_),l.startNameSet_&&(t[u]+=","+Sn(l.indexStartName_))}if(l.endSet_){const u=l.endBeforeSet_?"endBefore":"endAt";t[u]=Sn(l.indexEndValue_),l.endNameSet_&&(t[u]+=","+Sn(l.indexEndName_))}return l.limitSet_&&(l.isViewFromLeft()?t.limitToFirst=l.limit_:t.limitToLast=l.limit_),t}function mg(l){const t={};if(l.startSet_&&(t.sp=l.indexStartValue_,l.startNameSet_&&(t.sn=l.indexStartName_),t.sin=!l.startAfterSet_),l.endSet_&&(t.ep=l.indexEndValue_,l.endNameSet_&&(t.en=l.indexEndName_),t.ein=!l.endBeforeSet_),l.limitSet_){t.l=l.limit_;let i=l.viewFrom_;i===""&&(l.isViewFromLeft()?i="l":i="r"),t.vf=i}return l.index_!==Jt&&(t.i=l.index_.toString()),t}class wc extends Sp{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,i){return i!==void 0?"tag$"+i:(_e(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,i,u,d){super(),this.repoInfo_=t,this.onDataUpdate_=i,this.authTokenProvider_=u,this.appCheckTokenProvider_=d,this.log_=jl("p:rest:"),this.listens_={}}listen(t,i,u,d){const p=t._path.toString();this.log_("Listen called for "+p+" "+t._queryIdentifier);const w=wc.getListenId_(t,u),A={};this.listens_[w]=A;const S=pg(t._queryParams);this.restRequest_(p+".json",S,(E,O)=>{let b=O;if(E===404&&(b=null,E=null),E===null&&this.onDataUpdate_(p,b,!1,u),So(this.listens_,w)===A){let k;E?E===401?k="permission_denied":k="rest_error:"+E:k="ok",d(k,null)}})}unlisten(t,i){const u=wc.getListenId_(t,i);delete this.listens_[u]}get(t){const i=pg(t._queryParams),u=t._path.toString(),d=new Nc;return this.restRequest_(u+".json",i,(p,w)=>{let A=w;p===404&&(A=null,p=null),p===null?(this.onDataUpdate_(u,A,!1,null),d.resolve(A)):d.reject(new Error(A))}),d.promise}refreshAuthToken(t){}restRequest_(t,i={},u){return i.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([d,p])=>{d&&d.accessToken&&(i.auth=d.accessToken),p&&p.token&&(i.ac=p.token);const w=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+Vx(i);this.log_("Sending REST request for "+w);const A=new XMLHttpRequest;A.onreadystatechange=()=>{if(u&&A.readyState===4){this.log_("REST Response for "+w+" received. status:",A.status,"response:",A.responseText);let S=null;if(A.status>=200&&A.status<300){try{S=Ml(A.responseText)}catch{rr("Failed to parse JSON response for "+w+": "+A.responseText)}u(null,S)}else A.status!==401&&A.status!==404&&rr("Got unsuccessful REST response for "+w+" Status: "+A.status),u(A.status);u=null}},A.open("GET",w,!0),A.send()})}}class my{constructor(){this.rootNode_=Xe.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,i){this.rootNode_=this.rootNode_.updateChild(t,i)}}function _c(){return{value:null,children:new Map}}function Bp(l,t,i){if(ft(t))l.value=i,l.children.clear();else if(l.value!==null)l.value=l.value.updateChild(t,i);else{const u=ot(t);l.children.has(u)||l.children.set(u,_c());const d=l.children.get(u);t=Lt(t),Bp(d,t,i)}}function rh(l,t,i){l.value!==null?i(t,l.value):xy(l,(u,d)=>{const p=new Nt(t.toString()+"/"+u);rh(d,p,i)})}function xy(l,t){l.children.forEach((i,u)=>{t(u,i)})}class wy{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),i={...t};return this.last_&&ir(this.last_,(u,d)=>{i[u]=i[u]-d}),this.last_=t,i}}const xg=10*1e3,_y=30*1e3,yy=300*1e3;class Cy{constructor(t,i){this.server_=i,this.statsToReport_={},this.statsListener_=new wy(t);const u=xg+(_y-xg)*Math.random();Rl(this.reportStats_.bind(this),Math.floor(u))}reportStats_(){const t=this.statsListener_.get(),i={};let u=!1;ir(t,(d,p)=>{p>0&&Ci(this.statsToReport_,d)&&(i[d]=p,u=!0)}),u&&this.server_.reportStats(i),Rl(this.reportStats_.bind(this),Math.floor(Math.random()*2*yy))}}var Hr;(function(l){l[l.OVERWRITE=0]="OVERWRITE",l[l.MERGE=1]="MERGE",l[l.ACK_USER_WRITE=2]="ACK_USER_WRITE",l[l.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Hr||(Hr={}));function Fp(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Rh(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function bh(l){return{fromUser:!1,fromServer:!0,queryId:l,tagged:!0}}class yc{constructor(t,i,u){this.path=t,this.affectedTree=i,this.revert=u,this.type=Hr.ACK_USER_WRITE,this.source=Fp()}operationForChild(t){if(ft(this.path)){if(this.affectedTree.value!=null)return _e(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const i=this.affectedTree.subtree(new Nt(t));return new yc(yt(),i,this.revert)}}else return _e(ot(this.path)===t,"operationForChild called for unrelated child."),new yc(Lt(this.path),this.affectedTree,this.revert)}}class Vl{constructor(t,i){this.source=t,this.path=i,this.type=Hr.LISTEN_COMPLETE}operationForChild(t){return ft(this.path)?new Vl(this.source,yt()):new Vl(this.source,Lt(this.path))}}class ks{constructor(t,i,u){this.source=t,this.path=i,this.snap=u,this.type=Hr.OVERWRITE}operationForChild(t){return ft(this.path)?new ks(this.source,yt(),this.snap.getImmediateChild(t)):new ks(this.source,Lt(this.path),this.snap)}}class Hl{constructor(t,i,u){this.source=t,this.path=i,this.children=u,this.type=Hr.MERGE}operationForChild(t){if(ft(this.path)){const i=this.children.subtree(new Nt(t));return i.isEmpty()?null:i.value?new ks(this.source,yt(),i.value):new Hl(this.source,yt(),i)}else return _e(ot(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Hl(this.source,Lt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Ps{constructor(t,i,u){this.node_=t,this.fullyInitialized_=i,this.filtered_=u}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(ft(t))return this.isFullyInitialized()&&!this.filtered_;const i=ot(t);return this.isCompleteForChild(i)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class Ey{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function Ay(l,t,i,u){const d=[],p=[];return t.forEach(w=>{w.type==="child_changed"&&l.index_.indexedValueChanged(w.oldSnap,w.snapshotNode)&&p.push(dy(w.childName,w.snapshotNode))}),Sl(l,d,"child_removed",t,u,i),Sl(l,d,"child_added",t,u,i),Sl(l,d,"child_moved",p,u,i),Sl(l,d,"child_changed",t,u,i),Sl(l,d,"value",t,u,i),d}function Sl(l,t,i,u,d,p){const w=u.filter(A=>A.type===i);w.sort((A,S)=>Sy(l,A,S)),w.forEach(A=>{const S=vy(l,A,p);d.forEach(E=>{E.respondsTo(A.type)&&t.push(E.createEvent(S,l.query_))})})}function vy(l,t,i){return t.type==="value"||t.type==="child_removed"||(t.prevName=i.getPredecessorChildName(t.childName,t.snapshotNode,l.index_)),t}function Sy(l,t,i){if(t.childName==null||i.childName==null)throw Ro("Should only compare child_ events.");const u=new lt(t.childName,t.snapshotNode),d=new lt(i.childName,i.snapshotNode);return l.index_.compare(u,d)}function Oc(l,t){return{eventCache:l,serverCache:t}}function bl(l,t,i,u){return Oc(new Ps(t,i,u),l.serverCache)}function Up(l,t,i,u){return Oc(l.eventCache,new Ps(t,i,u))}function ih(l){return l.eventCache.isFullyInitialized()?l.eventCache.getNode():null}function Ls(l){return l.serverCache.isFullyInitialized()?l.serverCache.getNode():null}let Wf;const Iy=()=>(Wf||(Wf=new nr(f_)),Wf);class Ut{static fromObject(t){let i=new Ut(null);return ir(t,(u,d)=>{i=i.set(new Nt(u),d)}),i}constructor(t,i=Iy()){this.value=t,this.children=i}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,i){if(this.value!=null&&i(this.value))return{path:yt(),value:this.value};if(ft(t))return null;{const u=ot(t),d=this.children.get(u);if(d!==null){const p=d.findRootMostMatchingPathAndValue(Lt(t),i);return p!=null?{path:mn(new Nt(u),p.path),value:p.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(ft(t))return this;{const i=ot(t),u=this.children.get(i);return u!==null?u.subtree(Lt(t)):new Ut(null)}}set(t,i){if(ft(t))return new Ut(i,this.children);{const u=ot(t),p=(this.children.get(u)||new Ut(null)).set(Lt(t),i),w=this.children.insert(u,p);return new Ut(this.value,w)}}remove(t){if(ft(t))return this.children.isEmpty()?new Ut(null):new Ut(null,this.children);{const i=ot(t),u=this.children.get(i);if(u){const d=u.remove(Lt(t));let p;return d.isEmpty()?p=this.children.remove(i):p=this.children.insert(i,d),this.value===null&&p.isEmpty()?new Ut(null):new Ut(this.value,p)}else return this}}get(t){if(ft(t))return this.value;{const i=ot(t),u=this.children.get(i);return u?u.get(Lt(t)):null}}setTree(t,i){if(ft(t))return i;{const u=ot(t),p=(this.children.get(u)||new Ut(null)).setTree(Lt(t),i);let w;return p.isEmpty()?w=this.children.remove(u):w=this.children.insert(u,p),new Ut(this.value,w)}}fold(t){return this.fold_(yt(),t)}fold_(t,i){const u={};return this.children.inorderTraversal((d,p)=>{u[d]=p.fold_(mn(t,d),i)}),i(t,this.value,u)}findOnPath(t,i){return this.findOnPath_(t,yt(),i)}findOnPath_(t,i,u){const d=this.value?u(i,this.value):!1;if(d)return d;if(ft(t))return null;{const p=ot(t),w=this.children.get(p);return w?w.findOnPath_(Lt(t),mn(i,p),u):null}}foreachOnPath(t,i){return this.foreachOnPath_(t,yt(),i)}foreachOnPath_(t,i,u){if(ft(t))return this;{this.value&&u(i,this.value);const d=ot(t),p=this.children.get(d);return p?p.foreachOnPath_(Lt(t),mn(i,d),u):new Ut(null)}}foreach(t){this.foreach_(yt(),t)}foreach_(t,i){this.children.inorderTraversal((u,d)=>{d.foreach_(mn(t,u),i)}),this.value&&i(t,this.value)}foreachChild(t){this.children.inorderTraversal((i,u)=>{u.value&&t(i,u.value)})}}class Wr{constructor(t){this.writeTree_=t}static empty(){return new Wr(new Ut(null))}}function Ol(l,t,i){if(ft(t))return new Wr(new Ut(i));{const u=l.writeTree_.findRootMostValueAndPath(t);if(u!=null){const d=u.path;let p=u.value;const w=tr(d,t);return p=p.updateChild(w,i),new Wr(l.writeTree_.set(d,p))}else{const d=new Ut(i),p=l.writeTree_.setTree(t,d);return new Wr(p)}}}function wg(l,t,i){let u=l;return ir(i,(d,p)=>{u=Ol(u,mn(t,d),p)}),u}function _g(l,t){if(ft(t))return Wr.empty();{const i=l.writeTree_.setTree(t,new Ut(null));return new Wr(i)}}function sh(l,t){return Vs(l,t)!=null}function Vs(l,t){const i=l.writeTree_.findRootMostValueAndPath(t);return i!=null?l.writeTree_.get(i.path).getChild(tr(i.path,t)):null}function yg(l){const t=[],i=l.writeTree_.value;return i!=null?i.isLeafNode()||i.forEachChild(Jt,(u,d)=>{t.push(new lt(u,d))}):l.writeTree_.children.inorderTraversal((u,d)=>{d.value!=null&&t.push(new lt(u,d.value))}),t}function $i(l,t){if(ft(t))return l;{const i=Vs(l,t);return i!=null?new Wr(new Ut(i)):new Wr(l.writeTree_.subtree(t))}}function oh(l){return l.writeTree_.isEmpty()}function No(l,t){return Vp(yt(),l.writeTree_,t)}function Vp(l,t,i){if(t.value!=null)return i.updateChild(l,t.value);{let u=null;return t.children.inorderTraversal((d,p)=>{d===".priority"?(_e(p.value!==null,"Priority writes must always be leaf nodes"),u=p.value):i=Vp(mn(l,d),p,i)}),!i.getChild(l).isEmpty()&&u!==null&&(i=i.updateChild(mn(l,".priority"),u)),i}}function Oh(l,t){return Gp(t,l)}function Ty(l,t,i,u,d){_e(u>l.lastWriteId,"Stacking an older write on top of newer ones"),d===void 0&&(d=!0),l.allWrites.push({path:t,snap:i,writeId:u,visible:d}),d&&(l.visibleWrites=Ol(l.visibleWrites,t,i)),l.lastWriteId=u}function Ny(l,t){for(let i=0;i<l.allWrites.length;i++){const u=l.allWrites[i];if(u.writeId===t)return u}return null}function Ry(l,t){const i=l.allWrites.findIndex(A=>A.writeId===t);_e(i>=0,"removeWrite called with nonexistent writeId.");const u=l.allWrites[i];l.allWrites.splice(i,1);let d=u.visible,p=!1,w=l.allWrites.length-1;for(;d&&w>=0;){const A=l.allWrites[w];A.visible&&(w>=i&&by(A,u.path)?d=!1:Vr(u.path,A.path)&&(p=!0)),w--}if(d){if(p)return Oy(l),!0;if(u.snap)l.visibleWrites=_g(l.visibleWrites,u.path);else{const A=u.children;ir(A,S=>{l.visibleWrites=_g(l.visibleWrites,mn(u.path,S))})}return!0}else return!1}function by(l,t){if(l.snap)return Vr(l.path,t);for(const i in l.children)if(l.children.hasOwnProperty(i)&&Vr(mn(l.path,i),t))return!0;return!1}function Oy(l){l.visibleWrites=Hp(l.allWrites,Dy,yt()),l.allWrites.length>0?l.lastWriteId=l.allWrites[l.allWrites.length-1].writeId:l.lastWriteId=-1}function Dy(l){return l.visible}function Hp(l,t,i){let u=Wr.empty();for(let d=0;d<l.length;++d){const p=l[d];if(t(p)){const w=p.path;let A;if(p.snap)Vr(i,w)?(A=tr(i,w),u=Ol(u,A,p.snap)):Vr(w,i)&&(A=tr(w,i),u=Ol(u,yt(),p.snap.getChild(A)));else if(p.children){if(Vr(i,w))A=tr(i,w),u=wg(u,A,p.children);else if(Vr(w,i))if(A=tr(w,i),ft(A))u=wg(u,yt(),p.children);else{const S=So(p.children,ot(A));if(S){const E=S.getChild(Lt(A));u=Ol(u,yt(),E)}}}else throw Ro("WriteRecord should have .snap or .children")}}return u}function Wp(l,t,i,u,d){if(!u&&!d){const p=Vs(l.visibleWrites,t);if(p!=null)return p;{const w=$i(l.visibleWrites,t);if(oh(w))return i;if(i==null&&!sh(w,yt()))return null;{const A=i||Xe.EMPTY_NODE;return No(w,A)}}}else{const p=$i(l.visibleWrites,t);if(!d&&oh(p))return i;if(!d&&i==null&&!sh(p,yt()))return null;{const w=function(E){return(E.visible||d)&&(!u||!~u.indexOf(E.writeId))&&(Vr(E.path,t)||Vr(t,E.path))},A=Hp(l.allWrites,w,t),S=i||Xe.EMPTY_NODE;return No(A,S)}}}function My(l,t,i){let u=Xe.EMPTY_NODE;const d=Vs(l.visibleWrites,t);if(d)return d.isLeafNode()||d.forEachChild(Jt,(p,w)=>{u=u.updateImmediateChild(p,w)}),u;if(i){const p=$i(l.visibleWrites,t);return i.forEachChild(Jt,(w,A)=>{const S=No($i(p,new Nt(w)),A);u=u.updateImmediateChild(w,S)}),yg(p).forEach(w=>{u=u.updateImmediateChild(w.name,w.node)}),u}else{const p=$i(l.visibleWrites,t);return yg(p).forEach(w=>{u=u.updateImmediateChild(w.name,w.node)}),u}}function ky(l,t,i,u,d){_e(u||d,"Either existingEventSnap or existingServerSnap must exist");const p=mn(t,i);if(sh(l.visibleWrites,p))return null;{const w=$i(l.visibleWrites,p);return oh(w)?d.getChild(i):No(w,d.getChild(i))}}function Py(l,t,i,u){const d=mn(t,i),p=Vs(l.visibleWrites,d);if(p!=null)return p;if(u.isCompleteForChild(i)){const w=$i(l.visibleWrites,d);return No(w,u.getNode().getImmediateChild(i))}else return null}function Ly(l,t){return Vs(l.visibleWrites,t)}function By(l,t,i,u,d,p,w){let A;const S=$i(l.visibleWrites,t),E=Vs(S,yt());if(E!=null)A=E;else if(i!=null)A=No(S,i);else return[];if(A=A.withIndex(w),!A.isEmpty()&&!A.isLeafNode()){const O=[],b=w.getCompare(),k=p?A.getReverseIteratorFrom(u,w):A.getIteratorFrom(u,w);let V=k.getNext();for(;V&&O.length<d;)b(V,u)!==0&&O.push(V),V=k.getNext();return O}else return[]}function Fy(){return{visibleWrites:Wr.empty(),allWrites:[],lastWriteId:-1}}function Cc(l,t,i,u){return Wp(l.writeTree,l.treePath,t,i,u)}function Dh(l,t){return My(l.writeTree,l.treePath,t)}function Cg(l,t,i,u){return ky(l.writeTree,l.treePath,t,i,u)}function Ec(l,t){return Ly(l.writeTree,mn(l.treePath,t))}function Uy(l,t,i,u,d,p){return By(l.writeTree,l.treePath,t,i,u,d,p)}function Mh(l,t,i){return Py(l.writeTree,l.treePath,t,i)}function zp(l,t){return Gp(mn(l.treePath,t),l.writeTree)}function Gp(l,t){return{treePath:l,writeTree:t}}class Vy{constructor(){this.changeMap=new Map}trackChildChange(t){const i=t.type,u=t.childName;_e(i==="child_added"||i==="child_changed"||i==="child_removed","Only child changes supported for tracking"),_e(u!==".priority","Only non-priority child changes can be tracked.");const d=this.changeMap.get(u);if(d){const p=d.type;if(i==="child_added"&&p==="child_removed")this.changeMap.set(u,Fl(u,t.snapshotNode,d.snapshotNode));else if(i==="child_removed"&&p==="child_added")this.changeMap.delete(u);else if(i==="child_removed"&&p==="child_changed")this.changeMap.set(u,Bl(u,d.oldSnap));else if(i==="child_changed"&&p==="child_added")this.changeMap.set(u,To(u,t.snapshotNode));else if(i==="child_changed"&&p==="child_changed")this.changeMap.set(u,Fl(u,t.snapshotNode,d.oldSnap));else throw Ro("Illegal combination of changes: "+t+" occurred after "+d)}else this.changeMap.set(u,t)}getChanges(){return Array.from(this.changeMap.values())}}class Hy{getCompleteChild(t){return null}getChildAfterChild(t,i,u){return null}}const jp=new Hy;class kh{constructor(t,i,u=null){this.writes_=t,this.viewCache_=i,this.optCompleteServerCache_=u}getCompleteChild(t){const i=this.viewCache_.eventCache;if(i.isCompleteForChild(t))return i.getNode().getImmediateChild(t);{const u=this.optCompleteServerCache_!=null?new Ps(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Mh(this.writes_,t,u)}}getChildAfterChild(t,i,u){const d=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ls(this.viewCache_),p=Uy(this.writes_,d,i,1,u,t);return p.length===0?null:p[0]}}function Wy(l){return{filter:l}}function zy(l,t){_e(t.eventCache.getNode().isIndexed(l.filter.getIndex()),"Event snap not indexed"),_e(t.serverCache.getNode().isIndexed(l.filter.getIndex()),"Server snap not indexed")}function Gy(l,t,i,u,d){const p=new Vy;let w,A;if(i.type===Hr.OVERWRITE){const E=i;E.source.fromUser?w=lh(l,t,E.path,E.snap,u,d,p):(_e(E.source.fromServer,"Unknown source."),A=E.source.tagged||t.serverCache.isFiltered()&&!ft(E.path),w=Ac(l,t,E.path,E.snap,u,d,A,p))}else if(i.type===Hr.MERGE){const E=i;E.source.fromUser?w=Xy(l,t,E.path,E.children,u,d,p):(_e(E.source.fromServer,"Unknown source."),A=E.source.tagged||t.serverCache.isFiltered(),w=ah(l,t,E.path,E.children,u,d,A,p))}else if(i.type===Hr.ACK_USER_WRITE){const E=i;E.revert?w=qy(l,t,E.path,u,d,p):w=Yy(l,t,E.path,E.affectedTree,u,d,p)}else if(i.type===Hr.LISTEN_COMPLETE)w=Ky(l,t,i.path,u,p);else throw Ro("Unknown operation type: "+i.type);const S=p.getChanges();return jy(t,w,S),{viewCache:w,changes:S}}function jy(l,t,i){const u=t.eventCache;if(u.isFullyInitialized()){const d=u.getNode().isLeafNode()||u.getNode().isEmpty(),p=ih(l);(i.length>0||!l.eventCache.isFullyInitialized()||d&&!u.getNode().equals(p)||!u.getNode().getPriority().equals(p.getPriority()))&&i.push(Lp(ih(t)))}}function Xp(l,t,i,u,d,p){const w=t.eventCache;if(Ec(u,i)!=null)return t;{let A,S;if(ft(i))if(_e(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const E=Ls(t),O=E instanceof Xe?E:Xe.EMPTY_NODE,b=Dh(u,O);A=l.filter.updateFullNode(t.eventCache.getNode(),b,p)}else{const E=Cc(u,Ls(t));A=l.filter.updateFullNode(t.eventCache.getNode(),E,p)}else{const E=ot(i);if(E===".priority"){_e(es(i)===1,"Can't have a priority with additional path components");const O=w.getNode();S=t.serverCache.getNode();const b=Cg(u,i,O,S);b!=null?A=l.filter.updatePriority(O,b):A=w.getNode()}else{const O=Lt(i);let b;if(w.isCompleteForChild(E)){S=t.serverCache.getNode();const k=Cg(u,i,w.getNode(),S);k!=null?b=w.getNode().getImmediateChild(E).updateChild(O,k):b=w.getNode().getImmediateChild(E)}else b=Mh(u,E,t.serverCache);b!=null?A=l.filter.updateChild(w.getNode(),E,b,O,d,p):A=w.getNode()}}return bl(t,A,w.isFullyInitialized()||ft(i),l.filter.filtersNodes())}}function Ac(l,t,i,u,d,p,w,A){const S=t.serverCache;let E;const O=w?l.filter:l.filter.getIndexedFilter();if(ft(i))E=O.updateFullNode(S.getNode(),u,null);else if(O.filtersNodes()&&!S.isFiltered()){const V=S.getNode().updateChild(i,u);E=O.updateFullNode(S.getNode(),V,null)}else{const V=ot(i);if(!S.isCompleteForPath(i)&&es(i)>1)return t;const J=Lt(i),xe=S.getNode().getImmediateChild(V).updateChild(J,u);V===".priority"?E=O.updatePriority(S.getNode(),xe):E=O.updateChild(S.getNode(),V,xe,J,jp,null)}const b=Up(t,E,S.isFullyInitialized()||ft(i),O.filtersNodes()),k=new kh(d,b,p);return Xp(l,b,i,d,k,A)}function lh(l,t,i,u,d,p,w){const A=t.eventCache;let S,E;const O=new kh(d,t,p);if(ft(i))E=l.filter.updateFullNode(t.eventCache.getNode(),u,w),S=bl(t,E,!0,l.filter.filtersNodes());else{const b=ot(i);if(b===".priority")E=l.filter.updatePriority(t.eventCache.getNode(),u),S=bl(t,E,A.isFullyInitialized(),A.isFiltered());else{const k=Lt(i),V=A.getNode().getImmediateChild(b);let J;if(ft(k))J=u;else{const $=O.getCompleteChild(b);$!=null?Tp(k)===".priority"&&$.getChild(Rp(k)).isEmpty()?J=$:J=$.updateChild(k,u):J=Xe.EMPTY_NODE}if(V.equals(J))S=t;else{const $=l.filter.updateChild(A.getNode(),b,J,k,O,w);S=bl(t,$,A.isFullyInitialized(),l.filter.filtersNodes())}}}return S}function Eg(l,t){return l.eventCache.isCompleteForChild(t)}function Xy(l,t,i,u,d,p,w){let A=t;return u.foreach((S,E)=>{const O=mn(i,S);Eg(t,ot(O))&&(A=lh(l,A,O,E,d,p,w))}),u.foreach((S,E)=>{const O=mn(i,S);Eg(t,ot(O))||(A=lh(l,A,O,E,d,p,w))}),A}function Ag(l,t,i){return i.foreach((u,d)=>{t=t.updateChild(u,d)}),t}function ah(l,t,i,u,d,p,w,A){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let S=t,E;ft(i)?E=u:E=new Ut(null).setTree(i,u);const O=t.serverCache.getNode();return E.children.inorderTraversal((b,k)=>{if(O.hasChild(b)){const V=t.serverCache.getNode().getImmediateChild(b),J=Ag(l,V,k);S=Ac(l,S,new Nt(b),J,d,p,w,A)}}),E.children.inorderTraversal((b,k)=>{const V=!t.serverCache.isCompleteForChild(b)&&k.value===null;if(!O.hasChild(b)&&!V){const J=t.serverCache.getNode().getImmediateChild(b),$=Ag(l,J,k);S=Ac(l,S,new Nt(b),$,d,p,w,A)}}),S}function Yy(l,t,i,u,d,p,w){if(Ec(d,i)!=null)return t;const A=t.serverCache.isFiltered(),S=t.serverCache;if(u.value!=null){if(ft(i)&&S.isFullyInitialized()||S.isCompleteForPath(i))return Ac(l,t,i,S.getNode().getChild(i),d,p,A,w);if(ft(i)){let E=new Ut(null);return S.getNode().forEachChild(Ao,(O,b)=>{E=E.set(new Nt(O),b)}),ah(l,t,i,E,d,p,A,w)}else return t}else{let E=new Ut(null);return u.foreach((O,b)=>{const k=mn(i,O);S.isCompleteForPath(k)&&(E=E.set(O,S.getNode().getChild(k)))}),ah(l,t,i,E,d,p,A,w)}}function Ky(l,t,i,u,d){const p=t.serverCache,w=Up(t,p.getNode(),p.isFullyInitialized()||ft(i),p.isFiltered());return Xp(l,w,i,u,jp,d)}function qy(l,t,i,u,d,p){let w;if(Ec(u,i)!=null)return t;{const A=new kh(u,t,d),S=t.eventCache.getNode();let E;if(ft(i)||ot(i)===".priority"){let O;if(t.serverCache.isFullyInitialized())O=Cc(u,Ls(t));else{const b=t.serverCache.getNode();_e(b instanceof Xe,"serverChildren would be complete if leaf node"),O=Dh(u,b)}O=O,E=l.filter.updateFullNode(S,O,p)}else{const O=ot(i);let b=Mh(u,O,t.serverCache);b==null&&t.serverCache.isCompleteForChild(O)&&(b=S.getImmediateChild(O)),b!=null?E=l.filter.updateChild(S,O,b,Lt(i),A,p):t.eventCache.getNode().hasChild(O)?E=l.filter.updateChild(S,O,Xe.EMPTY_NODE,Lt(i),A,p):E=S,E.isEmpty()&&t.serverCache.isFullyInitialized()&&(w=Cc(u,Ls(t)),w.isLeafNode()&&(E=l.filter.updateFullNode(E,w,p)))}return w=t.serverCache.isFullyInitialized()||Ec(u,yt())!=null,bl(t,E,w,l.filter.filtersNodes())}}class Zy{constructor(t,i){this.query_=t,this.eventRegistrations_=[];const u=this.query_._queryParams,d=new Th(u.getIndex()),p=py(u);this.processor_=Wy(p);const w=i.serverCache,A=i.eventCache,S=d.updateFullNode(Xe.EMPTY_NODE,w.getNode(),null),E=p.updateFullNode(Xe.EMPTY_NODE,A.getNode(),null),O=new Ps(S,w.isFullyInitialized(),d.filtersNodes()),b=new Ps(E,A.isFullyInitialized(),p.filtersNodes());this.viewCache_=Oc(b,O),this.eventGenerator_=new Ey(this.query_)}get query(){return this.query_}}function Qy(l){return l.viewCache_.serverCache.getNode()}function Jy(l,t){const i=Ls(l.viewCache_);return i&&(l.query._queryParams.loadsAllData()||!ft(t)&&!i.getImmediateChild(ot(t)).isEmpty())?i.getChild(t):null}function vg(l){return l.eventRegistrations_.length===0}function $y(l,t){l.eventRegistrations_.push(t)}function Sg(l,t,i){const u=[];if(i){_e(t==null,"A cancel should cancel all event registrations.");const d=l.query._path;l.eventRegistrations_.forEach(p=>{const w=p.createCancelEvent(i,d);w&&u.push(w)})}if(t){let d=[];for(let p=0;p<l.eventRegistrations_.length;++p){const w=l.eventRegistrations_[p];if(!w.matches(t))d.push(w);else if(t.hasAnyCallback()){d=d.concat(l.eventRegistrations_.slice(p+1));break}}l.eventRegistrations_=d}else l.eventRegistrations_=[];return u}function Ig(l,t,i,u){t.type===Hr.MERGE&&t.source.queryId!==null&&(_e(Ls(l.viewCache_),"We should always have a full cache before handling merges"),_e(ih(l.viewCache_),"Missing event cache, even though we have a server cache"));const d=l.viewCache_,p=Gy(l.processor_,d,t,i,u);return zy(l.processor_,p.viewCache),_e(p.viewCache.serverCache.isFullyInitialized()||!d.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),l.viewCache_=p.viewCache,Yp(l,p.changes,p.viewCache.eventCache.getNode(),null)}function eC(l,t){const i=l.viewCache_.eventCache,u=[];return i.getNode().isLeafNode()||i.getNode().forEachChild(Jt,(p,w)=>{u.push(To(p,w))}),i.isFullyInitialized()&&u.push(Lp(i.getNode())),Yp(l,u,i.getNode(),t)}function Yp(l,t,i,u){const d=u?[u]:l.eventRegistrations_;return Ay(l.eventGenerator_,t,i,d)}let vc;class tC{constructor(){this.views=new Map}}function nC(l){_e(!vc,"__referenceConstructor has already been defined"),vc=l}function rC(){return _e(vc,"Reference.ts has not been loaded"),vc}function iC(l){return l.views.size===0}function Ph(l,t,i,u){const d=t.source.queryId;if(d!==null){const p=l.views.get(d);return _e(p!=null,"SyncTree gave us an op for an invalid query."),Ig(p,t,i,u)}else{let p=[];for(const w of l.views.values())p=p.concat(Ig(w,t,i,u));return p}}function sC(l,t,i,u,d){const p=t._queryIdentifier,w=l.views.get(p);if(!w){let A=Cc(i,d?u:null),S=!1;A?S=!0:u instanceof Xe?(A=Dh(i,u),S=!1):(A=Xe.EMPTY_NODE,S=!1);const E=Oc(new Ps(A,S,!1),new Ps(u,d,!1));return new Zy(t,E)}return w}function oC(l,t,i,u,d,p){const w=sC(l,t,u,d,p);return l.views.has(t._queryIdentifier)||l.views.set(t._queryIdentifier,w),$y(w,i),eC(w,i)}function lC(l,t,i,u){const d=t._queryIdentifier,p=[];let w=[];const A=ts(l);if(d==="default")for(const[S,E]of l.views.entries())w=w.concat(Sg(E,i,u)),vg(E)&&(l.views.delete(S),E.query._queryParams.loadsAllData()||p.push(E.query));else{const S=l.views.get(d);S&&(w=w.concat(Sg(S,i,u)),vg(S)&&(l.views.delete(d),S.query._queryParams.loadsAllData()||p.push(S.query)))}return A&&!ts(l)&&p.push(new(rC())(t._repo,t._path)),{removed:p,events:w}}function Kp(l){const t=[];for(const i of l.views.values())i.query._queryParams.loadsAllData()||t.push(i);return t}function vo(l,t){let i=null;for(const u of l.views.values())i=i||Jy(u,t);return i}function qp(l,t){if(t._queryParams.loadsAllData())return Dc(l);{const u=t._queryIdentifier;return l.views.get(u)}}function Zp(l,t){return qp(l,t)!=null}function ts(l){return Dc(l)!=null}function Dc(l){for(const t of l.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let Sc;function aC(l){_e(!Sc,"__referenceConstructor has already been defined"),Sc=l}function cC(){return _e(Sc,"Reference.ts has not been loaded"),Sc}let uC=1;class Tg{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Ut(null),this.pendingWriteTree_=Fy(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Qp(l,t,i,u,d){return Ty(l.pendingWriteTree_,t,i,u,d),d?Yl(l,new ks(Fp(),t,i)):[]}function Ds(l,t,i=!1){const u=Ny(l.pendingWriteTree_,t);if(Ry(l.pendingWriteTree_,t)){let p=new Ut(null);return u.snap!=null?p=p.set(yt(),!0):ir(u.children,w=>{p=p.set(new Nt(w),!0)}),Yl(l,new yc(u.path,p,i))}else return[]}function Mc(l,t,i){return Yl(l,new ks(Rh(),t,i))}function fC(l,t,i){const u=Ut.fromObject(i);return Yl(l,new Hl(Rh(),t,u))}function hC(l,t){return Yl(l,new Vl(Rh(),t))}function dC(l,t,i){const u=Bh(l,i);if(u){const d=Fh(u),p=d.path,w=d.queryId,A=tr(p,t),S=new Vl(bh(w),A);return Uh(l,p,S)}else return[]}function ch(l,t,i,u,d=!1){const p=t._path,w=l.syncPointTree_.get(p);let A=[];if(w&&(t._queryIdentifier==="default"||Zp(w,t))){const S=lC(w,t,i,u);iC(w)&&(l.syncPointTree_=l.syncPointTree_.remove(p));const E=S.removed;if(A=S.events,!d){const O=E.findIndex(k=>k._queryParams.loadsAllData())!==-1,b=l.syncPointTree_.findOnPath(p,(k,V)=>ts(V));if(O&&!b){const k=l.syncPointTree_.subtree(p);if(!k.isEmpty()){const V=mC(k);for(let J=0;J<V.length;++J){const $=V[J],xe=$.query,Ee=e2(l,$);l.listenProvider_.startListening(Dl(xe),Ic(l,xe),Ee.hashFn,Ee.onComplete)}}}!b&&E.length>0&&!u&&(O?l.listenProvider_.stopListening(Dl(t),null):E.forEach(k=>{const V=l.queryToTagMap.get(kc(k));l.listenProvider_.stopListening(Dl(k),V)}))}xC(l,E)}return A}function gC(l,t,i,u){const d=Bh(l,u);if(d!=null){const p=Fh(d),w=p.path,A=p.queryId,S=tr(w,t),E=new ks(bh(A),S,i);return Uh(l,w,E)}else return[]}function pC(l,t,i,u){const d=Bh(l,u);if(d){const p=Fh(d),w=p.path,A=p.queryId,S=tr(w,t),E=Ut.fromObject(i),O=new Hl(bh(A),S,E);return Uh(l,w,O)}else return[]}function Ng(l,t,i,u=!1){const d=t._path;let p=null,w=!1;l.syncPointTree_.foreachOnPath(d,(k,V)=>{const J=tr(k,d);p=p||vo(V,J),w=w||ts(V)});let A=l.syncPointTree_.get(d);A?(w=w||ts(A),p=p||vo(A,yt())):(A=new tC,l.syncPointTree_=l.syncPointTree_.set(d,A));let S;p!=null?S=!0:(S=!1,p=Xe.EMPTY_NODE,l.syncPointTree_.subtree(d).foreachChild((V,J)=>{const $=vo(J,yt());$&&(p=p.updateImmediateChild(V,$))}));const E=Zp(A,t);if(!E&&!t._queryParams.loadsAllData()){const k=kc(t);_e(!l.queryToTagMap.has(k),"View does not exist, but we have a tag");const V=wC();l.queryToTagMap.set(k,V),l.tagToQueryMap.set(V,k)}const O=Oh(l.pendingWriteTree_,d);let b=oC(A,t,i,O,p,S);if(!E&&!w&&!u){const k=qp(A,t);b=b.concat(_C(l,t,k))}return b}function Lh(l,t,i){const d=l.pendingWriteTree_,p=l.syncPointTree_.findOnPath(t,(w,A)=>{const S=tr(w,t),E=vo(A,S);if(E)return E});return Wp(d,t,p,i,!0)}function Yl(l,t){return Jp(t,l.syncPointTree_,null,Oh(l.pendingWriteTree_,yt()))}function Jp(l,t,i,u){if(ft(l.path))return $p(l,t,i,u);{const d=t.get(yt());i==null&&d!=null&&(i=vo(d,yt()));let p=[];const w=ot(l.path),A=l.operationForChild(w),S=t.children.get(w);if(S&&A){const E=i?i.getImmediateChild(w):null,O=zp(u,w);p=p.concat(Jp(A,S,E,O))}return d&&(p=p.concat(Ph(d,l,u,i))),p}}function $p(l,t,i,u){const d=t.get(yt());i==null&&d!=null&&(i=vo(d,yt()));let p=[];return t.children.inorderTraversal((w,A)=>{const S=i?i.getImmediateChild(w):null,E=zp(u,w),O=l.operationForChild(w);O&&(p=p.concat($p(O,A,S,E)))}),d&&(p=p.concat(Ph(d,l,u,i))),p}function e2(l,t){const i=t.query,u=Ic(l,i);return{hashFn:()=>(Qy(t)||Xe.EMPTY_NODE).hash(),onComplete:d=>{if(d==="ok")return u?dC(l,i._path,u):hC(l,i._path);{const p=g_(d,i);return ch(l,i,null,p)}}}}function Ic(l,t){const i=kc(t);return l.queryToTagMap.get(i)}function kc(l){return l._path.toString()+"$"+l._queryIdentifier}function Bh(l,t){return l.tagToQueryMap.get(t)}function Fh(l){const t=l.indexOf("$");return _e(t!==-1&&t<l.length-1,"Bad queryKey."),{queryId:l.substr(t+1),path:new Nt(l.substr(0,t))}}function Uh(l,t,i){const u=l.syncPointTree_.get(t);_e(u,"Missing sync point for query tag that we're tracking");const d=Oh(l.pendingWriteTree_,t);return Ph(u,i,d,null)}function mC(l){return l.fold((t,i,u)=>{if(i&&ts(i))return[Dc(i)];{let d=[];return i&&(d=Kp(i)),ir(u,(p,w)=>{d=d.concat(w)}),d}})}function Dl(l){return l._queryParams.loadsAllData()&&!l._queryParams.isDefault()?new(cC())(l._repo,l._path):l}function xC(l,t){for(let i=0;i<t.length;++i){const u=t[i];if(!u._queryParams.loadsAllData()){const d=kc(u),p=l.queryToTagMap.get(d);l.queryToTagMap.delete(d),l.tagToQueryMap.delete(p)}}}function wC(){return uC++}function _C(l,t,i){const u=t._path,d=Ic(l,t),p=e2(l,i),w=l.listenProvider_.startListening(Dl(t),d,p.hashFn,p.onComplete),A=l.syncPointTree_.subtree(u);if(d)_e(!ts(A.value),"If we're adding a query, it shouldn't be shadowed");else{const S=A.fold((E,O,b)=>{if(!ft(E)&&O&&ts(O))return[Dc(O).query];{let k=[];return O&&(k=k.concat(Kp(O).map(V=>V.query))),ir(b,(V,J)=>{k=k.concat(J)}),k}});for(let E=0;E<S.length;++E){const O=S[E];l.listenProvider_.stopListening(Dl(O),Ic(l,O))}}return w}class Vh{constructor(t){this.node_=t}getImmediateChild(t){const i=this.node_.getImmediateChild(t);return new Vh(i)}node(){return this.node_}}class Hh{constructor(t,i){this.syncTree_=t,this.path_=i}getImmediateChild(t){const i=mn(this.path_,t);return new Hh(this.syncTree_,i)}node(){return Lh(this.syncTree_,this.path_)}}const yC=function(l){return l=l||{},l.timestamp=l.timestamp||new Date().getTime(),l},Rg=function(l,t,i){if(!l||typeof l!="object")return l;if(_e(".sv"in l,"Unexpected leaf node or priority contents"),typeof l[".sv"]=="string")return CC(l[".sv"],t,i);if(typeof l[".sv"]=="object")return EC(l[".sv"],t);_e(!1,"Unexpected server value: "+JSON.stringify(l,null,2))},CC=function(l,t,i){if(l==="timestamp")return i.timestamp;_e(!1,"Unexpected server value: "+l)},EC=function(l,t,i){l.hasOwnProperty("increment")||_e(!1,"Unexpected server value: "+JSON.stringify(l,null,2));const u=l.increment;typeof u!="number"&&_e(!1,"Unexpected increment value: "+u);const d=t.node();if(_e(d!==null&&typeof d<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!d.isLeafNode())return u;const w=d.getValue();return typeof w!="number"?u:w+u},AC=function(l,t,i,u){return Wh(t,new Hh(i,l),u)},t2=function(l,t,i){return Wh(l,new Vh(t),i)};function Wh(l,t,i){const u=l.getPriority().val(),d=Rg(u,t.getImmediateChild(".priority"),i);let p;if(l.isLeafNode()){const w=l,A=Rg(w.getValue(),t,i);return A!==w.getValue()||d!==w.getPriority().val()?new An(A,Dn(d)):l}else{const w=l;return p=w,d!==w.getPriority().val()&&(p=p.updatePriority(new An(d))),w.forEachChild(Jt,(A,S)=>{const E=Wh(S,t.getImmediateChild(A),i);E!==S&&(p=p.updateImmediateChild(A,E))}),p}}class zh{constructor(t="",i=null,u={children:{},childCount:0}){this.name=t,this.parent=i,this.node=u}}function Gh(l,t){let i=t instanceof Nt?t:new Nt(t),u=l,d=ot(i);for(;d!==null;){const p=So(u.node.children,d)||{children:{},childCount:0};u=new zh(d,u,p),i=Lt(i),d=ot(i)}return u}function Do(l){return l.node.value}function n2(l,t){l.node.value=t,uh(l)}function r2(l){return l.node.childCount>0}function vC(l){return Do(l)===void 0&&!r2(l)}function Pc(l,t){ir(l.node.children,(i,u)=>{t(new zh(i,l,u))})}function i2(l,t,i,u){i&&t(l),Pc(l,d=>{i2(d,t,!0)})}function SC(l,t,i){let u=l.parent;for(;u!==null;){if(t(u))return!0;u=u.parent}return!1}function Kl(l){return new Nt(l.parent===null?l.name:Kl(l.parent)+"/"+l.name)}function uh(l){l.parent!==null&&IC(l.parent,l.name,l)}function IC(l,t,i){const u=vC(i),d=Ci(l.node.children,t);u&&d?(delete l.node.children[t],l.node.childCount--,uh(l)):!u&&!d&&(l.node.children[t]=i.node,l.node.childCount++,uh(l))}const TC=/[\[\].#$\/\u0000-\u001F\u007F]/,NC=/[\[\].#$\u0000-\u001F\u007F]/,zf=10*1024*1024,s2=function(l){return typeof l=="string"&&l.length!==0&&!TC.test(l)},o2=function(l){return typeof l=="string"&&l.length!==0&&!NC.test(l)},RC=function(l){return l&&(l=l.replace(/^\/*\.info(\/|$)/,"/")),o2(l)},bC=function(l,t,i,u){jh(wh(l,"value"),t,i)},jh=function(l,t,i){const u=i instanceof Nt?new Y_(i,l):i;if(t===void 0)throw new Error(l+"contains undefined "+bs(u));if(typeof t=="function")throw new Error(l+"contains a function "+bs(u)+" with contents = "+t.toString());if(op(t))throw new Error(l+"contains "+t.toString()+" "+bs(u));if(typeof t=="string"&&t.length>zf/3&&Rc(t)>zf)throw new Error(l+"contains a string greater than "+zf+" utf8 bytes "+bs(u)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let d=!1,p=!1;if(ir(t,(w,A)=>{if(w===".value")d=!0;else if(w!==".priority"&&w!==".sv"&&(p=!0,!s2(w)))throw new Error(l+" contains an invalid key ("+w+") "+bs(u)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);K_(u,w),jh(l,A,u),q_(u)}),d&&p)throw new Error(l+' contains ".value" child '+bs(u)+" in addition to actual children.")}},l2=function(l,t,i,u){if(!o2(i))throw new Error(wh(l,t)+'was an invalid path = "'+i+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},OC=function(l,t,i,u){i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),l2(l,t,i)},DC=function(l,t){if(ot(t)===".info")throw new Error(l+" failed = Can't modify data under /.info/")},MC=function(l,t){const i=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!s2(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||i.length!==0&&!RC(i))throw new Error(wh(l,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};class kC{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Xh(l,t){let i=null;for(let u=0;u<t.length;u++){const d=t[u],p=d.getPath();i!==null&&!vh(p,i.path)&&(l.eventLists_.push(i),i=null),i===null&&(i={events:[],path:p}),i.events.push(d)}i&&l.eventLists_.push(i)}function a2(l,t,i){Xh(l,i),c2(l,u=>vh(u,t))}function yi(l,t,i){Xh(l,i),c2(l,u=>Vr(u,t)||Vr(t,u))}function c2(l,t){l.recursionDepth_++;let i=!0;for(let u=0;u<l.eventLists_.length;u++){const d=l.eventLists_[u];if(d){const p=d.path;t(p)?(PC(l.eventLists_[u]),l.eventLists_[u]=null):i=!1}}i&&(l.eventLists_=[]),l.recursionDepth_--}function PC(l){for(let t=0;t<l.events.length;t++){const i=l.events[t];if(i!==null){l.events[t]=null;const u=i.getEventRunner();Nl&&Hn("event: "+i.toString()),Oo(u)}}}const LC="repo_interrupt",BC=25;class FC{constructor(t,i,u,d){this.repoInfo_=t,this.forceRestClient_=i,this.authTokenProvider_=u,this.appCheckProvider_=d,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new kC,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=_c(),this.transactionQueueTree_=new zh,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function UC(l,t,i){if(l.stats_=Eh(l.repoInfo_),l.forceRestClient_||w_())l.server_=new wc(l.repoInfo_,(u,d,p,w)=>{bg(l,u,d,p,w)},l.authTokenProvider_,l.appCheckProvider_),setTimeout(()=>Og(l,!0),0);else{if(typeof i<"u"&&i!==null){if(typeof i!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Sn(i)}catch(u){throw new Error("Invalid authOverride provided: "+u)}}l.persistentConnection_=new xi(l.repoInfo_,t,(u,d,p,w)=>{bg(l,u,d,p,w)},u=>{Og(l,u)},u=>{HC(l,u)},l.authTokenProvider_,l.appCheckProvider_,i),l.server_=l.persistentConnection_}l.authTokenProvider_.addTokenChangeListener(u=>{l.server_.refreshAuthToken(u)}),l.appCheckProvider_.addTokenChangeListener(u=>{l.server_.refreshAppCheckToken(u.token)}),l.statsReporter_=A_(l.repoInfo_,()=>new Cy(l.stats_,l.server_)),l.infoData_=new my,l.infoSyncTree_=new Tg({startListening:(u,d,p,w)=>{let A=[];const S=l.infoData_.getNode(u._path);return S.isEmpty()||(A=Mc(l.infoSyncTree_,u._path,S),setTimeout(()=>{w("ok")},0)),A},stopListening:()=>{}}),Kh(l,"connected",!1),l.serverSyncTree_=new Tg({startListening:(u,d,p,w)=>(l.server_.listen(u,p,d,(A,S)=>{const E=w(A,S);yi(l.eventQueue_,u._path,E)}),[]),stopListening:(u,d)=>{l.server_.unlisten(u,d)}})}function VC(l){const i=l.infoData_.getNode(new Nt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+i}function Yh(l){return yC({timestamp:VC(l)})}function bg(l,t,i,u,d){l.dataUpdateCount++;const p=new Nt(t);i=l.interceptServerDataCallback_?l.interceptServerDataCallback_(t,i):i;let w=[];if(d)if(u){const S=fc(i,E=>Dn(E));w=pC(l.serverSyncTree_,p,S,d)}else{const S=Dn(i);w=gC(l.serverSyncTree_,p,S,d)}else if(u){const S=fc(i,E=>Dn(E));w=fC(l.serverSyncTree_,p,S)}else{const S=Dn(i);w=Mc(l.serverSyncTree_,p,S)}let A=p;w.length>0&&(A=Lc(l,p)),yi(l.eventQueue_,A,w)}function Og(l,t){Kh(l,"connected",t),t===!1&&zC(l)}function HC(l,t){ir(t,(i,u)=>{Kh(l,i,u)})}function Kh(l,t,i){const u=new Nt("/.info/"+t),d=Dn(i);l.infoData_.updateSnapshot(u,d);const p=Mc(l.infoSyncTree_,u,d);yi(l.eventQueue_,u,p)}function u2(l){return l.nextWriteId_++}function WC(l,t,i,u,d){qh(l,"set",{path:t.toString(),value:i,priority:u});const p=Yh(l),w=Dn(i,u),A=Lh(l.serverSyncTree_,t),S=t2(w,A,p),E=u2(l),O=Qp(l.serverSyncTree_,t,S,E,!0);Xh(l.eventQueue_,O),l.server_.put(t.toString(),w.val(!0),(k,V)=>{const J=k==="ok";J||rr("set at "+t+" failed: "+k);const $=Ds(l.serverSyncTree_,E,!J);yi(l.eventQueue_,t,$),XC(l,d,k,V)});const b=p2(l,t);Lc(l,b),yi(l.eventQueue_,b,[])}function zC(l){qh(l,"onDisconnectEvents");const t=Yh(l),i=_c();rh(l.onDisconnect_,yt(),(d,p)=>{const w=AC(d,p,l.serverSyncTree_,t);Bp(i,d,w)});let u=[];rh(i,yt(),(d,p)=>{u=u.concat(Mc(l.serverSyncTree_,d,p));const w=p2(l,d);Lc(l,w)}),l.onDisconnect_=_c(),yi(l.eventQueue_,yt(),u)}function GC(l,t,i){let u;ot(t._path)===".info"?u=Ng(l.infoSyncTree_,t,i):u=Ng(l.serverSyncTree_,t,i),a2(l.eventQueue_,t._path,u)}function Dg(l,t,i){let u;ot(t._path)===".info"?u=ch(l.infoSyncTree_,t,i):u=ch(l.serverSyncTree_,t,i),a2(l.eventQueue_,t._path,u)}function jC(l){l.persistentConnection_&&l.persistentConnection_.interrupt(LC)}function qh(l,...t){let i="";l.persistentConnection_&&(i=l.persistentConnection_.id+":"),Hn(i,...t)}function XC(l,t,i,u){t&&Oo(()=>{if(i==="ok")t(null);else{const d=(i||"error").toUpperCase();let p=d;u&&(p+=": "+u);const w=new Error(p);w.code=d,t(w)}})}function f2(l,t,i){return Lh(l.serverSyncTree_,t,i)||Xe.EMPTY_NODE}function Zh(l,t=l.transactionQueueTree_){if(t||Bc(l,t),Do(t)){const i=d2(l,t);_e(i.length>0,"Sending zero length transaction queue"),i.every(d=>d.status===0)&&YC(l,Kl(t),i)}else r2(t)&&Pc(t,i=>{Zh(l,i)})}function YC(l,t,i){const u=i.map(E=>E.currentWriteId),d=f2(l,t,u);let p=d;const w=d.hash();for(let E=0;E<i.length;E++){const O=i[E];_e(O.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),O.status=1,O.retryCount++;const b=tr(t,O.path);p=p.updateChild(b,O.currentOutputSnapshotRaw)}const A=p.val(!0),S=t;l.server_.put(S.toString(),A,E=>{qh(l,"transaction put response",{path:S.toString(),status:E});let O=[];if(E==="ok"){const b=[];for(let k=0;k<i.length;k++)i[k].status=2,O=O.concat(Ds(l.serverSyncTree_,i[k].currentWriteId)),i[k].onComplete&&b.push(()=>i[k].onComplete(null,!0,i[k].currentOutputSnapshotResolved)),i[k].unwatcher();Bc(l,Gh(l.transactionQueueTree_,t)),Zh(l,l.transactionQueueTree_),yi(l.eventQueue_,t,O);for(let k=0;k<b.length;k++)Oo(b[k])}else{if(E==="datastale")for(let b=0;b<i.length;b++)i[b].status===3?i[b].status=4:i[b].status=0;else{rr("transaction at "+S.toString()+" failed: "+E);for(let b=0;b<i.length;b++)i[b].status=4,i[b].abortReason=E}Lc(l,t)}},w)}function Lc(l,t){const i=h2(l,t),u=Kl(i),d=d2(l,i);return KC(l,d,u),u}function KC(l,t,i){if(t.length===0)return;const u=[];let d=[];const w=t.filter(A=>A.status===0).map(A=>A.currentWriteId);for(let A=0;A<t.length;A++){const S=t[A],E=tr(i,S.path);let O=!1,b;if(_e(E!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),S.status===4)O=!0,b=S.abortReason,d=d.concat(Ds(l.serverSyncTree_,S.currentWriteId,!0));else if(S.status===0)if(S.retryCount>=BC)O=!0,b="maxretry",d=d.concat(Ds(l.serverSyncTree_,S.currentWriteId,!0));else{const k=f2(l,S.path,w);S.currentInputSnapshot=k;const V=t[A].update(k.val());if(V!==void 0){jh("transaction failed: Data returned ",V,S.path);let J=Dn(V);typeof V=="object"&&V!=null&&Ci(V,".priority")||(J=J.updatePriority(k.getPriority()));const xe=S.currentWriteId,Ee=Yh(l),pe=t2(J,k,Ee);S.currentOutputSnapshotRaw=J,S.currentOutputSnapshotResolved=pe,S.currentWriteId=u2(l),w.splice(w.indexOf(xe),1),d=d.concat(Qp(l.serverSyncTree_,S.path,pe,S.currentWriteId,S.applyLocally)),d=d.concat(Ds(l.serverSyncTree_,xe,!0))}else O=!0,b="nodata",d=d.concat(Ds(l.serverSyncTree_,S.currentWriteId,!0))}yi(l.eventQueue_,i,d),d=[],O&&(t[A].status=2,(function(k){setTimeout(k,Math.floor(0))})(t[A].unwatcher),t[A].onComplete&&(b==="nodata"?u.push(()=>t[A].onComplete(null,!1,t[A].currentInputSnapshot)):u.push(()=>t[A].onComplete(new Error(b),!1,null))))}Bc(l,l.transactionQueueTree_);for(let A=0;A<u.length;A++)Oo(u[A]);Zh(l,l.transactionQueueTree_)}function h2(l,t){let i,u=l.transactionQueueTree_;for(i=ot(t);i!==null&&Do(u)===void 0;)u=Gh(u,i),t=Lt(t),i=ot(t);return u}function d2(l,t){const i=[];return g2(l,t,i),i.sort((u,d)=>u.order-d.order),i}function g2(l,t,i){const u=Do(t);if(u)for(let d=0;d<u.length;d++)i.push(u[d]);Pc(t,d=>{g2(l,d,i)})}function Bc(l,t){const i=Do(t);if(i){let u=0;for(let d=0;d<i.length;d++)i[d].status!==2&&(i[u]=i[d],u++);i.length=u,n2(t,i.length>0?i:void 0)}Pc(t,u=>{Bc(l,u)})}function p2(l,t){const i=Kl(h2(l,t)),u=Gh(l.transactionQueueTree_,t);return SC(u,d=>{Gf(l,d)}),Gf(l,u),i2(u,d=>{Gf(l,d)}),i}function Gf(l,t){const i=Do(t);if(i){const u=[];let d=[],p=-1;for(let w=0;w<i.length;w++)i[w].status===3||(i[w].status===1?(_e(p===w-1,"All SENT items should be at beginning of queue."),p=w,i[w].status=3,i[w].abortReason="set"):(_e(i[w].status===0,"Unexpected transaction status in abort"),i[w].unwatcher(),d=d.concat(Ds(l.serverSyncTree_,i[w].currentWriteId,!0)),i[w].onComplete&&u.push(i[w].onComplete.bind(null,new Error("set"),!1,null))));p===-1?n2(t,void 0):i.length=p+1,yi(l.eventQueue_,Kl(t),d);for(let w=0;w<u.length;w++)Oo(u[w])}}function qC(l){let t="";const i=l.split("/");for(let u=0;u<i.length;u++)if(i[u].length>0){let d=i[u];try{d=decodeURIComponent(d.replace(/\+/g," "))}catch{}t+="/"+d}return t}function ZC(l){const t={};l.charAt(0)==="?"&&(l=l.substring(1));for(const i of l.split("&")){if(i.length===0)continue;const u=i.split("=");u.length===2?t[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):rr(`Invalid query segment '${i}' in query '${l}'`)}return t}const Mg=function(l,t){const i=QC(l),u=i.namespace;i.domain==="firebase.com"&&_i(i.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!u||u==="undefined")&&i.domain!=="localhost"&&_i("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),i.secure||c_();const d=i.scheme==="ws"||i.scheme==="wss";return{repoInfo:new wp(i.host,i.secure,u,d,t,"",u!==i.subdomain),path:new Nt(i.pathString)}},QC=function(l){let t="",i="",u="",d="",p="",w=!0,A="https",S=443;if(typeof l=="string"){let E=l.indexOf("//");E>=0&&(A=l.substring(0,E-1),l=l.substring(E+2));let O=l.indexOf("/");O===-1&&(O=l.length);let b=l.indexOf("?");b===-1&&(b=l.length),t=l.substring(0,Math.min(O,b)),O<b&&(d=qC(l.substring(O,b)));const k=ZC(l.substring(Math.min(l.length,b)));E=t.indexOf(":"),E>=0?(w=A==="https"||A==="wss",S=parseInt(t.substring(E+1),10)):E=t.length;const V=t.slice(0,E);if(V.toLowerCase()==="localhost")i="localhost";else if(V.split(".").length<=2)i=V;else{const J=t.indexOf(".");u=t.substring(0,J).toLowerCase(),i=t.substring(J+1),p=u}"ns"in k&&(p=k.ns)}return{host:t,port:S,domain:i,subdomain:u,secure:w,scheme:A,pathString:d,namespace:p}};class JC{constructor(t,i,u,d){this.eventType=t,this.eventRegistration=i,this.snapshot=u,this.prevName=d}getPath(){const t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Sn(this.snapshot.exportVal())}}class $C{constructor(t,i,u){this.eventRegistration=t,this.error=i,this.path=u}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class eE{constructor(t,i){this.snapshotCallback=t,this.cancelCallback=i}onValue(t,i){this.snapshotCallback.call(null,t,i)}onCancel(t){return _e(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class Qh{constructor(t,i,u,d){this._repo=t,this._path=i,this._queryParams=u,this._orderByCalled=d}get key(){return ft(this._path)?null:Tp(this._path)}get ref(){return new ns(this._repo,this._path)}get _queryIdentifier(){const t=mg(this._queryParams),i=yh(t);return i==="{}"?"default":i}get _queryObject(){return mg(this._queryParams)}isEqual(t){if(t=zl(t),!(t instanceof Qh))return!1;const i=this._repo===t._repo,u=vh(this._path,t._path),d=this._queryIdentifier===t._queryIdentifier;return i&&u&&d}toJSON(){return this.toString()}toString(){return this._repo.toString()+X_(this._path)}}class ns extends Qh{constructor(t,i){super(t,i,new Nh,!1)}get parent(){const t=Rp(this._path);return t===null?null:new ns(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}class Tc{constructor(t,i,u){this._node=t,this.ref=i,this._index=u}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const i=new Nt(t),u=fh(this.ref,t);return new Tc(this._node.getChild(i),u,Jt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(u,d)=>t(new Tc(d,fh(this.ref,u),Jt)))}hasChild(t){const i=new Nt(t);return!this._node.getChild(i).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function m2(l,t){return l=zl(l),l._checkNotDeleted("ref"),t!==void 0?fh(l._root,t):l._root}function fh(l,t){return l=zl(l),ot(l._path)===null?OC("child","path",t):l2("child","path",t),new ns(l._repo,mn(l._path,t))}function tE(l,t){l=zl(l),DC("set",l._path),bC("set",t,l._path);const i=new Nc;return WC(l._repo,l._path,t,null,i.wrapCallback(()=>{})),i.promise}class Jh{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,i){const u=i._queryParams.getIndex();return new JC("value",this,new Tc(t.snapshotNode,new ns(i._repo,i._path),u))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,i){return this.callbackContext.hasCancelCallback?new $C(this,t,i):null}matches(t){return t instanceof Jh?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function nE(l,t,i,u,d){let p;if(typeof u=="object"&&(p=void 0,d=u),typeof u=="function"&&(p=u),d&&d.onlyOnce){const S=i,E=(O,b)=>{Dg(l._repo,l,A),S(O,b)};E.userCallback=i.userCallback,E.context=i.context,i=E}const w=new eE(i,p||void 0),A=new Jh(w);return GC(l._repo,l,A),()=>Dg(l._repo,l,A)}function rE(l,t,i,u){return nE(l,"value",t,i,u)}nC(ns);aC(ns);const iE="FIREBASE_DATABASE_EMULATOR_HOST",hh={};let sE=!1;function oE(l,t,i,u){const d=t.lastIndexOf(":"),p=t.substring(0,d),w=xh(p);l.repoInfo_=new wp(t,w,l.repoInfo_.namespace,l.repoInfo_.webSocketOnly,l.repoInfo_.nodeAdmin,l.repoInfo_.persistenceKey,l.repoInfo_.includeNamespaceInQueryParams,!0,i),u&&(l.authTokenProvider_=u)}function lE(l,t,i,u,d){let p=u||l.options.databaseURL;p===void 0&&(l.options.projectId||_i("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Hn("Using default host for project ",l.options.projectId),p=`${l.options.projectId}-default-rtdb.firebaseio.com`);let w=Mg(p,d),A=w.repoInfo,S;typeof process<"u"&&J0&&(S=J0[iE]),S?(p=`http://${S}?ns=${A.namespace}`,w=Mg(p,d),A=w.repoInfo):w.repoInfo.secure;const E=new y_(l.name,l.options,t);MC("Invalid Firebase Database URL",w),ft(w.path)||_i("Database URL must point to the root of a Firebase Database (not including a child path).");const O=cE(A,l,E,new __(l,i));return new uE(O,l)}function aE(l,t){const i=hh[t];(!i||i[l.key]!==l)&&_i(`Database ${t}(${l.repoInfo_}) has already been deleted.`),jC(l),delete i[l.key]}function cE(l,t,i,u){let d=hh[t.name];d||(d={},hh[t.name]=d);let p=d[l.toURLString()];return p&&_i("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),p=new FC(l,sE,i,u),d[l.toURLString()]=p,p}class uE{constructor(t,i){this._repoInternal=t,this.app=i,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(UC(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ns(this._repo,yt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(aE(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&_i("Cannot call "+t+" on a deleted database.")}}function fE(l=Gw(),t){const i=Uw(l,"database").getImmediate({identifier:t});if(!i._instanceStarted){const u=vx("database");u&&hE(i,...u)}return i}function hE(l,t,i,u={}){l=zl(l),l._checkNotDeleted("useEmulator");const d=`${t}:${i}`,p=l._repoInternal;if(l._instanceStarted){if(d===l._repoInternal.repoInfo_.host&&hc(u,p.repoInfo_.emulatorOptions))return;_i("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let w;if(p.repoInfo_.nodeAdmin)u.mockUserToken&&_i('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),w=new oc(oc.OWNER);else if(u.mockUserToken){const A=typeof u.mockUserToken=="string"?u.mockUserToken:Ix(u.mockUserToken,l.app.options.projectId);w=new oc(A)}xh(t)&&(Sx(t),Rx("Database",!0)),oE(p,d,u,w)}function dE(l){r_(zw),gc(new kl("database",(t,{instanceIdentifier:i})=>{const u=t.getProvider("app").getImmediate(),d=t.getProvider("auth-internal"),p=t.getProvider("app-check-internal");return lE(u,d,p,i)},"PUBLIC").setMultipleInstances(!0)),Co($0,eg,l),Co($0,eg,"esm2020")}xi.prototype.simpleListen=function(l,t){this.sendRequest("q",{p:l},t)};xi.prototype.echo=function(l,t){this.sendRequest("echo",{d:l},t)};dE();const gE="AIzaSyD5rmjMfiXTeTk7cCLlX9wBk0O_P4K2_EM",pE="https://badminton-counter-5a5c1-default-rtdb.europe-west1.firebasedatabase.app/";let Bs=null;try{const l=ep({apiKey:gE,databaseURL:pE});Bs=fE(l)}catch{Bs=null}function mE(){return Bs!==null}const x2="matches";function xE(l,t){if(!Bs)return;const i=m2(Bs,`${x2}/${l}`);tE(i,t).catch(()=>{})}function wE(l){if(!l||typeof l!="object")return null;const t=l;return{name1:typeof t.name1=="string"?t.name1:"",name2:typeof t.name2=="string"?t.name2:"",score1:Number(t.score1)||0,score2:Number(t.score2)||0,set1:Number(t.set1)||0,set2:Number(t.set2)||0,serverAtStart:t.serverAtStart===2?2:1,currentServer:t.currentServer===2?2:1}}function _E(l,t){if(!Bs)return()=>{};const i=m2(Bs,`${x2}/${l}`);return rE(i,d=>{const p=wE(d.val());p&&t(p)},()=>{})}const jf="badminton-current-match-id";function $h(l){return`badminton-match-${l}`}function yE(l){try{const t=localStorage.getItem($h(l));if(t){const i=JSON.parse(t),u=i.serverAtStart===2?2:1,d=i.currentServer===2?2:1;return{name1:i.name1??"",name2:i.name2??"",score1:Number(i.score1)||0,score2:Number(i.score2)||0,set1:Number(i.set1)||0,set2:Number(i.set2)||0,serverAtStart:u,currentServer:typeof i.currentServer=="number"?d:u}}}catch{}return null}function CE(l,t){localStorage.setItem($h(l),JSON.stringify(t))}const EE={name1:"",name2:"",score1:0,score2:0,set1:0,set2:0,serverAtStart:1,currentServer:1};function AE(l,t,i,u,d,p,w){const S=new Date().toLocaleDateString("sv-SE",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),E=l.trim()||"Spelare 1",O=t.trim()||"Spelare 2",b=d>p?E:p>d?O:null,k=i>u?E:u>i?O:null,V=w===1?E:O;let J=` BADMINTON MATCH
`;return J+=`${"".repeat(40)}

`,J+=`Datum: ${S}

`,J+=`Set:   ${E}  ${d}  ${p}  ${O}
`,J+=`Pong: ${E}  ${i}  ${u}  ${O}
`,J+=`Servar frn start: ${V}

`,b&&(J+=`Matchvinnare (set): ${b}
`),k&&k!==b&&(J+=`Senaste set (pong): ${k}
`),!b&&!k&&(J+=`Oavgjort.
`),J+=`
${"".repeat(40)}
`,J}function vE(l){const t=new Blob([l],{type:"text/plain;charset=utf-8"}),u=`badminton_${new Date().toISOString().slice(0,10)}_${Date.now().toString(36)}.txt`,d=document.createElement("a");d.href=URL.createObjectURL(t),d.download=u,d.click(),URL.revokeObjectURL(d.href)}function kg({label:l,name:t,onNameChange:i,score:u,onScoreChange:d,set:p,onSetChange:w}){return Ae.jsxs("div",{className:"side",children:[Ae.jsx("span",{className:"side-label",children:l}),Ae.jsx("input",{type:"text",className:"name-input",value:t,onChange:A=>i(A.target.value),placeholder:l,maxLength:20}),Ae.jsx("span",{className:"score-display",children:u}),Ae.jsxs("div",{className:"score-controls",children:[Ae.jsx("button",{type:"button",className:"btn-score",onClick:()=>d(-1),disabled:u<=0,"aria-label":"Minska pong",children:""}),Ae.jsx("button",{type:"button",className:"btn-score",onClick:()=>d(1),"aria-label":"ka pong",children:"+"})]}),Ae.jsx("span",{className:"row-label",children:"Set"}),Ae.jsx("span",{className:"score-display set-display",children:p}),Ae.jsxs("div",{className:"score-controls",children:[Ae.jsx("button",{type:"button",className:"btn-score",onClick:()=>w(-1),disabled:p<=0,"aria-label":"Minska set",children:""}),Ae.jsx("button",{type:"button",className:"btn-score",onClick:()=>w(1),"aria-label":"ka set",children:"+"})]})]})}function SE({open:l,summary:t,onClose:i,onCopy:u,onDownload:d,copyLabel:p,downloadLabel:w}){return l?Ae.jsx("div",{className:"modal-overlay",onClick:A=>A.target===A.currentTarget&&i(),role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:Ae.jsxs("div",{className:"modal",children:[Ae.jsx("h2",{id:"modal-title",children:"Matchresultat"}),Ae.jsx("pre",{children:t}),Ae.jsxs("div",{className:"modal-buttons",children:[Ae.jsx("button",{type:"button",className:"btn-copy",onClick:u,children:p}),Ae.jsx("button",{type:"button",className:"btn-save",onClick:d,children:w}),Ae.jsx("button",{type:"button",className:"btn-close",onClick:i,children:"Stng"})]})]})}):null}function IE({matchId:l}){const[t,i]=kt.useState(()=>yE(l)??EE),[u,d]=kt.useState(!1),p=$h(l);kt.useEffect(()=>{const pe=te=>{if(te.key===p&&te.newValue)try{i(JSON.parse(te.newValue))}catch{}};return window.addEventListener("storage",pe),()=>window.removeEventListener("storage",pe)},[p]),kt.useEffect(()=>_E(l,te=>{i(te)}),[l]);const w=t.name1.trim()||"Spelare 1",A=t.name2.trim()||"Spelare 2",S=u?A:w,E=u?w:A,O=u?t.score2:t.score1,b=u?t.score1:t.score2,k=u?t.set2:t.set1,V=u?t.set1:t.set2,$=(t.currentServer===2?2:1)===(u?2:1),xe=t.name1===""&&t.name2===""&&t.score1===0&&t.score2===0&&t.set1===0&&t.set2===0,Ee=$?S:E;return Ae.jsxs("div",{className:"scoreboard-tavla",children:[xe&&Ae.jsx("p",{className:"scoreboard-waiting",children:mE()?"Vntar p matchdata frn pongrknaren":"Vntar p matchdata. ppna lnken p samma enhet som pongrknaren, eller aktivera Firebase fr synk mellan enheter."}),Ae.jsxs("div",{className:"scoreboard-board",children:[Ae.jsxs("div",{className:"tavla-side tavla-left",children:[Ae.jsx("span",{className:"tavla-name",children:S}),Ae.jsx("span",{className:"tavla-score",children:O}),Ae.jsxs("span",{className:"tavla-sets",children:["Set: ",k]})]}),Ae.jsx("span",{className:"tavla-divider","aria-hidden":!0,children:""}),Ae.jsxs("div",{className:"tavla-side tavla-right",children:[Ae.jsx("span",{className:"tavla-name",children:E}),Ae.jsx("span",{className:"tavla-score",children:b}),Ae.jsxs("span",{className:"tavla-sets",children:["Set: ",V]})]})]}),Ae.jsxs("div",{className:"tavla-serve",children:[Ae.jsx("span",{className:"tavla-serve-label",children:"Servar"}),Ae.jsxs("span",{className:"tavla-serve-name",children:[" ",Ee]})]}),Ae.jsx("button",{type:"button",className:"tavla-mirror",onClick:()=>d(pe=>!pe),"aria-pressed":u,title:u?"Sl av spegling":"Spegla tavlan",children:""})]})}function TE(){return crypto.randomUUID?.()??`match-${Date.now()}-${Math.random().toString(36).slice(2,11)}`}function NE(){const[l,t]=kt.useState(()=>{try{return localStorage.getItem(jf)}catch{return null}}),[i,u]=kt.useState(""),[d,p]=kt.useState(""),[w,A]=kt.useState(0),[S,E]=kt.useState(0),[O,b]=kt.useState(0),[k,V]=kt.useState(0),[J,$]=kt.useState(1),[xe,Ee]=kt.useState(1),[pe,te]=kt.useState(!1),[oe,Qe]=kt.useState(!1),[ie,Y]=kt.useState(null),[de,j]=kt.useState(null),[Me,ve]=kt.useState("Kopiera"),[re,fe]=kt.useState("Ladda ner fil"),Se={name1:i,name2:d,score1:w,score2:S,set1:O,set2:k,serverAtStart:J,currentServer:xe};kt.useEffect(()=>{l&&(localStorage.setItem(jf,l),CE(l,Se),xE(l,Se))},[l,i,d,w,S,O,k,J,xe]);const K=typeof window<"u"&&(ie??l)?`${window.location.origin}${window.location.pathname||"/"}?display=1&match=${encodeURIComponent(ie??l??"")}`:"";kt.useEffect(()=>{if(!oe||!(ie??l))return;const ce=`${window.location.origin}${window.location.pathname||"/"}?display=1&match=${encodeURIComponent(ie??l??"")}`;Hm.toDataURL(ce,{width:260,margin:2}).then(j).catch(()=>j(null))},[oe,ie,l]);const Je=AE(i,d,w,S,O,k,J),Re=()=>{const ce=i;u(d),p(ce),A(0),E(0),b(k),V(O),$(ee=>ee===1?2:1),Ee(ee=>ee===1?2:1)},ye=()=>{navigator.clipboard.writeText(Je).then(()=>{ve("Kopierat!"),setTimeout(()=>ve("Kopiera"),1500)})},ke=()=>{vE(Je),fe("Nedladdad!"),setTimeout(()=>fe("Ladda ner fil"),1500)};return Ae.jsxs(Ae.Fragment,{children:[Ae.jsx("h1",{children:" Badminton Pongrknare"}),Ae.jsxs("div",{className:"court",children:[Ae.jsx(kg,{label:"Spelare 1",name:i,onNameChange:u,score:w,onScoreChange:ce=>{A(H=>Math.max(0,H+ce)),ce>0?Ee(1):ce<0&&Ee(2)},set:O,onSetChange:ce=>b(H=>Math.max(0,H+ce))}),Ae.jsxs("div",{className:"court-center",children:[Ae.jsx("span",{className:"vs",children:"VS"}),Ae.jsx("button",{type:"button",className:"btn-swap",onClick:Re,"aria-label":"Byt sida",children:" Byt sida"}),Ae.jsxs("div",{className:"server-choice",children:[Ae.jsx("span",{className:"server-choice-label",children:"Servar frn start"}),Ae.jsxs("div",{className:"server-choice-buttons",children:[Ae.jsx("button",{type:"button",className:`btn-server ${xe===1?"active":""}`,onClick:()=>{Ee(1),w+S===0&&$(1)},"aria-pressed":xe===1,children:"1"}),Ae.jsx("button",{type:"button",className:`btn-server ${xe===2?"active":""}`,onClick:()=>{Ee(2),w+S===0&&$(2)},"aria-pressed":xe===2,children:"2"})]}),Ae.jsx("span",{className:"server-choice-name","aria-live":"polite",children:xe===1?i.trim()||"Spelare 1":d.trim()||"Spelare 2"}),w+S>0&&Ae.jsxs("span",{className:"server-choice-locked",children:["Brjade serva: ",J===1?i.trim()||"Spelare 1":d.trim()||"Spelare 2"]})]})]}),Ae.jsx(kg,{label:"Spelare 2",name:d,onNameChange:p,score:S,onScoreChange:ce=>{E(H=>Math.max(0,H+ce)),ce>0?Ee(2):ce<0&&Ee(1)},set:k,onSetChange:ce=>V(H=>Math.max(0,H+ce))})]}),Ae.jsxs("div",{className:"actions",children:[Ae.jsx("button",{type:"button",className:"btn-swap",onClick:()=>{const ce=l||TE();l||t(ce),Y(ce),j(null),Qe(!0)},children:" Visa QR fr pongvisare"}),Ae.jsx("button",{type:"button",className:"btn-save",onClick:()=>te(!0),children:"Spara match"}),Ae.jsx("span",{className:"save-info",children:"Ladda ner en fil med matchresultat eller kopiera till urklipp"}),Ae.jsx("button",{type:"button",className:"btn-swap save-info-link",onClick:()=>{t(null),Y(null),j(null),u(""),p(""),A(0),E(0),b(0),V(0),$(1),Ee(1),Qe(!1);try{localStorage.removeItem(jf)}catch{}},children:"Starta ny match"})]}),oe&&Ae.jsx("div",{className:"modal-overlay",onClick:ce=>{ce.target===ce.currentTarget&&(Qe(!1),Y(null),j(null))},role:"dialog","aria-modal":"true","aria-labelledby":"qr-modal-title",children:Ae.jsxs("div",{className:"modal qr-modal",children:[Ae.jsx("h2",{id:"qr-modal-title",children:"Pongvisare  koppla enhet till denna match"}),Ae.jsx("p",{className:"qr-modal-text",children:"Skanna QR-koden med den enhet som ska visa pongen. Den enheten r d kopplad till denna match."}),Ae.jsx("div",{className:"qr-modal-image-wrap",children:de?Ae.jsx("img",{src:de,alt:"QR-kod fr pongvisare",className:"qr-modal-image"}):Ae.jsx("span",{className:"qr-modal-loading",children:"Laddar QR-kod"})}),Ae.jsxs("div",{className:"qr-modal-url-wrap",children:[Ae.jsx("input",{type:"text",readOnly:!0,className:"qr-modal-url",value:K||"","aria-label":"Lnk till pongvisare"}),Ae.jsx("button",{type:"button",className:"btn-copy",onClick:()=>{K&&navigator.clipboard.writeText(K)},children:"Kopiera lnk"})]}),Ae.jsx("button",{type:"button",className:"btn-close",onClick:()=>{Qe(!1),Y(null),j(null)},children:"Stng"})]})}),Ae.jsx(SE,{open:pe,summary:Je,onClose:()=>te(!1),onCopy:ye,onDownload:ke,copyLabel:Me,downloadLabel:re})]})}const Xf="badminton-qr-reader";function RE(l){try{return new URL(l).searchParams.get("match")}catch{return null}}function bE(){const[l,t]=kt.useState(!1),[i,u]=kt.useState(null),d=kt.useRef(null);kt.useEffect(()=>{if(!l||(u(null),!document.getElementById(Xf)))return;const A=new dx(Xf);return d.current=A,A.start({facingMode:"environment"},{fps:10,qrbox:{width:220,height:220}},S=>{const E=RE(S);E&&A.stop().then(()=>{d.current=null,t(!1);const O=`${window.location.origin}${window.location.pathname||"/"}`;window.location.href=`${O}?display=1&match=${encodeURIComponent(E)}`}).catch(()=>{t(!1),window.location.href=`${window.location.pathname||"/"}?display=1&match=${encodeURIComponent(E)}`})},()=>{}).catch(S=>{u(S?.message??"Kunde inte starta kameran"),t(!1),d.current=null}),()=>{d.current=null,A.stop().catch(()=>{})}},[l]);const p=()=>{d.current&&(d.current.stop().catch(()=>{}),d.current=null),t(!1),u(null)};return Ae.jsxs("div",{className:"scoreboard-display scoreboard-connect",children:[Ae.jsx("h1",{className:"scoreboard-title",children:" Pongvisare"}),Ae.jsx("p",{className:"scoreboard-error-text",children:"Koppla denna enhet till en match genom att skanna QR-koden som visas i pongrknaren."}),l?Ae.jsxs("div",{className:"scan-area",children:[Ae.jsx("div",{id:Xf,className:"qr-reader-container"}),i&&Ae.jsx("p",{className:"scoreboard-error-text scan-error",children:i}),Ae.jsx("button",{type:"button",className:"btn-close scan-cancel-btn",onClick:p,children:"Avbryt"})]}):Ae.jsx("button",{type:"button",className:"btn-save scan-connect-btn",onClick:()=>t(!0),children:" Skanna QR fr att koppla till match"})]})}function OE(){if(typeof window>"u")return null;const l=new URLSearchParams(window.location.search),t=l.get("display")==="1",i=l.get("match")??"";return t?i?Ae.jsx(IE,{matchId:i}):Ae.jsx(bE,{}):Ae.jsx(NE,{})}wm.createRoot(document.getElementById("root")).render(Ae.jsx(kt.StrictMode,{children:Ae.jsx(OE,{})}));
